(()=>{var a={};a.id=974,a.ids=[974],a.modules={57:(a,b,c)=>{var d=c(9428),e=d.Buffer;function f(a,b){for(var c in a)b[c]=a[c]}function g(a,b,c){return e(a,b,c)}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?a.exports=d:(f(d,b),b.Buffer=g),g.prototype=Object.create(e.prototype),f(e,g),g.from=function(a,b,c){if("number"==typeof a)throw TypeError("Argument must not be a number");return e(a,b,c)},g.alloc=function(a,b,c){if("number"!=typeof a)throw TypeError("Argument must be a number");var d=e(a);return void 0!==b?"string"==typeof c?d.fill(b,c):d.fill(b):d.fill(0),d},g.allocUnsafe=function(a){if("number"!=typeof a)throw TypeError("Argument must be a number");return e(a)},g.allocUnsafeSlow=function(a){if("number"!=typeof a)throw TypeError("Argument must be a number");return d.SlowBuffer(a)}},118:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c={atLeastOneTask:function(){return g},scheduleImmediate:function(){return f},scheduleOnNextTick:function(){return e},waitAtLeastOneReactRenderTask:function(){return h}};for(var d in c)Object.defineProperty(b,d,{enumerable:!0,get:c[d]});let e=a=>{Promise.resolve().then(()=>{process.nextTick(a)})},f=a=>{setImmediate(a)};function g(){return new Promise(a=>f(a))}function h(){return new Promise(a=>setImmediate(a))}},202:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d,e,f={Postpone:function(){return D},PreludeState:function(){return Z},abortAndThrowOnSynchronousRequestDataAccess:function(){return C},abortOnSynchronousPlatformIOAccess:function(){return A},accessedDynamicData:function(){return L},annotateDynamicAccess:function(){return Q},consumeDynamicAccess:function(){return M},createDynamicTrackingState:function(){return t},createDynamicValidationState:function(){return u},createHangingInputAbortSignal:function(){return P},createRenderInBrowserAbortSignal:function(){return O},delayUntilRuntimeStage:function(){return aa},formatDynamicAPIAccesses:function(){return N},getFirstDynamicReason:function(){return v},isDynamicPostpone:function(){return G},isPrerenderInterruptedError:function(){return K},logDisallowedDynamicError:function(){return $},markCurrentScopeAsDynamic:function(){return w},postponeWithTracking:function(){return E},throwIfDisallowedDynamic:function(){return _},throwToInterruptStaticGeneration:function(){return x},trackAllowedDynamicAccess:function(){return Y},trackDynamicDataInDynamicRender:function(){return y},trackSynchronousPlatformIOAccessInDev:function(){return B},useDynamicRouteParams:function(){return R},useDynamicSearchParams:function(){return S}};for(var g in f)Object.defineProperty(b,g,{enumerable:!0,get:f[g]});let h=(d=c(4863))&&d.__esModule?d:{default:d},i=c(9758),j=c(8114),k=c(3033),l=c(9294),m=c(6443),n=c(3494),o=c(118),p=c(865),q=c(9516),r=c(3563),s="function"==typeof h.default.unstable_postpone;function t(a){return{isDebugDynamicAccesses:a,dynamicAccesses:[],syncDynamicErrorWithStack:null}}function u(){return{hasSuspenseAboveBody:!1,hasDynamicMetadata:!1,hasDynamicViewport:!1,hasAllowedDynamic:!1,dynamicErrors:[]}}function v(a){var b;return null==(b=a.dynamicAccesses[0])?void 0:b.expression}function w(a,b,c){if(b)switch(b.type){case"cache":case"unstable-cache":case"private-cache":return}if(!a.forceDynamic&&!a.forceStatic){if(a.dynamicShouldError)throw Object.defineProperty(new j.StaticGenBailoutError(`Route ${a.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${c}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(b)switch(b.type){case"prerender-ppr":return E(a.route,c,b.dynamicTracking);case"prerender-legacy":b.revalidate=0;let d=Object.defineProperty(new i.DynamicServerError(`Route ${a.route} couldn't be rendered statically because it used ${c}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E550",enumerable:!1,configurable:!0});throw a.dynamicUsageDescription=c,a.dynamicUsageStack=d.stack,d}}}function x(a,b,c){let d=Object.defineProperty(new i.DynamicServerError(`Route ${b.route} couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw c.revalidate=0,b.dynamicUsageDescription=a,b.dynamicUsageStack=d.stack,d}function y(a){switch(a.type){case"cache":case"unstable-cache":case"private-cache":return}}function z(a,b,c){let d=J(`Route ${a} needs to bail out of prerendering at this point because it used ${b}.`);c.controller.abort(d);let e=c.dynamicTracking;e&&e.dynamicAccesses.push({stack:e.isDebugDynamicAccesses?Error().stack:void 0,expression:b})}function A(a,b,c,d){let e=d.dynamicTracking;z(a,b,d),e&&null===e.syncDynamicErrorWithStack&&(e.syncDynamicErrorWithStack=c)}function B(a){a.stagedRendering&&a.stagedRendering.advanceStage(r.RenderStage.Dynamic)}function C(a,b,c,d){if(!1===d.controller.signal.aborted){z(a,b,d);let e=d.dynamicTracking;e&&null===e.syncDynamicErrorWithStack&&(e.syncDynamicErrorWithStack=c)}throw J(`Route ${a} needs to bail out of prerendering at this point because it used ${b}.`)}function D({reason:a,route:b}){let c=k.workUnitAsyncStorage.getStore();E(b,a,c&&"prerender-ppr"===c.type?c.dynamicTracking:null)}function E(a,b,c){(function(){if(!s)throw Object.defineProperty(Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E224",enumerable:!1,configurable:!0})})(),c&&c.dynamicAccesses.push({stack:c.isDebugDynamicAccesses?Error().stack:void 0,expression:b}),h.default.unstable_postpone(F(a,b))}function F(a,b){return`Route ${a} needs to bail out of prerendering at this point because it used ${b}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}function G(a){return"object"==typeof a&&null!==a&&"string"==typeof a.message&&H(a.message)}function H(a){return a.includes("needs to bail out of prerendering at this point because it used")&&a.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}if(!1===H(F("%%%","^^^")))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});let I="NEXT_PRERENDER_INTERRUPTED";function J(a){let b=Object.defineProperty(Error(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return b.digest=I,b}function K(a){return"object"==typeof a&&null!==a&&a.digest===I&&"name"in a&&"message"in a&&a instanceof Error}function L(a){return a.length>0}function M(a,b){return a.dynamicAccesses.push(...b.dynamicAccesses),a.dynamicAccesses}function N(a){return a.filter(a=>"string"==typeof a.stack&&a.stack.length>0).map(({expression:a,stack:b})=>(b=b.split("\n").slice(4).filter(a=>!(a.includes("node_modules/next/")||a.includes(" (<anonymous>)")||a.includes(" (node:"))).join("\n"),`Dynamic API Usage Debug - ${a}:
${b}`))}function O(){let a=new AbortController;return a.abort(Object.defineProperty(new p.BailoutToCSRError("Render in Browser"),"__NEXT_ERROR_CODE",{value:"E721",enumerable:!1,configurable:!0})),a.signal}function P(a){switch(a.type){case"prerender":case"prerender-runtime":let b=new AbortController;if(a.cacheSignal)a.cacheSignal.inputReady().then(()=>{b.abort()});else{let c=(0,k.getRuntimeStagePromise)(a);c?c.then(()=>(0,o.scheduleOnNextTick)(()=>b.abort())):(0,o.scheduleOnNextTick)(()=>b.abort())}return b.signal;case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"request":case"cache":case"private-cache":case"unstable-cache":return}}function Q(a,b){let c=b.dynamicTracking;c&&c.dynamicAccesses.push({stack:c.isDebugDynamicAccesses?Error().stack:void 0,expression:a})}function R(a){let b=l.workAsyncStorage.getStore(),c=k.workUnitAsyncStorage.getStore();if(b&&c)switch(c.type){case"prerender-client":case"prerender":{let d=c.fallbackRouteParams;d&&d.size>0&&h.default.use((0,m.makeHangingPromise)(c.renderSignal,b.route,a));break}case"prerender-ppr":{let d=c.fallbackRouteParams;if(d&&d.size>0)return E(b.route,a,c.dynamicTracking);break}case"prerender-runtime":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called during a runtime prerender. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E771",enumerable:!1,configurable:!0});case"cache":case"private-cache":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called inside a cache scope. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0})}}function S(a){let b=l.workAsyncStorage.getStore(),c=k.workUnitAsyncStorage.getStore();if(b)switch(!c&&(0,k.throwForMissingRequestStore)(a),c.type){case"prerender-client":h.default.use((0,m.makeHangingPromise)(c.renderSignal,b.route,a));break;case"prerender-legacy":case"prerender-ppr":if(b.forceStatic)return;throw Object.defineProperty(new p.BailoutToCSRError(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called from a Server Component. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E795",enumerable:!1,configurable:!0});case"cache":case"unstable-cache":case"private-cache":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called inside a cache scope. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0});case"request":return}}let T=/\n\s+at Suspense \(<anonymous>\)/,U=RegExp(`\\n\\s+at Suspense \\(<anonymous>\\)(?:(?!\\n\\s+at (?:body|div|main|section|article|aside|header|footer|nav|form|p|span|h1|h2|h3|h4|h5|h6) \\(<anonymous>\\))[\\s\\S])*?\\n\\s+at ${n.ROOT_LAYOUT_BOUNDARY_NAME} \\([^\\n]*\\)`),V=RegExp(`\\n\\s+at ${n.METADATA_BOUNDARY_NAME}[\\n\\s]`),W=RegExp(`\\n\\s+at ${n.VIEWPORT_BOUNDARY_NAME}[\\n\\s]`),X=RegExp(`\\n\\s+at ${n.OUTLET_BOUNDARY_NAME}[\\n\\s]`);function Y(a,b,c,d){if(!X.test(b)){if(V.test(b)){c.hasDynamicMetadata=!0;return}if(W.test(b)){c.hasDynamicViewport=!0;return}if(U.test(b)){c.hasAllowedDynamic=!0,c.hasSuspenseAboveBody=!0;return}else if(T.test(b)){c.hasAllowedDynamic=!0;return}else{var e,f;let g;if(d.syncDynamicErrorWithStack)return void c.dynamicErrors.push(d.syncDynamicErrorWithStack);let h=(e=`Route "${a.route}": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,f=b,(g=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})).stack=g.name+": "+e+f,g);return void c.dynamicErrors.push(h)}}}var Z=((e={})[e.Full=0]="Full",e[e.Empty=1]="Empty",e[e.Errored=2]="Errored",e);function $(a,b){console.error(b),a.dev||(a.hasReadableErrorStacks?console.error(`To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \`next dev\`, then open "${a.route}" in your browser to investigate the error.`):console.error(`To get a more detailed stack trace and pinpoint the issue, try one of the following:
  - Start the app in development mode by running \`next dev\`, then open "${a.route}" in your browser to investigate the error.
  - Rerun the production build with \`next build --debug-prerender\` to generate better stack traces.`))}function _(a,b,c,d){if(d.syncDynamicErrorWithStack)throw $(a,d.syncDynamicErrorWithStack),new j.StaticGenBailoutError;if(0!==b){if(c.hasSuspenseAboveBody)return;let d=c.dynamicErrors;if(d.length>0){for(let b=0;b<d.length;b++)$(a,d[b]);throw new j.StaticGenBailoutError}if(c.hasDynamicViewport)throw console.error(`Route "${a.route}" has a \`generateViewport\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`),new j.StaticGenBailoutError;if(1===b)throw console.error(`Route "${a.route}" did not produce a static shell and Next.js was unable to determine a reason. This is a bug in Next.js.`),new j.StaticGenBailoutError}else if(!1===c.hasAllowedDynamic&&c.hasDynamicMetadata)throw console.error(`Route "${a.route}" has a \`generateMetadata\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`),new j.StaticGenBailoutError}function aa(a,b){return a.runtimeStagePromise?a.runtimeStagePromise.then(()=>b):b}},216:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.CertificateSubjectTokenSupplier=b.InvalidConfigurationError=b.CertificateSourceUnavailableError=b.CERTIFICATE_CONFIGURATION_ENV_VARIABLE=void 0;let d=c(2433),e=c(9021),f=c(5511),g=c(5591);b.CERTIFICATE_CONFIGURATION_ENV_VARIABLE="GOOGLE_API_CERTIFICATE_CONFIG";class h extends Error{constructor(a){super(a),this.name="CertificateSourceUnavailableError"}}b.CertificateSourceUnavailableError=h;class i extends Error{constructor(a){super(a),this.name="InvalidConfigurationError"}}b.InvalidConfigurationError=i;class j{certificateConfigPath;trustChainPath;cert;key;constructor(a){if(!a.useDefaultCertificateConfig&&!a.certificateConfigLocation)throw new i("Either `useDefaultCertificateConfig` must be true or a `certificateConfigLocation` must be provided.");if(a.useDefaultCertificateConfig&&a.certificateConfigLocation)throw new i("Both `useDefaultCertificateConfig` and `certificateConfigLocation` cannot be provided.");this.trustChainPath=a.trustChainPath,this.certificateConfigPath=a.certificateConfigLocation??""}async createMtlsHttpsAgent(){if(!this.key||!this.cert)throw new i("Cannot create mTLS Agent with missing certificate or key");return new g.Agent({key:this.key,cert:this.cert})}async getSubjectToken(){this.certificateConfigPath=await this.#a();let{certPath:a,keyPath:b}=await this.#b();return{cert:this.cert,key:this.key}=await this.#c(a,b),await this.#d(this.cert)}async #a(){let a=this.certificateConfigPath;if(a){if(await (0,d.isValidFile)(a))return a;throw new h(`Provided certificate config path is invalid: ${a}`)}let c=process.env[b.CERTIFICATE_CONFIGURATION_ENV_VARIABLE];if(c){if(await (0,d.isValidFile)(c))return c;throw new h(`Path from environment variable "${b.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" is invalid: ${c}`)}let e=(0,d.getWellKnownCertificateConfigFileLocation)();if(await (0,d.isValidFile)(e))return e;throw new h(`Could not find certificate configuration file. Searched override path, the "${b.CERTIFICATE_CONFIGURATION_ENV_VARIABLE}" env var, and the gcloud path (${e}).`)}async #b(){let a,b=this.certificateConfigPath;try{a=await e.promises.readFile(b,"utf8")}catch(a){throw new h(`Failed to read certificate config file at: ${b}`)}try{let c=JSON.parse(a),d=c?.cert_configs?.workload?.cert_path,e=c?.cert_configs?.workload?.key_path;if(!d||!e)throw new i(`Certificate config file (${b}) is missing required "cert_path" or "key_path" in the workload config.`);return{certPath:d,keyPath:e}}catch(a){if(a instanceof i)throw a;throw new i(`Failed to parse certificate config from ${b}: ${a.message}`)}}async #c(a,b){let c,d;try{c=await e.promises.readFile(a),new f.X509Certificate(c)}catch(c){let b=c instanceof Error?c.message:String(c);throw new h(`Failed to read certificate file at ${a}: ${b}`)}try{d=await e.promises.readFile(b),(0,f.createPrivateKey)(d)}catch(c){let a=c instanceof Error?c.message:String(c);throw new h(`Failed to read private key file at ${b}: ${a}`)}return{cert:c,key:d}}async #d(a){let b=new f.X509Certificate(a);if(!this.trustChainPath)return JSON.stringify([b.raw.toString("base64")]);try{let a,c=((await e.promises.readFile(this.trustChainPath,"utf8")).match(/-----BEGIN CERTIFICATE-----[^-]+-----END CERTIFICATE-----/g)??[]).map((a,b)=>{try{return new f.X509Certificate(a)}catch(c){let a=c instanceof Error?c.message:String(c);throw new i(`Failed to parse certificate at index ${b} in trust chain file ${this.trustChainPath}: ${a}`)}}),d=c.findIndex(a=>b.raw.equals(a.raw));if(-1===d)a=[b,...c];else if(0===d)a=c;else throw new i(`Leaf certificate exists in the trust chain but is not the first entry (found at index ${d}).`);return JSON.stringify(a.map(a=>a.raw.toString("base64")))}catch(b){if(b instanceof i)throw b;let a=b instanceof Error?b.message:String(b);throw new h(`Failed to process certificate chain from ${this.trustChainPath}: ${a}`)}}}b.CertificateSubjectTokenSupplier=j},257:function(a,b,c){"use strict";let d;var e,f=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),g=this&&this.__setModuleDefault||(Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b}),h=this&&this.__importStar||(e=function(a){return(e=Object.getOwnPropertyNames||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[b.length]=c);return b})(a)},function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c=e(a),d=0;d<c.length;d++)"default"!==c[d]&&f(b,a,c[d]);return g(b,a),b}),i=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||f(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),b.gcpResidencyCache=b.METADATA_SERVER_DETECTION=b.HEADERS=b.HEADER_VALUE=b.HEADER_NAME=b.SECONDARY_HOST_ADDRESS=b.HOST_ADDRESS=b.BASE_PATH=void 0,b.instance=function(a){return p("instance",a)},b.project=function(a){return p("project",a)},b.universe=function(a){return p("universe",a)},b.bulk=r,b.isAvailable=s,b.resetIsAvailableCache=function(){d=void 0},b.getGCPResidency=t,b.setGCPResidency=u,b.requestTimeout=v;let j=c(5065),k=c(6725),l=c(4312),m=h(c(5128));b.BASE_PATH="/computeMetadata/v1",b.HOST_ADDRESS="http://169.254.169.254",b.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.",b.HEADER_NAME="Metadata-Flavor",b.HEADER_VALUE="Google",b.HEADERS=Object.freeze({[b.HEADER_NAME]:b.HEADER_VALUE});let n=m.log("gcp-metadata");function o(a){return a||(a=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||b.HOST_ADDRESS),/^https?:\/\//.test(a)||(a=`http://${a}`),new URL(b.BASE_PATH,a).href}async function p(a,c={},d=3,e=!1){let f=new Headers(b.HEADERS),g="",h={};("object"==typeof a?(new Headers(a.headers).forEach((a,b)=>f.set(b,a)),g=a.metadataKey,h=a.params||h,d=a.noResponseRetries||d,e=a.fastFail||e):g=a,"string"==typeof c)?g+=`/${c}`:(Object.keys(c).forEach(a=>{switch(a){case"params":case"property":case"headers":break;case"qs":throw Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw Error(`'${a}' is not a valid configuration option.`)}}),c.property&&(g+=`/${c.property}`),new Headers(c.headers).forEach((a,b)=>f.set(b,a)),h=c.params||h);let i=e?q:j.request,l={url:`${o()}/${g}`,headers:f,retryConfig:{noResponseRetries:d},params:h,responseType:"text",timeout:v()};n.info("instance request %j",l);let m=await i(l);n.info("instance metadata is %s",m.data);let r=m.headers.get(b.HEADER_NAME);if(r!==b.HEADER_VALUE)throw RangeError(`Invalid response from metadata service: incorrect ${b.HEADER_NAME} header. Expected '${b.HEADER_VALUE}', got ${r?`'${r}'`:"no header"}`);if("string"==typeof m.data)try{return k.parse(m.data)}catch{}return m.data}async function q(a){let c={...a,url:a.url?.toString().replace(o(),o(b.SECONDARY_HOST_ADDRESS))};return Promise.any([(0,j.request)(a),(0,j.request)(c)])}async function r(a){let b={};return await Promise.all(a.map(a=>(async()=>{let c=await p(a);b[a.metadataKey]=c})())),b}async function s(){if(process.env.METADATA_SERVER_DETECTION){let a=process.env.METADATA_SERVER_DETECTION.trim().toLocaleLowerCase();if(!(a in b.METADATA_SERVER_DETECTION))throw RangeError(`Unknown \`METADATA_SERVER_DETECTION\` env variable. Got \`${a}\`, but it should be \`${Object.keys(b.METADATA_SERVER_DETECTION).join("`, `")}\`, or unset`);switch(a){case"assume-present":return!0;case"none":return!1;case"bios-only":return t()}}try{return void 0===d&&(d=p("instance",void 0,process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0,!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST))),await d,!0}catch(a){if(process.env.DEBUG_AUTH&&console.info(a),"request-timeout"===a.type||a.response&&404===a.response.status)return!1;if(!(a.response&&404===a.response.status)&&(!a.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(a.code.toString()))){let b="UNKNOWN";a.code&&(b=a.code.toString()),process.emitWarning(`received unexpected error = ${a.message} code = ${b}`,"MetadataLookupWarning")}return!1}}function t(){return null===b.gcpResidencyCache&&u(),b.gcpResidencyCache}function u(a=null){b.gcpResidencyCache=null!==a?a:(0,l.detectGCPResidency)()}function v(){return 3e3*!t()}b.METADATA_SERVER_DETECTION=Object.freeze({"assume-present":"don't try to ping the metadata server, but assume it's present",none:"don't try to ping the metadata server, but don't try to use it either","bios-only":"treat the result of a BIOS probe as canonical (don't fall back to pinging)","ping-only":"skip the BIOS probe, and go straight to pinging"}),b.gcpResidencyCache=null,i(c(4312),b)},261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},282:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c,d,e,f,g,h,i,j,k,l,m,n,o={AppRenderSpan:function(){return w},AppRouteRouteHandlersSpan:function(){return z},BaseServerSpan:function(){return q},LoadComponentsSpan:function(){return r},LogSpanAllowList:function(){return D},MiddlewareSpan:function(){return B},NextNodeServerSpan:function(){return t},NextServerSpan:function(){return s},NextVanillaSpanAllowlist:function(){return C},NodeSpan:function(){return y},RenderSpan:function(){return v},ResolveMetadataSpan:function(){return A},RouterSpan:function(){return x},StartServerSpan:function(){return u}};for(var p in o)Object.defineProperty(b,p,{enumerable:!0,get:o[p]});var q=((c=q||{}).handleRequest="BaseServer.handleRequest",c.run="BaseServer.run",c.pipe="BaseServer.pipe",c.getStaticHTML="BaseServer.getStaticHTML",c.render="BaseServer.render",c.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",c.renderToResponse="BaseServer.renderToResponse",c.renderToHTML="BaseServer.renderToHTML",c.renderError="BaseServer.renderError",c.renderErrorToResponse="BaseServer.renderErrorToResponse",c.renderErrorToHTML="BaseServer.renderErrorToHTML",c.render404="BaseServer.render404",c),r=((d=r||{}).loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",d.loadComponents="LoadComponents.loadComponents",d),s=((e=s||{}).getRequestHandler="NextServer.getRequestHandler",e.getRequestHandlerWithMetadata="NextServer.getRequestHandlerWithMetadata",e.getServer="NextServer.getServer",e.getServerRequestHandler="NextServer.getServerRequestHandler",e.createServer="createServer.createServer",e),t=((f=t||{}).compression="NextNodeServer.compression",f.getBuildId="NextNodeServer.getBuildId",f.createComponentTree="NextNodeServer.createComponentTree",f.clientComponentLoading="NextNodeServer.clientComponentLoading",f.getLayoutOrPageModule="NextNodeServer.getLayoutOrPageModule",f.generateStaticRoutes="NextNodeServer.generateStaticRoutes",f.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",f.generatePublicRoutes="NextNodeServer.generatePublicRoutes",f.generateImageRoutes="NextNodeServer.generateImageRoutes.route",f.sendRenderResult="NextNodeServer.sendRenderResult",f.proxyRequest="NextNodeServer.proxyRequest",f.runApi="NextNodeServer.runApi",f.render="NextNodeServer.render",f.renderHTML="NextNodeServer.renderHTML",f.imageOptimizer="NextNodeServer.imageOptimizer",f.getPagePath="NextNodeServer.getPagePath",f.getRoutesManifest="NextNodeServer.getRoutesManifest",f.findPageComponents="NextNodeServer.findPageComponents",f.getFontManifest="NextNodeServer.getFontManifest",f.getServerComponentManifest="NextNodeServer.getServerComponentManifest",f.getRequestHandler="NextNodeServer.getRequestHandler",f.renderToHTML="NextNodeServer.renderToHTML",f.renderError="NextNodeServer.renderError",f.renderErrorToHTML="NextNodeServer.renderErrorToHTML",f.render404="NextNodeServer.render404",f.startResponse="NextNodeServer.startResponse",f.route="route",f.onProxyReq="onProxyReq",f.apiResolver="apiResolver",f.internalFetch="internalFetch",f),u=((g=u||{}).startServer="startServer.startServer",g),v=((h=v||{}).getServerSideProps="Render.getServerSideProps",h.getStaticProps="Render.getStaticProps",h.renderToString="Render.renderToString",h.renderDocument="Render.renderDocument",h.createBodyResult="Render.createBodyResult",h),w=((i=w||{}).renderToString="AppRender.renderToString",i.renderToReadableStream="AppRender.renderToReadableStream",i.getBodyResult="AppRender.getBodyResult",i.fetch="AppRender.fetch",i),x=((j=x||{}).executeRoute="Router.executeRoute",j),y=((k=y||{}).runHandler="Node.runHandler",k),z=((l=z||{}).runHandler="AppRouteRouteHandlers.runHandler",l),A=((m=A||{}).generateMetadata="ResolveMetadata.generateMetadata",m.generateViewport="ResolveMetadata.generateViewport",m),B=((n=B||{}).execute="Middleware.execute",n);let C=new Set(["Middleware.execute","BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata","ResolveMetadata.generateViewport","NextNodeServer.createComponentTree","NextNodeServer.findPageComponents","NextNodeServer.getLayoutOrPageModule","NextNodeServer.startResponse","NextNodeServer.clientComponentLoading"]),D=new Set(["NextNodeServer.findPageComponents","NextNodeServer.createComponentTree","NextNodeServer.clientComponentLoading"])},370:(a,b,c)=>{"use strict";let{tokenChars:d}=c(3770);function e(a,b,c){void 0===a[b]?a[b]=[c]:a[b].push(c)}a.exports={format:function(a){return Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>[b].concat(Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>!0===a?b:`${b}=${a}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(a){let b,c,f=Object.create(null),g=Object.create(null),h=!1,i=!1,j=!1,k=-1,l=-1,m=-1,n=0;for(;n<a.length;n++)if(l=a.charCodeAt(n),void 0===b)if(-1===m&&1===d[l])-1===k&&(k=n);else if(0!==n&&(32===l||9===l))-1===m&&-1!==k&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n);let c=a.slice(k,m);44===l?(e(f,c,g),g=Object.create(null)):b=c,k=m=-1}else throw SyntaxError(`Unexpected character at index ${n}`);else if(void 0===c)if(-1===m&&1===d[l])-1===k&&(k=n);else if(32===l||9===l)-1===m&&-1!==k&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n),e(g,a.slice(k,m),!0),44===l&&(e(f,b,g),g=Object.create(null),b=void 0),k=m=-1}else if(61===l&&-1!==k&&-1===m)c=a.slice(k,n),k=m=-1;else throw SyntaxError(`Unexpected character at index ${n}`);else if(i){if(1!==d[l])throw SyntaxError(`Unexpected character at index ${n}`);-1===k?k=n:h||(h=!0),i=!1}else if(j)if(1===d[l])-1===k&&(k=n);else if(34===l&&-1!==k)j=!1,m=n;else if(92===l)i=!0;else throw SyntaxError(`Unexpected character at index ${n}`);else if(34===l&&61===a.charCodeAt(n-1))j=!0;else if(-1===m&&1===d[l])-1===k&&(k=n);else if(-1!==k&&(32===l||9===l))-1===m&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n);let d=a.slice(k,m);h&&(d=d.replace(/\\/g,""),h=!1),e(g,c,d),44===l&&(e(f,b,g),g=Object.create(null),b=void 0),c=void 0,k=m=-1}else throw SyntaxError(`Unexpected character at index ${n}`);if(-1===k||j||32===l||9===l)throw SyntaxError("Unexpected end of input");-1===m&&(m=n);let o=a.slice(k,m);return void 0===b?e(f,o,g):(void 0===c?e(g,o,!0):h?e(g,c,o.replace(/\\/g,"")):e(g,c,o),e(f,b,g)),f}}},386:(a,b,c)=>{var d=c(57).Buffer,e=c(7910);function f(a){if(this.buffer=null,this.writable=!0,this.readable=!0,!a)return this.buffer=d.alloc(0),this;if("function"==typeof a.pipe)return this.buffer=d.alloc(0),a.pipe(this),this;if(a.length||"object"==typeof a)return this.buffer=a,this.writable=!1,process.nextTick((function(){this.emit("end",a),this.readable=!1,this.emit("close")}).bind(this)),this;throw TypeError("Unexpected data type ("+typeof a+")")}c(8354).inherits(f,e),f.prototype.write=function(a){this.buffer=d.concat([this.buffer,d.from(a)]),this.emit("data",a)},f.prototype.end=function(a){a&&this.write(a),this.emit("end",a),this.emit("close"),this.writable=!1,this.readable=!1},a.exports=f},388:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,1921,23)),Promise.resolve().then(c.t.bind(c,440,23)),Promise.resolve().then(c.t.bind(c,4342,23)),Promise.resolve().then(c.t.bind(c,2265,23)),Promise.resolve().then(c.t.bind(c,5421,23)),Promise.resolve().then(c.t.bind(c,1335,23)),Promise.resolve().then(c.t.bind(c,664,23)),Promise.resolve().then(c.bind(c,4661))},632:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"ENCODED_TAGS",{enumerable:!0,get:function(){return c}});let c={OPENING:{HTML:new Uint8Array([60,104,116,109,108]),BODY:new Uint8Array([60,98,111,100,121])},CLOSED:{HEAD:new Uint8Array([60,47,104,101,97,100,62]),BODY:new Uint8Array([60,47,98,111,100,121,62]),HTML:new Uint8Array([60,47,104,116,109,108,62]),BODY_AND_HTML:new Uint8Array([60,47,98,111,100,121,62,60,47,104,116,109,108,62])},META:{ICON_MARK:new Uint8Array([60,109,101,116,97,32,110,97,109,101,61,34,194,171,110,120,116,45,105,99,111,110,194,187,34])}}},722:a=>{"use strict";a.exports=require("next/dist/shared/lib/invariant-error")},755:a=>{"use strict";a.exports=require("node:url")},846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},865:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c={BailoutToCSRError:function(){return f},isBailoutToCSRError:function(){return g}};for(var d in c)Object.defineProperty(b,d,{enumerable:!0,get:c[d]});let e="BAILOUT_TO_CLIENT_SIDE_RENDERING";class f extends Error{constructor(a){super(`Bail out to client-side rendering: ${a}`),this.reason=a,this.digest=e}}function g(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===e}},944:(a,b,c)=>{"use strict";a.exports=c(7553).vendored["react-rsc"].ReactServerDOMWebpackServer},952:(a,b,c)=>{"use strict";let d=c(4735),e=c(1630),{Duplex:f}=c(7910),{createHash:g}=c(5511),h=c(370),i=c(8071),j=c(4575),k=c(2804),{GUID:l,kWebSocket:m}=c(1010),n=/^[+/0-9A-Za-z]{22}==$/;class o extends d{constructor(a,b){if(super(),null==(a={allowSynchronousEvents:!0,autoPong:!0,maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:k,...a}).port&&!a.server&&!a.noServer||null!=a.port&&(a.server||a.noServer)||a.server&&a.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=a.port?(this._server=e.createServer((a,b)=>{let c=e.STATUS_CODES[426];b.writeHead(426,{"Content-Length":c.length,"Content-Type":"text/plain"}),b.end(c)}),this._server.listen(a.port,a.host,a.backlog,b)):a.server&&(this._server=a.server),this._server){const a=this.emit.bind(this,"connection");this._removeListeners=function(a,b){for(let c of Object.keys(b))a.on(c,b[c]);return function(){for(let c of Object.keys(b))a.removeListener(c,b[c])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(b,c,d)=>{this.handleUpgrade(b,c,d,a)}})}!0===a.perMessageDeflate&&(a.perMessageDeflate={}),a.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=a,this._state=0}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(a){if(2===this._state){a&&this.once("close",()=>{a(Error("The server is not running"))}),process.nextTick(p,this);return}if(a&&this.once("close",a),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(p,this);else{let a=this._server;this._removeListeners(),this._removeListeners=this._server=null,a.close(()=>{p(this)})}}shouldHandle(a){if(this.options.path){let b=a.url.indexOf("?");if((-1!==b?a.url.slice(0,b):a.url)!==this.options.path)return!1}return!0}handleUpgrade(a,b,c,d){b.on("error",q);let e=a.headers["sec-websocket-key"],f=a.headers.upgrade,g=+a.headers["sec-websocket-version"];if("GET"!==a.method)return void s(this,a,b,405,"Invalid HTTP method");if(void 0===f||"websocket"!==f.toLowerCase())return void s(this,a,b,400,"Invalid Upgrade header");if(void 0===e||!n.test(e))return void s(this,a,b,400,"Missing or invalid Sec-WebSocket-Key header");if(13!==g&&8!==g)return void s(this,a,b,400,"Missing or invalid Sec-WebSocket-Version header",{"Sec-WebSocket-Version":"13, 8"});if(!this.shouldHandle(a))return void r(b,400);let k=a.headers["sec-websocket-protocol"],l=new Set;if(void 0!==k)try{l=j.parse(k)}catch(c){s(this,a,b,400,"Invalid Sec-WebSocket-Protocol header");return}let m=a.headers["sec-websocket-extensions"],o={};if(this.options.perMessageDeflate&&void 0!==m){let c=new i(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let a=h.parse(m);a[i.extensionName]&&(c.accept(a[i.extensionName]),o[i.extensionName]=c)}catch(c){s(this,a,b,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let f={origin:a.headers[`${8===g?"sec-websocket-origin":"origin"}`],secure:!!(a.socket.authorized||a.socket.encrypted),req:a};if(2===this.options.verifyClient.length)return void this.options.verifyClient(f,(f,g,h,i)=>{if(!f)return r(b,g||401,h,i);this.completeUpgrade(o,e,l,a,b,c,d)});if(!this.options.verifyClient(f))return r(b,401)}this.completeUpgrade(o,e,l,a,b,c,d)}completeUpgrade(a,b,c,d,e,f,j){if(!e.readable||!e.writable)return e.destroy();if(e[m])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return r(e,503);let k=g("sha1").update(b+l).digest("base64"),n=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${k}`],o=new this.options.WebSocket(null,void 0,this.options);if(c.size){let a=this.options.handleProtocols?this.options.handleProtocols(c,d):c.values().next().value;a&&(n.push(`Sec-WebSocket-Protocol: ${a}`),o._protocol=a)}if(a[i.extensionName]){let b=a[i.extensionName].params,c=h.format({[i.extensionName]:[b]});n.push(`Sec-WebSocket-Extensions: ${c}`),o._extensions=a}this.emit("headers",n,d),e.write(n.concat("\r\n").join("\r\n")),e.removeListener("error",q),o.setSocket(e,f,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(o),o.on("close",()=>{this.clients.delete(o),this._shouldEmitClose&&!this.clients.size&&process.nextTick(p,this)})),j(o,d)}}function p(a){a._state=2,a.emit("close")}function q(){this.destroy()}function r(a,b,c,d){c=c||e.STATUS_CODES[b],d={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(c),...d},a.once("finish",a.destroy),a.end(`HTTP/1.1 ${b} ${e.STATUS_CODES[b]}\r
`+Object.keys(d).map(a=>`${a}: ${d[a]}`).join("\r\n")+"\r\n\r\n"+c)}function s(a,b,c,d,e,f){if(a.listenerCount("wsClientError")){let d=Error(e);Error.captureStackTrace(d,s),a.emit("wsClientError",d,c,b)}else r(c,d,e,f)}a.exports=o},963:(a,b)=>{"use strict";async function c(a){var b;let c=e(a);if(!a||!a.config||!c&&!a.config.retry)return{shouldRetry:!1};(c=c||{}).currentRetryAttempt=c.currentRetryAttempt||0,c.retry=void 0===c.retry||null===c.retry?3:c.retry,c.httpMethodsToRetry=c.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],c.noResponseRetries=void 0===c.noResponseRetries||null===c.noResponseRetries?2:c.noResponseRetries,c.retryDelayMultiplier=c.retryDelayMultiplier?c.retryDelayMultiplier:2,c.timeOfFirstRequest=c.timeOfFirstRequest?c.timeOfFirstRequest:Date.now(),c.totalTimeout=c.totalTimeout?c.totalTimeout:Number.MAX_SAFE_INTEGER,c.maxRetryDelay=c.maxRetryDelay?c.maxRetryDelay:Number.MAX_SAFE_INTEGER,c.statusCodesToRetry=c.statusCodesToRetry||[[100,199],[408,408],[429,429],[500,599]],a.config.retryConfig=c;let f=c.shouldRetry||d;if(!await f(a))return{shouldRetry:!1,config:a.config};let g=Math.min(((b=c).currentRetryAttempt?0:b.retryDelay??100)+(Math.pow(b.retryDelayMultiplier,b.currentRetryAttempt)-1)/2*1e3,b.totalTimeout-(Date.now()-b.timeOfFirstRequest),b.maxRetryDelay);a.config.retryConfig.currentRetryAttempt+=1;let h=c.retryBackoff?c.retryBackoff(a,g):new Promise(a=>{setTimeout(a,g)});return c.onRetryAttempt&&await c.onRetryAttempt(a),await h,{shouldRetry:!0,config:a.config}}function d(a){let b=e(a);if(a.config.signal?.aborted&&"TimeoutError"!==a.code||"AbortError"===a.code||!b||0===b.retry||!a.response&&(b.currentRetryAttempt||0)>=b.noResponseRetries||!b.httpMethodsToRetry||!b.httpMethodsToRetry.includes(a.config.method?.toUpperCase()||"GET"))return!1;if(a.response&&a.response.status){let c=!1;for(let[d,e]of b.statusCodesToRetry){let b=a.response.status;if(b>=d&&b<=e){c=!0;break}}if(!c)return!1}return b.currentRetryAttempt=b.currentRetryAttempt||0,!(b.currentRetryAttempt>=b.retry)}function e(a){if(a&&a.config&&a.config.retryConfig)return a.config.retryConfig}Object.defineProperty(b,"__esModule",{value:!0}),b.getRetryConfig=c},1010:a=>{"use strict";let b=["nodebuffer","arraybuffer","fragments"],c="undefined"!=typeof Blob;c&&b.push("blob"),a.exports={BINARY_TYPES:b,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:c,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},1025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},1045:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.LoginTicket=void 0;class c{envelope;payload;constructor(a,b){this.envelope=a,this.payload=b}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){let a=this.getPayload();return a&&a.sub?a.sub:null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}}b.LoginTicket=c},1135:()=>{},1256:(a,b,c)=>{"use strict";let d,{Duplex:e}=c(7910),{randomFillSync:f}=c(5511),g=c(8071),{EMPTY_BUFFER:h,kWebSocket:i,NOOP:j}=c(1010),{isBlob:k,isValidStatusCode:l}=c(3770),{mask:m,toBuffer:n}=c(6078),o=Symbol("kByteLength"),p=Buffer.alloc(4),q=8192;class r{constructor(a,b,c){this._extensions=b||{},c&&(this._generateMask=c,this._maskBuffer=Buffer.alloc(4)),this._socket=a,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=0,this.onerror=j,this[i]=void 0}static frame(a,b){let c,e,g=!1,h=2,i=!1;b.mask&&(c=b.maskBuffer||p,b.generateMask?b.generateMask(c):(8192===q&&(void 0===d&&(d=Buffer.alloc(8192)),f(d,0,8192),q=0),c[0]=d[q++],c[1]=d[q++],c[2]=d[q++],c[3]=d[q++]),i=(c[0]|c[1]|c[2]|c[3])==0,h=6),"string"==typeof a?e=(!b.mask||i)&&void 0!==b[o]?b[o]:(a=Buffer.from(a)).length:(e=a.length,g=b.mask&&b.readOnly&&!i);let j=e;e>=65536?(h+=8,j=127):e>125&&(h+=2,j=126);let k=Buffer.allocUnsafe(g?e+h:h);return(k[0]=b.fin?128|b.opcode:b.opcode,b.rsv1&&(k[0]|=64),k[1]=j,126===j?k.writeUInt16BE(e,2):127===j&&(k[2]=k[3]=0,k.writeUIntBE(e,4,6)),b.mask)?(k[1]|=128,k[h-4]=c[0],k[h-3]=c[1],k[h-2]=c[2],k[h-1]=c[3],i)?[k,a]:g?(m(a,c,k,h,e),[k]):(m(a,c,a,0,e),[k,a]):[k,a]}close(a,b,c,d){let e;if(void 0===a)e=h;else if("number"==typeof a&&l(a))if(void 0!==b&&b.length){let c=Buffer.byteLength(b);if(c>123)throw RangeError("The message must not be greater than 123 bytes");(e=Buffer.allocUnsafe(2+c)).writeUInt16BE(a,0),"string"==typeof b?e.write(b,2):e.set(b,2)}else(e=Buffer.allocUnsafe(2)).writeUInt16BE(a,0);else throw TypeError("First argument must be a valid error code number");let f={[o]:e.length,fin:!0,generateMask:this._generateMask,mask:c,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};0!==this._state?this.enqueue([this.dispatch,e,!1,f,d]):this.sendFrame(r.frame(e,f),d)}ping(a,b,c){let d,e;if("string"==typeof a?(d=Buffer.byteLength(a),e=!1):k(a)?(d=a.size,e=!1):(d=(a=n(a)).length,e=n.readOnly),d>125)throw RangeError("The data size must not be greater than 125 bytes");let f={[o]:d,fin:!0,generateMask:this._generateMask,mask:b,maskBuffer:this._maskBuffer,opcode:9,readOnly:e,rsv1:!1};k(a)?0!==this._state?this.enqueue([this.getBlobData,a,!1,f,c]):this.getBlobData(a,!1,f,c):0!==this._state?this.enqueue([this.dispatch,a,!1,f,c]):this.sendFrame(r.frame(a,f),c)}pong(a,b,c){let d,e;if("string"==typeof a?(d=Buffer.byteLength(a),e=!1):k(a)?(d=a.size,e=!1):(d=(a=n(a)).length,e=n.readOnly),d>125)throw RangeError("The data size must not be greater than 125 bytes");let f={[o]:d,fin:!0,generateMask:this._generateMask,mask:b,maskBuffer:this._maskBuffer,opcode:10,readOnly:e,rsv1:!1};k(a)?0!==this._state?this.enqueue([this.getBlobData,a,!1,f,c]):this.getBlobData(a,!1,f,c):0!==this._state?this.enqueue([this.dispatch,a,!1,f,c]):this.sendFrame(r.frame(a,f),c)}send(a,b,c){let d,e,f=this._extensions[g.extensionName],h=b.binary?2:1,i=b.compress;"string"==typeof a?(d=Buffer.byteLength(a),e=!1):k(a)?(d=a.size,e=!1):(d=(a=n(a)).length,e=n.readOnly),this._firstFragment?(this._firstFragment=!1,i&&f&&f.params[f._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(i=d>=f._threshold),this._compress=i):(i=!1,h=0),b.fin&&(this._firstFragment=!0);let j={[o]:d,fin:b.fin,generateMask:this._generateMask,mask:b.mask,maskBuffer:this._maskBuffer,opcode:h,readOnly:e,rsv1:i};k(a)?0!==this._state?this.enqueue([this.getBlobData,a,this._compress,j,c]):this.getBlobData(a,this._compress,j,c):0!==this._state?this.enqueue([this.dispatch,a,this._compress,j,c]):this.dispatch(a,this._compress,j,c)}getBlobData(a,b,c,d){this._bufferedBytes+=c[o],this._state=2,a.arrayBuffer().then(a=>{if(this._socket.destroyed){let a=Error("The socket was closed while the blob was being read");process.nextTick(s,this,a,d);return}this._bufferedBytes-=c[o];let e=n(a);b?this.dispatch(e,b,c,d):(this._state=0,this.sendFrame(r.frame(e,c),d),this.dequeue())}).catch(a=>{process.nextTick(t,this,a,d)})}dispatch(a,b,c,d){if(!b)return void this.sendFrame(r.frame(a,c),d);let e=this._extensions[g.extensionName];this._bufferedBytes+=c[o],this._state=1,e.compress(a,c.fin,(a,b)=>{this._socket.destroyed?s(this,Error("The socket was closed while data was being compressed"),d):(this._bufferedBytes-=c[o],this._state=0,c.readOnly=!1,this.sendFrame(r.frame(b,c),d),this.dequeue())})}dequeue(){for(;0===this._state&&this._queue.length;){let a=this._queue.shift();this._bufferedBytes-=a[3][o],Reflect.apply(a[0],this,a.slice(1))}}enqueue(a){this._bufferedBytes+=a[3][o],this._queue.push(a)}sendFrame(a,b){2===a.length?(this._socket.cork(),this._socket.write(a[0]),this._socket.write(a[1],b),this._socket.uncork()):this._socket.write(a[0],b)}}function s(a,b,c){"function"==typeof c&&c(b);for(let c=0;c<a._queue.length;c++){let d=a._queue[c],e=d[d.length-1];"function"==typeof e&&e(b)}}function t(a,b,c){s(a,b,c),a.onerror(b)}a.exports=r},1320:a=>{(()=>{"use strict";let b,c,d,e,f;var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w={491:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ContextAPI=void 0;let d=c(223),e=c(172),f=c(930),g="context",h=new d.NoopContextManager;class i{constructor(){}static getInstance(){return this._instance||(this._instance=new i),this._instance}setGlobalContextManager(a){return(0,e.registerGlobal)(g,a,f.DiagAPI.instance())}active(){return this._getContextManager().active()}with(a,b,c,...d){return this._getContextManager().with(a,b,c,...d)}bind(a,b){return this._getContextManager().bind(a,b)}_getContextManager(){return(0,e.getGlobal)(g)||h}disable(){this._getContextManager().disable(),(0,e.unregisterGlobal)(g,f.DiagAPI.instance())}}b.ContextAPI=i},930:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DiagAPI=void 0;let d=c(56),e=c(912),f=c(957),g=c(172);class h{constructor(){function a(a){return function(...b){let c=(0,g.getGlobal)("diag");if(c)return c[a](...b)}}const b=this;b.setLogger=(a,c={logLevel:f.DiagLogLevel.INFO})=>{var d,h,i;if(a===b){let a=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return b.error(null!=(d=a.stack)?d:a.message),!1}"number"==typeof c&&(c={logLevel:c});let j=(0,g.getGlobal)("diag"),k=(0,e.createLogLevelDiagLogger)(null!=(h=c.logLevel)?h:f.DiagLogLevel.INFO,a);if(j&&!c.suppressOverrideMessage){let a=null!=(i=Error().stack)?i:"<failed to generate stacktrace>";j.warn(`Current logger will be overwritten from ${a}`),k.warn(`Current logger will overwrite one already registered from ${a}`)}return(0,g.registerGlobal)("diag",k,b,!0)},b.disable=()=>{(0,g.unregisterGlobal)("diag",b)},b.createComponentLogger=a=>new d.DiagComponentLogger(a),b.verbose=a("verbose"),b.debug=a("debug"),b.info=a("info"),b.warn=a("warn"),b.error=a("error")}static instance(){return this._instance||(this._instance=new h),this._instance}}b.DiagAPI=h},653:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.MetricsAPI=void 0;let d=c(660),e=c(172),f=c(930),g="metrics";class h{constructor(){}static getInstance(){return this._instance||(this._instance=new h),this._instance}setGlobalMeterProvider(a){return(0,e.registerGlobal)(g,a,f.DiagAPI.instance())}getMeterProvider(){return(0,e.getGlobal)(g)||d.NOOP_METER_PROVIDER}getMeter(a,b,c){return this.getMeterProvider().getMeter(a,b,c)}disable(){(0,e.unregisterGlobal)(g,f.DiagAPI.instance())}}b.MetricsAPI=h},181:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.PropagationAPI=void 0;let d=c(172),e=c(874),f=c(194),g=c(277),h=c(369),i=c(930),j="propagation",k=new e.NoopTextMapPropagator;class l{constructor(){this.createBaggage=h.createBaggage,this.getBaggage=g.getBaggage,this.getActiveBaggage=g.getActiveBaggage,this.setBaggage=g.setBaggage,this.deleteBaggage=g.deleteBaggage}static getInstance(){return this._instance||(this._instance=new l),this._instance}setGlobalPropagator(a){return(0,d.registerGlobal)(j,a,i.DiagAPI.instance())}inject(a,b,c=f.defaultTextMapSetter){return this._getGlobalPropagator().inject(a,b,c)}extract(a,b,c=f.defaultTextMapGetter){return this._getGlobalPropagator().extract(a,b,c)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,d.unregisterGlobal)(j,i.DiagAPI.instance())}_getGlobalPropagator(){return(0,d.getGlobal)(j)||k}}b.PropagationAPI=l},997:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.TraceAPI=void 0;let d=c(172),e=c(846),f=c(139),g=c(607),h=c(930),i="trace";class j{constructor(){this._proxyTracerProvider=new e.ProxyTracerProvider,this.wrapSpanContext=f.wrapSpanContext,this.isSpanContextValid=f.isSpanContextValid,this.deleteSpan=g.deleteSpan,this.getSpan=g.getSpan,this.getActiveSpan=g.getActiveSpan,this.getSpanContext=g.getSpanContext,this.setSpan=g.setSpan,this.setSpanContext=g.setSpanContext}static getInstance(){return this._instance||(this._instance=new j),this._instance}setGlobalTracerProvider(a){let b=(0,d.registerGlobal)(i,this._proxyTracerProvider,h.DiagAPI.instance());return b&&this._proxyTracerProvider.setDelegate(a),b}getTracerProvider(){return(0,d.getGlobal)(i)||this._proxyTracerProvider}getTracer(a,b){return this.getTracerProvider().getTracer(a,b)}disable(){(0,d.unregisterGlobal)(i,h.DiagAPI.instance()),this._proxyTracerProvider=new e.ProxyTracerProvider}}b.TraceAPI=j},277:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.deleteBaggage=b.setBaggage=b.getActiveBaggage=b.getBaggage=void 0;let d=c(491),e=(0,c(780).createContextKey)("OpenTelemetry Baggage Key");function f(a){return a.getValue(e)||void 0}b.getBaggage=f,b.getActiveBaggage=function(){return f(d.ContextAPI.getInstance().active())},b.setBaggage=function(a,b){return a.setValue(e,b)},b.deleteBaggage=function(a){return a.deleteValue(e)}},993:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.BaggageImpl=void 0;class c{constructor(a){this._entries=a?new Map(a):new Map}getEntry(a){let b=this._entries.get(a);if(b)return Object.assign({},b)}getAllEntries(){return Array.from(this._entries.entries()).map(([a,b])=>[a,b])}setEntry(a,b){let d=new c(this._entries);return d._entries.set(a,b),d}removeEntry(a){let b=new c(this._entries);return b._entries.delete(a),b}removeEntries(...a){let b=new c(this._entries);for(let c of a)b._entries.delete(c);return b}clear(){return new c}}b.BaggageImpl=c},830:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.baggageEntryMetadataSymbol=void 0,b.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},369:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.baggageEntryMetadataFromString=b.createBaggage=void 0;let d=c(930),e=c(993),f=c(830),g=d.DiagAPI.instance();b.createBaggage=function(a={}){return new e.BaggageImpl(new Map(Object.entries(a)))},b.baggageEntryMetadataFromString=function(a){return"string"!=typeof a&&(g.error(`Cannot create baggage metadata from unknown type: ${typeof a}`),a=""),{__TYPE__:f.baggageEntryMetadataSymbol,toString:()=>a}}},67:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.context=void 0,b.context=c(491).ContextAPI.getInstance()},223:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NoopContextManager=void 0;let d=c(780);class e{active(){return d.ROOT_CONTEXT}with(a,b,c,...d){return b.call(c,...d)}bind(a,b){return b}enable(){return this}disable(){return this}}b.NoopContextManager=e},780:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ROOT_CONTEXT=b.createContextKey=void 0,b.createContextKey=function(a){return Symbol.for(a)};class c{constructor(a){const b=this;b._currentContext=a?new Map(a):new Map,b.getValue=a=>b._currentContext.get(a),b.setValue=(a,d)=>{let e=new c(b._currentContext);return e._currentContext.set(a,d),e},b.deleteValue=a=>{let d=new c(b._currentContext);return d._currentContext.delete(a),d}}}b.ROOT_CONTEXT=new c},506:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.diag=void 0,b.diag=c(930).DiagAPI.instance()},56:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DiagComponentLogger=void 0;let d=c(172);class e{constructor(a){this._namespace=a.namespace||"DiagComponentLogger"}debug(...a){return f("debug",this._namespace,a)}error(...a){return f("error",this._namespace,a)}info(...a){return f("info",this._namespace,a)}warn(...a){return f("warn",this._namespace,a)}verbose(...a){return f("verbose",this._namespace,a)}}function f(a,b,c){let e=(0,d.getGlobal)("diag");if(e)return c.unshift(b),e[a](...c)}b.DiagComponentLogger=e},972:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DiagConsoleLogger=void 0;let c=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class d{constructor(){for(let a=0;a<c.length;a++)this[c[a].n]=function(a){return function(...b){if(console){let c=console[a];if("function"!=typeof c&&(c=console.log),"function"==typeof c)return c.apply(console,b)}}}(c[a].c)}}b.DiagConsoleLogger=d},912:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.createLogLevelDiagLogger=void 0;let d=c(957);b.createLogLevelDiagLogger=function(a,b){function c(c,d){let e=b[c];return"function"==typeof e&&a>=d?e.bind(b):function(){}}return a<d.DiagLogLevel.NONE?a=d.DiagLogLevel.NONE:a>d.DiagLogLevel.ALL&&(a=d.DiagLogLevel.ALL),b=b||{},{error:c("error",d.DiagLogLevel.ERROR),warn:c("warn",d.DiagLogLevel.WARN),info:c("info",d.DiagLogLevel.INFO),debug:c("debug",d.DiagLogLevel.DEBUG),verbose:c("verbose",d.DiagLogLevel.VERBOSE)}}},957:(a,b)=>{var c;Object.defineProperty(b,"__esModule",{value:!0}),b.DiagLogLevel=void 0,(c=b.DiagLogLevel||(b.DiagLogLevel={}))[c.NONE=0]="NONE",c[c.ERROR=30]="ERROR",c[c.WARN=50]="WARN",c[c.INFO=60]="INFO",c[c.DEBUG=70]="DEBUG",c[c.VERBOSE=80]="VERBOSE",c[c.ALL=9999]="ALL"},172:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.unregisterGlobal=b.getGlobal=b.registerGlobal=void 0;let d=c(200),e=c(521),f=c(130),g=e.VERSION.split(".")[0],h=Symbol.for(`opentelemetry.js.api.${g}`),i=d._globalThis;b.registerGlobal=function(a,b,c,d=!1){var f;let g=i[h]=null!=(f=i[h])?f:{version:e.VERSION};if(!d&&g[a]){let b=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${a}`);return c.error(b.stack||b.message),!1}if(g.version!==e.VERSION){let b=Error(`@opentelemetry/api: Registration of version v${g.version} for ${a} does not match previously registered API v${e.VERSION}`);return c.error(b.stack||b.message),!1}return g[a]=b,c.debug(`@opentelemetry/api: Registered a global for ${a} v${e.VERSION}.`),!0},b.getGlobal=function(a){var b,c;let d=null==(b=i[h])?void 0:b.version;if(d&&(0,f.isCompatible)(d))return null==(c=i[h])?void 0:c[a]},b.unregisterGlobal=function(a,b){b.debug(`@opentelemetry/api: Unregistering a global for ${a} v${e.VERSION}.`);let c=i[h];c&&delete c[a]}},130:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.isCompatible=b._makeCompatibilityCheck=void 0;let d=c(521),e=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function f(a){let b=new Set([a]),c=new Set,d=a.match(e);if(!d)return()=>!1;let f={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};if(null!=f.prerelease)return function(b){return b===a};function g(a){return c.add(a),!1}return function(a){if(b.has(a))return!0;if(c.has(a))return!1;let d=a.match(e);if(!d)return g(a);let h={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};if(null!=h.prerelease||f.major!==h.major)return g(a);if(0===f.major)return f.minor===h.minor&&f.patch<=h.patch?(b.add(a),!0):g(a);return f.minor<=h.minor?(b.add(a),!0):g(a)}}b._makeCompatibilityCheck=f,b.isCompatible=f(d.VERSION)},886:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.metrics=void 0,b.metrics=c(653).MetricsAPI.getInstance()},901:(a,b)=>{var c;Object.defineProperty(b,"__esModule",{value:!0}),b.ValueType=void 0,(c=b.ValueType||(b.ValueType={}))[c.INT=0]="INT",c[c.DOUBLE=1]="DOUBLE"},102:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.createNoopMeter=b.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=b.NOOP_OBSERVABLE_GAUGE_METRIC=b.NOOP_OBSERVABLE_COUNTER_METRIC=b.NOOP_UP_DOWN_COUNTER_METRIC=b.NOOP_HISTOGRAM_METRIC=b.NOOP_COUNTER_METRIC=b.NOOP_METER=b.NoopObservableUpDownCounterMetric=b.NoopObservableGaugeMetric=b.NoopObservableCounterMetric=b.NoopObservableMetric=b.NoopHistogramMetric=b.NoopUpDownCounterMetric=b.NoopCounterMetric=b.NoopMetric=b.NoopMeter=void 0;class c{constructor(){}createHistogram(a,c){return b.NOOP_HISTOGRAM_METRIC}createCounter(a,c){return b.NOOP_COUNTER_METRIC}createUpDownCounter(a,c){return b.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(a,c){return b.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(a,c){return b.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(a,c){return b.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(a,b){}removeBatchObservableCallback(a){}}b.NoopMeter=c;class d{}b.NoopMetric=d;class e extends d{add(a,b){}}b.NoopCounterMetric=e;class f extends d{add(a,b){}}b.NoopUpDownCounterMetric=f;class g extends d{record(a,b){}}b.NoopHistogramMetric=g;class h{addCallback(a){}removeCallback(a){}}b.NoopObservableMetric=h;class i extends h{}b.NoopObservableCounterMetric=i;class j extends h{}b.NoopObservableGaugeMetric=j;class k extends h{}b.NoopObservableUpDownCounterMetric=k,b.NOOP_METER=new c,b.NOOP_COUNTER_METRIC=new e,b.NOOP_HISTOGRAM_METRIC=new g,b.NOOP_UP_DOWN_COUNTER_METRIC=new f,b.NOOP_OBSERVABLE_COUNTER_METRIC=new i,b.NOOP_OBSERVABLE_GAUGE_METRIC=new j,b.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new k,b.createNoopMeter=function(){return b.NOOP_METER}},660:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NOOP_METER_PROVIDER=b.NoopMeterProvider=void 0;let d=c(102);class e{getMeter(a,b,c){return d.NOOP_METER}}b.NoopMeterProvider=e,b.NOOP_METER_PROVIDER=new e},200:function(a,b,c){var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(46),b)},651:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b._globalThis=void 0,b._globalThis="object"==typeof globalThis?globalThis:global},46:function(a,b,c){var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c),Object.defineProperty(a,d,{enumerable:!0,get:function(){return b[c]}})}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(651),b)},939:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.propagation=void 0,b.propagation=c(181).PropagationAPI.getInstance()},874:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NoopTextMapPropagator=void 0;class c{inject(a,b){}extract(a,b){return a}fields(){return[]}}b.NoopTextMapPropagator=c},194:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.defaultTextMapSetter=b.defaultTextMapGetter=void 0,b.defaultTextMapGetter={get(a,b){if(null!=a)return a[b]},keys:a=>null==a?[]:Object.keys(a)},b.defaultTextMapSetter={set(a,b,c){null!=a&&(a[b]=c)}}},845:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.trace=void 0,b.trace=c(997).TraceAPI.getInstance()},403:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NonRecordingSpan=void 0;let d=c(476);class e{constructor(a=d.INVALID_SPAN_CONTEXT){this._spanContext=a}spanContext(){return this._spanContext}setAttribute(a,b){return this}setAttributes(a){return this}addEvent(a,b){return this}setStatus(a){return this}updateName(a){return this}end(a){}isRecording(){return!1}recordException(a,b){}}b.NonRecordingSpan=e},614:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NoopTracer=void 0;let d=c(491),e=c(607),f=c(403),g=c(139),h=d.ContextAPI.getInstance();class i{startSpan(a,b,c=h.active()){var d;if(null==b?void 0:b.root)return new f.NonRecordingSpan;let i=c&&(0,e.getSpanContext)(c);return"object"==typeof(d=i)&&"string"==typeof d.spanId&&"string"==typeof d.traceId&&"number"==typeof d.traceFlags&&(0,g.isSpanContextValid)(i)?new f.NonRecordingSpan(i):new f.NonRecordingSpan}startActiveSpan(a,b,c,d){let f,g,i;if(arguments.length<2)return;2==arguments.length?i=b:3==arguments.length?(f=b,i=c):(f=b,g=c,i=d);let j=null!=g?g:h.active(),k=this.startSpan(a,f,j),l=(0,e.setSpan)(j,k);return h.with(l,i,void 0,k)}}b.NoopTracer=i},124:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.NoopTracerProvider=void 0;let d=c(614);class e{getTracer(a,b,c){return new d.NoopTracer}}b.NoopTracerProvider=e},125:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ProxyTracer=void 0;let d=new(c(614)).NoopTracer;class e{constructor(a,b,c,d){this._provider=a,this.name=b,this.version=c,this.options=d}startSpan(a,b,c){return this._getTracer().startSpan(a,b,c)}startActiveSpan(a,b,c,d){let e=this._getTracer();return Reflect.apply(e.startActiveSpan,e,arguments)}_getTracer(){if(this._delegate)return this._delegate;let a=this._provider.getDelegateTracer(this.name,this.version,this.options);return a?(this._delegate=a,this._delegate):d}}b.ProxyTracer=e},846:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.ProxyTracerProvider=void 0;let d=c(125),e=new(c(124)).NoopTracerProvider;class f{getTracer(a,b,c){var e;return null!=(e=this.getDelegateTracer(a,b,c))?e:new d.ProxyTracer(this,a,b,c)}getDelegate(){var a;return null!=(a=this._delegate)?a:e}setDelegate(a){this._delegate=a}getDelegateTracer(a,b,c){var d;return null==(d=this._delegate)?void 0:d.getTracer(a,b,c)}}b.ProxyTracerProvider=f},996:(a,b)=>{var c;Object.defineProperty(b,"__esModule",{value:!0}),b.SamplingDecision=void 0,(c=b.SamplingDecision||(b.SamplingDecision={}))[c.NOT_RECORD=0]="NOT_RECORD",c[c.RECORD=1]="RECORD",c[c.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"},607:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.getSpanContext=b.setSpanContext=b.deleteSpan=b.setSpan=b.getActiveSpan=b.getSpan=void 0;let d=c(780),e=c(403),f=c(491),g=(0,d.createContextKey)("OpenTelemetry Context Key SPAN");function h(a){return a.getValue(g)||void 0}function i(a,b){return a.setValue(g,b)}b.getSpan=h,b.getActiveSpan=function(){return h(f.ContextAPI.getInstance().active())},b.setSpan=i,b.deleteSpan=function(a){return a.deleteValue(g)},b.setSpanContext=function(a,b){return i(a,new e.NonRecordingSpan(b))},b.getSpanContext=function(a){var b;return null==(b=h(a))?void 0:b.spanContext()}},325:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.TraceStateImpl=void 0;let d=c(564);class e{constructor(a){this._internalState=new Map,a&&this._parse(a)}set(a,b){let c=this._clone();return c._internalState.has(a)&&c._internalState.delete(a),c._internalState.set(a,b),c}unset(a){let b=this._clone();return b._internalState.delete(a),b}get(a){return this._internalState.get(a)}serialize(){return this._keys().reduce((a,b)=>(a.push(b+"="+this.get(b)),a),[]).join(",")}_parse(a){!(a.length>512)&&(this._internalState=a.split(",").reverse().reduce((a,b)=>{let c=b.trim(),e=c.indexOf("=");if(-1!==e){let f=c.slice(0,e),g=c.slice(e+1,b.length);(0,d.validateKey)(f)&&(0,d.validateValue)(g)&&a.set(f,g)}return a},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let a=new e;return a._internalState=new Map(this._internalState),a}}b.TraceStateImpl=e},564:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.validateValue=b.validateKey=void 0;let c="[_0-9a-z-*/]",d=`[a-z]${c}{0,255}`,e=`[a-z0-9]${c}{0,240}@[a-z]${c}{0,13}`,f=RegExp(`^(?:${d}|${e})$`),g=/^[ -~]{0,255}[!-~]$/,h=/,|=/;b.validateKey=function(a){return f.test(a)},b.validateValue=function(a){return g.test(a)&&!h.test(a)}},98:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.createTraceState=void 0;let d=c(325);b.createTraceState=function(a){return new d.TraceStateImpl(a)}},476:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.INVALID_SPAN_CONTEXT=b.INVALID_TRACEID=b.INVALID_SPANID=void 0;let d=c(475);b.INVALID_SPANID="0000000000000000",b.INVALID_TRACEID="00000000000000000000000000000000",b.INVALID_SPAN_CONTEXT={traceId:b.INVALID_TRACEID,spanId:b.INVALID_SPANID,traceFlags:d.TraceFlags.NONE}},357:(a,b)=>{var c;Object.defineProperty(b,"__esModule",{value:!0}),b.SpanKind=void 0,(c=b.SpanKind||(b.SpanKind={}))[c.INTERNAL=0]="INTERNAL",c[c.SERVER=1]="SERVER",c[c.CLIENT=2]="CLIENT",c[c.PRODUCER=3]="PRODUCER",c[c.CONSUMER=4]="CONSUMER"},139:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.wrapSpanContext=b.isSpanContextValid=b.isValidSpanId=b.isValidTraceId=void 0;let d=c(476),e=c(403),f=/^([0-9a-f]{32})$/i,g=/^[0-9a-f]{16}$/i;function h(a){return f.test(a)&&a!==d.INVALID_TRACEID}function i(a){return g.test(a)&&a!==d.INVALID_SPANID}b.isValidTraceId=h,b.isValidSpanId=i,b.isSpanContextValid=function(a){return h(a.traceId)&&i(a.spanId)},b.wrapSpanContext=function(a){return new e.NonRecordingSpan(a)}},847:(a,b)=>{var c;Object.defineProperty(b,"__esModule",{value:!0}),b.SpanStatusCode=void 0,(c=b.SpanStatusCode||(b.SpanStatusCode={}))[c.UNSET=0]="UNSET",c[c.OK=1]="OK",c[c.ERROR=2]="ERROR"},475:(a,b)=>{var c;Object.defineProperty(b,"__esModule",{value:!0}),b.TraceFlags=void 0,(c=b.TraceFlags||(b.TraceFlags={}))[c.NONE=0]="NONE",c[c.SAMPLED=1]="SAMPLED"},521:(a,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.VERSION=void 0,b.VERSION="1.6.0"}},x={};function y(a){var b=x[a];if(void 0!==b)return b.exports;var c=x[a]={exports:{}},d=!0;try{w[a].call(c.exports,c,c.exports,y),d=!1}finally{d&&delete x[a]}return c.exports}y.ab=__dirname+"/";var z={};Object.defineProperty(z,"__esModule",{value:!0}),z.trace=z.propagation=z.metrics=z.diag=z.context=z.INVALID_SPAN_CONTEXT=z.INVALID_TRACEID=z.INVALID_SPANID=z.isValidSpanId=z.isValidTraceId=z.isSpanContextValid=z.createTraceState=z.TraceFlags=z.SpanStatusCode=z.SpanKind=z.SamplingDecision=z.ProxyTracerProvider=z.ProxyTracer=z.defaultTextMapSetter=z.defaultTextMapGetter=z.ValueType=z.createNoopMeter=z.DiagLogLevel=z.DiagConsoleLogger=z.ROOT_CONTEXT=z.createContextKey=z.baggageEntryMetadataFromString=void 0,g=y(369),Object.defineProperty(z,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return g.baggageEntryMetadataFromString}}),h=y(780),Object.defineProperty(z,"createContextKey",{enumerable:!0,get:function(){return h.createContextKey}}),Object.defineProperty(z,"ROOT_CONTEXT",{enumerable:!0,get:function(){return h.ROOT_CONTEXT}}),i=y(972),Object.defineProperty(z,"DiagConsoleLogger",{enumerable:!0,get:function(){return i.DiagConsoleLogger}}),j=y(957),Object.defineProperty(z,"DiagLogLevel",{enumerable:!0,get:function(){return j.DiagLogLevel}}),k=y(102),Object.defineProperty(z,"createNoopMeter",{enumerable:!0,get:function(){return k.createNoopMeter}}),l=y(901),Object.defineProperty(z,"ValueType",{enumerable:!0,get:function(){return l.ValueType}}),m=y(194),Object.defineProperty(z,"defaultTextMapGetter",{enumerable:!0,get:function(){return m.defaultTextMapGetter}}),Object.defineProperty(z,"defaultTextMapSetter",{enumerable:!0,get:function(){return m.defaultTextMapSetter}}),n=y(125),Object.defineProperty(z,"ProxyTracer",{enumerable:!0,get:function(){return n.ProxyTracer}}),o=y(846),Object.defineProperty(z,"ProxyTracerProvider",{enumerable:!0,get:function(){return o.ProxyTracerProvider}}),p=y(996),Object.defineProperty(z,"SamplingDecision",{enumerable:!0,get:function(){return p.SamplingDecision}}),q=y(357),Object.defineProperty(z,"SpanKind",{enumerable:!0,get:function(){return q.SpanKind}}),r=y(847),Object.defineProperty(z,"SpanStatusCode",{enumerable:!0,get:function(){return r.SpanStatusCode}}),s=y(475),Object.defineProperty(z,"TraceFlags",{enumerable:!0,get:function(){return s.TraceFlags}}),t=y(98),Object.defineProperty(z,"createTraceState",{enumerable:!0,get:function(){return t.createTraceState}}),u=y(139),Object.defineProperty(z,"isSpanContextValid",{enumerable:!0,get:function(){return u.isSpanContextValid}}),Object.defineProperty(z,"isValidTraceId",{enumerable:!0,get:function(){return u.isValidTraceId}}),Object.defineProperty(z,"isValidSpanId",{enumerable:!0,get:function(){return u.isValidSpanId}}),v=y(476),Object.defineProperty(z,"INVALID_SPANID",{enumerable:!0,get:function(){return v.INVALID_SPANID}}),Object.defineProperty(z,"INVALID_TRACEID",{enumerable:!0,get:function(){return v.INVALID_TRACEID}}),Object.defineProperty(z,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return v.INVALID_SPAN_CONTEXT}}),b=y(67),Object.defineProperty(z,"context",{enumerable:!0,get:function(){return b.context}}),c=y(506),Object.defineProperty(z,"diag",{enumerable:!0,get:function(){return c.diag}}),d=y(886),Object.defineProperty(z,"metrics",{enumerable:!0,get:function(){return d.metrics}}),e=y(939),Object.defineProperty(z,"propagation",{enumerable:!0,get:function(){return e.propagation}}),f=y(845),Object.defineProperty(z,"trace",{enumerable:!0,get:function(){return f.trace}}),z.default={context:b.context,diag:c.diag,metrics:d.metrics,propagation:e.propagation,trace:f.trace},a.exports=z})()},1365:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"computeCacheBustingSearchParam",{enumerable:!0,get:function(){return e}});let d=c(4987);function e(a,b,c,e){return(void 0===a||"0"===a)&&void 0===b&&void 0===c&&void 0===e?"":(0,d.hexHash)([a||"0",b||"0",c||"0",e||"0"].join(","))}},1573:(a,b,c)=>{var d=c(9428).Buffer;a.exports=function(a){return"string"==typeof a?a:"number"==typeof a||d.isBuffer(a)?a.toString():JSON.stringify(a)}},1621:(a,b,c)=>{"use strict";let d,e,f,g,h;c.r(b),c.d(b,{"7f1b93d6f3d6719dec90ae789e11bb25ea35cf28e1":()=>ey});var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a$,a_,a0,a1,a2,a3,a4,a5,a6,a7,a8,a9,ba,bb,bc,bd,be=c(5349);c(2817);var bf=c(6199),bg=c(9021);let bh=require("fs/promises");var bi=c(7075);let bj=require("node:stream/promises");c(9407),c(4452),c(1256);var bk=c(2804);c(952);var bl=c(3873);class bm{}function bn(a,b){return a.replace(/\{([^}]+)\}/g,(a,c)=>{if(Object.prototype.hasOwnProperty.call(b,c)){let a=b[c];return null!=a?String(a):""}throw Error(`Key '${c}' not found in valueMap.`)})}function bo(a,b,c){for(let d=0;d<b.length-1;d++){let e=b[d];if(e.endsWith("[]")){let f=e.slice(0,-2);if(!(f in a))if(Array.isArray(c))a[f]=Array.from({length:c.length},()=>({}));else throw Error(`Value must be a list given an array path ${e}`);if(Array.isArray(a[f])){let e=a[f];if(Array.isArray(c))for(let a=0;a<e.length;a++)bo(e[a],b.slice(d+1),c[a]);else for(let a of e)bo(a,b.slice(d+1),c)}return}if(e.endsWith("[0]")){let f=e.slice(0,-3);f in a||(a[f]=[{}]),bo(a[f][0],b.slice(d+1),c);return}a[e]&&"object"==typeof a[e]||(a[e]={}),a=a[e]}let d=b[b.length-1],e=a[d];if(void 0!==e){if(!c||"object"==typeof c&&0===Object.keys(c).length||c===e)return;if("object"==typeof e&&"object"==typeof c&&null!==e&&null!==c)Object.assign(e,c);else throw Error(`Cannot set value for an existing key. Key: ${d}`)}else"_self"!==d||"object"!=typeof c||null===c||Array.isArray(c)?a[d]=c:Object.assign(a,c)}function bp(a,b,c){try{if(1===b.length&&"_self"===b[0])return a;for(let d=0;d<b.length;d++){if("object"!=typeof a||null===a)return c;let e=b[d];if(e.endsWith("[]")){let f=e.slice(0,-2);if(!(f in a))return c;{let e=a[f];if(!Array.isArray(e))return c;return e.map(a=>bp(a,b.slice(d+1),c))}}a=a[e]}return a}catch(a){if(a instanceof TypeError)return c;throw a}}function bq(a){if("string"!=typeof a)throw Error("fromImageBytes must be a string");return a}function br(a){var b;let c,d,e,f,g={},h=bp(a,["name"]);null!=h&&bo(g,["name"],h);let i=bp(a,["metadata"]);null!=i&&bo(g,["metadata"],i);let j=bp(a,["done"]);null!=j&&bo(g,["done"],j);let k=bp(a,["error"]);null!=k&&bo(g,["error"],k);let l=bp(a,["response"]);return null!=l&&bo(g,["response"],(c={},null!=(d=bp(b=l,["sdkHttpResponse"]))&&bo(c,["sdkHttpResponse"],d),null!=(e=bp(b,["parent"]))&&bo(c,["parent"],e),null!=(f=bp(b,["documentName"]))&&bo(c,["documentName"],f),c)),g}(i=al||(al={})).OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED",(j=am||(am={})).LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",j.PYTHON="PYTHON",(k=an||(an={})).SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",k.SILENT="SILENT",k.WHEN_IDLE="WHEN_IDLE",k.INTERRUPT="INTERRUPT",(l=ao||(ao={})).TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",l.STRING="STRING",l.NUMBER="NUMBER",l.INTEGER="INTEGER",l.BOOLEAN="BOOLEAN",l.ARRAY="ARRAY",l.OBJECT="OBJECT",l.NULL="NULL",(m=ap||(ap={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",m.MODE_DYNAMIC="MODE_DYNAMIC",(n=aq||(aq={})).API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH",(o=ar||(ar={})).AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",o.NO_AUTH="NO_AUTH",o.API_KEY_AUTH="API_KEY_AUTH",o.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",o.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",o.OAUTH="OAUTH",o.OIDC_AUTH="OIDC_AUTH",(p=as||(as={})).HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",p.HTTP_IN_QUERY="HTTP_IN_QUERY",p.HTTP_IN_HEADER="HTTP_IN_HEADER",p.HTTP_IN_PATH="HTTP_IN_PATH",p.HTTP_IN_BODY="HTTP_IN_BODY",p.HTTP_IN_COOKIE="HTTP_IN_COOKIE",(q=at||(at={})).PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",q.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",q.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",q.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",q.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",q.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",q.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH",(r=au||(au={})).THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",r.LOW="LOW",r.HIGH="HIGH",(s=av||(av={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",s.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",s.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",s.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",s.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",s.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",s.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",s.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",s.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",s.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",s.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK",(t=aw||(aw={})).HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY",(u=ax||(ax={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",u.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",u.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",u.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",u.BLOCK_NONE="BLOCK_NONE",u.OFF="OFF",(v=ay||(ay={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",v.STOP="STOP",v.MAX_TOKENS="MAX_TOKENS",v.SAFETY="SAFETY",v.RECITATION="RECITATION",v.LANGUAGE="LANGUAGE",v.OTHER="OTHER",v.BLOCKLIST="BLOCKLIST",v.PROHIBITED_CONTENT="PROHIBITED_CONTENT",v.SPII="SPII",v.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",v.IMAGE_SAFETY="IMAGE_SAFETY",v.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",v.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",v.NO_IMAGE="NO_IMAGE",v.IMAGE_RECITATION="IMAGE_RECITATION",v.IMAGE_OTHER="IMAGE_OTHER",(w=az||(az={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",w.NEGLIGIBLE="NEGLIGIBLE",w.LOW="LOW",w.MEDIUM="MEDIUM",w.HIGH="HIGH",(x=aA||(aA={})).HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",x.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",x.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",x.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",x.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH",(y=aB||(aB={})).URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",y.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",y.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",y.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",y.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE",(z=aC||(aC={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",z.SAFETY="SAFETY",z.OTHER="OTHER",z.BLOCKLIST="BLOCKLIST",z.PROHIBITED_CONTENT="PROHIBITED_CONTENT",z.IMAGE_SAFETY="IMAGE_SAFETY",z.MODEL_ARMOR="MODEL_ARMOR",z.JAILBREAK="JAILBREAK",(A=aD||(aD={})).TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",A.ON_DEMAND="ON_DEMAND",A.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT",(B=aE||(aE={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",B.TEXT="TEXT",B.IMAGE="IMAGE",B.AUDIO="AUDIO",(C=aF||(aF={})).MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",C.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",C.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",C.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",(D=aG||(aG={})).TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",D.TUNING_MODE_FULL="TUNING_MODE_FULL",D.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER",(E=aH||(aH={})).ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",E.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",E.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",E.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",E.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",E.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",E.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO",(F=aI||(aI={})).JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",F.JOB_STATE_QUEUED="JOB_STATE_QUEUED",F.JOB_STATE_PENDING="JOB_STATE_PENDING",F.JOB_STATE_RUNNING="JOB_STATE_RUNNING",F.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",F.JOB_STATE_FAILED="JOB_STATE_FAILED",F.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",F.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",F.JOB_STATE_PAUSED="JOB_STATE_PAUSED",F.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",F.JOB_STATE_UPDATING="JOB_STATE_UPDATING",F.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",(G=aJ||(aJ={})).TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",G.TUNING_TASK_I2V="TUNING_TASK_I2V",G.TUNING_TASK_T2V="TUNING_TASK_T2V",G.TUNING_TASK_R2V="TUNING_TASK_R2V",(H=aK||(aK={})).MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",H.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",H.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",H.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",(I=aL||(aL={})).FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",I.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",I.BALANCED="BALANCED",I.PRIORITIZE_COST="PRIORITIZE_COST",(J=aM||(aM={})).UNSPECIFIED="UNSPECIFIED",J.BLOCKING="BLOCKING",J.NON_BLOCKING="NON_BLOCKING",(K=aN||(aN={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",K.MODE_DYNAMIC="MODE_DYNAMIC",(L=aO||(aO={})).ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",L.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER",(M=aP||(aP={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",M.AUTO="AUTO",M.ANY="ANY",M.NONE="NONE",M.VALIDATED="VALIDATED",(N=aQ||(aQ={})).BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",N.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",N.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",N.BLOCK_NONE="BLOCK_NONE",(O=aR||(aR={})).DONT_ALLOW="DONT_ALLOW",O.ALLOW_ADULT="ALLOW_ADULT",O.ALLOW_ALL="ALLOW_ALL",(P=aS||(aS={})).auto="auto",P.en="en",P.ja="ja",P.ko="ko",P.hi="hi",P.zh="zh",P.pt="pt",P.es="es",(Q=aT||(aT={})).MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",Q.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",Q.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",Q.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",Q.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC",(R=aU||(aU={})).CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",R.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",R.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",R.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH",(S=aV||(aV={})).SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",S.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",S.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",S.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT",(T=aW||(aW={})).EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",T.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",T.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",T.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",T.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",T.EDIT_MODE_STYLE="EDIT_MODE_STYLE",T.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",T.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE",(U=aX||(aX={})).FOREGROUND="FOREGROUND",U.BACKGROUND="BACKGROUND",U.PROMPT="PROMPT",U.SEMANTIC="SEMANTIC",U.INTERACTIVE="INTERACTIVE",(V=aY||(aY={})).ASSET="ASSET",V.STYLE="STYLE",(W=aZ||(aZ={})).INSERT="INSERT",W.REMOVE="REMOVE",W.REMOVE_STATIC="REMOVE_STATIC",W.OUTPAINT="OUTPAINT",(X=a$||(a$={})).OPTIMIZED="OPTIMIZED",X.LOSSLESS="LOSSLESS",(Y=a_||(a_={})).SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",Y.PREFERENCE_TUNING="PREFERENCE_TUNING",(Z=a0||(a0={})).STATE_UNSPECIFIED="STATE_UNSPECIFIED",Z.STATE_PENDING="STATE_PENDING",Z.STATE_ACTIVE="STATE_ACTIVE",Z.STATE_FAILED="STATE_FAILED",($=a1||(a1={})).STATE_UNSPECIFIED="STATE_UNSPECIFIED",$.PROCESSING="PROCESSING",$.ACTIVE="ACTIVE",$.FAILED="FAILED",(_=a2||(a2={})).SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",_.UPLOADED="UPLOADED",_.GENERATED="GENERATED",(aa=a3||(a3={})).TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",aa.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",aa.RESPONSE_REJECTED="RESPONSE_REJECTED",aa.NEED_MORE_INPUT="NEED_MORE_INPUT",(ab=a4||(a4={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",ab.TEXT="TEXT",ab.IMAGE="IMAGE",ab.VIDEO="VIDEO",ab.AUDIO="AUDIO",ab.DOCUMENT="DOCUMENT",(ac=a5||(a5={})).VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",ac.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",ac.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS",(ad=a6||(a6={})).START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",ad.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",ad.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW",(ae=a7||(a7={})).END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",ae.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",ae.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW",(af=a8||(a8={})).ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",af.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",af.NO_INTERRUPTION="NO_INTERRUPTION",(ag=a9||(a9={})).TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",ag.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",ag.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT",(ah=ba||(ba={})).SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",ah.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",ah.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",ah.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",ah.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",ah.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",ah.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",ah.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",ah.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",ah.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",ah.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",ah.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",ah.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR",(ai=bb||(bb={})).MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",ai.QUALITY="QUALITY",ai.DIVERSITY="DIVERSITY",ai.VOCALIZATION="VOCALIZATION",(aj=bc||(bc={})).PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",aj.PLAY="PLAY",aj.PAUSE="PAUSE",aj.STOP="STOP",aj.RESET_CONTEXT="RESET_CONTEXT";class bs{constructor(a){const b={};for(const c of a.headers.entries())b[c[0]]=c[1];this.headers=b,this.responseInternal=a}json(){return this.responseInternal.json()}}class bt{get text(){var a,b,c,d,e,f,g,h;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let i="",j=!1,k=[];for(let a of null!=(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?h:[]){for(let[b,c]of Object.entries(a))"text"!==b&&"thought"!==b&&"thoughtSignature"!==b&&(null!==c||void 0!==c)&&k.push(b);if("string"==typeof a.text){if("boolean"==typeof a.thought&&a.thought)continue;j=!0,i+=a.text}}return k.length>0&&console.warn(`there are non-text parts ${k} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),j?i:void 0}get data(){var a,b,c,d,e,f,g,h;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let i="",j=[];for(let a of null!=(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?h:[]){for(let[b,c]of Object.entries(a))"inlineData"!==b&&(null!==c||void 0!==c)&&j.push(b);a.inlineData&&"string"==typeof a.inlineData.data&&(i+=atob(a.inlineData.data))}return j.length>0&&console.warn(`there are non-data parts ${j} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}get functionCalls(){var a,b,c,d,e,f,g,h;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let i=null==(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?void 0:h.filter(a=>a.functionCall).map(a=>a.functionCall).filter(a=>void 0!==a);if((null==i?void 0:i.length)!==0)return i}get executableCode(){var a,b,c,d,e,f,g,h,i;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let j=null==(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?void 0:h.filter(a=>a.executableCode).map(a=>a.executableCode).filter(a=>void 0!==a);if((null==j?void 0:j.length)!==0)return null==(i=null==j?void 0:j[0])?void 0:i.code}get codeExecutionResult(){var a,b,c,d,e,f,g,h,i;if((null==(d=null==(c=null==(b=null==(a=this.candidates)?void 0:a[0])?void 0:b.content)?void 0:c.parts)?void 0:d.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let j=null==(h=null==(g=null==(f=null==(e=this.candidates)?void 0:e[0])?void 0:f.content)?void 0:g.parts)?void 0:h.filter(a=>a.codeExecutionResult).map(a=>a.codeExecutionResult).filter(a=>void 0!==a);if((null==j?void 0:j.length)!==0)return null==(i=null==j?void 0:j[0])?void 0:i.output}}class bu{}class bv{}class bw{}class bx{}class by{}class bz{}class bA{}class bB{}class bC{}class bD{}class bE{_fromAPIResponse({apiResponse:a,_isVertexAI:b}){let c,d=new bE;if(b){let b,d,e,f,g,h;b={},null!=(d=bp(a,["name"]))&&bo(b,["name"],d),null!=(e=bp(a,["metadata"]))&&bo(b,["metadata"],e),null!=(f=bp(a,["done"]))&&bo(b,["done"],f),null!=(g=bp(a,["error"]))&&bo(b,["error"],g),null!=(h=bp(a,["response"]))&&bo(b,["response"],function(a){let b={},c=bp(a,["videos"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e,f,g,h;return c={},null!=(d=bp(a,["_self"]))&&bo(c,["video"],(e={},null!=(f=bp(b=d,["gcsUri"]))&&bo(e,["uri"],f),null!=(g=bp(b,["bytesBase64Encoded"]))&&bo(e,["videoBytes"],bq(g)),null!=(h=bp(b,["mimeType"]))&&bo(e,["mimeType"],h),e)),c})),bo(b,["generatedVideos"],a)}let d=bp(a,["raiMediaFilteredCount"]);null!=d&&bo(b,["raiMediaFilteredCount"],d);let e=bp(a,["raiMediaFilteredReasons"]);return null!=e&&bo(b,["raiMediaFilteredReasons"],e),b}(h)),c=b}else{let b,d,e,f,g,h;b={},null!=(d=bp(a,["name"]))&&bo(b,["name"],d),null!=(e=bp(a,["metadata"]))&&bo(b,["metadata"],e),null!=(f=bp(a,["done"]))&&bo(b,["done"],f),null!=(g=bp(a,["error"]))&&bo(b,["error"],g),null!=(h=bp(a,["response","generateVideoResponse"]))&&bo(b,["response"],function(a){let b={},c=bp(a,["generatedSamples"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e,f,g,h;return c={},null!=(d=bp(a,["video"]))&&bo(c,["video"],(e={},null!=(f=bp(b=d,["uri"]))&&bo(e,["uri"],f),null!=(g=bp(b,["encodedVideo"]))&&bo(e,["videoBytes"],bq(g)),null!=(h=bp(b,["encoding"]))&&bo(e,["mimeType"],h),e)),c})),bo(b,["generatedVideos"],a)}let d=bp(a,["raiMediaFilteredCount"]);null!=d&&bo(b,["raiMediaFilteredCount"],d);let e=bp(a,["raiMediaFilteredReasons"]);return null!=e&&bo(b,["raiMediaFilteredReasons"],e),b}(h)),c=b}return Object.assign(d,c),d}}class bF{}class bG{}class bH{}class bI{}class bJ{}class bK{}class bL{}class bM{_fromAPIResponse({apiResponse:a,_isVertexAI:b}){var c;let d,e,f,g,h,i,j,k,l,m,n=new bM;return Object.assign(n,(h={},null!=(i=bp(a,["name"]))&&bo(h,["name"],i),null!=(j=bp(a,["metadata"]))&&bo(h,["metadata"],j),null!=(k=bp(a,["done"]))&&bo(h,["done"],k),null!=(l=bp(a,["error"]))&&bo(h,["error"],l),null!=(m=bp(a,["response"]))&&bo(h,["response"],(d={},null!=(e=bp(c=m,["sdkHttpResponse"]))&&bo(d,["sdkHttpResponse"],e),null!=(f=bp(c,["parent"]))&&bo(d,["parent"],f),null!=(g=bp(c,["documentName"]))&&bo(d,["documentName"],g),d)),h)),n}}class bN{}class bO{}class bP{}class bQ{}class bR{get text(){var a,b,c;let d="",e=!1,f=[];for(let g of null!=(c=null==(b=null==(a=this.serverContent)?void 0:a.modelTurn)?void 0:b.parts)?c:[]){for(let[a,b]of Object.entries(g))"text"!==a&&"thought"!==a&&null!==b&&f.push(a);if("string"==typeof g.text){if("boolean"==typeof g.thought&&g.thought)continue;e=!0,d+=g.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),e?d:void 0}get data(){var a,b,c;let d="",e=[];for(let f of null!=(c=null==(b=null==(a=this.serverContent)?void 0:a.modelTurn)?void 0:b.parts)?c:[]){for(let[a,b]of Object.entries(f))"inlineData"!==a&&null!==b&&e.push(a);f.inlineData&&"string"==typeof f.inlineData.data&&(d+=atob(f.inlineData.data))}return e.length>0&&console.warn(`there are non-data parts ${e} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}}class bS{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class bT{_fromAPIResponse({apiResponse:a,_isVertexAI:b}){let c=new bT;return Object.assign(c,br(a)),c}}function bU(a,b){if(!b||"string"!=typeof b)throw Error("model is required and must be a string");if(b.includes("..")||b.includes("?")||b.includes("&"))throw Error("invalid model parameter");if(a.isVertexAI())if(b.startsWith("publishers/")||b.startsWith("projects/")||b.startsWith("models/"))return b;else{if(!(b.indexOf("/")>=0))return`publishers/google/models/${b}`;let a=b.split("/",2);return`publishers/${a[0]}/models/${a[1]}`}return b.startsWith("models/")||b.startsWith("tunedModels/")?b:`models/${b}`}function bV(a,b){let c=bU(a,b);return c?c.startsWith("publishers/")&&a.isVertexAI()?`projects/${a.getProject()}/locations/${a.getLocation()}/${c}`:c.startsWith("models/")&&a.isVertexAI()?`projects/${a.getProject()}/locations/${a.getLocation()}/publishers/google/${c}`:c:""}function bW(a){return Array.isArray(a)?a.map(a=>bX(a)):[bX(a)]}function bX(a){if("object"==typeof a&&null!==a)return a;throw Error(`Could not parse input as Blob. Unsupported blob type: ${typeof a}`)}function bY(a){let b=bX(a);if(b.mimeType&&b.mimeType.startsWith("image/"))return b;throw Error(`Unsupported mime type: ${b.mimeType}`)}function bZ(a){let b=bX(a);if(b.mimeType&&b.mimeType.startsWith("audio/"))return b;throw Error(`Unsupported mime type: ${b.mimeType}`)}function b$(a){if(null==a)throw Error("PartUnion is required");if("object"==typeof a)return a;if("string"==typeof a)return{text:a};throw Error(`Unsupported part type: ${typeof a}`)}function b_(a){if(null==a||Array.isArray(a)&&0===a.length)throw Error("PartListUnion is required");return Array.isArray(a)?a.map(a=>b$(a)):[b$(a)]}function b0(a){return null!=a&&"object"==typeof a&&"parts"in a&&Array.isArray(a.parts)}function b1(a){return null!=a&&"object"==typeof a&&"functionCall"in a}function b2(a){return null!=a&&"object"==typeof a&&"functionResponse"in a}function b3(a){if(null==a)throw Error("ContentUnion is required");return b0(a)?a:{role:"user",parts:b_(a)}}function b4(a,b){if(!b)return[];if(a.isVertexAI()&&Array.isArray(b))return b.flatMap(a=>{let b=b3(a);return b.parts&&b.parts.length>0&&void 0!==b.parts[0].text?[b.parts[0].text]:[]});if(a.isVertexAI()){let a=b3(b);return a.parts&&a.parts.length>0&&void 0!==a.parts[0].text?[a.parts[0].text]:[]}return Array.isArray(b)?b.map(a=>b3(a)):[b3(b)]}function b5(a){if(null==a||Array.isArray(a)&&0===a.length)throw Error("contents are required");if(!Array.isArray(a)){if(b1(a)||b2(a))throw Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[b3(a)]}let b=[],c=[],d=b0(a[0]);for(let e of a){let a=b0(e);if(a!=d)throw Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)b.push(e);else if(b1(e)||b2(e))throw Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");else c.push(e)}return d||b.push({role:"user",parts:b_(c)}),b}function b6(a){let b={},c=["items"],d=["anyOf"],e=["properties"];if(a.type&&a.anyOf)throw Error("type and anyOf cannot be both populated.");let f=a.anyOf;for(let[g,h]of(null!=f&&2==f.length&&("null"===f[0].type?(b.nullable=!0,a=f[1]):"null"===f[1].type&&(b.nullable=!0,a=f[0])),a.type instanceof Array&&function(a,b){a.includes("null")&&(b.nullable=!0);let c=a.filter(a=>"null"!==a);if(1===c.length)b.type=Object.values(ao).includes(c[0].toUpperCase())?c[0].toUpperCase():ao.TYPE_UNSPECIFIED;else for(let a of(b.anyOf=[],c))b.anyOf.push({type:Object.values(ao).includes(a.toUpperCase())?a.toUpperCase():ao.TYPE_UNSPECIFIED})}(a.type,b),Object.entries(a)))if(null!=h)if("type"==g){if("null"===h)throw Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;b.type=Object.values(ao).includes(h.toUpperCase())?h.toUpperCase():ao.TYPE_UNSPECIFIED}else if(c.includes(g))b[g]=b6(h);else if(d.includes(g)){let a=[];for(let c of h){if("null"==c.type){b.nullable=!0;continue}a.push(b6(c))}b[g]=a}else if(e.includes(g)){let a={};for(let[b,c]of Object.entries(h))a[b]=b6(c);b[g]=a}else{if("additionalProperties"===g)continue;b[g]=h}return b}function b7(a){if("object"==typeof a)return a;if("string"==typeof a)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:a}}};throw Error(`Unsupported speechConfig type: ${typeof a}`)}function b8(a){if("multiSpeakerVoiceConfig"in a)throw Error("multiSpeakerVoiceConfig is not supported in the live API.");return a}function b9(a){if(a.functionDeclarations)for(let b of a.functionDeclarations)b.parameters&&(Object.keys(b.parameters).includes("$schema")?b.parametersJsonSchema||(b.parametersJsonSchema=b.parameters,delete b.parameters):b.parameters=b6(b.parameters)),b.response&&(Object.keys(b.response).includes("$schema")?b.responseJsonSchema||(b.responseJsonSchema=b.response,delete b.response):b.response=b6(b.response));return a}function ca(a){if(null==a)throw Error("tools is required");if(!Array.isArray(a))throw Error("tools is required and must be an array of Tools");let b=[];for(let c of a)b.push(c);return b}function cb(a,b){if("string"!=typeof b)throw Error("name must be a string");return function(a,b,c,d=1){let e=!b.startsWith(`${c}/`)&&b.split("/").length===d;if(a.isVertexAI())if(b.startsWith("projects/"))return b;else if(b.startsWith("locations/"))return`projects/${a.getProject()}/${b}`;else if(b.startsWith(`${c}/`))return`projects/${a.getProject()}/locations/${a.getLocation()}/${b}`;else if(e)return`projects/${a.getProject()}/locations/${a.getLocation()}/${c}/${b}`;else return b;return e?`${c}/${b}`:b}(a,b,"cachedContents")}function cc(a){switch(a){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return a}}function cd(a){return null!=a&&"object"==typeof a&&"video"in a}function ce(a){return null!=a&&"object"==typeof a&&"uri"in a}function cf(a){var b;let c;if(null!=a&&"object"==typeof a&&"name"in a&&(c=a.name),!ce(a)||void 0!==(c=a.uri)){if(!cd(a)||void 0!==(c=null==(b=a.video)?void 0:b.uri)){if("string"==typeof a&&(c=a),void 0===c)throw Error("Could not extract file name from the provided input.");if(c.startsWith("https://")){let a=c.split("files/")[1].match(/[a-z0-9]+/);if(null===a)throw Error(`Could not extract file name from URI ${c}`);c=a[0]}else c.startsWith("files/")&&(c=c.split("files/")[1]);return c}}}function cg(a,b){return a.isVertexAI()?b?"publishers/google/models":"models":b?"models":"tunedModels"}function ch(a){for(let d of["models","tunedModels","publisherModels"]){var b,c;if(b=a,c=d,null!==b&&"object"==typeof b&&c in b)return a[d]}return[]}function ci(a,b){let c;if("string"==typeof b)if(a.isVertexAI())if(b.startsWith("gs://"))c={format:"jsonl",gcsUri:[b]};else if(b.startsWith("bq://"))c={format:"bigquery",bigqueryUri:b};else throw Error(`Unsupported string source for Vertex AI: ${b}`);else if(b.startsWith("files/"))c={fileName:b};else throw Error(`Unsupported string source for Gemini API: ${b}`);else if(Array.isArray(b)){if(a.isVertexAI())throw Error("InlinedRequest[] is not supported in Vertex AI.");c={inlinedRequests:b}}else c=b;let d=[c.gcsUri,c.bigqueryUri].filter(Boolean).length,e=[c.inlinedRequests,c.fileName].filter(Boolean).length;if(a.isVertexAI()){if(e>0||1!==d)throw Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(d>0||1!==e)throw Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return c}function cj(a){if("object"!=typeof a||null===a)return{};let b=a.inlinedResponses;if("object"!=typeof b||null===b)return a;let c=b.inlinedResponses;if(!Array.isArray(c)||0===c.length)return a;let d=!1;for(let a of c){if("object"!=typeof a||null===a)continue;let b=a.response;if("object"==typeof b&&null!==b&&void 0!==b.embedding){d=!0;break}}return d&&(a.inlinedEmbedContentResponses=a.inlinedResponses,delete a.inlinedResponses),a}function ck(a,b){if(!a.isVertexAI()){if(/batches\/[^/]+$/.test(b))return b.split("/").pop();throw Error(`Invalid batch job name: ${b}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(b))return b.split("/").pop();if(/^\d+$/.test(b))return b;throw Error(`Invalid batch job name: ${b}.`)}function cl(a){if("BATCH_STATE_UNSPECIFIED"===a)return"JOB_STATE_UNSPECIFIED";if("BATCH_STATE_PENDING"===a)return"JOB_STATE_PENDING";if("BATCH_STATE_RUNNING"===a)return"JOB_STATE_RUNNING";if("BATCH_STATE_SUCCEEDED"===a)return"JOB_STATE_SUCCEEDED";if("BATCH_STATE_FAILED"===a)return"JOB_STATE_FAILED";else if("BATCH_STATE_CANCELLED"===a)return"JOB_STATE_CANCELLED";else if("BATCH_STATE_EXPIRED"===a)return"JOB_STATE_EXPIRED";else return a}function cm(a){let b={},c=bp(a,["name"]);null!=c&&bo(b,["name"],c);let d=bp(a,["metadata","displayName"]);null!=d&&bo(b,["displayName"],d);let e=bp(a,["metadata","state"]);null!=e&&bo(b,["state"],cl(e));let f=bp(a,["metadata","createTime"]);null!=f&&bo(b,["createTime"],f);let g=bp(a,["metadata","endTime"]);null!=g&&bo(b,["endTime"],g);let h=bp(a,["metadata","updateTime"]);null!=h&&bo(b,["updateTime"],h);let i=bp(a,["metadata","model"]);null!=i&&bo(b,["model"],i);let j=bp(a,["metadata","output"]);return null!=j&&bo(b,["dest"],function(a){let b={},c=bp(a,["responsesFile"]);null!=c&&bo(b,["fileName"],c);let d=bp(a,["inlinedResponses","inlinedResponses"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e;return c={},null!=(d=bp(b=a,["response"]))&&bo(c,["response"],function(a){let b={},c=bp(a,["sdkHttpResponse"]);null!=c&&bo(b,["sdkHttpResponse"],c);let d=bp(a,["candidates"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=bp(a,["content"]);null!=c&&bo(b,["content"],c);let d=bp(a,["citationMetadata"]);null!=d&&bo(b,["citationMetadata"],function(a){let b={},c=bp(a,["citationSources"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["citations"],a)}return b}(d));let e=bp(a,["tokenCount"]);null!=e&&bo(b,["tokenCount"],e);let f=bp(a,["finishReason"]);null!=f&&bo(b,["finishReason"],f);let g=bp(a,["avgLogprobs"]);null!=g&&bo(b,["avgLogprobs"],g);let h=bp(a,["groundingMetadata"]);null!=h&&bo(b,["groundingMetadata"],h);let i=bp(a,["index"]);null!=i&&bo(b,["index"],i);let j=bp(a,["logprobsResult"]);null!=j&&bo(b,["logprobsResult"],j);let k=bp(a,["safetyRatings"]);if(null!=k){let a=k;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["safetyRatings"],a)}let l=bp(a,["urlContextMetadata"]);return null!=l&&bo(b,["urlContextMetadata"],l),b})(a))),bo(b,["candidates"],a)}let e=bp(a,["modelVersion"]);null!=e&&bo(b,["modelVersion"],e);let f=bp(a,["promptFeedback"]);null!=f&&bo(b,["promptFeedback"],f);let g=bp(a,["responseId"]);null!=g&&bo(b,["responseId"],g);let h=bp(a,["usageMetadata"]);return null!=h&&bo(b,["usageMetadata"],h),b}(d)),null!=(e=bp(b,["error"]))&&bo(c,["error"],e),c})),bo(b,["inlinedResponses"],a)}let e=bp(a,["inlinedEmbedContentResponses","inlinedResponses"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["inlinedEmbedContentResponses"],a)}return b}(cj(j))),b}function cn(a){var b,c;let d,e,f,g,h,i,j,k,l={},m=bp(a,["name"]);null!=m&&bo(l,["name"],m);let n=bp(a,["displayName"]);null!=n&&bo(l,["displayName"],n);let o=bp(a,["state"]);null!=o&&bo(l,["state"],cl(o));let p=bp(a,["error"]);null!=p&&bo(l,["error"],p);let q=bp(a,["createTime"]);null!=q&&bo(l,["createTime"],q);let r=bp(a,["startTime"]);null!=r&&bo(l,["startTime"],r);let s=bp(a,["endTime"]);null!=s&&bo(l,["endTime"],s);let t=bp(a,["updateTime"]);null!=t&&bo(l,["updateTime"],t);let u=bp(a,["model"]);null!=u&&bo(l,["model"],u);let v=bp(a,["inputConfig"]);null!=v&&bo(l,["src"],(d={},null!=(e=bp(c=v,["instancesFormat"]))&&bo(d,["format"],e),null!=(f=bp(c,["gcsSource","uris"]))&&bo(d,["gcsUri"],f),null!=(g=bp(c,["bigquerySource","inputUri"]))&&bo(d,["bigqueryUri"],g),d));let w=bp(a,["outputConfig"]);null!=w&&bo(l,["dest"],(b=cj(w),h={},null!=(i=bp(b,["predictionsFormat"]))&&bo(h,["format"],i),null!=(j=bp(b,["gcsDestination","outputUriPrefix"]))&&bo(h,["gcsUri"],j),null!=(k=bp(b,["bigqueryDestination","outputUri"]))&&bo(h,["bigqueryUri"],k),h));let x=bp(a,["completionStats"]);return null!=x&&bo(l,["completionStats"],x),l}function co(a){let b={},c=bp(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e,f,g,h,i,j,k,l,m,n;return c={},null!=(d=bp(b=a,["mediaResolution"]))&&bo(c,["mediaResolution"],d),null!=(e=bp(b,["codeExecutionResult"]))&&bo(c,["codeExecutionResult"],e),null!=(f=bp(b,["executableCode"]))&&bo(c,["executableCode"],f),null!=(g=bp(b,["fileData"]))&&bo(c,["fileData"],function(a){let b={};if(void 0!==bp(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=bp(a,["fileUri"]);null!=c&&bo(b,["fileUri"],c);let d=bp(a,["mimeType"]);return null!=d&&bo(b,["mimeType"],d),b}(g)),null!=(h=bp(b,["functionCall"]))&&bo(c,["functionCall"],function(a){let b={},c=bp(a,["id"]);null!=c&&bo(b,["id"],c);let d=bp(a,["args"]);null!=d&&bo(b,["args"],d);let e=bp(a,["name"]);if(null!=e&&bo(b,["name"],e),void 0!==bp(a,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==bp(a,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return b}(h)),null!=(i=bp(b,["functionResponse"]))&&bo(c,["functionResponse"],i),null!=(j=bp(b,["inlineData"]))&&bo(c,["inlineData"],function(a){let b={},c=bp(a,["data"]);if(null!=c&&bo(b,["data"],c),void 0!==bp(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=bp(a,["mimeType"]);return null!=d&&bo(b,["mimeType"],d),b}(j)),null!=(k=bp(b,["text"]))&&bo(c,["text"],k),null!=(l=bp(b,["thought"]))&&bo(c,["thought"],l),null!=(m=bp(b,["thoughtSignature"]))&&bo(c,["thoughtSignature"],m),null!=(n=bp(b,["videoMetadata"]))&&bo(c,["videoMetadata"],n),c})),bo(b,["parts"],a)}let d=bp(a,["role"]);return null!=d&&bo(b,["role"],d),b}function cp(a,b){let c={},d=bp(b,["model"]);null!=d&&bo(c,["_url","model"],bU(a,d));let e=bp(b,["src"]);null!=e&&bo(c,["batch","inputConfig"],function(a,b){let c={};if(void 0!==bp(b,["format"]))throw Error("format parameter is not supported in Gemini API.");if(void 0!==bp(b,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==bp(b,["bigqueryUri"]))throw Error("bigqueryUri parameter is not supported in Gemini API.");let d=bp(b,["fileName"]);null!=d&&bo(c,["fileName"],d);let e=bp(b,["inlinedRequests"]);if(null!=e){let b=e;Array.isArray(b)&&(b=b.map(b=>(function(a,b){let c={},d=bp(b,["model"]);null!=d&&bo(c,["request","model"],bU(a,d));let e=bp(b,["contents"]);if(null!=e){let a=b5(e);Array.isArray(a)&&(a=a.map(a=>co(a))),bo(c,["request","contents"],a)}let f=bp(b,["metadata"]);null!=f&&bo(c,["metadata"],f);let g=bp(b,["config"]);return null!=g&&bo(c,["request","generationConfig"],function(a,b,c){var d;let e,f,g,h={},i=bp(b,["systemInstruction"]);void 0!==c&&null!=i&&bo(c,["systemInstruction"],co(b3(i)));let j=bp(b,["temperature"]);null!=j&&bo(h,["temperature"],j);let k=bp(b,["topP"]);null!=k&&bo(h,["topP"],k);let l=bp(b,["topK"]);null!=l&&bo(h,["topK"],l);let m=bp(b,["candidateCount"]);null!=m&&bo(h,["candidateCount"],m);let n=bp(b,["maxOutputTokens"]);null!=n&&bo(h,["maxOutputTokens"],n);let o=bp(b,["stopSequences"]);null!=o&&bo(h,["stopSequences"],o);let p=bp(b,["responseLogprobs"]);null!=p&&bo(h,["responseLogprobs"],p);let q=bp(b,["logprobs"]);null!=q&&bo(h,["logprobs"],q);let r=bp(b,["presencePenalty"]);null!=r&&bo(h,["presencePenalty"],r);let s=bp(b,["frequencyPenalty"]);null!=s&&bo(h,["frequencyPenalty"],s);let t=bp(b,["seed"]);null!=t&&bo(h,["seed"],t);let u=bp(b,["responseMimeType"]);null!=u&&bo(h,["responseMimeType"],u);let v=bp(b,["responseSchema"]);null!=v&&bo(h,["responseSchema"],b6(v));let w=bp(b,["responseJsonSchema"]);if(null!=w&&bo(h,["responseJsonSchema"],w),void 0!==bp(b,["routingConfig"]))throw Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==bp(b,["modelSelectionConfig"]))throw Error("modelSelectionConfig parameter is not supported in Gemini API.");let x=bp(b,["safetySettings"]);if(void 0!==c&&null!=x){let a=x;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=bp(a,["category"]);if(null!=c&&bo(b,["category"],c),void 0!==bp(a,["method"]))throw Error("method parameter is not supported in Gemini API.");let d=bp(a,["threshold"]);return null!=d&&bo(b,["threshold"],d),b})(a))),bo(c,["safetySettings"],a)}let y=bp(b,["tools"]);if(void 0!==c&&null!=y){let a=ca(y);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=bp(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["functionDeclarations"],a)}if(void 0!==bp(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let d=bp(a,["googleSearchRetrieval"]);null!=d&&bo(b,["googleSearchRetrieval"],d);let e=bp(a,["computerUse"]);null!=e&&bo(b,["computerUse"],e);let f=bp(a,["fileSearch"]);null!=f&&bo(b,["fileSearch"],f);let g=bp(a,["codeExecution"]);if(null!=g&&bo(b,["codeExecution"],g),void 0!==bp(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let h=bp(a,["googleMaps"]);null!=h&&bo(b,["googleMaps"],function(a){let b={};if(void 0!==bp(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=bp(a,["enableWidget"]);return null!=c&&bo(b,["enableWidget"],c),b}(h));let i=bp(a,["googleSearch"]);null!=i&&bo(b,["googleSearch"],function(a){let b={};if(void 0!==bp(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==bp(a,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let c=bp(a,["timeRangeFilter"]);return null!=c&&bo(b,["timeRangeFilter"],c),b}(i));let j=bp(a,["urlContext"]);return null!=j&&bo(b,["urlContext"],j),b})(b9(a)))),bo(c,["tools"],a)}let z=bp(b,["toolConfig"]);if(void 0!==c&&null!=z&&bo(c,["toolConfig"],(e={},null!=(f=bp(d=z,["functionCallingConfig"]))&&bo(e,["functionCallingConfig"],function(a){let b={},c=bp(a,["mode"]);null!=c&&bo(b,["mode"],c);let d=bp(a,["allowedFunctionNames"]);if(null!=d&&bo(b,["allowedFunctionNames"],d),void 0!==bp(a,["streamFunctionCallArguments"]))throw Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return b}(f)),null!=(g=bp(d,["retrievalConfig"]))&&bo(e,["retrievalConfig"],g),e)),void 0!==bp(b,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let A=bp(b,["cachedContent"]);void 0!==c&&null!=A&&bo(c,["cachedContent"],cb(a,A));let B=bp(b,["responseModalities"]);null!=B&&bo(h,["responseModalities"],B);let C=bp(b,["mediaResolution"]);null!=C&&bo(h,["mediaResolution"],C);let D=bp(b,["speechConfig"]);if(null!=D&&bo(h,["speechConfig"],b7(D)),void 0!==bp(b,["audioTimestamp"]))throw Error("audioTimestamp parameter is not supported in Gemini API.");let E=bp(b,["thinkingConfig"]);null!=E&&bo(h,["thinkingConfig"],E);let F=bp(b,["imageConfig"]);null!=F&&bo(h,["imageConfig"],function(a){let b={},c=bp(a,["aspectRatio"]);null!=c&&bo(b,["aspectRatio"],c);let d=bp(a,["imageSize"]);if(null!=d&&bo(b,["imageSize"],d),void 0!==bp(a,["outputMimeType"]))throw Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==bp(a,["outputCompressionQuality"]))throw Error("outputCompressionQuality parameter is not supported in Gemini API.");return b}(F));let G=bp(b,["enableEnhancedCivicAnswers"]);return null!=G&&bo(h,["enableEnhancedCivicAnswers"],G),h}(a,g,bp(c,["request"],{}))),c})(a,b))),bo(c,["requests","requests"],b)}return c}(a,ci(a,e)));let f=bp(b,["config"]);return null!=f&&function(a,b){let c=bp(a,["displayName"]);if(void 0!==b&&null!=c&&bo(b,["batch","displayName"],c),void 0!==bp(a,["dest"]))throw Error("dest parameter is not supported in Gemini API.")}(f,c),c}(ak=bd||(bd={})).PAGED_ITEM_BATCH_JOBS="batchJobs",ak.PAGED_ITEM_MODELS="models",ak.PAGED_ITEM_TUNING_JOBS="tuningJobs",ak.PAGED_ITEM_FILES="files",ak.PAGED_ITEM_CACHED_CONTENTS="cachedContents",ak.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",ak.PAGED_ITEM_DOCUMENTS="documents";class cq{constructor(a,b,c,d){this.pageInternal=[],this.paramsInternal={},this.requestInternal=b,this.init(a,c,d)}init(a,b,c){var d,e;this.nameInternal=a,this.pageInternal=b[this.nameInternal]||[],this.sdkHttpResponseInternal=null==b?void 0:b.sdkHttpResponse,this.idxInternal=0;let f={config:{}};(f=c&&0!==Object.keys(c).length?"object"==typeof c?Object.assign({},c):c:{config:{}}).config&&(f.config.pageToken=b.nextPageToken),this.paramsInternal=f,this.pageInternalSize=null!=(e=null==(d=f.config)?void 0:d.pageSize)?e:this.pageInternal.length}initNextPage(a){this.init(this.nameInternal,a,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(a){return this.pageInternal[a]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(!this.hasNextPage())return{value:void 0,done:!0};else await this.nextPage();let a=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:a,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw Error("No more pages to fetch.");let a=await this.requestInternal(this.params);return this.initNextPage(a),this.page}hasNextPage(){var a;return(null==(a=this.params.config)?void 0:a.pageToken)!==void 0}}class cr extends bm{constructor(a){super(),this.apiClient=a,this.list=async(a={})=>new cq(bd.PAGED_ITEM_BATCH_JOBS,a=>this.listInternal(a),await this.listInternal(a),a),this.create=async a=>(this.apiClient.isVertexAI()&&(a.config=this.formatDestination(a.src,a.config)),this.createInternal(a)),this.createEmbeddings=async a=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(a)}}createInlinedGenerateContentRequest(a){let b=cp(this.apiClient,a),c=bn("{model}:batchGenerateContent",b._url),d=b.batch.inputConfig.requests,e=d.requests,f=[];for(let a of e){let b=Object.assign({},a);if(b.systemInstruction){let a=b.systemInstruction;delete b.systemInstruction;let c=b.request;c.systemInstruction=a,b.request=c}f.push(b)}return d.requests=f,delete b.config,delete b._url,delete b._query,{path:c,body:b}}getGcsUri(a){return"string"==typeof a?a.startsWith("gs://")?a:void 0:!Array.isArray(a)&&a.gcsUri&&a.gcsUri.length>0?a.gcsUri[0]:void 0}getBigqueryUri(a){return"string"==typeof a?a.startsWith("bq://")?a:void 0:Array.isArray(a)?void 0:a.bigqueryUri}formatDestination(a,b){let c=b?Object.assign({},b):{},d=Date.now().toString();if(c.displayName||(c.displayName=`genaiBatchJob_${d}`),void 0===c.dest){let b=this.getGcsUri(a),e=this.getBigqueryUri(a);if(b)b.endsWith(".jsonl")?c.dest=`${b.slice(0,-6)}/dest`:c.dest=`${b}_dest_${d}`;else if(e)c.dest=`${e}_dest_${d}`;else throw Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return c}async createInternal(a){var b,c,d,e,f;let g="",h={};if(this.apiClient.isVertexAI()){let d,e,i,j,k,l,m=(f=this.apiClient,d={},null!=(e=bp(a,["model"]))&&bo(d,["model"],bU(f,e)),null!=(i=bp(a,["src"]))&&bo(d,["inputConfig"],function(a){let b={},c=bp(a,["format"]);null!=c&&bo(b,["instancesFormat"],c);let d=bp(a,["gcsUri"]);null!=d&&bo(b,["gcsSource","uris"],d);let e=bp(a,["bigqueryUri"]);if(null!=e&&bo(b,["bigquerySource","inputUri"],e),void 0!==bp(a,["fileName"]))throw Error("fileName parameter is not supported in Vertex AI.");if(void 0!==bp(a,["inlinedRequests"]))throw Error("inlinedRequests parameter is not supported in Vertex AI.");return b}(ci(f,i))),null!=(j=bp(a,["config"]))&&(k=bp(j,["displayName"]),void 0!==d&&null!=k&&bo(d,["displayName"],k),l=bp(j,["dest"]),void 0!==d&&null!=l&&bo(d,["outputConfig"],function(a){let b={},c=bp(a,["format"]);null!=c&&bo(b,["predictionsFormat"],c);let d=bp(a,["gcsUri"]);null!=d&&bo(b,["gcsDestination","outputUriPrefix"],d);let e=bp(a,["bigqueryUri"]);if(null!=e&&bo(b,["bigqueryDestination","outputUri"],e),void 0!==bp(a,["fileName"]))throw Error("fileName parameter is not supported in Vertex AI.");if(void 0!==bp(a,["inlinedResponses"]))throw Error("inlinedResponses parameter is not supported in Vertex AI.");if(void 0!==bp(a,["inlinedEmbedContentResponses"]))throw Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return b}(function(a){if("string"!=typeof a)return a;if(a.startsWith("gs://"))return{format:"jsonl",gcsUri:a};if(a.startsWith("bq://"))return{format:"bigquery",bigqueryUri:a};throw Error(`Unsupported destination: ${a}`)}(l)))),d);return g=bn("batchPredictionJobs",m._url),h=m._query,delete m._url,delete m._query,this.apiClient.request({path:g,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>cn(a))}{let b=cp(this.apiClient,a);return g=bn("{model}:batchGenerateContent",b._url),h=b._query,delete b._url,delete b._query,this.apiClient.request({path:g,queryParams:h,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>cm(a))}}async createEmbeddingsInternal(a){var b,c,d,e,f;let g="",h={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let i,j,k,l,m,n,o,p,q=(d=this.apiClient,l={},null!=(m=bp(a,["model"]))&&bo(l,["_url","model"],bU(d,m)),null!=(n=bp(a,["src"]))&&bo(l,["batch","inputConfig"],(e=d,i={},null!=(j=bp(f=n,["fileName"]))&&bo(i,["file_name"],j),null!=(k=bp(f,["inlinedRequests"]))&&bo(i,["requests"],function(a,b){let c={},d=bp(b,["contents"]);if(null!=d){let b=b4(a,d);Array.isArray(b)&&(b=b.map(a=>a)),bo(c,["requests[]","request","content"],b)}let e=bp(b,["config"]);return null!=e&&(bo(c,["_self"],function(a,b){let c=bp(a,["taskType"]);void 0!==b&&null!=c&&bo(b,["requests[]","taskType"],c);let d=bp(a,["title"]);void 0!==b&&null!=d&&bo(b,["requests[]","title"],d);let e=bp(a,["outputDimensionality"]);if(void 0!==b&&null!=e&&bo(b,["requests[]","outputDimensionality"],e),void 0!==bp(a,["mimeType"]))throw Error("mimeType parameter is not supported in Gemini API.");if(void 0!==bp(a,["autoTruncate"]))throw Error("autoTruncate parameter is not supported in Gemini API.");return{}}(e,c)),!function(a,b){for(let[c,d]of Object.entries(b)){let b=c.split("."),e=d.split("."),f=new Set,g=-1;for(let a=0;a<b.length;a++)if("*"===b[a]){g=a;break}if(-1!==g&&e.length>g)for(let a=g;a<e.length;a++){let b=e[a];"*"===b||b.endsWith("[]")||b.endsWith("[0]")||f.add(b)}!function a(b,c,d,e,f){if(e>=c.length||"object"!=typeof b||null===b)return;let g=c[e];if(g.endsWith("[]")){let h=g.slice(0,-2);if(h in b&&Array.isArray(b[h]))for(let g of b[h])a(g,c,d,e+1,f)}else if("*"===g){if("object"==typeof b&&null!==b&&!Array.isArray(b)){let a=Object.keys(b).filter(a=>!a.startsWith("_")&&!f.has(a)),c={};for(let d of a)c[d]=b[d];for(let[a,f]of Object.entries(c)){let c=[];for(let b of d.slice(e))"*"===b?c.push(a):c.push(b);bo(b,c,f)}for(let c of a)delete b[c]}}else g in b&&a(b[g],c,d,e+1,f)}(a,b,e,0,f)}}(c,{"requests[].*":"requests[].request.*"})),c}(e,k)),i)),null!=(o=bp(a,["config"]))&&(p=bp(o,["displayName"]),void 0!==l&&null!=p&&bo(l,["batch","displayName"],p)),l);return g=bn("{model}:asyncBatchEmbedContent",q._url),h=q._query,delete q._url,delete q._query,this.apiClient.request({path:g,queryParams:h,body:JSON.stringify(q),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>cm(a))}}async get(a){var b,c,d,e,f,g;let h="",i={};if(this.apiClient.isVertexAI()){let d,e,g=(f=this.apiClient,d={},null!=(e=bp(a,["name"]))&&bo(d,["_url","name"],ck(f,e)),d);return h=bn("batchPredictionJobs/{name}",g._url),i=g._query,delete g._url,delete g._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(g),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>cn(a))}{let b,c,f=(g=this.apiClient,b={},null!=(c=bp(a,["name"]))&&bo(b,["_url","name"],ck(g,c)),b);return h=bn("batches/{name}",f._url),i=f._query,delete f._url,delete f._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>cm(a))}}async cancel(a){var b,c,d,e,f,g;let h="",i={};if(this.apiClient.isVertexAI()){let d,e,g=(f=this.apiClient,d={},null!=(e=bp(a,["name"]))&&bo(d,["_url","name"],ck(f,e)),d);h=bn("batchPredictionJobs/{name}:cancel",g._url),i=g._query,delete g._url,delete g._query,await this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(g),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal})}else{let b,c,f=(g=this.apiClient,b={},null!=(c=bp(a,["name"]))&&bo(b,["_url","name"],ck(g,c)),b);h=bn("batches/{name}:cancel",f._url),i=f._query,delete f._url,delete f._query,await this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal})}}async listInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d,e,h,i,j,k=(d={},null!=(e=bp(a,["config"]))&&(h=bp(e,["pageSize"]),void 0!==d&&null!=h&&bo(d,["_query","pageSize"],h),i=bp(e,["pageToken"]),void 0!==d&&null!=i&&bo(d,["_query","pageToken"],i),j=bp(e,["filter"]),void 0!==d&&null!=j&&bo(d,["_query","filter"],j)),d);return f=bn("batchPredictionJobs",k._url),g=k._query,delete k._url,delete k._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(k),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=bp(a,["sdkHttpResponse"]);null!=c&&bo(b,["sdkHttpResponse"],c);let d=bp(a,["nextPageToken"]);null!=d&&bo(b,["nextPageToken"],d);let e=bp(a,["batchPredictionJobs"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>cn(a))),bo(b,["batchJobs"],a)}return b}(a),c=new bQ;return Object.assign(c,b),c})}{let b,c,h=(b={},null!=(c=bp(a,["config"]))&&function(a,b){let c=bp(a,["pageSize"]);void 0!==b&&null!=c&&bo(b,["_query","pageSize"],c);let d=bp(a,["pageToken"]);if(void 0!==b&&null!=d&&bo(b,["_query","pageToken"],d),void 0!==bp(a,["filter"]))throw Error("filter parameter is not supported in Gemini API.")}(c,b),b);return f=bn("batches",h._url),g=h._query,delete h._url,delete h._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=bp(a,["sdkHttpResponse"]);null!=c&&bo(b,["sdkHttpResponse"],c);let d=bp(a,["nextPageToken"]);null!=d&&bo(b,["nextPageToken"],d);let e=bp(a,["operations"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>cm(a))),bo(b,["batchJobs"],a)}return b}(a),c=new bQ;return Object.assign(c,b),c})}}async delete(a){var b,c,d,e,f,g;let h="",i={};if(this.apiClient.isVertexAI()){let d,e,g=(f=this.apiClient,d={},null!=(e=bp(a,["name"]))&&bo(d,["_url","name"],ck(f,e)),d);return h=bn("batchPredictionJobs/{name}",g._url),i=g._query,delete g._url,delete g._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b,c,d,e,f;return b={},null!=(c=bp(a,["sdkHttpResponse"]))&&bo(b,["sdkHttpResponse"],c),null!=(d=bp(a,["name"]))&&bo(b,["name"],d),null!=(e=bp(a,["done"]))&&bo(b,["done"],e),null!=(f=bp(a,["error"]))&&bo(b,["error"],f),b})}{let b,c,f=(g=this.apiClient,b={},null!=(c=bp(a,["name"]))&&bo(b,["_url","name"],ck(g,c)),b);return h=bn("batches/{name}",f._url),i=f._query,delete f._url,delete f._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b,c,d,e,f;return b={},null!=(c=bp(a,["sdkHttpResponse"]))&&bo(b,["sdkHttpResponse"],c),null!=(d=bp(a,["name"]))&&bo(b,["name"],d),null!=(e=bp(a,["done"]))&&bo(b,["done"],e),null!=(f=bp(a,["error"]))&&bo(b,["error"],f),b})}}}function cs(a){let b={},c=bp(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e,f,g,h,i,j,k,l,m,n;return c={},null!=(d=bp(b=a,["mediaResolution"]))&&bo(c,["mediaResolution"],d),null!=(e=bp(b,["codeExecutionResult"]))&&bo(c,["codeExecutionResult"],e),null!=(f=bp(b,["executableCode"]))&&bo(c,["executableCode"],f),null!=(g=bp(b,["fileData"]))&&bo(c,["fileData"],function(a){let b={};if(void 0!==bp(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=bp(a,["fileUri"]);null!=c&&bo(b,["fileUri"],c);let d=bp(a,["mimeType"]);return null!=d&&bo(b,["mimeType"],d),b}(g)),null!=(h=bp(b,["functionCall"]))&&bo(c,["functionCall"],function(a){let b={},c=bp(a,["id"]);null!=c&&bo(b,["id"],c);let d=bp(a,["args"]);null!=d&&bo(b,["args"],d);let e=bp(a,["name"]);if(null!=e&&bo(b,["name"],e),void 0!==bp(a,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==bp(a,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return b}(h)),null!=(i=bp(b,["functionResponse"]))&&bo(c,["functionResponse"],i),null!=(j=bp(b,["inlineData"]))&&bo(c,["inlineData"],function(a){let b={},c=bp(a,["data"]);if(null!=c&&bo(b,["data"],c),void 0!==bp(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=bp(a,["mimeType"]);return null!=d&&bo(b,["mimeType"],d),b}(j)),null!=(k=bp(b,["text"]))&&bo(c,["text"],k),null!=(l=bp(b,["thought"]))&&bo(c,["thought"],l),null!=(m=bp(b,["thoughtSignature"]))&&bo(c,["thoughtSignature"],m),null!=(n=bp(b,["videoMetadata"]))&&bo(c,["videoMetadata"],n),c})),bo(b,["parts"],a)}let d=bp(a,["role"]);return null!=d&&bo(b,["role"],d),b}class ct extends bm{constructor(a){super(),this.apiClient=a,this.list=async(a={})=>new cq(bd.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(a),a)}async create(a){var b,c,d,e,f,g;let h="",i={};if(this.apiClient.isVertexAI()){let d,e,g,j=(f=this.apiClient,d={},null!=(e=bp(a,["model"]))&&bo(d,["model"],bV(f,e)),null!=(g=bp(a,["config"]))&&function(a,b){let c=bp(a,["ttl"]);void 0!==b&&null!=c&&bo(b,["ttl"],c);let d=bp(a,["expireTime"]);void 0!==b&&null!=d&&bo(b,["expireTime"],d);let e=bp(a,["displayName"]);void 0!==b&&null!=e&&bo(b,["displayName"],e);let f=bp(a,["contents"]);if(void 0!==b&&null!=f){let a=b5(f);Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["contents"],a)}let g=bp(a,["systemInstruction"]);void 0!==b&&null!=g&&bo(b,["systemInstruction"],b3(g));let h=bp(a,["tools"]);if(void 0!==b&&null!=h){let a=h;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=bp(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={};if(void 0!==bp(a,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");let c=bp(a,["description"]);null!=c&&bo(b,["description"],c);let d=bp(a,["name"]);null!=d&&bo(b,["name"],d);let e=bp(a,["parameters"]);null!=e&&bo(b,["parameters"],e);let f=bp(a,["parametersJsonSchema"]);null!=f&&bo(b,["parametersJsonSchema"],f);let g=bp(a,["response"]);null!=g&&bo(b,["response"],g);let h=bp(a,["responseJsonSchema"]);return null!=h&&bo(b,["responseJsonSchema"],h),b})(a))),bo(b,["functionDeclarations"],a)}let d=bp(a,["retrieval"]);null!=d&&bo(b,["retrieval"],d);let e=bp(a,["googleSearchRetrieval"]);null!=e&&bo(b,["googleSearchRetrieval"],e);let f=bp(a,["computerUse"]);if(null!=f&&bo(b,["computerUse"],f),void 0!==bp(a,["fileSearch"]))throw Error("fileSearch parameter is not supported in Vertex AI.");let g=bp(a,["codeExecution"]);null!=g&&bo(b,["codeExecution"],g);let h=bp(a,["enterpriseWebSearch"]);null!=h&&bo(b,["enterpriseWebSearch"],h);let i=bp(a,["googleMaps"]);null!=i&&bo(b,["googleMaps"],i);let j=bp(a,["googleSearch"]);null!=j&&bo(b,["googleSearch"],j);let k=bp(a,["urlContext"]);return null!=k&&bo(b,["urlContext"],k),b})(a))),bo(b,["tools"],a)}let i=bp(a,["toolConfig"]);void 0!==b&&null!=i&&bo(b,["toolConfig"],i);let j=bp(a,["kmsKeyName"]);void 0!==b&&null!=j&&bo(b,["encryption_spec","kmsKeyName"],j)}(g,d),d);return h=bn("cachedContents",j._url),i=j._query,delete j._url,delete j._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(j),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}{let b,c,f,j=(g=this.apiClient,b={},null!=(c=bp(a,["model"]))&&bo(b,["model"],bV(g,c)),null!=(f=bp(a,["config"]))&&function(a,b){var c;let d,e,f,g=bp(a,["ttl"]);void 0!==b&&null!=g&&bo(b,["ttl"],g);let h=bp(a,["expireTime"]);void 0!==b&&null!=h&&bo(b,["expireTime"],h);let i=bp(a,["displayName"]);void 0!==b&&null!=i&&bo(b,["displayName"],i);let j=bp(a,["contents"]);if(void 0!==b&&null!=j){let a=b5(j);Array.isArray(a)&&(a=a.map(a=>cs(a))),bo(b,["contents"],a)}let k=bp(a,["systemInstruction"]);void 0!==b&&null!=k&&bo(b,["systemInstruction"],cs(b3(k)));let l=bp(a,["tools"]);if(void 0!==b&&null!=l){let a=l;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=bp(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["functionDeclarations"],a)}if(void 0!==bp(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let d=bp(a,["googleSearchRetrieval"]);null!=d&&bo(b,["googleSearchRetrieval"],d);let e=bp(a,["computerUse"]);null!=e&&bo(b,["computerUse"],e);let f=bp(a,["fileSearch"]);null!=f&&bo(b,["fileSearch"],f);let g=bp(a,["codeExecution"]);if(null!=g&&bo(b,["codeExecution"],g),void 0!==bp(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let h=bp(a,["googleMaps"]);null!=h&&bo(b,["googleMaps"],function(a){let b={};if(void 0!==bp(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=bp(a,["enableWidget"]);return null!=c&&bo(b,["enableWidget"],c),b}(h));let i=bp(a,["googleSearch"]);null!=i&&bo(b,["googleSearch"],function(a){let b={};if(void 0!==bp(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==bp(a,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let c=bp(a,["timeRangeFilter"]);return null!=c&&bo(b,["timeRangeFilter"],c),b}(i));let j=bp(a,["urlContext"]);return null!=j&&bo(b,["urlContext"],j),b})(a))),bo(b,["tools"],a)}let m=bp(a,["toolConfig"]);if(void 0!==b&&null!=m&&bo(b,["toolConfig"],(d={},null!=(e=bp(c=m,["functionCallingConfig"]))&&bo(d,["functionCallingConfig"],function(a){let b={},c=bp(a,["mode"]);null!=c&&bo(b,["mode"],c);let d=bp(a,["allowedFunctionNames"]);if(null!=d&&bo(b,["allowedFunctionNames"],d),void 0!==bp(a,["streamFunctionCallArguments"]))throw Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return b}(e)),null!=(f=bp(c,["retrievalConfig"]))&&bo(d,["retrievalConfig"],f),d)),void 0!==bp(a,["kmsKeyName"]))throw Error("kmsKeyName parameter is not supported in Gemini API.")}(f,b),b);return h=bn("cachedContents",j._url),i=j._query,delete j._url,delete j._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(j),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>a)}}async get(a){var b,c,d,e,f,g;let h="",i={};if(this.apiClient.isVertexAI()){let d,e,g=(f=this.apiClient,d={},null!=(e=bp(a,["name"]))&&bo(d,["_url","name"],cb(f,e)),d);return h=bn("{name}",g._url),i=g._query,delete g._url,delete g._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(g),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}{let b,c,f=(g=this.apiClient,b={},null!=(c=bp(a,["name"]))&&bo(b,["_url","name"],cb(g,c)),b);return h=bn("{name}",f._url),i=f._query,delete f._url,delete f._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>a)}}async delete(a){var b,c,d,e,f,g;let h="",i={};if(this.apiClient.isVertexAI()){let d,e,g=(f=this.apiClient,d={},null!=(e=bp(a,["name"]))&&bo(d,["_url","name"],cb(f,e)),d);return h=bn("{name}",g._url),i=g._query,delete g._url,delete g._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b,c,d=(b={},null!=(c=bp(a,["sdkHttpResponse"]))&&bo(b,["sdkHttpResponse"],c),b),e=new bH;return Object.assign(e,d),e})}{let b,c,f=(g=this.apiClient,b={},null!=(c=bp(a,["name"]))&&bo(b,["_url","name"],cb(g,c)),b);return h=bn("{name}",f._url),i=f._query,delete f._url,delete f._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b,c,d=(b={},null!=(c=bp(a,["sdkHttpResponse"]))&&bo(b,["sdkHttpResponse"],c),b),e=new bH;return Object.assign(e,d),e})}}async update(a){var b,c,d,e,f,g;let h="",i={};if(this.apiClient.isVertexAI()){let d,e,g,j,k,l=(f=this.apiClient,d={},null!=(e=bp(a,["name"]))&&bo(d,["_url","name"],cb(f,e)),null!=(g=bp(a,["config"]))&&(j=bp(g,["ttl"]),void 0!==d&&null!=j&&bo(d,["ttl"],j),k=bp(g,["expireTime"]),void 0!==d&&null!=k&&bo(d,["expireTime"],k)),d);return h=bn("{name}",l._url),i=l._query,delete l._url,delete l._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(l),httpMethod:"PATCH",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}{let b,c,f,j,k,l=(g=this.apiClient,b={},null!=(c=bp(a,["name"]))&&bo(b,["_url","name"],cb(g,c)),null!=(f=bp(a,["config"]))&&(j=bp(f,["ttl"]),void 0!==b&&null!=j&&bo(b,["ttl"],j),k=bp(f,["expireTime"]),void 0!==b&&null!=k&&bo(b,["expireTime"],k)),b);return h=bn("{name}",l._url),i=l._query,delete l._url,delete l._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(l),httpMethod:"PATCH",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>a)}}async listInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d,e,h,i,j=(d={},null!=(e=bp(a,["config"]))&&(h=bp(e,["pageSize"]),void 0!==d&&null!=h&&bo(d,["_query","pageSize"],h),i=bp(e,["pageToken"]),void 0!==d&&null!=i&&bo(d,["_query","pageToken"],i)),d);return f=bn("cachedContents",j._url),g=j._query,delete j._url,delete j._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(j),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=bp(a,["sdkHttpResponse"]);null!=c&&bo(b,["sdkHttpResponse"],c);let d=bp(a,["nextPageToken"]);null!=d&&bo(b,["nextPageToken"],d);let e=bp(a,["cachedContents"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["cachedContents"],a)}return b}(a),c=new bI;return Object.assign(c,b),c})}{let b,c,h,i,j=(b={},null!=(c=bp(a,["config"]))&&(h=bp(c,["pageSize"]),void 0!==b&&null!=h&&bo(b,["_query","pageSize"],h),i=bp(c,["pageToken"]),void 0!==b&&null!=i&&bo(b,["_query","pageToken"],i)),b);return f=bn("cachedContents",j._url),g=j._query,delete j._url,delete j._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(j),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=bp(a,["sdkHttpResponse"]);null!=c&&bo(b,["sdkHttpResponse"],c);let d=bp(a,["nextPageToken"]);null!=d&&bo(b,["nextPageToken"],d);let e=bp(a,["cachedContents"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["cachedContents"],a)}return b}(a),c=new bI;return Object.assign(c,b),c})}}}function cu(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c}function cv(a){return this instanceof cv?(this.v=a,this):new cv(a)}function cw(a,b,c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var d,e=c.apply(a,b||[]),f=[];return d=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",function(a){return function(b){return Promise.resolve(b).then(a,j)}}),d[Symbol.asyncIterator]=function(){return this},d;function g(a,b){e[a]&&(d[a]=function(b){return new Promise(function(c,d){f.push([a,b,c,d])>1||h(a,b)})},b&&(d[a]=b(d[a])))}function h(a,b){try{var c;(c=e[a](b)).value instanceof cv?Promise.resolve(c.value.v).then(i,j):k(f[0][2],c)}catch(a){k(f[0][3],a)}}function i(a){h("next",a)}function j(a){h("throw",a)}function k(a,b){a(b),f.shift(),f.length&&h(f[0][0],f[0][1])}}function cx(a){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var b,c=a[Symbol.asyncIterator];return c?c.call(a):(a=function(a){var b="function"==typeof Symbol&&Symbol.iterator,c=b&&a[b],d=0;if(c)return c.call(a);if(a&&"number"==typeof a.length)return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}(a),b={},d("next"),d("throw"),d("return"),b[Symbol.asyncIterator]=function(){return this},b);function d(c){b[c]=a[c]&&function(b){return new Promise(function(d,e){var f,g,h;f=d,g=e,h=(b=a[c](b)).done,Promise.resolve(b.value).then(function(a){f({value:a,done:h})},g)})}}}function cy(a){if(void 0===a.parts||0===a.parts.length)return!1;for(let b of a.parts)if(void 0===b||0===Object.keys(b).length)return!1;return!0}function cz(a){if(void 0===a||0===a.length)return[];let b=[],c=a.length,d=0;for(;d<c;)if("user"===a[d].role)b.push(a[d]),d++;else{let e=[],f=!0;for(;d<c&&"model"===a[d].role;)e.push(a[d]),f&&!cy(a[d])&&(f=!1),d++;f?b.push(...e):b.pop()}return b}"function"==typeof SuppressedError&&SuppressedError;class cA{constructor(a,b){this.modelsModule=a,this.apiClient=b}create(a){return new cB(this.apiClient,this.modelsModule,a.model,a.config,structuredClone(a.history))}}class cB{constructor(a,b,c,d={},e=[]){this.apiClient=a,this.modelsModule=b,this.model=c,this.config=d,this.history=e,this.sendPromise=Promise.resolve(),function(a){if(0!==a.length){for(let b of a)if("user"!==b.role&&"model"!==b.role)throw Error(`Role must be user or model, but got ${b.role}.`)}}(e)}async sendMessage(a){var b;await this.sendPromise;let c=b3(a.message),d=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(c),config:null!=(b=a.config)?b:this.config});return this.sendPromise=(async()=>{var a,b,e;let f=await d,g=null==(b=null==(a=f.candidates)?void 0:a[0])?void 0:b.content,h=f.automaticFunctionCallingHistory,i=this.getHistory(!0).length,j=[];null!=h&&(j=null!=(e=h.slice(i))?e:[]),this.recordHistory(c,g?[g]:[],j)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),d}async sendMessageStream(a){var b;await this.sendPromise;let c=b3(a.message),d=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(c),config:null!=(b=a.config)?b:this.config});this.sendPromise=d.then(()=>void 0).catch(()=>void 0);let e=await d;return this.processStreamResponse(e,c)}getHistory(a=!1){return structuredClone(a?cz(this.history):this.history)}processStreamResponse(a,b){return cw(this,arguments,function*(){let c=[];try{for(var d,e,f,g,h,i,j,k=!0,l=cx(a);!(d=(j=yield cv(l.next())).done);k=!0){if(g=j.value,k=!1,function(a){var b;if(void 0==a.candidates||0===a.candidates.length)return!1;let c=null==(b=a.candidates[0])?void 0:b.content;return void 0!==c&&cy(c)}(g)){let a=null==(i=null==(h=g.candidates)?void 0:h[0])?void 0:i.content;void 0!==a&&c.push(a)}yield yield cv(g)}}catch(a){e={error:a}}finally{try{!k&&!d&&(f=l.return)&&(yield cv(f.call(l)))}finally{if(e)throw e.error}}this.recordHistory(b,c)})}recordHistory(a,b,c){let d=[];b.length>0&&b.every(a=>void 0!==a.role)?d=b:d.push({role:"model",parts:[]}),c&&c.length>0?this.history.push(...cz(c)):this.history.push(a),this.history.push(...d)}}class cC extends Error{constructor(a){super(a.message),this.name="ApiError",this.status=a.status,Object.setPrototypeOf(this,cC.prototype)}}class cD extends bm{constructor(a){super(),this.apiClient=a,this.list=async(a={})=>new cq(bd.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(a),a)}async upload(a){if(this.apiClient.isVertexAI())throw Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(a.file,a.config).then(a=>a)}async download(a){await this.apiClient.downloadFile(a)}async listInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f,g,h,i,j=(f={},null!=(g=bp(a,["config"]))&&(h=bp(g,["pageSize"]),void 0!==f&&null!=h&&bo(f,["_query","pageSize"],h),i=bp(g,["pageToken"]),void 0!==f&&null!=i&&bo(f,["_query","pageToken"],i)),f);return d=bn("files",j._url),e=j._query,delete j._url,delete j._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(j),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=bp(a,["sdkHttpResponse"]);null!=c&&bo(b,["sdkHttpResponse"],c);let d=bp(a,["nextPageToken"]);null!=d&&bo(b,["nextPageToken"],d);let e=bp(a,["files"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["files"],a)}return b}(a),c=new bN;return Object.assign(c,b),c})}}async createInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f,g,h=(f={},null!=(g=bp(a,["file"]))&&bo(f,["file"],g),f);return d=bn("upload/v1beta/files",h._url),e=h._query,delete h._url,delete h._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(h),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b,c,d=(b={},null!=(c=bp(a,["sdkHttpResponse"]))&&bo(b,["sdkHttpResponse"],c),b),e=new bO;return Object.assign(e,d),e})}}async get(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f,g,h=(f={},null!=(g=bp(a,["name"]))&&bo(f,["_url","file"],cf(g)),f);return d=bn("files/{file}",h._url),e=h._query,delete h._url,delete h._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(h),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}}async delete(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f,g,h=(f={},null!=(g=bp(a,["name"]))&&bo(f,["_url","file"],cf(g)),f);return d=bn("files/{file}",h._url),e=h._query,delete h._url,delete h._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b,c,d=(b={},null!=(c=bp(a,["sdkHttpResponse"]))&&bo(b,["sdkHttpResponse"],c),b),e=new bP;return Object.assign(e,d),e})}}}function cE(a){let b={},c=bp(a,["data"]);if(null!=c&&bo(b,["data"],c),void 0!==bp(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=bp(a,["mimeType"]);return null!=d&&bo(b,["mimeType"],d),b}function cF(a){let b={},c=bp(a,["voiceConfig"]);null!=c&&bo(b,["voiceConfig"],c);let d=bp(a,["languageCode"]);if(null!=d&&bo(b,["languageCode"],d),void 0!==bp(a,["multiSpeakerVoiceConfig"]))throw Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return b}function cG(a){let b={},c=bp(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e,f,g,h,i,j,k,l,m,n;return c={},null!=(d=bp(b=a,["mediaResolution"]))&&bo(c,["mediaResolution"],d),null!=(e=bp(b,["codeExecutionResult"]))&&bo(c,["codeExecutionResult"],e),null!=(f=bp(b,["executableCode"]))&&bo(c,["executableCode"],f),null!=(g=bp(b,["fileData"]))&&bo(c,["fileData"],function(a){let b={};if(void 0!==bp(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=bp(a,["fileUri"]);null!=c&&bo(b,["fileUri"],c);let d=bp(a,["mimeType"]);return null!=d&&bo(b,["mimeType"],d),b}(g)),null!=(h=bp(b,["functionCall"]))&&bo(c,["functionCall"],function(a){let b={},c=bp(a,["id"]);null!=c&&bo(b,["id"],c);let d=bp(a,["args"]);null!=d&&bo(b,["args"],d);let e=bp(a,["name"]);if(null!=e&&bo(b,["name"],e),void 0!==bp(a,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==bp(a,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return b}(h)),null!=(i=bp(b,["functionResponse"]))&&bo(c,["functionResponse"],i),null!=(j=bp(b,["inlineData"]))&&bo(c,["inlineData"],function(a){let b={},c=bp(a,["data"]);if(null!=c&&bo(b,["data"],c),void 0!==bp(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=bp(a,["mimeType"]);return null!=d&&bo(b,["mimeType"],d),b}(j)),null!=(k=bp(b,["text"]))&&bo(c,["text"],k),null!=(l=bp(b,["thought"]))&&bo(c,["thought"],l),null!=(m=bp(b,["thoughtSignature"]))&&bo(c,["thoughtSignature"],m),null!=(n=bp(b,["videoMetadata"]))&&bo(c,["videoMetadata"],n),c})),bo(b,["parts"],a)}let d=bp(a,["role"]);return null!=d&&bo(b,["role"],d),b}function cH(a,b){let c={},d=bp(b,["model"]);null!=d&&bo(c,["_url","model"],bU(a,d));let e=bp(b,["contents"]);if(null!=e){let a=b5(e);Array.isArray(a)&&(a=a.map(a=>cG(a))),bo(c,["contents"],a)}let f=bp(b,["config"]);return null!=f&&bo(c,["generationConfig"],function(a,b,c){var d;let e,f,g,h={},i=bp(b,["systemInstruction"]);void 0!==c&&null!=i&&bo(c,["systemInstruction"],cG(b3(i)));let j=bp(b,["temperature"]);null!=j&&bo(h,["temperature"],j);let k=bp(b,["topP"]);null!=k&&bo(h,["topP"],k);let l=bp(b,["topK"]);null!=l&&bo(h,["topK"],l);let m=bp(b,["candidateCount"]);null!=m&&bo(h,["candidateCount"],m);let n=bp(b,["maxOutputTokens"]);null!=n&&bo(h,["maxOutputTokens"],n);let o=bp(b,["stopSequences"]);null!=o&&bo(h,["stopSequences"],o);let p=bp(b,["responseLogprobs"]);null!=p&&bo(h,["responseLogprobs"],p);let q=bp(b,["logprobs"]);null!=q&&bo(h,["logprobs"],q);let r=bp(b,["presencePenalty"]);null!=r&&bo(h,["presencePenalty"],r);let s=bp(b,["frequencyPenalty"]);null!=s&&bo(h,["frequencyPenalty"],s);let t=bp(b,["seed"]);null!=t&&bo(h,["seed"],t);let u=bp(b,["responseMimeType"]);null!=u&&bo(h,["responseMimeType"],u);let v=bp(b,["responseSchema"]);null!=v&&bo(h,["responseSchema"],b6(v));let w=bp(b,["responseJsonSchema"]);if(null!=w&&bo(h,["responseJsonSchema"],w),void 0!==bp(b,["routingConfig"]))throw Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==bp(b,["modelSelectionConfig"]))throw Error("modelSelectionConfig parameter is not supported in Gemini API.");let x=bp(b,["safetySettings"]);if(void 0!==c&&null!=x){let a=x;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=bp(a,["category"]);if(null!=c&&bo(b,["category"],c),void 0!==bp(a,["method"]))throw Error("method parameter is not supported in Gemini API.");let d=bp(a,["threshold"]);return null!=d&&bo(b,["threshold"],d),b})(a))),bo(c,["safetySettings"],a)}let y=bp(b,["tools"]);if(void 0!==c&&null!=y){let a=ca(y);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=bp(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["functionDeclarations"],a)}if(void 0!==bp(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let d=bp(a,["googleSearchRetrieval"]);null!=d&&bo(b,["googleSearchRetrieval"],d);let e=bp(a,["computerUse"]);null!=e&&bo(b,["computerUse"],e);let f=bp(a,["fileSearch"]);null!=f&&bo(b,["fileSearch"],f);let g=bp(a,["codeExecution"]);if(null!=g&&bo(b,["codeExecution"],g),void 0!==bp(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let h=bp(a,["googleMaps"]);null!=h&&bo(b,["googleMaps"],function(a){let b={};if(void 0!==bp(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=bp(a,["enableWidget"]);return null!=c&&bo(b,["enableWidget"],c),b}(h));let i=bp(a,["googleSearch"]);null!=i&&bo(b,["googleSearch"],function(a){let b={};if(void 0!==bp(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==bp(a,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let c=bp(a,["timeRangeFilter"]);return null!=c&&bo(b,["timeRangeFilter"],c),b}(i));let j=bp(a,["urlContext"]);return null!=j&&bo(b,["urlContext"],j),b})(b9(a)))),bo(c,["tools"],a)}let z=bp(b,["toolConfig"]);if(void 0!==c&&null!=z&&bo(c,["toolConfig"],(e={},null!=(f=bp(d=z,["functionCallingConfig"]))&&bo(e,["functionCallingConfig"],function(a){let b={},c=bp(a,["mode"]);null!=c&&bo(b,["mode"],c);let d=bp(a,["allowedFunctionNames"]);if(null!=d&&bo(b,["allowedFunctionNames"],d),void 0!==bp(a,["streamFunctionCallArguments"]))throw Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return b}(f)),null!=(g=bp(d,["retrievalConfig"]))&&bo(e,["retrievalConfig"],g),e)),void 0!==bp(b,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let A=bp(b,["cachedContent"]);void 0!==c&&null!=A&&bo(c,["cachedContent"],cb(a,A));let B=bp(b,["responseModalities"]);null!=B&&bo(h,["responseModalities"],B);let C=bp(b,["mediaResolution"]);null!=C&&bo(h,["mediaResolution"],C);let D=bp(b,["speechConfig"]);if(null!=D&&bo(h,["speechConfig"],b7(D)),void 0!==bp(b,["audioTimestamp"]))throw Error("audioTimestamp parameter is not supported in Gemini API.");let E=bp(b,["thinkingConfig"]);null!=E&&bo(h,["thinkingConfig"],E);let F=bp(b,["imageConfig"]);null!=F&&bo(h,["imageConfig"],function(a){let b={},c=bp(a,["aspectRatio"]);null!=c&&bo(b,["aspectRatio"],c);let d=bp(a,["imageSize"]);if(null!=d&&bo(b,["imageSize"],d),void 0!==bp(a,["outputMimeType"]))throw Error("outputMimeType parameter is not supported in Gemini API.");if(void 0!==bp(a,["outputCompressionQuality"]))throw Error("outputCompressionQuality parameter is not supported in Gemini API.");return b}(F));let G=bp(b,["enableEnhancedCivicAnswers"]);return null!=G&&bo(h,["enableEnhancedCivicAnswers"],G),h}(a,f,c)),c}function cI(a,b){let c={},d=bp(b,["model"]);null!=d&&bo(c,["_url","model"],bU(a,d));let e=bp(b,["contents"]);if(null!=e){let a=b5(e);Array.isArray(a)&&(a=a.map(a=>a)),bo(c,["contents"],a)}let f=bp(b,["config"]);return null!=f&&bo(c,["generationConfig"],function(a,b,c){var d;let e,f,g,h,i,j={},k=bp(b,["systemInstruction"]);void 0!==c&&null!=k&&bo(c,["systemInstruction"],b3(k));let l=bp(b,["temperature"]);null!=l&&bo(j,["temperature"],l);let m=bp(b,["topP"]);null!=m&&bo(j,["topP"],m);let n=bp(b,["topK"]);null!=n&&bo(j,["topK"],n);let o=bp(b,["candidateCount"]);null!=o&&bo(j,["candidateCount"],o);let p=bp(b,["maxOutputTokens"]);null!=p&&bo(j,["maxOutputTokens"],p);let q=bp(b,["stopSequences"]);null!=q&&bo(j,["stopSequences"],q);let r=bp(b,["responseLogprobs"]);null!=r&&bo(j,["responseLogprobs"],r);let s=bp(b,["logprobs"]);null!=s&&bo(j,["logprobs"],s);let t=bp(b,["presencePenalty"]);null!=t&&bo(j,["presencePenalty"],t);let u=bp(b,["frequencyPenalty"]);null!=u&&bo(j,["frequencyPenalty"],u);let v=bp(b,["seed"]);null!=v&&bo(j,["seed"],v);let w=bp(b,["responseMimeType"]);null!=w&&bo(j,["responseMimeType"],w);let x=bp(b,["responseSchema"]);null!=x&&bo(j,["responseSchema"],b6(x));let y=bp(b,["responseJsonSchema"]);null!=y&&bo(j,["responseJsonSchema"],y);let z=bp(b,["routingConfig"]);null!=z&&bo(j,["routingConfig"],z);let A=bp(b,["modelSelectionConfig"]);null!=A&&bo(j,["modelConfig"],A);let B=bp(b,["safetySettings"]);if(void 0!==c&&null!=B){let a=B;Array.isArray(a)&&(a=a.map(a=>a)),bo(c,["safetySettings"],a)}let C=bp(b,["tools"]);if(void 0!==c&&null!=C){let a=ca(C);Array.isArray(a)&&(a=a.map(a=>cU(b9(a)))),bo(c,["tools"],a)}let D=bp(b,["toolConfig"]);void 0!==c&&null!=D&&bo(c,["toolConfig"],D);let E=bp(b,["labels"]);void 0!==c&&null!=E&&bo(c,["labels"],E);let F=bp(b,["cachedContent"]);void 0!==c&&null!=F&&bo(c,["cachedContent"],cb(a,F));let G=bp(b,["responseModalities"]);null!=G&&bo(j,["responseModalities"],G);let H=bp(b,["mediaResolution"]);null!=H&&bo(j,["mediaResolution"],H);let I=bp(b,["speechConfig"]);null!=I&&bo(j,["speechConfig"],cT(b7(I)));let J=bp(b,["audioTimestamp"]);null!=J&&bo(j,["audioTimestamp"],J);let K=bp(b,["thinkingConfig"]);null!=K&&bo(j,["thinkingConfig"],K);let L=bp(b,["imageConfig"]);if(null!=L&&bo(j,["imageConfig"],(e={},null!=(f=bp(d=L,["aspectRatio"]))&&bo(e,["aspectRatio"],f),null!=(g=bp(d,["imageSize"]))&&bo(e,["imageSize"],g),null!=(h=bp(d,["outputMimeType"]))&&bo(e,["imageOutputOptions","mimeType"],h),null!=(i=bp(d,["outputCompressionQuality"]))&&bo(e,["imageOutputOptions","compressionQuality"],i),e)),void 0!==bp(b,["enableEnhancedCivicAnswers"]))throw Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return j}(a,f,c)),c}function cJ(a){let b={},c=bp(a,["sdkHttpResponse"]);null!=c&&bo(b,["sdkHttpResponse"],c);let d=bp(a,["candidates"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=bp(a,["content"]);null!=c&&bo(b,["content"],c);let d=bp(a,["citationMetadata"]);null!=d&&bo(b,["citationMetadata"],function(a){let b={},c=bp(a,["citationSources"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["citations"],a)}return b}(d));let e=bp(a,["tokenCount"]);null!=e&&bo(b,["tokenCount"],e);let f=bp(a,["finishReason"]);null!=f&&bo(b,["finishReason"],f);let g=bp(a,["avgLogprobs"]);null!=g&&bo(b,["avgLogprobs"],g);let h=bp(a,["groundingMetadata"]);null!=h&&bo(b,["groundingMetadata"],h);let i=bp(a,["index"]);null!=i&&bo(b,["index"],i);let j=bp(a,["logprobsResult"]);null!=j&&bo(b,["logprobsResult"],j);let k=bp(a,["safetyRatings"]);if(null!=k){let a=k;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["safetyRatings"],a)}let l=bp(a,["urlContextMetadata"]);return null!=l&&bo(b,["urlContextMetadata"],l),b})(a))),bo(b,["candidates"],a)}let e=bp(a,["modelVersion"]);null!=e&&bo(b,["modelVersion"],e);let f=bp(a,["promptFeedback"]);null!=f&&bo(b,["promptFeedback"],f);let g=bp(a,["responseId"]);null!=g&&bo(b,["responseId"],g);let h=bp(a,["usageMetadata"]);return null!=h&&bo(b,["usageMetadata"],h),b}function cK(a){let b={},c=bp(a,["sdkHttpResponse"]);null!=c&&bo(b,["sdkHttpResponse"],c);let d=bp(a,["candidates"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["candidates"],a)}let e=bp(a,["createTime"]);null!=e&&bo(b,["createTime"],e);let f=bp(a,["modelVersion"]);null!=f&&bo(b,["modelVersion"],f);let g=bp(a,["promptFeedback"]);null!=g&&bo(b,["promptFeedback"],g);let h=bp(a,["responseId"]);null!=h&&bo(b,["responseId"],h);let i=bp(a,["usageMetadata"]);return null!=i&&bo(b,["usageMetadata"],i),b}function cL(a){let b={},c=bp(a,["_self"]);null!=c&&bo(b,["image"],cM(c));let d=bp(a,["raiFilteredReason"]);null!=d&&bo(b,["raiFilteredReason"],d);let e=bp(a,["_self"]);null!=e&&bo(b,["safetyAttributes"],cS(e));let f=bp(a,["prompt"]);return null!=f&&bo(b,["enhancedPrompt"],f),b}function cM(a){let b={},c=bp(a,["gcsUri"]);null!=c&&bo(b,["gcsUri"],c);let d=bp(a,["bytesBase64Encoded"]);null!=d&&bo(b,["imageBytes"],bq(d));let e=bp(a,["mimeType"]);return null!=e&&bo(b,["mimeType"],e),b}function cN(a){let b={};if(void 0!==bp(a,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");let c=bp(a,["imageBytes"]);null!=c&&bo(b,["bytesBase64Encoded"],bq(c));let d=bp(a,["mimeType"]);return null!=d&&bo(b,["mimeType"],d),b}function cO(a){let b={},c=bp(a,["gcsUri"]);null!=c&&bo(b,["gcsUri"],c);let d=bp(a,["imageBytes"]);null!=d&&bo(b,["bytesBase64Encoded"],bq(d));let e=bp(a,["mimeType"]);return null!=e&&bo(b,["mimeType"],e),b}function cP(a){var b;let c,d,e,f,g={},h=bp(a,["name"]);null!=h&&bo(g,["name"],h);let i=bp(a,["displayName"]);null!=i&&bo(g,["displayName"],i);let j=bp(a,["description"]);null!=j&&bo(g,["description"],j);let k=bp(a,["version"]);null!=k&&bo(g,["version"],k);let l=bp(a,["_self"]);null!=l&&bo(g,["tunedModelInfo"],(c={},null!=(d=bp(b=l,["baseModel"]))&&bo(c,["baseModel"],d),null!=(e=bp(b,["createTime"]))&&bo(c,["createTime"],e),null!=(f=bp(b,["updateTime"]))&&bo(c,["updateTime"],f),c));let m=bp(a,["inputTokenLimit"]);null!=m&&bo(g,["inputTokenLimit"],m);let n=bp(a,["outputTokenLimit"]);null!=n&&bo(g,["outputTokenLimit"],n);let o=bp(a,["supportedGenerationMethods"]);null!=o&&bo(g,["supportedActions"],o);let p=bp(a,["temperature"]);null!=p&&bo(g,["temperature"],p);let q=bp(a,["maxTemperature"]);null!=q&&bo(g,["maxTemperature"],q);let r=bp(a,["topP"]);null!=r&&bo(g,["topP"],r);let s=bp(a,["topK"]);null!=s&&bo(g,["topK"],s);let t=bp(a,["thinking"]);return null!=t&&bo(g,["thinking"],t),g}function cQ(a){var b;let c,d,e,f,g={},h=bp(a,["name"]);null!=h&&bo(g,["name"],h);let i=bp(a,["displayName"]);null!=i&&bo(g,["displayName"],i);let j=bp(a,["description"]);null!=j&&bo(g,["description"],j);let k=bp(a,["versionId"]);null!=k&&bo(g,["version"],k);let l=bp(a,["deployedModels"]);if(null!=l){let a=l;Array.isArray(a)&&(a=a.map(a=>{let b,c,d;return b={},null!=(c=bp(a,["endpoint"]))&&bo(b,["name"],c),null!=(d=bp(a,["deployedModelId"]))&&bo(b,["deployedModelId"],d),b})),bo(g,["endpoints"],a)}let m=bp(a,["labels"]);null!=m&&bo(g,["labels"],m);let n=bp(a,["_self"]);null!=n&&bo(g,["tunedModelInfo"],(c={},null!=(d=bp(b=n,["labels","google-vertex-llm-tuning-base-model-id"]))&&bo(c,["baseModel"],d),null!=(e=bp(b,["createTime"]))&&bo(c,["createTime"],e),null!=(f=bp(b,["updateTime"]))&&bo(c,["updateTime"],f),c));let o=bp(a,["defaultCheckpointId"]);null!=o&&bo(g,["defaultCheckpointId"],o);let p=bp(a,["checkpoints"]);if(null!=p){let a=p;Array.isArray(a)&&(a=a.map(a=>a)),bo(g,["checkpoints"],a)}return g}function cR(a){let b={},c=bp(a,["safetyAttributes","categories"]);null!=c&&bo(b,["categories"],c);let d=bp(a,["safetyAttributes","scores"]);null!=d&&bo(b,["scores"],d);let e=bp(a,["contentType"]);return null!=e&&bo(b,["contentType"],e),b}function cS(a){let b={},c=bp(a,["safetyAttributes","categories"]);null!=c&&bo(b,["categories"],c);let d=bp(a,["safetyAttributes","scores"]);null!=d&&bo(b,["scores"],d);let e=bp(a,["contentType"]);return null!=e&&bo(b,["contentType"],e),b}function cT(a){let b={},c=bp(a,["voiceConfig"]);null!=c&&bo(b,["voiceConfig"],c);let d=bp(a,["languageCode"]);if(null!=d&&bo(b,["languageCode"],d),void 0!==bp(a,["multiSpeakerVoiceConfig"]))throw Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return b}function cU(a){let b={},c=bp(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={};if(void 0!==bp(a,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");let c=bp(a,["description"]);null!=c&&bo(b,["description"],c);let d=bp(a,["name"]);null!=d&&bo(b,["name"],d);let e=bp(a,["parameters"]);null!=e&&bo(b,["parameters"],e);let f=bp(a,["parametersJsonSchema"]);null!=f&&bo(b,["parametersJsonSchema"],f);let g=bp(a,["response"]);null!=g&&bo(b,["response"],g);let h=bp(a,["responseJsonSchema"]);return null!=h&&bo(b,["responseJsonSchema"],h),b})(a))),bo(b,["functionDeclarations"],a)}let d=bp(a,["retrieval"]);null!=d&&bo(b,["retrieval"],d);let e=bp(a,["googleSearchRetrieval"]);null!=e&&bo(b,["googleSearchRetrieval"],e);let f=bp(a,["computerUse"]);if(null!=f&&bo(b,["computerUse"],f),void 0!==bp(a,["fileSearch"]))throw Error("fileSearch parameter is not supported in Vertex AI.");let g=bp(a,["codeExecution"]);null!=g&&bo(b,["codeExecution"],g);let h=bp(a,["enterpriseWebSearch"]);null!=h&&bo(b,["enterpriseWebSearch"],h);let i=bp(a,["googleMaps"]);null!=i&&bo(b,["googleMaps"],i);let j=bp(a,["googleSearch"]);null!=j&&bo(b,["googleSearch"],j);let k=bp(a,["urlContext"]);return null!=k&&bo(b,["urlContext"],k),b}function cV(a){let b={},c=bp(a,["uri"]);null!=c&&bo(b,["uri"],c);let d=bp(a,["videoBytes"]);null!=d&&bo(b,["encodedVideo"],bq(d));let e=bp(a,["mimeType"]);return null!=e&&bo(b,["encoding"],e),b}function cW(a){let b={},c=bp(a,["uri"]);null!=c&&bo(b,["gcsUri"],c);let d=bp(a,["videoBytes"]);null!=d&&bo(b,["bytesBase64Encoded"],bq(d));let e=bp(a,["mimeType"]);return null!=e&&bo(b,["mimeType"],e),b}function cX(a,b){let c=bp(a,["mimeType"]);void 0!==b&&null!=c&&bo(b,["mimeType"],c);let d=bp(a,["displayName"]);void 0!==b&&null!=d&&bo(b,["displayName"],d);let e=bp(a,["customMetadata"]);if(void 0!==b&&null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["customMetadata"],a)}let f=bp(a,["chunkingConfig"]);return void 0!==b&&null!=f&&bo(b,["chunkingConfig"],f),{}}let cY="x-goog-api-client";class cZ{constructor(a){var b,c;this.clientOptions=Object.assign(Object.assign({},a),{project:a.project,location:a.location,apiKey:a.apiKey,vertexai:a.vertexai});const d={};this.clientOptions.vertexai?(d.apiVersion=null!=(b=this.clientOptions.apiVersion)?b:"v1beta1",d.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(d.apiVersion=null!=(c=this.clientOptions.apiVersion)?c:"v1beta",d.baseUrl="https://generativelanguage.googleapis.com/"),d.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=d,a.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(d,a.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&"global"!==this.clientOptions.location?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var a;return null!=(a=this.clientOptions.vertexai)&&a}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw Error("Headers are not set.")}getRequestUrlInternal(a){if(!a||void 0===a.baseUrl||void 0===a.apiVersion)throw Error("HTTP options are not correctly set.");let b=[a.baseUrl.endsWith("/")?a.baseUrl.slice(0,-1):a.baseUrl];return a.apiVersion&&""!==a.apiVersion&&b.push(a.apiVersion),b.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let a=new URL(this.getBaseUrl());return a.protocol="http:"==a.protocol?"ws":"wss",a.toString()}setBaseUrl(a){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=a;else throw Error("HTTP options are not correctly set.")}constructUrl(a,b,c){let d=[this.getRequestUrlInternal(b)];return c&&d.push(this.getBaseResourcePath()),""!==a&&d.push(a),new URL(`${d.join("/")}`)}shouldPrependVertexProjectPath(a){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||a.path.startsWith("projects/")||"GET"===a.httpMethod&&a.path.startsWith("publishers/google/models"))}async request(a){let b=this.clientOptions.httpOptions;a.httpOptions&&(b=this.patchHttpOptions(this.clientOptions.httpOptions,a.httpOptions));let c=this.shouldPrependVertexProjectPath(a),d=this.constructUrl(a.path,b,c);if(a.queryParams)for(let[b,c]of Object.entries(a.queryParams))d.searchParams.append(b,String(c));let e={};if("GET"===a.httpMethod){if(a.body&&"{}"!==a.body)throw Error("Request body should be empty for GET request, but got non empty request body")}else e.body=a.body;return e=await this.includeExtraHttpOptionsToRequestInit(e,b,d.toString(),a.abortSignal),this.unaryApiCall(d,e,a.httpMethod)}patchHttpOptions(a,b){let c=JSON.parse(JSON.stringify(a));for(let[a,d]of Object.entries(b))"object"==typeof d?c[a]=Object.assign(Object.assign({},c[a]),d):void 0!==d&&(c[a]=d);return c}async requestStream(a){let b=this.clientOptions.httpOptions;a.httpOptions&&(b=this.patchHttpOptions(this.clientOptions.httpOptions,a.httpOptions));let c=this.shouldPrependVertexProjectPath(a),d=this.constructUrl(a.path,b,c);d.searchParams.has("alt")&&"sse"===d.searchParams.get("alt")||d.searchParams.set("alt","sse");let e={};return e.body=a.body,e=await this.includeExtraHttpOptionsToRequestInit(e,b,d.toString(),a.abortSignal),this.streamApiCall(d,e,a.httpMethod)}async includeExtraHttpOptionsToRequestInit(a,b,c,d){if(b&&b.timeout||d){let c=new AbortController,e=c.signal;if(b.timeout&&(null==b?void 0:b.timeout)>0){let a=setTimeout(()=>c.abort(),b.timeout);a&&"function"==typeof a.unref&&a.unref()}d&&d.addEventListener("abort",()=>{c.abort()}),a.signal=e}return b&&null!==b.extraBody&&function(a,b){if(!b||0===Object.keys(b).length)return;if(a.body instanceof Blob)return console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");let c={};if("string"==typeof a.body&&a.body.length>0)try{let b=JSON.parse(a.body);if("object"!=typeof b||null===b||Array.isArray(b))return void console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");c=b}catch(a){console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}a.body=JSON.stringify(function a(b,c){let d=Object.assign({},b);for(let b in c)if(Object.prototype.hasOwnProperty.call(c,b)){let e=c[b],f=d[b];e&&"object"==typeof e&&!Array.isArray(e)&&f&&"object"==typeof f&&!Array.isArray(f)?d[b]=a(f,e):(f&&e&&typeof f!=typeof e&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${b}". Original type: ${typeof f}, New type: ${typeof e}. Overwriting.`),d[b]=e)}return d}(c,b))}(a,b.extraBody),a.headers=await this.getHeadersInternal(b,c),a}async unaryApiCall(a,b,c){return this.apiCall(a.toString(),Object.assign(Object.assign({},b),{method:c})).then(async a=>(await c$(a),new bs(a))).catch(a=>{if(a instanceof Error)throw a;throw Error(JSON.stringify(a))})}async streamApiCall(a,b,c){return this.apiCall(a.toString(),Object.assign(Object.assign({},b),{method:c})).then(async a=>(await c$(a),this.processStreamResponse(a))).catch(a=>{if(a instanceof Error)throw a;throw Error(JSON.stringify(a))})}processStreamResponse(a){return cw(this,arguments,function*(){var b;let c=null==(b=null==a?void 0:a.body)?void 0:b.getReader(),d=new TextDecoder("utf-8");if(!c)throw Error("Response body is empty");try{let b="",e="data:",f=["\n\n","\r\r","\r\n\r\n"];for(;;){let{done:g,value:h}=yield cv(c.read());if(g){if(b.trim().length>0)throw Error("Incomplete JSON segment at the end");break}let i=d.decode(h,{stream:!0});try{let a=JSON.parse(i);if("error"in a){let b=JSON.parse(JSON.stringify(a.error)),c=b.status,d=b.code,e=`got status: ${c}. ${JSON.stringify(a)}`;if(d>=400&&d<600)throw new cC({message:e,status:d})}}catch(a){if("ApiError"===a.name)throw a}b+=i;let j=-1,k=0;for(;;){for(let a of(j=-1,k=0,f)){let c=b.indexOf(a);-1!==c&&(-1===j||c<j)&&(j=c,k=a.length)}if(-1===j)break;let c=b.substring(0,j);b=b.substring(j+k);let d=c.trim();if(d.startsWith(e)){let b=d.substring(e.length).trim();try{let c=new Response(b,{headers:null==a?void 0:a.headers,status:null==a?void 0:a.status,statusText:null==a?void 0:a.statusText});yield yield cv(new bs(c))}catch(a){throw Error(`exception parsing stream chunk ${b}. ${a}`)}}}}}finally{c.releaseLock()}})}async apiCall(a,b){return fetch(a,b).catch(a=>{throw Error(`exception ${a} sending request`)})}getDefaultHeaders(){let a={},b="google-genai-sdk/1.33.0 "+this.clientOptions.userAgentExtra;return a["User-Agent"]=b,a[cY]=b,a["Content-Type"]="application/json",a}async getHeadersInternal(a,b){let c=new Headers;if(a&&a.headers){for(let[b,d]of Object.entries(a.headers))c.append(b,d);a.timeout&&a.timeout>0&&c.append("X-Server-Timeout",String(Math.ceil(a.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(c,b),c}getFileName(a){var b;let c="";return"string"==typeof a&&(c=null!=(b=(c=a.replace(/[/\\]+$/,"")).split(/[/\\]/).pop())?b:""),c}async uploadFile(a,b){var c;let d={};null!=b&&(d.mimeType=b.mimeType,d.name=b.name,d.displayName=b.displayName),d.name&&!d.name.startsWith("files/")&&(d.name=`files/${d.name}`);let e=this.clientOptions.uploader,f=await e.stat(a);d.sizeBytes=String(f.size);let g=null!=(c=null==b?void 0:b.mimeType)?c:f.type;if(void 0===g||""===g)throw Error("Can not determine mimeType. Please provide mimeType in the config.");d.mimeType=g;let h={file:d},i=this.getFileName(a),j=bn("upload/v1beta/files",h._url),k=await this.fetchUploadUrl(j,d.sizeBytes,d.mimeType,i,h,null==b?void 0:b.httpOptions);return e.upload(a,k,this)}async uploadFileToFileSearchStore(a,b,c){var d;let e=this.clientOptions.uploader,f=await e.stat(b),g=String(f.size),h=null!=(d=null==c?void 0:c.mimeType)?d:f.type;if(void 0===h||""===h)throw Error("Can not determine mimeType. Please provide mimeType in the config.");let i=`upload/v1beta/${a}:uploadToFileSearchStore`,j=this.getFileName(b),k={};null!=c&&cX(c,k);let l=await this.fetchUploadUrl(i,g,h,j,k,null==c?void 0:c.httpOptions);return e.uploadToFileSearchStore(b,l,this)}async downloadFile(a){let b=this.clientOptions.downloader;await b.download(a,this)}async fetchUploadUrl(a,b,c,d,e,f){var g;let h={};h=f||{apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${b}`,"X-Goog-Upload-Header-Content-Type":`${c}`},d?{"X-Goog-Upload-File-Name":d}:{})};let i=await this.request({path:a,body:JSON.stringify(e),httpMethod:"POST",httpOptions:h});if(!i||!(null==i?void 0:i.headers))throw Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let j=null==(g=null==i?void 0:i.headers)?void 0:g["x-goog-upload-url"];if(void 0===j)throw Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return j}}async function c$(a){var b;if(void 0===a)throw Error("response is undefined");if(!a.ok){let c=a.status,d=JSON.stringify((null==(b=a.headers.get("content-type"))?void 0:b.includes("application/json"))?await a.json():{error:{message:await a.text(),code:a.status,status:a.statusText}});if(c>=400&&c<600)throw new cC({message:d,status:c});throw Error(d)}}function c_(a){for(let c of a){var b;if(null!==(b=c)&&"object"==typeof b&&b instanceof c1||"object"==typeof c&&"inputSchema"in c)return!0}return!1}function c0(a){var b;let c=null!=(b=a[cY])?b:"";a[cY]=(c+" mcp_used/unknown").trimStart()}class c1{constructor(a=[],b){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=a,this.config=b}static create(a,b){return new c1(a,b)}async initialize(){var a,b,c,d;if(this.mcpTools.length>0)return;let e={},f=[];for(let j of this.mcpClients)try{for(var g,h=!0,i=(b=void 0,cx(function(a){return cw(this,arguments,function*(a,b=100){let c,d=0;for(;d<b;){let b=yield cv(a.listTools({cursor:c}));for(let a of b.tools)yield yield cv(a),d++;if(!b.nextCursor)break;c=b.nextCursor}})}(j)));!(a=(g=await i.next()).done);h=!0){d=g.value,h=!1,f.push(d);let a=d.name;if(e[a])throw Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);e[a]=j}}catch(a){b={error:a}}finally{try{!h&&!a&&(c=i.return)&&await c.call(i)}finally{if(b)throw b.error}}this.mcpTools=f,this.functionNameToMcpClient=e}async tool(){return await this.initialize(),function(a,b={}){let c=[],d=new Set;for(let e of a){let a=e.name;if(d.has(a))throw Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);d.add(a);let f=function(a,b={}){let c={name:a.name,description:a.description,parametersJsonSchema:a.inputSchema};return a.outputSchema&&(c.responseJsonSchema=a.outputSchema),b.behavior&&(c.behavior=b.behavior),{functionDeclarations:[c]}}(e,b);f.functionDeclarations&&c.push(...f.functionDeclarations)}return{functionDeclarations:c}}(this.mcpTools,this.config)}async callTool(a){await this.initialize();let b=[];for(let c of a)if(c.name in this.functionNameToMcpClient){let a,d=this.functionNameToMcpClient[c.name];this.config.timeout&&(a={timeout:this.config.timeout});let e=await d.callTool({name:c.name,arguments:c.args},void 0,a);b.push({functionResponse:{name:c.name,response:e.isError?{error:e}:e}})}return b}}async function c2(a,b,c){let d=new bS;Object.assign(d,c.data instanceof Blob?JSON.parse(await c.data.text()):JSON.parse(c.data)),b(d)}class c3{constructor(a,b,c){this.apiClient=a,this.auth=b,this.webSocketFactory=c}async connect(a){var b,c;let d;if(this.apiClient.isVertexAI())throw Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let e=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion(),g=function(a){let b=new Headers;for(let[c,d]of Object.entries(a))b.append(c,d);return b}(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),i=`${e}/ws/google.ai.generativelanguage.${f}.GenerativeService.BidiGenerateMusic?key=${h}`,j=()=>{},k=new Promise(a=>{j=a}),l=a.callbacks,m=this.apiClient,n={onopen:function(){j({})},onmessage:a=>{c2(m,l.onmessage,a)},onerror:null!=(b=null==l?void 0:l.onerror)?b:function(a){},onclose:null!=(c=null==l?void 0:l.onclose)?c:function(a){}},o=this.webSocketFactory.create(i,(d={},g.forEach((a,b)=>{d[b]=a}),d),n);o.connect(),await k;let p=bU(this.apiClient,a.model);return o.send(JSON.stringify({setup:{model:p}})),new c4(o,this.apiClient)}}class c4{constructor(a,b){this.conn=a,this.apiClient=b}async setWeightedPrompts(a){if(!a.weightedPrompts||0===Object.keys(a.weightedPrompts).length)throw Error("Weighted prompts must be set and contain at least one entry.");let b=function(a){let b={},c=bp(a,["weightedPrompts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["weightedPrompts"],a)}return b}(a);this.conn.send(JSON.stringify({clientContent:b}))}async setMusicGenerationConfig(a){let b,c;a.musicGenerationConfig||(a.musicGenerationConfig={});let d=(b={},null!=(c=bp(a,["musicGenerationConfig"]))&&bo(b,["musicGenerationConfig"],c),b);this.conn.send(JSON.stringify(d))}sendPlaybackControl(a){this.conn.send(JSON.stringify({playbackControl:a}))}play(){this.sendPlaybackControl(bc.PLAY)}pause(){this.sendPlaybackControl(bc.PAUSE)}stop(){this.sendPlaybackControl(bc.STOP)}resetContext(){this.sendPlaybackControl(bc.RESET_CONTEXT)}close(){this.conn.close()}}async function c5(a,b,c){let d=new bR,e=JSON.parse(c.data instanceof Blob?await c.data.text():c.data instanceof ArrayBuffer?new TextDecoder().decode(c.data):c.data);if(a.isVertexAI()){let a,b,c,f,g,h,i,j,k;Object.assign(d,(a={},null!=(b=bp(e,["setupComplete"]))&&bo(a,["setupComplete"],b),null!=(c=bp(e,["serverContent"]))&&bo(a,["serverContent"],c),null!=(f=bp(e,["toolCall"]))&&bo(a,["toolCall"],f),null!=(g=bp(e,["toolCallCancellation"]))&&bo(a,["toolCallCancellation"],g),null!=(h=bp(e,["usageMetadata"]))&&bo(a,["usageMetadata"],function(a){let b={},c=bp(a,["promptTokenCount"]);null!=c&&bo(b,["promptTokenCount"],c);let d=bp(a,["cachedContentTokenCount"]);null!=d&&bo(b,["cachedContentTokenCount"],d);let e=bp(a,["candidatesTokenCount"]);null!=e&&bo(b,["responseTokenCount"],e);let f=bp(a,["toolUsePromptTokenCount"]);null!=f&&bo(b,["toolUsePromptTokenCount"],f);let g=bp(a,["thoughtsTokenCount"]);null!=g&&bo(b,["thoughtsTokenCount"],g);let h=bp(a,["totalTokenCount"]);null!=h&&bo(b,["totalTokenCount"],h);let i=bp(a,["promptTokensDetails"]);if(null!=i){let a=i;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["promptTokensDetails"],a)}let j=bp(a,["cacheTokensDetails"]);if(null!=j){let a=j;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["cacheTokensDetails"],a)}let k=bp(a,["candidatesTokensDetails"]);if(null!=k){let a=k;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["responseTokensDetails"],a)}let l=bp(a,["toolUsePromptTokensDetails"]);if(null!=l){let a=l;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["toolUsePromptTokensDetails"],a)}let m=bp(a,["trafficType"]);return null!=m&&bo(b,["trafficType"],m),b}(h)),null!=(i=bp(e,["goAway"]))&&bo(a,["goAway"],i),null!=(j=bp(e,["sessionResumptionUpdate"]))&&bo(a,["sessionResumptionUpdate"],j),null!=(k=bp(e,["voiceActivityDetectionSignal"]))&&bo(a,["voiceActivityDetectionSignal"],k),a))}else Object.assign(d,e);b(d)}class c6{constructor(a,b,c){this.apiClient=a,this.auth=b,this.webSocketFactory=c,this.music=new c3(this.apiClient,this.auth,this.webSocketFactory)}async connect(a){var b,c,d,e,f,g,h,i;let j,k;if(a.config&&a.config.httpOptions)throw Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let l=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion(),n=this.apiClient.getHeaders();a.config&&a.config.tools&&c_(a.config.tools)&&c0(n);let o=function(a){let b=new Headers;for(let[c,d]of Object.entries(a))b.append(c,d);return b}(n);if(this.apiClient.isVertexAI())j=`${l}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(o,j);else{let a=this.apiClient.getApiKey(),b="BidiGenerateContent",c="key";(null==a?void 0:a.startsWith("auth_tokens/"))&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),"v1alpha"!==m&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),b="BidiGenerateContentConstrained",c="access_token"),j=`${l}/ws/google.ai.generativelanguage.${m}.GenerativeService.${b}?${c}=${a}`}let p=()=>{},q=new Promise(a=>{p=a}),r=a.callbacks,s=this.apiClient,t={onopen:function(){var a;null==(a=null==r?void 0:r.onopen)||a.call(r),p({})},onmessage:a=>{c5(s,r.onmessage,a)},onerror:null!=(b=null==r?void 0:r.onerror)?b:function(a){},onclose:null!=(c=null==r?void 0:r.onclose)?c:function(a){}},u=this.webSocketFactory.create(j,(k={},o.forEach((a,b)=>{k[b]=a}),k),t);u.connect(),await q;let v=bU(this.apiClient,a.model);if(this.apiClient.isVertexAI()&&v.startsWith("publishers/")){let a=this.apiClient.getProject(),b=this.apiClient.getLocation();v=`projects/${a}/locations/${b}/`+v}let w={};this.apiClient.isVertexAI()&&(null==(d=a.config)?void 0:d.responseModalities)===void 0&&(void 0===a.config?a.config={responseModalities:[aE.AUDIO]}:a.config.responseModalities=[aE.AUDIO]),(null==(e=a.config)?void 0:e.generationConfig)&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let x=null!=(g=null==(f=a.config)?void 0:f.tools)?g:[],y=[];for(let a of x)this.isCallableTool(a)?y.push(await a.tool()):y.push(a);y.length>0&&(a.config.tools=y);let z={model:v,config:a.config,callbacks:a.callbacks};if(this.apiClient.isVertexAI()){let a,b,c;h=this.apiClient,a={},null!=(b=bp(z,["model"]))&&bo(a,["setup","model"],bU(h,b)),null!=(c=bp(z,["config"]))&&bo(a,["config"],function(a,b){let c=bp(a,["generationConfig"]);void 0!==b&&null!=c&&bo(b,["setup","generationConfig"],function(a){let b={},c=bp(a,["modelSelectionConfig"]);null!=c&&bo(b,["modelConfig"],c);let d=bp(a,["responseJsonSchema"]);null!=d&&bo(b,["responseJsonSchema"],d);let e=bp(a,["audioTimestamp"]);null!=e&&bo(b,["audioTimestamp"],e);let f=bp(a,["candidateCount"]);null!=f&&bo(b,["candidateCount"],f);let g=bp(a,["enableAffectiveDialog"]);null!=g&&bo(b,["enableAffectiveDialog"],g);let h=bp(a,["frequencyPenalty"]);null!=h&&bo(b,["frequencyPenalty"],h);let i=bp(a,["logprobs"]);null!=i&&bo(b,["logprobs"],i);let j=bp(a,["maxOutputTokens"]);null!=j&&bo(b,["maxOutputTokens"],j);let k=bp(a,["mediaResolution"]);null!=k&&bo(b,["mediaResolution"],k);let l=bp(a,["presencePenalty"]);null!=l&&bo(b,["presencePenalty"],l);let m=bp(a,["responseLogprobs"]);null!=m&&bo(b,["responseLogprobs"],m);let n=bp(a,["responseMimeType"]);null!=n&&bo(b,["responseMimeType"],n);let o=bp(a,["responseModalities"]);null!=o&&bo(b,["responseModalities"],o);let p=bp(a,["responseSchema"]);null!=p&&bo(b,["responseSchema"],p);let q=bp(a,["routingConfig"]);null!=q&&bo(b,["routingConfig"],q);let r=bp(a,["seed"]);null!=r&&bo(b,["seed"],r);let s=bp(a,["speechConfig"]);null!=s&&bo(b,["speechConfig"],cF(s));let t=bp(a,["stopSequences"]);null!=t&&bo(b,["stopSequences"],t);let u=bp(a,["temperature"]);null!=u&&bo(b,["temperature"],u);let v=bp(a,["thinkingConfig"]);null!=v&&bo(b,["thinkingConfig"],v);let w=bp(a,["topK"]);null!=w&&bo(b,["topK"],w);let x=bp(a,["topP"]);if(null!=x&&bo(b,["topP"],x),void 0!==bp(a,["enableEnhancedCivicAnswers"]))throw Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return b}(c));let d=bp(a,["responseModalities"]);void 0!==b&&null!=d&&bo(b,["setup","generationConfig","responseModalities"],d);let e=bp(a,["temperature"]);void 0!==b&&null!=e&&bo(b,["setup","generationConfig","temperature"],e);let f=bp(a,["topP"]);void 0!==b&&null!=f&&bo(b,["setup","generationConfig","topP"],f);let g=bp(a,["topK"]);void 0!==b&&null!=g&&bo(b,["setup","generationConfig","topK"],g);let h=bp(a,["maxOutputTokens"]);void 0!==b&&null!=h&&bo(b,["setup","generationConfig","maxOutputTokens"],h);let i=bp(a,["mediaResolution"]);void 0!==b&&null!=i&&bo(b,["setup","generationConfig","mediaResolution"],i);let j=bp(a,["seed"]);void 0!==b&&null!=j&&bo(b,["setup","generationConfig","seed"],j);let k=bp(a,["speechConfig"]);void 0!==b&&null!=k&&bo(b,["setup","generationConfig","speechConfig"],cF(b8(k)));let l=bp(a,["thinkingConfig"]);void 0!==b&&null!=l&&bo(b,["setup","generationConfig","thinkingConfig"],l);let m=bp(a,["enableAffectiveDialog"]);void 0!==b&&null!=m&&bo(b,["setup","generationConfig","enableAffectiveDialog"],m);let n=bp(a,["systemInstruction"]);void 0!==b&&null!=n&&bo(b,["setup","systemInstruction"],b3(n));let o=bp(a,["tools"]);if(void 0!==b&&null!=o){let a=ca(o);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=bp(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={};if(void 0!==bp(a,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");let c=bp(a,["description"]);null!=c&&bo(b,["description"],c);let d=bp(a,["name"]);null!=d&&bo(b,["name"],d);let e=bp(a,["parameters"]);null!=e&&bo(b,["parameters"],e);let f=bp(a,["parametersJsonSchema"]);null!=f&&bo(b,["parametersJsonSchema"],f);let g=bp(a,["response"]);null!=g&&bo(b,["response"],g);let h=bp(a,["responseJsonSchema"]);return null!=h&&bo(b,["responseJsonSchema"],h),b})(a))),bo(b,["functionDeclarations"],a)}let d=bp(a,["retrieval"]);null!=d&&bo(b,["retrieval"],d);let e=bp(a,["googleSearchRetrieval"]);null!=e&&bo(b,["googleSearchRetrieval"],e);let f=bp(a,["computerUse"]);if(null!=f&&bo(b,["computerUse"],f),void 0!==bp(a,["fileSearch"]))throw Error("fileSearch parameter is not supported in Vertex AI.");let g=bp(a,["codeExecution"]);null!=g&&bo(b,["codeExecution"],g);let h=bp(a,["enterpriseWebSearch"]);null!=h&&bo(b,["enterpriseWebSearch"],h);let i=bp(a,["googleMaps"]);null!=i&&bo(b,["googleMaps"],i);let j=bp(a,["googleSearch"]);null!=j&&bo(b,["googleSearch"],j);let k=bp(a,["urlContext"]);return null!=k&&bo(b,["urlContext"],k),b})(b9(a)))),bo(b,["setup","tools"],a)}let p=bp(a,["sessionResumption"]);void 0!==b&&null!=p&&bo(b,["setup","sessionResumption"],p);let q=bp(a,["inputAudioTranscription"]);void 0!==b&&null!=q&&bo(b,["setup","inputAudioTranscription"],q);let r=bp(a,["outputAudioTranscription"]);void 0!==b&&null!=r&&bo(b,["setup","outputAudioTranscription"],r);let s=bp(a,["realtimeInputConfig"]);void 0!==b&&null!=s&&bo(b,["setup","realtimeInputConfig"],s);let t=bp(a,["contextWindowCompression"]);void 0!==b&&null!=t&&bo(b,["setup","contextWindowCompression"],t);let u=bp(a,["proactivity"]);void 0!==b&&null!=u&&bo(b,["setup","proactivity"],u);let v=bp(a,["explicitVadSignal"]);return void 0!==b&&null!=v&&bo(b,["setup","explicitVadSignal"],v),{}}(c,a)),w=a}else{let a,b,c;i=this.apiClient,a={},null!=(b=bp(z,["model"]))&&bo(a,["setup","model"],bU(i,b)),null!=(c=bp(z,["config"]))&&bo(a,["config"],function(a,b){let c=bp(a,["generationConfig"]);void 0!==b&&null!=c&&bo(b,["setup","generationConfig"],c);let d=bp(a,["responseModalities"]);void 0!==b&&null!=d&&bo(b,["setup","generationConfig","responseModalities"],d);let e=bp(a,["temperature"]);void 0!==b&&null!=e&&bo(b,["setup","generationConfig","temperature"],e);let f=bp(a,["topP"]);void 0!==b&&null!=f&&bo(b,["setup","generationConfig","topP"],f);let g=bp(a,["topK"]);void 0!==b&&null!=g&&bo(b,["setup","generationConfig","topK"],g);let h=bp(a,["maxOutputTokens"]);void 0!==b&&null!=h&&bo(b,["setup","generationConfig","maxOutputTokens"],h);let i=bp(a,["mediaResolution"]);void 0!==b&&null!=i&&bo(b,["setup","generationConfig","mediaResolution"],i);let j=bp(a,["seed"]);void 0!==b&&null!=j&&bo(b,["setup","generationConfig","seed"],j);let k=bp(a,["speechConfig"]);void 0!==b&&null!=k&&bo(b,["setup","generationConfig","speechConfig"],b8(k));let l=bp(a,["thinkingConfig"]);void 0!==b&&null!=l&&bo(b,["setup","generationConfig","thinkingConfig"],l);let m=bp(a,["enableAffectiveDialog"]);void 0!==b&&null!=m&&bo(b,["setup","generationConfig","enableAffectiveDialog"],m);let n=bp(a,["systemInstruction"]);void 0!==b&&null!=n&&bo(b,["setup","systemInstruction"],function(a){let b={},c=bp(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e,f,g,h,i,j,k,l,m,n;return c={},null!=(d=bp(b=a,["mediaResolution"]))&&bo(c,["mediaResolution"],d),null!=(e=bp(b,["codeExecutionResult"]))&&bo(c,["codeExecutionResult"],e),null!=(f=bp(b,["executableCode"]))&&bo(c,["executableCode"],f),null!=(g=bp(b,["fileData"]))&&bo(c,["fileData"],function(a){let b={};if(void 0!==bp(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=bp(a,["fileUri"]);null!=c&&bo(b,["fileUri"],c);let d=bp(a,["mimeType"]);return null!=d&&bo(b,["mimeType"],d),b}(g)),null!=(h=bp(b,["functionCall"]))&&bo(c,["functionCall"],function(a){let b={},c=bp(a,["id"]);null!=c&&bo(b,["id"],c);let d=bp(a,["args"]);null!=d&&bo(b,["args"],d);let e=bp(a,["name"]);if(null!=e&&bo(b,["name"],e),void 0!==bp(a,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==bp(a,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return b}(h)),null!=(i=bp(b,["functionResponse"]))&&bo(c,["functionResponse"],i),null!=(j=bp(b,["inlineData"]))&&bo(c,["inlineData"],cE(j)),null!=(k=bp(b,["text"]))&&bo(c,["text"],k),null!=(l=bp(b,["thought"]))&&bo(c,["thought"],l),null!=(m=bp(b,["thoughtSignature"]))&&bo(c,["thoughtSignature"],m),null!=(n=bp(b,["videoMetadata"]))&&bo(c,["videoMetadata"],n),c})),bo(b,["parts"],a)}let d=bp(a,["role"]);return null!=d&&bo(b,["role"],d),b}(b3(n)));let o=bp(a,["tools"]);if(void 0!==b&&null!=o){let a=ca(o);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=bp(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["functionDeclarations"],a)}if(void 0!==bp(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let d=bp(a,["googleSearchRetrieval"]);null!=d&&bo(b,["googleSearchRetrieval"],d);let e=bp(a,["computerUse"]);null!=e&&bo(b,["computerUse"],e);let f=bp(a,["fileSearch"]);null!=f&&bo(b,["fileSearch"],f);let g=bp(a,["codeExecution"]);if(null!=g&&bo(b,["codeExecution"],g),void 0!==bp(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let h=bp(a,["googleMaps"]);null!=h&&bo(b,["googleMaps"],function(a){let b={};if(void 0!==bp(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=bp(a,["enableWidget"]);return null!=c&&bo(b,["enableWidget"],c),b}(h));let i=bp(a,["googleSearch"]);null!=i&&bo(b,["googleSearch"],function(a){let b={};if(void 0!==bp(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==bp(a,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let c=bp(a,["timeRangeFilter"]);return null!=c&&bo(b,["timeRangeFilter"],c),b}(i));let j=bp(a,["urlContext"]);return null!=j&&bo(b,["urlContext"],j),b})(b9(a)))),bo(b,["setup","tools"],a)}let p=bp(a,["sessionResumption"]);void 0!==b&&null!=p&&bo(b,["setup","sessionResumption"],function(a){let b={},c=bp(a,["handle"]);if(null!=c&&bo(b,["handle"],c),void 0!==bp(a,["transparent"]))throw Error("transparent parameter is not supported in Gemini API.");return b}(p));let q=bp(a,["inputAudioTranscription"]);void 0!==b&&null!=q&&bo(b,["setup","inputAudioTranscription"],q);let r=bp(a,["outputAudioTranscription"]);void 0!==b&&null!=r&&bo(b,["setup","outputAudioTranscription"],r);let s=bp(a,["realtimeInputConfig"]);void 0!==b&&null!=s&&bo(b,["setup","realtimeInputConfig"],s);let t=bp(a,["contextWindowCompression"]);void 0!==b&&null!=t&&bo(b,["setup","contextWindowCompression"],t);let u=bp(a,["proactivity"]);if(void 0!==b&&null!=u&&bo(b,["setup","proactivity"],u),void 0!==bp(a,["explicitVadSignal"]))throw Error("explicitVadSignal parameter is not supported in Gemini API.");return{}}(c,a)),w=a}return delete w.config,u.send(JSON.stringify(w)),new c8(u,this.apiClient)}isCallableTool(a){return"callTool"in a&&"function"==typeof a.callTool}}let c7={turnComplete:!0};class c8{constructor(a,b){this.conn=a,this.apiClient=b}tLiveClientContent(a,b){if(null!==b.turns&&void 0!==b.turns){let c=[];try{c=b5(b.turns),a.isVertexAI()||(c=c.map(a=>cG(a)))}catch(a){throw Error(`Failed to parse client content "turns", type: '${typeof b.turns}'`)}return{clientContent:{turns:c,turnComplete:b.turnComplete}}}return{clientContent:{turnComplete:b.turnComplete}}}tLiveClienttToolResponse(a,b){let c=[];if(null==b.functionResponses||0===(c=Array.isArray(b.functionResponses)?b.functionResponses:[b.functionResponses]).length)throw Error("functionResponses is required.");for(let b of c){if("object"!=typeof b||null===b||!("name"in b)||!("response"in b))throw Error(`Could not parse function response, type '${typeof b}'.`);if(!a.isVertexAI()&&!("id"in b))throw Error("FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.")}return{toolResponse:{functionResponses:c}}}sendClientContent(a){a=Object.assign(Object.assign({},c7),a);let b=this.tLiveClientContent(this.apiClient,a);this.conn.send(JSON.stringify(b))}sendRealtimeInput(a){let b={};b=this.apiClient.isVertexAI()?{realtimeInput:function(a){let b={},c=bp(a,["media"]);if(null!=c){let a=bW(c);Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["mediaChunks"],a)}let d=bp(a,["audio"]);null!=d&&bo(b,["audio"],bZ(d));let e=bp(a,["audioStreamEnd"]);null!=e&&bo(b,["audioStreamEnd"],e);let f=bp(a,["video"]);null!=f&&bo(b,["video"],bY(f));let g=bp(a,["text"]);null!=g&&bo(b,["text"],g);let h=bp(a,["activityStart"]);null!=h&&bo(b,["activityStart"],h);let i=bp(a,["activityEnd"]);return null!=i&&bo(b,["activityEnd"],i),b}(a)}:{realtimeInput:function(a){let b={},c=bp(a,["media"]);if(null!=c){let a=bW(c);Array.isArray(a)&&(a=a.map(a=>cE(a))),bo(b,["mediaChunks"],a)}let d=bp(a,["audio"]);null!=d&&bo(b,["audio"],cE(bZ(d)));let e=bp(a,["audioStreamEnd"]);null!=e&&bo(b,["audioStreamEnd"],e);let f=bp(a,["video"]);null!=f&&bo(b,["video"],cE(bY(f)));let g=bp(a,["text"]);null!=g&&bo(b,["text"],g);let h=bp(a,["activityStart"]);null!=h&&bo(b,["activityStart"],h);let i=bp(a,["activityEnd"]);return null!=i&&bo(b,["activityEnd"],i),b}(a)},this.conn.send(JSON.stringify(b))}sendToolResponse(a){if(null==a.functionResponses)throw Error("Tool response parameters are required.");let b=this.tLiveClienttToolResponse(this.apiClient,a);this.conn.send(JSON.stringify(b))}close(){this.conn.close()}}function c9(a){var b,c,d;if(null==(b=null==a?void 0:a.automaticFunctionCalling)?void 0:b.disable)return!0;let e=!1;for(let b of null!=(c=null==a?void 0:a.tools)?c:[])if(da(b)){e=!0;break}if(!e)return!0;let f=null==(d=null==a?void 0:a.automaticFunctionCalling)?void 0:d.maximumRemoteCalls;return(!(!f||!(f<0)&&Number.isInteger(f))||0==f)&&(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",f),!0)}function da(a){return"callTool"in a&&"function"==typeof a.callTool}function db(a){var b;let c=[];return(null==(b=null==a?void 0:a.config)?void 0:b.tools)&&a.config.tools.forEach((a,b)=>{da(a)||a.functionDeclarations&&a.functionDeclarations.length>0&&c.push(b)}),c}function dc(a){var b;return!(null==(b=null==a?void 0:a.automaticFunctionCalling)?void 0:b.ignoreCallHistory)}class dd extends bm{constructor(a){super(),this.apiClient=a,this.generateContent=async a=>{var b,c,d,e,f,g,h,i;let j,k,l=await this.processParamsMaybeAddMcpUsage(a);if(this.maybeMoveToResponseJsonSchem(a),!(null!=(i=null==(h=null==(g=a.config)?void 0:g.tools)?void 0:h.some(a=>da(a)))&&i)||c9(a.config))return await this.generateContentInternal(l);let m=db(a);if(m.length>0){let a=m.map(a=>`tools[${a}]`).join(", ");throw Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${a}.`)}let n=b5(l.contents),o=null!=(d=null==(c=null==(b=l.config)?void 0:b.automaticFunctionCalling)?void 0:c.maximumRemoteCalls)?d:10,p=0;for(;p<o&&(j=await this.generateContentInternal(l)).functionCalls&&0!==j.functionCalls.length;){let b=j.candidates[0].content,c=[];for(let b of null!=(f=null==(e=a.config)?void 0:e.tools)?f:[])if(da(b)){let a=await b.callTool(j.functionCalls);c.push(...a)}p++,k={role:"user",parts:c},l.contents=b5(l.contents),l.contents.push(b),l.contents.push(k),dc(l.config)&&(n.push(b),n.push(k))}return dc(l.config)&&(j.automaticFunctionCallingHistory=n),j},this.generateContentStream=async a=>{var b,c,d,e,f;if(this.maybeMoveToResponseJsonSchem(a),c9(a.config)){let b=await this.processParamsMaybeAddMcpUsage(a);return await this.generateContentStreamInternal(b)}let g=db(a);if(g.length>0){let a=g.map(a=>`tools[${a}]`).join(", ");throw Error(`Incompatible tools found at ${a}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let h=null==(d=null==(c=null==(b=null==a?void 0:a.config)?void 0:b.toolConfig)?void 0:c.functionCallingConfig)?void 0:d.streamFunctionCallArguments,i=null==(f=null==(e=null==a?void 0:a.config)?void 0:e.automaticFunctionCalling)?void 0:f.disable;if(h&&!i)throw Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(a)},this.generateImages=async a=>await this.generateImagesInternal(a).then(a=>{var b;let c,d=[];if(null==a?void 0:a.generatedImages)for(let e of a.generatedImages)e&&(null==e?void 0:e.safetyAttributes)&&(null==(b=null==e?void 0:e.safetyAttributes)?void 0:b.contentType)==="Positive Prompt"?c=null==e?void 0:e.safetyAttributes:d.push(e);return c?{generatedImages:d,positivePromptSafetyAttributes:c,sdkHttpResponse:a.sdkHttpResponse}:{generatedImages:d,sdkHttpResponse:a.sdkHttpResponse}}),this.list=async a=>{var b;let c={config:Object.assign(Object.assign({},{queryBase:!0}),null==a?void 0:a.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase)if(null==(b=c.config)?void 0:b.filter)throw Error("Filtering tuned models list for Vertex AI is not currently supported");else c.config.filter="labels.tune-type:*";return new cq(bd.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(c),c)},this.editImage=async a=>{let b={model:a.model,prompt:a.prompt,referenceImages:[],config:a.config};return a.referenceImages&&a.referenceImages&&(b.referenceImages=a.referenceImages.map(a=>a.toReferenceImageAPI())),await this.editImageInternal(b)},this.upscaleImage=async a=>{let b={numberOfImages:1,mode:"upscale"};a.config&&(b=Object.assign(Object.assign({},b),a.config));let c={model:a.model,image:a.image,upscaleFactor:a.upscaleFactor,config:b};return await this.upscaleImageInternal(c)},this.generateVideos=async a=>{var b,c,d,e,f,g;if((a.prompt||a.image||a.video)&&a.source)throw Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return!this.apiClient.isVertexAI()&&((null==(b=a.video)?void 0:b.uri)&&(null==(c=a.video)?void 0:c.videoBytes)?a.video={uri:a.video.uri,mimeType:a.video.mimeType}:(null==(e=null==(d=a.source)?void 0:d.video)?void 0:e.uri)&&(null==(g=null==(f=a.source)?void 0:f.video)?void 0:g.videoBytes)&&(a.source.video={uri:a.source.video.uri,mimeType:a.source.video.mimeType})),await this.generateVideosInternal(a)}}maybeMoveToResponseJsonSchem(a){a.config&&a.config.responseSchema&&!a.config.responseJsonSchema&&Object.keys(a.config.responseSchema).includes("$schema")&&(a.config.responseJsonSchema=a.config.responseSchema,delete a.config.responseSchema)}async processParamsMaybeAddMcpUsage(a){var b,c,d;let e=null==(b=a.config)?void 0:b.tools;if(!e)return a;let f=await Promise.all(e.map(async a=>da(a)?await a.tool():a)),g={model:a.model,contents:a.contents,config:Object.assign(Object.assign({},a.config),{tools:f})};if(g.config.tools=f,a.config&&a.config.tools&&c_(a.config.tools)){let b=Object.assign({},null!=(d=null==(c=a.config.httpOptions)?void 0:c.headers)?d:{});0===Object.keys(b).length&&(b=this.apiClient.getDefaultHeaders()),c0(b),g.config.httpOptions=Object.assign(Object.assign({},a.config.httpOptions),{headers:b})}return g}async initAfcToolsMap(a){var b,c,d;let e=new Map;for(let f of null!=(c=null==(b=a.config)?void 0:b.tools)?c:[])if(da(f))for(let a of null!=(d=(await f.tool()).functionDeclarations)?d:[]){if(!a.name)throw Error("Function declaration name is required.");if(e.has(a.name))throw Error(`Duplicate tool declaration name: ${a.name}`);e.set(a.name,f)}return e}async processAfcStream(a){var b,c,d;let e=null!=(d=null==(c=null==(b=a.config)?void 0:b.automaticFunctionCalling)?void 0:c.maximumRemoteCalls)?d:10,f=!1,g=0;return function(a,b,c){return cw(this,arguments,function*(){for(;g<e;){f&&(g++,f=!1);let p=yield cv(a.processParamsMaybeAddMcpUsage(c)),q=yield cv(a.generateContentStreamInternal(p)),r=[],s=[];try{for(var d,h,i,j,k,l,m,n=!0,o=(h=void 0,cx(q));!(d=(m=yield cv(o.next())).done);n=!0)if(j=m.value,n=!1,yield yield cv(j),j.candidates&&(null==(k=j.candidates[0])?void 0:k.content)){for(let a of(s.push(j.candidates[0].content),null!=(l=j.candidates[0].content.parts)?l:[]))if(g<e&&a.functionCall){if(!a.functionCall.name)throw Error("Function call name was not returned by the model.");if(b.has(a.functionCall.name)){let c=yield cv(b.get(a.functionCall.name).callTool([a.functionCall]));r.push(...c)}else throw Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${b.keys()}, mising tool: ${a.functionCall.name}`)}}}catch(a){h={error:a}}finally{try{!n&&!d&&(i=o.return)&&(yield cv(i.call(o)))}finally{if(h)throw h.error}}if(r.length>0){f=!0;let a=new bt;a.candidates=[{content:{role:"user",parts:r}}],yield yield cv(a);let b=[];b.push(...s),b.push({role:"user",parts:r});let d=b5(c.contents).concat(b);c.contents=d}else break}})}(this,await this.initAfcToolsMap(a),a)}async generateContentInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=cI(this.apiClient,a);return f=bn("{model}:generateContent",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=cK(a),c=new bt;return Object.assign(c,b),c})}{let b=cH(this.apiClient,a);return f=bn("{model}:generateContent",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=cJ(a),c=new bt;return Object.assign(c,b),c})}}async generateContentStreamInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=cI(this.apiClient,a);return f=bn("{model}:streamGenerateContent?alt=sse",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(function(a){return cw(this,arguments,function*(){var b,c,d,e;try{for(var f,g=!0,h=cx(a);!(b=(f=yield cv(h.next())).done);g=!0){e=f.value,g=!1;let a=cK((yield cv(e.json())));a.sdkHttpResponse={headers:e.headers};let b=new bt;Object.assign(b,a),yield yield cv(b)}}catch(a){c={error:a}}finally{try{!g&&!b&&(d=h.return)&&(yield cv(d.call(h)))}finally{if(c)throw c.error}}})})}{let b=cH(this.apiClient,a);return f=bn("{model}:streamGenerateContent?alt=sse",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(function(a){return cw(this,arguments,function*(){var b,c,d,e;try{for(var f,g=!0,h=cx(a);!(b=(f=yield cv(h.next())).done);g=!0){e=f.value,g=!1;let a=cJ((yield cv(e.json())));a.sdkHttpResponse={headers:e.headers};let b=new bt;Object.assign(b,a),yield yield cv(b)}}catch(a){c={error:a}}finally{try{!g&&!b&&(d=h.return)&&(yield cv(d.call(h)))}finally{if(c)throw c.error}}})})}}async embedContent(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c,d,e,f,g,h={},i=bp(b,["model"]);null!=i&&bo(h,["_url","model"],bU(a,i));let j=bp(b,["contents"]);if(null!=j){let b=b4(a,j);Array.isArray(b)&&(b=b.map(a=>a)),bo(h,["instances[]","content"],b)}let k=bp(b,["config"]);return null!=k&&(c=bp(k,["taskType"]),void 0!==h&&null!=c&&bo(h,["instances[]","task_type"],c),d=bp(k,["title"]),void 0!==h&&null!=d&&bo(h,["instances[]","title"],d),e=bp(k,["outputDimensionality"]),void 0!==h&&null!=e&&bo(h,["parameters","outputDimensionality"],e),f=bp(k,["mimeType"]),void 0!==h&&null!=f&&bo(h,["instances[]","mimeType"],f),g=bp(k,["autoTruncate"]),void 0!==h&&null!=g&&bo(h,["parameters","autoTruncate"],g)),h}(this.apiClient,a);return f=bn("{model}:predict",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=bp(a,["sdkHttpResponse"]);null!=c&&bo(b,["sdkHttpResponse"],c);let d=bp(a,["predictions[]","embeddings"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e,f,g,h;return c={},null!=(d=bp(a,["values"]))&&bo(c,["values"],d),null!=(e=bp(a,["statistics"]))&&bo(c,["statistics"],(f={},null!=(g=bp(b=e,["truncated"]))&&bo(f,["truncated"],g),null!=(h=bp(b,["token_count"]))&&bo(f,["tokenCount"],h),f)),c})),bo(b,["embeddings"],a)}let e=bp(a,["metadata"]);return null!=e&&bo(b,["metadata"],e),b}(a),c=new bu;return Object.assign(c,b),c})}{let b=function(a,b){let c={},d=bp(b,["model"]);null!=d&&bo(c,["_url","model"],bU(a,d));let e=bp(b,["contents"]);if(null!=e){let b=b4(a,e);Array.isArray(b)&&(b=b.map(a=>a)),bo(c,["requests[]","content"],b)}let f=bp(b,["config"]);null!=f&&function(a,b){let c=bp(a,["taskType"]);void 0!==b&&null!=c&&bo(b,["requests[]","taskType"],c);let d=bp(a,["title"]);void 0!==b&&null!=d&&bo(b,["requests[]","title"],d);let e=bp(a,["outputDimensionality"]);if(void 0!==b&&null!=e&&bo(b,["requests[]","outputDimensionality"],e),void 0!==bp(a,["mimeType"]))throw Error("mimeType parameter is not supported in Gemini API.");if(void 0!==bp(a,["autoTruncate"]))throw Error("autoTruncate parameter is not supported in Gemini API.")}(f,c);let g=bp(b,["model"]);return void 0!==g&&bo(c,["requests[]","model"],bU(a,g)),c}(this.apiClient,a);return f=bn("{model}:batchEmbedContents",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=bp(a,["sdkHttpResponse"]);null!=c&&bo(b,["sdkHttpResponse"],c);let d=bp(a,["embeddings"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["embeddings"],a)}let e=bp(a,["metadata"]);return null!=e&&bo(b,["metadata"],e),b}(a),c=new bu;return Object.assign(c,b),c})}}async generateImagesInternal(a){var b,c,d,e,f,g;let h="",i={};if(this.apiClient.isVertexAI()){let d,e,g,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=(f=this.apiClient,d={},null!=(e=bp(a,["model"]))&&bo(d,["_url","model"],bU(f,e)),null!=(g=bp(a,["prompt"]))&&bo(d,["instances[0]","prompt"],g),null!=(j=bp(a,["config"]))&&(k=bp(j,["outputGcsUri"]),void 0!==d&&null!=k&&bo(d,["parameters","storageUri"],k),l=bp(j,["negativePrompt"]),void 0!==d&&null!=l&&bo(d,["parameters","negativePrompt"],l),m=bp(j,["numberOfImages"]),void 0!==d&&null!=m&&bo(d,["parameters","sampleCount"],m),n=bp(j,["aspectRatio"]),void 0!==d&&null!=n&&bo(d,["parameters","aspectRatio"],n),o=bp(j,["guidanceScale"]),void 0!==d&&null!=o&&bo(d,["parameters","guidanceScale"],o),p=bp(j,["seed"]),void 0!==d&&null!=p&&bo(d,["parameters","seed"],p),q=bp(j,["safetyFilterLevel"]),void 0!==d&&null!=q&&bo(d,["parameters","safetySetting"],q),r=bp(j,["personGeneration"]),void 0!==d&&null!=r&&bo(d,["parameters","personGeneration"],r),s=bp(j,["includeSafetyAttributes"]),void 0!==d&&null!=s&&bo(d,["parameters","includeSafetyAttributes"],s),t=bp(j,["includeRaiReason"]),void 0!==d&&null!=t&&bo(d,["parameters","includeRaiReason"],t),u=bp(j,["language"]),void 0!==d&&null!=u&&bo(d,["parameters","language"],u),v=bp(j,["outputMimeType"]),void 0!==d&&null!=v&&bo(d,["parameters","outputOptions","mimeType"],v),w=bp(j,["outputCompressionQuality"]),void 0!==d&&null!=w&&bo(d,["parameters","outputOptions","compressionQuality"],w),x=bp(j,["addWatermark"]),void 0!==d&&null!=x&&bo(d,["parameters","addWatermark"],x),y=bp(j,["labels"]),void 0!==d&&null!=y&&bo(d,["labels"],y),z=bp(j,["imageSize"]),void 0!==d&&null!=z&&bo(d,["parameters","sampleImageSize"],z),A=bp(j,["enhancePrompt"]),void 0!==d&&null!=A&&bo(d,["parameters","enhancePrompt"],A)),d);return h=bn("{model}:predict",B._url),i=B._query,delete B._url,delete B._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(B),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=bp(a,["sdkHttpResponse"]);null!=c&&bo(b,["sdkHttpResponse"],c);let d=bp(a,["predictions"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>cL(a))),bo(b,["generatedImages"],a)}let e=bp(a,["positivePromptSafetyAttributes"]);return null!=e&&bo(b,["positivePromptSafetyAttributes"],cS(e)),b}(a),c=new bv;return Object.assign(c,b),c})}{let b,c,f,j,k=(g=this.apiClient,b={},null!=(c=bp(a,["model"]))&&bo(b,["_url","model"],bU(g,c)),null!=(f=bp(a,["prompt"]))&&bo(b,["instances[0]","prompt"],f),null!=(j=bp(a,["config"]))&&function(a,b){if(void 0!==bp(a,["outputGcsUri"]))throw Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==bp(a,["negativePrompt"]))throw Error("negativePrompt parameter is not supported in Gemini API.");let c=bp(a,["numberOfImages"]);void 0!==b&&null!=c&&bo(b,["parameters","sampleCount"],c);let d=bp(a,["aspectRatio"]);void 0!==b&&null!=d&&bo(b,["parameters","aspectRatio"],d);let e=bp(a,["guidanceScale"]);if(void 0!==b&&null!=e&&bo(b,["parameters","guidanceScale"],e),void 0!==bp(a,["seed"]))throw Error("seed parameter is not supported in Gemini API.");let f=bp(a,["safetyFilterLevel"]);void 0!==b&&null!=f&&bo(b,["parameters","safetySetting"],f);let g=bp(a,["personGeneration"]);void 0!==b&&null!=g&&bo(b,["parameters","personGeneration"],g);let h=bp(a,["includeSafetyAttributes"]);void 0!==b&&null!=h&&bo(b,["parameters","includeSafetyAttributes"],h);let i=bp(a,["includeRaiReason"]);void 0!==b&&null!=i&&bo(b,["parameters","includeRaiReason"],i);let j=bp(a,["language"]);void 0!==b&&null!=j&&bo(b,["parameters","language"],j);let k=bp(a,["outputMimeType"]);void 0!==b&&null!=k&&bo(b,["parameters","outputOptions","mimeType"],k);let l=bp(a,["outputCompressionQuality"]);if(void 0!==b&&null!=l&&bo(b,["parameters","outputOptions","compressionQuality"],l),void 0!==bp(a,["addWatermark"]))throw Error("addWatermark parameter is not supported in Gemini API.");if(void 0!==bp(a,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let m=bp(a,["imageSize"]);if(void 0!==b&&null!=m&&bo(b,["parameters","sampleImageSize"],m),void 0!==bp(a,["enhancePrompt"]))throw Error("enhancePrompt parameter is not supported in Gemini API.")}(j,b),b);return h=bn("{model}:predict",k._url),i=k._query,delete k._url,delete k._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(k),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=bp(a,["sdkHttpResponse"]);null!=c&&bo(b,["sdkHttpResponse"],c);let d=bp(a,["predictions"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>{var b,c;let d,e,f,g,h,i,j;return d={},null!=(e=bp(b=a,["_self"]))&&bo(d,["image"],(f={},null!=(g=bp(c=e,["bytesBase64Encoded"]))&&bo(f,["imageBytes"],bq(g)),null!=(h=bp(c,["mimeType"]))&&bo(f,["mimeType"],h),f)),null!=(i=bp(b,["raiFilteredReason"]))&&bo(d,["raiFilteredReason"],i),null!=(j=bp(b,["_self"]))&&bo(d,["safetyAttributes"],cR(j)),d})),bo(b,["generatedImages"],a)}let e=bp(a,["positivePromptSafetyAttributes"]);return null!=e&&bo(b,["positivePromptSafetyAttributes"],cR(e)),b}(a),c=new bv;return Object.assign(c,b),c})}}async editImageInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a,b){let c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t={},u=bp(b,["model"]);null!=u&&bo(t,["_url","model"],bU(a,u));let v=bp(b,["prompt"]);null!=v&&bo(t,["instances[0]","prompt"],v);let w=bp(b,["referenceImages"]);if(null!=w){let a=w;Array.isArray(a)&&(a=a.map(a=>(function(a){let b,c,d,e,f,g,h,i={},j=bp(a,["referenceImage"]);null!=j&&bo(i,["referenceImage"],cO(j));let k=bp(a,["referenceId"]);null!=k&&bo(i,["referenceId"],k);let l=bp(a,["referenceType"]);null!=l&&bo(i,["referenceType"],l);let m=bp(a,["maskImageConfig"]);null!=m&&bo(i,["maskImageConfig"],(b={},null!=(c=bp(m,["maskMode"]))&&bo(b,["maskMode"],c),null!=(d=bp(m,["segmentationClasses"]))&&bo(b,["maskClasses"],d),null!=(e=bp(m,["maskDilation"]))&&bo(b,["dilation"],e),b));let n=bp(a,["controlImageConfig"]);null!=n&&bo(i,["controlImageConfig"],(f={},null!=(g=bp(n,["controlType"]))&&bo(f,["controlType"],g),null!=(h=bp(n,["enableControlImageComputation"]))&&bo(f,["computeControl"],h),f));let o=bp(a,["styleImageConfig"]);null!=o&&bo(i,["styleImageConfig"],o);let p=bp(a,["subjectImageConfig"]);return null!=p&&bo(i,["subjectImageConfig"],p),i})(a))),bo(t,["instances[0]","referenceImages"],a)}let x=bp(b,["config"]);return null!=x&&(c=bp(x,["outputGcsUri"]),void 0!==t&&null!=c&&bo(t,["parameters","storageUri"],c),d=bp(x,["negativePrompt"]),void 0!==t&&null!=d&&bo(t,["parameters","negativePrompt"],d),e=bp(x,["numberOfImages"]),void 0!==t&&null!=e&&bo(t,["parameters","sampleCount"],e),f=bp(x,["aspectRatio"]),void 0!==t&&null!=f&&bo(t,["parameters","aspectRatio"],f),g=bp(x,["guidanceScale"]),void 0!==t&&null!=g&&bo(t,["parameters","guidanceScale"],g),h=bp(x,["seed"]),void 0!==t&&null!=h&&bo(t,["parameters","seed"],h),i=bp(x,["safetyFilterLevel"]),void 0!==t&&null!=i&&bo(t,["parameters","safetySetting"],i),j=bp(x,["personGeneration"]),void 0!==t&&null!=j&&bo(t,["parameters","personGeneration"],j),k=bp(x,["includeSafetyAttributes"]),void 0!==t&&null!=k&&bo(t,["parameters","includeSafetyAttributes"],k),l=bp(x,["includeRaiReason"]),void 0!==t&&null!=l&&bo(t,["parameters","includeRaiReason"],l),m=bp(x,["language"]),void 0!==t&&null!=m&&bo(t,["parameters","language"],m),n=bp(x,["outputMimeType"]),void 0!==t&&null!=n&&bo(t,["parameters","outputOptions","mimeType"],n),o=bp(x,["outputCompressionQuality"]),void 0!==t&&null!=o&&bo(t,["parameters","outputOptions","compressionQuality"],o),p=bp(x,["addWatermark"]),void 0!==t&&null!=p&&bo(t,["parameters","addWatermark"],p),q=bp(x,["labels"]),void 0!==t&&null!=q&&bo(t,["labels"],q),r=bp(x,["editMode"]),void 0!==t&&null!=r&&bo(t,["parameters","editMode"],r),s=bp(x,["baseSteps"]),void 0!==t&&null!=s&&bo(t,["parameters","editConfig","baseSteps"],s)),t}(this.apiClient,a);return d=bn("{model}:predict",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=bp(a,["sdkHttpResponse"]);null!=c&&bo(b,["sdkHttpResponse"],c);let d=bp(a,["predictions"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>cL(a))),bo(b,["generatedImages"],a)}return b}(a),c=new bw;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(a){var b,c,d;let e="",f={};if(this.apiClient.isVertexAI()){let g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=(d=this.apiClient,g={},null!=(h=bp(a,["model"]))&&bo(g,["_url","model"],bU(d,h)),null!=(i=bp(a,["image"]))&&bo(g,["instances[0]","image"],cO(i)),null!=(j=bp(a,["upscaleFactor"]))&&bo(g,["parameters","upscaleConfig","upscaleFactor"],j),null!=(k=bp(a,["config"]))&&(l=bp(k,["outputGcsUri"]),void 0!==g&&null!=l&&bo(g,["parameters","storageUri"],l),m=bp(k,["safetyFilterLevel"]),void 0!==g&&null!=m&&bo(g,["parameters","safetySetting"],m),n=bp(k,["personGeneration"]),void 0!==g&&null!=n&&bo(g,["parameters","personGeneration"],n),o=bp(k,["includeRaiReason"]),void 0!==g&&null!=o&&bo(g,["parameters","includeRaiReason"],o),p=bp(k,["outputMimeType"]),void 0!==g&&null!=p&&bo(g,["parameters","outputOptions","mimeType"],p),q=bp(k,["outputCompressionQuality"]),void 0!==g&&null!=q&&bo(g,["parameters","outputOptions","compressionQuality"],q),r=bp(k,["enhanceInputImage"]),void 0!==g&&null!=r&&bo(g,["parameters","upscaleConfig","enhanceInputImage"],r),s=bp(k,["imagePreservationFactor"]),void 0!==g&&null!=s&&bo(g,["parameters","upscaleConfig","imagePreservationFactor"],s),t=bp(k,["labels"]),void 0!==g&&null!=t&&bo(g,["labels"],t),u=bp(k,["numberOfImages"]),void 0!==g&&null!=u&&bo(g,["parameters","sampleCount"],u),v=bp(k,["mode"]),void 0!==g&&null!=v&&bo(g,["parameters","mode"],v)),g);return e=bn("{model}:predict",w._url),f=w._query,delete w._url,delete w._query,this.apiClient.request({path:e,queryParams:f,body:JSON.stringify(w),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=bp(a,["sdkHttpResponse"]);null!=c&&bo(b,["sdkHttpResponse"],c);let d=bp(a,["predictions"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>cL(a))),bo(b,["generatedImages"],a)}return b}(a),c=new bx;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async recontextImage(a){var b,c,d;let e="",f={};if(this.apiClient.isVertexAI()){let g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=(d=this.apiClient,g={},null!=(h=bp(a,["model"]))&&bo(g,["_url","model"],bU(d,h)),null!=(i=bp(a,["source"]))&&function(a,b){let c=bp(a,["prompt"]);void 0!==b&&null!=c&&bo(b,["instances[0]","prompt"],c);let d=bp(a,["personImage"]);void 0!==b&&null!=d&&bo(b,["instances[0]","personImage","image"],cO(d));let e=bp(a,["productImages"]);if(void 0!==b&&null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>{let b,c;return b={},null!=(c=bp(a,["productImage"]))&&bo(b,["image"],cO(c)),b})),bo(b,["instances[0]","productImages"],a)}}(i,g),null!=(j=bp(a,["config"]))&&(k=bp(j,["numberOfImages"]),void 0!==g&&null!=k&&bo(g,["parameters","sampleCount"],k),l=bp(j,["baseSteps"]),void 0!==g&&null!=l&&bo(g,["parameters","baseSteps"],l),m=bp(j,["outputGcsUri"]),void 0!==g&&null!=m&&bo(g,["parameters","storageUri"],m),n=bp(j,["seed"]),void 0!==g&&null!=n&&bo(g,["parameters","seed"],n),o=bp(j,["safetyFilterLevel"]),void 0!==g&&null!=o&&bo(g,["parameters","safetySetting"],o),p=bp(j,["personGeneration"]),void 0!==g&&null!=p&&bo(g,["parameters","personGeneration"],p),q=bp(j,["addWatermark"]),void 0!==g&&null!=q&&bo(g,["parameters","addWatermark"],q),r=bp(j,["outputMimeType"]),void 0!==g&&null!=r&&bo(g,["parameters","outputOptions","mimeType"],r),s=bp(j,["outputCompressionQuality"]),void 0!==g&&null!=s&&bo(g,["parameters","outputOptions","compressionQuality"],s),t=bp(j,["enhancePrompt"]),void 0!==g&&null!=t&&bo(g,["parameters","enhancePrompt"],t),u=bp(j,["labels"]),void 0!==g&&null!=u&&bo(g,["labels"],u)),g);return e=bn("{model}:predict",v._url),f=v._query,delete v._url,delete v._query,this.apiClient.request({path:e,queryParams:f,body:JSON.stringify(v),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=bp(a,["predictions"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>cL(a))),bo(b,["generatedImages"],a)}return b}(a),c=new by;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async segmentImage(a){var b,c,d,e,f;let g="",h={};if(this.apiClient.isVertexAI()){let i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=(d=this.apiClient,n={},null!=(o=bp(a,["model"]))&&bo(n,["_url","model"],bU(d,o)),null!=(p=bp(a,["source"]))&&(e=p,f=n,k=bp(e,["prompt"]),void 0!==f&&null!=k&&bo(f,["instances[0]","prompt"],k),l=bp(e,["image"]),void 0!==f&&null!=l&&bo(f,["instances[0]","image"],cO(l)),m=bp(e,["scribbleImage"]),void 0!==f&&null!=m&&bo(f,["instances[0]","scribble"],(i={},null!=(j=bp(m,["image"]))&&bo(i,["image"],cO(j)),i))),null!=(q=bp(a,["config"]))&&(r=bp(q,["mode"]),void 0!==n&&null!=r&&bo(n,["parameters","mode"],r),s=bp(q,["maxPredictions"]),void 0!==n&&null!=s&&bo(n,["parameters","maxPredictions"],s),t=bp(q,["confidenceThreshold"]),void 0!==n&&null!=t&&bo(n,["parameters","confidenceThreshold"],t),u=bp(q,["maskDilation"]),void 0!==n&&null!=u&&bo(n,["parameters","maskDilation"],u),v=bp(q,["binaryColorThreshold"]),void 0!==n&&null!=v&&bo(n,["parameters","binaryColorThreshold"],v),w=bp(q,["labels"]),void 0!==n&&null!=w&&bo(n,["labels"],w)),n);return g=bn("{model}:predict",x._url),h=x._query,delete x._url,delete x._query,this.apiClient.request({path:g,queryParams:h,body:JSON.stringify(x),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=bp(a,["predictions"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=bp(a,["_self"]);null!=c&&bo(b,["mask"],cM(c));let d=bp(a,["labels"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["labels"],a)}return b})(a))),bo(b,["generatedMasks"],a)}return b}(a),c=new bz;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async get(a){var b,c,d,e,f,g;let h="",i={};if(this.apiClient.isVertexAI()){let d,e,g=(f=this.apiClient,d={},null!=(e=bp(a,["model"]))&&bo(d,["_url","name"],bU(f,e)),d);return h=bn("{name}",g._url),i=g._query,delete g._url,delete g._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(g),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>cQ(a))}{let b,c,f=(g=this.apiClient,b={},null!=(c=bp(a,["model"]))&&bo(b,["_url","name"],bU(g,c)),b);return h=bn("{name}",f._url),i=f._query,delete f._url,delete f._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(f),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>cP(a))}}async listInternal(a){var b,c,d,e,f,g;let h="",i={};if(this.apiClient.isVertexAI()){let d,e,g,j,k,l,m=(f=this.apiClient,d={},null!=(e=bp(a,["config"]))&&(g=bp(e,["pageSize"]),void 0!==d&&null!=g&&bo(d,["_query","pageSize"],g),j=bp(e,["pageToken"]),void 0!==d&&null!=j&&bo(d,["_query","pageToken"],j),k=bp(e,["filter"]),void 0!==d&&null!=k&&bo(d,["_query","filter"],k),l=bp(e,["queryBase"]),void 0!==d&&null!=l&&bo(d,["_url","models_url"],cg(f,l))),d);return h=bn("{models_url}",m._url),i=m._query,delete m._url,delete m._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(m),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=bp(a,["sdkHttpResponse"]);null!=c&&bo(b,["sdkHttpResponse"],c);let d=bp(a,["nextPageToken"]);null!=d&&bo(b,["nextPageToken"],d);let e=bp(a,["_self"]);if(null!=e){let a=ch(e);Array.isArray(a)&&(a=a.map(a=>cQ(a))),bo(b,["models"],a)}return b}(a),c=new bA;return Object.assign(c,b),c})}{let b,c,f,j,k,l,m=(g=this.apiClient,b={},null!=(c=bp(a,["config"]))&&(f=bp(c,["pageSize"]),void 0!==b&&null!=f&&bo(b,["_query","pageSize"],f),j=bp(c,["pageToken"]),void 0!==b&&null!=j&&bo(b,["_query","pageToken"],j),k=bp(c,["filter"]),void 0!==b&&null!=k&&bo(b,["_query","filter"],k),l=bp(c,["queryBase"]),void 0!==b&&null!=l&&bo(b,["_url","models_url"],cg(g,l))),b);return h=bn("{models_url}",m._url),i=m._query,delete m._url,delete m._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(m),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=bp(a,["sdkHttpResponse"]);null!=c&&bo(b,["sdkHttpResponse"],c);let d=bp(a,["nextPageToken"]);null!=d&&bo(b,["nextPageToken"],d);let e=bp(a,["_self"]);if(null!=e){let a=ch(e);Array.isArray(a)&&(a=a.map(a=>cP(a))),bo(b,["models"],a)}return b}(a),c=new bA;return Object.assign(c,b),c})}}async update(a){var b,c,d,e,f,g;let h="",i={};if(this.apiClient.isVertexAI()){let d,e,g,j,k,l,m=(f=this.apiClient,d={},null!=(e=bp(a,["model"]))&&bo(d,["_url","model"],bU(f,e)),null!=(g=bp(a,["config"]))&&(j=bp(g,["displayName"]),void 0!==d&&null!=j&&bo(d,["displayName"],j),k=bp(g,["description"]),void 0!==d&&null!=k&&bo(d,["description"],k),l=bp(g,["defaultCheckpointId"]),void 0!==d&&null!=l&&bo(d,["defaultCheckpointId"],l)),d);return h=bn("{model}",m._url),i=m._query,delete m._url,delete m._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>cQ(a))}{let b,c,f,j,k,l,m=(g=this.apiClient,b={},null!=(c=bp(a,["model"]))&&bo(b,["_url","name"],bU(g,c)),null!=(f=bp(a,["config"]))&&(j=bp(f,["displayName"]),void 0!==b&&null!=j&&bo(b,["displayName"],j),k=bp(f,["description"]),void 0!==b&&null!=k&&bo(b,["description"],k),l=bp(f,["defaultCheckpointId"]),void 0!==b&&null!=l&&bo(b,["defaultCheckpointId"],l)),b);return h=bn("{name}",m._url),i=m._query,delete m._url,delete m._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>cP(a))}}async delete(a){var b,c,d,e,f,g;let h="",i={};if(this.apiClient.isVertexAI()){let d,e,g=(f=this.apiClient,d={},null!=(e=bp(a,["model"]))&&bo(d,["_url","name"],bU(f,e)),d);return h=bn("{name}",g._url),i=g._query,delete g._url,delete g._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b,c,d=(b={},null!=(c=bp(a,["sdkHttpResponse"]))&&bo(b,["sdkHttpResponse"],c),b),e=new bB;return Object.assign(e,d),e})}{let b,c,f=(g=this.apiClient,b={},null!=(c=bp(a,["model"]))&&bo(b,["_url","name"],bU(g,c)),b);return h=bn("{name}",f._url),i=f._query,delete f._url,delete f._query,this.apiClient.request({path:h,queryParams:i,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b,c,d=(b={},null!=(c=bp(a,["sdkHttpResponse"]))&&bo(b,["sdkHttpResponse"],c),b),e=new bB;return Object.assign(e,d),e})}}async countTokens(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d=function(a,b){let c={},d=bp(b,["model"]);null!=d&&bo(c,["_url","model"],bU(a,d));let e=bp(b,["contents"]);if(null!=e){let a=b5(e);Array.isArray(a)&&(a=a.map(a=>a)),bo(c,["contents"],a)}let f=bp(b,["config"]);return null!=f&&function(a,b){let c=bp(a,["systemInstruction"]);void 0!==b&&null!=c&&bo(b,["systemInstruction"],b3(c));let d=bp(a,["tools"]);if(void 0!==b&&null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>cU(a))),bo(b,["tools"],a)}let e=bp(a,["generationConfig"]);void 0!==b&&null!=e&&bo(b,["generationConfig"],function(a){let b={},c=bp(a,["modelSelectionConfig"]);null!=c&&bo(b,["modelConfig"],c);let d=bp(a,["responseJsonSchema"]);null!=d&&bo(b,["responseJsonSchema"],d);let e=bp(a,["audioTimestamp"]);null!=e&&bo(b,["audioTimestamp"],e);let f=bp(a,["candidateCount"]);null!=f&&bo(b,["candidateCount"],f);let g=bp(a,["enableAffectiveDialog"]);null!=g&&bo(b,["enableAffectiveDialog"],g);let h=bp(a,["frequencyPenalty"]);null!=h&&bo(b,["frequencyPenalty"],h);let i=bp(a,["logprobs"]);null!=i&&bo(b,["logprobs"],i);let j=bp(a,["maxOutputTokens"]);null!=j&&bo(b,["maxOutputTokens"],j);let k=bp(a,["mediaResolution"]);null!=k&&bo(b,["mediaResolution"],k);let l=bp(a,["presencePenalty"]);null!=l&&bo(b,["presencePenalty"],l);let m=bp(a,["responseLogprobs"]);null!=m&&bo(b,["responseLogprobs"],m);let n=bp(a,["responseMimeType"]);null!=n&&bo(b,["responseMimeType"],n);let o=bp(a,["responseModalities"]);null!=o&&bo(b,["responseModalities"],o);let p=bp(a,["responseSchema"]);null!=p&&bo(b,["responseSchema"],p);let q=bp(a,["routingConfig"]);null!=q&&bo(b,["routingConfig"],q);let r=bp(a,["seed"]);null!=r&&bo(b,["seed"],r);let s=bp(a,["speechConfig"]);null!=s&&bo(b,["speechConfig"],cT(s));let t=bp(a,["stopSequences"]);null!=t&&bo(b,["stopSequences"],t);let u=bp(a,["temperature"]);null!=u&&bo(b,["temperature"],u);let v=bp(a,["thinkingConfig"]);null!=v&&bo(b,["thinkingConfig"],v);let w=bp(a,["topK"]);null!=w&&bo(b,["topK"],w);let x=bp(a,["topP"]);if(null!=x&&bo(b,["topP"],x),void 0!==bp(a,["enableEnhancedCivicAnswers"]))throw Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return b}(e))}(f,c),c}(this.apiClient,a);return f=bn("{model}:countTokens",d._url),g=d._query,delete d._url,delete d._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(d),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b,c,d,e=(b={},null!=(c=bp(a,["sdkHttpResponse"]))&&bo(b,["sdkHttpResponse"],c),null!=(d=bp(a,["totalTokens"]))&&bo(b,["totalTokens"],d),b),f=new bC;return Object.assign(f,e),f})}{let b=function(a,b){let c={},d=bp(b,["model"]);null!=d&&bo(c,["_url","model"],bU(a,d));let e=bp(b,["contents"]);if(null!=e){let a=b5(e);Array.isArray(a)&&(a=a.map(a=>cG(a))),bo(c,["contents"],a)}let f=bp(b,["config"]);return null!=f&&function(a){if(void 0!==bp(a,["systemInstruction"]))throw Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==bp(a,["tools"]))throw Error("tools parameter is not supported in Gemini API.");if(void 0!==bp(a,["generationConfig"]))throw Error("generationConfig parameter is not supported in Gemini API.")}(f),c}(this.apiClient,a);return f=bn("{model}:countTokens",b._url),g=b._query,delete b._url,delete b._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(b),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b,c,d,e,f=(b={},null!=(c=bp(a,["sdkHttpResponse"]))&&bo(b,["sdkHttpResponse"],c),null!=(d=bp(a,["totalTokens"]))&&bo(b,["totalTokens"],d),null!=(e=bp(a,["cachedContentTokenCount"]))&&bo(b,["cachedContentTokenCount"],e),b),g=new bC;return Object.assign(g,f),g})}}async computeTokens(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f=function(a,b){let c={},d=bp(b,["model"]);null!=d&&bo(c,["_url","model"],bU(a,d));let e=bp(b,["contents"]);if(null!=e){let a=b5(e);Array.isArray(a)&&(a=a.map(a=>a)),bo(c,["contents"],a)}return c}(this.apiClient,a);return d=bn("{model}:computeTokens",f._url),e=f._query,delete f._url,delete f._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(f),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a){let b={},c=bp(a,["sdkHttpResponse"]);null!=c&&bo(b,["sdkHttpResponse"],c);let d=bp(a,["tokensInfo"]);if(null!=d){let a=d;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["tokensInfo"],a)}return b}(a),c=new bD;return Object.assign(c,b),c})}throw Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(a){var b,c,d,e,f,g,h,i,j,k;let l="",m={};if(this.apiClient.isVertexAI()){let d,e,g,j,k,n,o,p,q,r,s=(f=this.apiClient,j={},null!=(k=bp(a,["model"]))&&bo(j,["_url","model"],bU(f,k)),null!=(n=bp(a,["prompt"]))&&bo(j,["instances[0]","prompt"],n),null!=(o=bp(a,["image"]))&&bo(j,["instances[0]","image"],cO(o)),null!=(p=bp(a,["video"]))&&bo(j,["instances[0]","video"],cW(p)),null!=(q=bp(a,["source"]))&&(h=q,i=j,d=bp(h,["prompt"]),void 0!==i&&null!=d&&bo(i,["instances[0]","prompt"],d),e=bp(h,["image"]),void 0!==i&&null!=e&&bo(i,["instances[0]","image"],cO(e)),g=bp(h,["video"]),void 0!==i&&null!=g&&bo(i,["instances[0]","video"],cW(g))),null!=(r=bp(a,["config"]))&&function(a,b){var c;let d,e,f,g=bp(a,["numberOfVideos"]);void 0!==b&&null!=g&&bo(b,["parameters","sampleCount"],g);let h=bp(a,["outputGcsUri"]);void 0!==b&&null!=h&&bo(b,["parameters","storageUri"],h);let i=bp(a,["fps"]);void 0!==b&&null!=i&&bo(b,["parameters","fps"],i);let j=bp(a,["durationSeconds"]);void 0!==b&&null!=j&&bo(b,["parameters","durationSeconds"],j);let k=bp(a,["seed"]);void 0!==b&&null!=k&&bo(b,["parameters","seed"],k);let l=bp(a,["aspectRatio"]);void 0!==b&&null!=l&&bo(b,["parameters","aspectRatio"],l);let m=bp(a,["resolution"]);void 0!==b&&null!=m&&bo(b,["parameters","resolution"],m);let n=bp(a,["personGeneration"]);void 0!==b&&null!=n&&bo(b,["parameters","personGeneration"],n);let o=bp(a,["pubsubTopic"]);void 0!==b&&null!=o&&bo(b,["parameters","pubsubTopic"],o);let p=bp(a,["negativePrompt"]);void 0!==b&&null!=p&&bo(b,["parameters","negativePrompt"],p);let q=bp(a,["enhancePrompt"]);void 0!==b&&null!=q&&bo(b,["parameters","enhancePrompt"],q);let r=bp(a,["generateAudio"]);void 0!==b&&null!=r&&bo(b,["parameters","generateAudio"],r);let s=bp(a,["lastFrame"]);void 0!==b&&null!=s&&bo(b,["instances[0]","lastFrame"],cO(s));let t=bp(a,["referenceImages"]);if(void 0!==b&&null!=t){let a=t;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e;return c={},null!=(d=bp(b=a,["image"]))&&bo(c,["image"],cO(d)),null!=(e=bp(b,["referenceType"]))&&bo(c,["referenceType"],e),c})),bo(b,["instances[0]","referenceImages"],a)}let u=bp(a,["mask"]);void 0!==b&&null!=u&&bo(b,["instances[0]","mask"],(d={},null!=(e=bp(c=u,["image"]))&&bo(d,["_self"],cO(e)),null!=(f=bp(c,["maskMode"]))&&bo(d,["maskMode"],f),d));let v=bp(a,["compressionQuality"]);void 0!==b&&null!=v&&bo(b,["parameters","compressionQuality"],v)}(r,j),j);return l=bn("{model}:predictLongRunning",s._url),m=s._query,delete s._url,delete s._query,this.apiClient.request({path:l,queryParams:m,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b,c,d,e,f,g,h=(b={},null!=(c=bp(a,["name"]))&&bo(b,["name"],c),null!=(d=bp(a,["metadata"]))&&bo(b,["metadata"],d),null!=(e=bp(a,["done"]))&&bo(b,["done"],e),null!=(f=bp(a,["error"]))&&bo(b,["error"],f),null!=(g=bp(a,["response"]))&&bo(b,["response"],function(a){let b={},c=bp(a,["videos"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e,f,g,h;return c={},null!=(d=bp(a,["_self"]))&&bo(c,["video"],(e={},null!=(f=bp(b=d,["gcsUri"]))&&bo(e,["uri"],f),null!=(g=bp(b,["bytesBase64Encoded"]))&&bo(e,["videoBytes"],bq(g)),null!=(h=bp(b,["mimeType"]))&&bo(e,["mimeType"],h),e)),c})),bo(b,["generatedVideos"],a)}let d=bp(a,["raiMediaFilteredCount"]);null!=d&&bo(b,["raiMediaFilteredCount"],d);let e=bp(a,["raiMediaFilteredReasons"]);return null!=e&&bo(b,["raiMediaFilteredReasons"],e),b}(g)),b),i=new bE;return Object.assign(i,h),i})}{let b,c,f,h,i,n,o,p,q,r,s=(g=this.apiClient,h={},null!=(i=bp(a,["model"]))&&bo(h,["_url","model"],bU(g,i)),null!=(n=bp(a,["prompt"]))&&bo(h,["instances[0]","prompt"],n),null!=(o=bp(a,["image"]))&&bo(h,["instances[0]","image"],cN(o)),null!=(p=bp(a,["video"]))&&bo(h,["instances[0]","video"],cV(p)),null!=(q=bp(a,["source"]))&&(j=q,k=h,b=bp(j,["prompt"]),void 0!==k&&null!=b&&bo(k,["instances[0]","prompt"],b),c=bp(j,["image"]),void 0!==k&&null!=c&&bo(k,["instances[0]","image"],cN(c)),f=bp(j,["video"]),void 0!==k&&null!=f&&bo(k,["instances[0]","video"],cV(f))),null!=(r=bp(a,["config"]))&&function(a,b){let c=bp(a,["numberOfVideos"]);if(void 0!==b&&null!=c&&bo(b,["parameters","sampleCount"],c),void 0!==bp(a,["outputGcsUri"]))throw Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==bp(a,["fps"]))throw Error("fps parameter is not supported in Gemini API.");let d=bp(a,["durationSeconds"]);if(void 0!==b&&null!=d&&bo(b,["parameters","durationSeconds"],d),void 0!==bp(a,["seed"]))throw Error("seed parameter is not supported in Gemini API.");let e=bp(a,["aspectRatio"]);void 0!==b&&null!=e&&bo(b,["parameters","aspectRatio"],e);let f=bp(a,["resolution"]);void 0!==b&&null!=f&&bo(b,["parameters","resolution"],f);let g=bp(a,["personGeneration"]);if(void 0!==b&&null!=g&&bo(b,["parameters","personGeneration"],g),void 0!==bp(a,["pubsubTopic"]))throw Error("pubsubTopic parameter is not supported in Gemini API.");let h=bp(a,["negativePrompt"]);void 0!==b&&null!=h&&bo(b,["parameters","negativePrompt"],h);let i=bp(a,["enhancePrompt"]);if(void 0!==b&&null!=i&&bo(b,["parameters","enhancePrompt"],i),void 0!==bp(a,["generateAudio"]))throw Error("generateAudio parameter is not supported in Gemini API.");let j=bp(a,["lastFrame"]);void 0!==b&&null!=j&&bo(b,["instances[0]","lastFrame"],cN(j));let k=bp(a,["referenceImages"]);if(void 0!==b&&null!=k){let a=k;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e;return c={},null!=(d=bp(b=a,["image"]))&&bo(c,["image"],cN(d)),null!=(e=bp(b,["referenceType"]))&&bo(c,["referenceType"],e),c})),bo(b,["instances[0]","referenceImages"],a)}if(void 0!==bp(a,["mask"]))throw Error("mask parameter is not supported in Gemini API.");if(void 0!==bp(a,["compressionQuality"]))throw Error("compressionQuality parameter is not supported in Gemini API.")}(r,h),h);return l=bn("{model}:predictLongRunning",s._url),m=s._query,delete s._url,delete s._query,this.apiClient.request({path:l,queryParams:m,body:JSON.stringify(s),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json()).then(a=>{let b,c,d,e,f,g,h=(b={},null!=(c=bp(a,["name"]))&&bo(b,["name"],c),null!=(d=bp(a,["metadata"]))&&bo(b,["metadata"],d),null!=(e=bp(a,["done"]))&&bo(b,["done"],e),null!=(f=bp(a,["error"]))&&bo(b,["error"],f),null!=(g=bp(a,["response","generateVideoResponse"]))&&bo(b,["response"],function(a){let b={},c=bp(a,["generatedSamples"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e,f,g,h;return c={},null!=(d=bp(a,["video"]))&&bo(c,["video"],(e={},null!=(f=bp(b=d,["uri"]))&&bo(e,["uri"],f),null!=(g=bp(b,["encodedVideo"]))&&bo(e,["videoBytes"],bq(g)),null!=(h=bp(b,["encoding"]))&&bo(e,["mimeType"],h),e)),c})),bo(b,["generatedVideos"],a)}let d=bp(a,["raiMediaFilteredCount"]);null!=d&&bo(b,["raiMediaFilteredCount"],d);let e=bp(a,["raiMediaFilteredReasons"]);return null!=e&&bo(b,["raiMediaFilteredReasons"],e),b}(g)),b),i=new bE;return Object.assign(i,h),i})}}}class de extends bm{constructor(a){super(),this.apiClient=a}async getVideosOperation(a){let b=a.operation,c=a.config;if(void 0===b.name||""===b.name)throw Error("Operation name is required.");if(this.apiClient.isVertexAI()){let a,d=b.name.split("/operations/")[0];c&&"httpOptions"in c&&(a=c.httpOptions);let e=await this.fetchPredictVideosOperationInternal({operationName:b.name,resourceName:d,config:{httpOptions:a}});return b._fromAPIResponse({apiResponse:e,_isVertexAI:!0})}{let a=await this.getVideosOperationInternal({operationName:b.name,config:c});return b._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async get(a){let b=a.operation,c=a.config;if(void 0===b.name||""===b.name)throw Error("Operation name is required.");if(this.apiClient.isVertexAI()){let a,d=b.name.split("/operations/")[0];c&&"httpOptions"in c&&(a=c.httpOptions);let e=await this.fetchPredictVideosOperationInternal({operationName:b.name,resourceName:d,config:{httpOptions:a}});return b._fromAPIResponse({apiResponse:e,_isVertexAI:!0})}{let a=await this.getVideosOperationInternal({operationName:b.name,config:c});return b._fromAPIResponse({apiResponse:a,_isVertexAI:!1})}}async getVideosOperationInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d,e,h=(d={},null!=(e=bp(a,["operationName"]))&&bo(d,["_url","operationName"],e),d);return f=bn("{operationName}",h._url),g=h._query,delete h._url,delete h._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json())}{let b,c,h=(b={},null!=(c=bp(a,["operationName"]))&&bo(b,["_url","operationName"],c),b);return f=bn("{operationName}",h._url),g=h._query,delete h._url,delete h._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json())}}async fetchPredictVideosOperationInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f,g,h,i=(f={},null!=(g=bp(a,["operationName"]))&&bo(f,["operationName"],g),null!=(h=bp(a,["resourceName"]))&&bo(f,["_url","resourceName"],h),f);return d=bn("{resourceName}:fetchPredictOperation",i._url),e=i._query,delete i._url,delete i._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json())}throw Error("This method is only supported by the Vertex AI.")}}class df extends bm{constructor(a){super(),this.apiClient=a}async create(a){var b,c,d,e,f;let g="",h={};if(this.apiClient.isVertexAI())throw Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let i,j,k,l,m,n,o,p,q,r,s=(d=this.apiClient,l={},null!=(m=bp(a,["config"]))&&bo(l,["config"],(n=bp(m,["expireTime"]),void 0!==l&&null!=n&&bo(l,["expireTime"],n),o=bp(m,["newSessionExpireTime"]),void 0!==l&&null!=o&&bo(l,["newSessionExpireTime"],o),p=bp(m,["uses"]),void 0!==l&&null!=p&&bo(l,["uses"],p),q=bp(m,["liveConnectConstraints"]),void 0!==l&&null!=q&&bo(l,["bidiGenerateContentSetup"],(e=d,i={},null!=(j=bp(f=q,["model"]))&&bo(i,["setup","model"],bU(e,j)),null!=(k=bp(f,["config"]))&&bo(i,["config"],function(a,b){let c=bp(a,["generationConfig"]);void 0!==b&&null!=c&&bo(b,["setup","generationConfig"],c);let d=bp(a,["responseModalities"]);void 0!==b&&null!=d&&bo(b,["setup","generationConfig","responseModalities"],d);let e=bp(a,["temperature"]);void 0!==b&&null!=e&&bo(b,["setup","generationConfig","temperature"],e);let f=bp(a,["topP"]);void 0!==b&&null!=f&&bo(b,["setup","generationConfig","topP"],f);let g=bp(a,["topK"]);void 0!==b&&null!=g&&bo(b,["setup","generationConfig","topK"],g);let h=bp(a,["maxOutputTokens"]);void 0!==b&&null!=h&&bo(b,["setup","generationConfig","maxOutputTokens"],h);let i=bp(a,["mediaResolution"]);void 0!==b&&null!=i&&bo(b,["setup","generationConfig","mediaResolution"],i);let j=bp(a,["seed"]);void 0!==b&&null!=j&&bo(b,["setup","generationConfig","seed"],j);let k=bp(a,["speechConfig"]);void 0!==b&&null!=k&&bo(b,["setup","generationConfig","speechConfig"],b8(k));let l=bp(a,["thinkingConfig"]);void 0!==b&&null!=l&&bo(b,["setup","generationConfig","thinkingConfig"],l);let m=bp(a,["enableAffectiveDialog"]);void 0!==b&&null!=m&&bo(b,["setup","generationConfig","enableAffectiveDialog"],m);let n=bp(a,["systemInstruction"]);void 0!==b&&null!=n&&bo(b,["setup","systemInstruction"],function(a){let b={},c=bp(a,["parts"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>{var b;let c,d,e,f,g,h,i,j,k,l,m,n;return c={},null!=(d=bp(b=a,["mediaResolution"]))&&bo(c,["mediaResolution"],d),null!=(e=bp(b,["codeExecutionResult"]))&&bo(c,["codeExecutionResult"],e),null!=(f=bp(b,["executableCode"]))&&bo(c,["executableCode"],f),null!=(g=bp(b,["fileData"]))&&bo(c,["fileData"],function(a){let b={};if(void 0!==bp(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let c=bp(a,["fileUri"]);null!=c&&bo(b,["fileUri"],c);let d=bp(a,["mimeType"]);return null!=d&&bo(b,["mimeType"],d),b}(g)),null!=(h=bp(b,["functionCall"]))&&bo(c,["functionCall"],function(a){let b={},c=bp(a,["id"]);null!=c&&bo(b,["id"],c);let d=bp(a,["args"]);null!=d&&bo(b,["args"],d);let e=bp(a,["name"]);if(null!=e&&bo(b,["name"],e),void 0!==bp(a,["partialArgs"]))throw Error("partialArgs parameter is not supported in Gemini API.");if(void 0!==bp(a,["willContinue"]))throw Error("willContinue parameter is not supported in Gemini API.");return b}(h)),null!=(i=bp(b,["functionResponse"]))&&bo(c,["functionResponse"],i),null!=(j=bp(b,["inlineData"]))&&bo(c,["inlineData"],function(a){let b={},c=bp(a,["data"]);if(null!=c&&bo(b,["data"],c),void 0!==bp(a,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let d=bp(a,["mimeType"]);return null!=d&&bo(b,["mimeType"],d),b}(j)),null!=(k=bp(b,["text"]))&&bo(c,["text"],k),null!=(l=bp(b,["thought"]))&&bo(c,["thought"],l),null!=(m=bp(b,["thoughtSignature"]))&&bo(c,["thoughtSignature"],m),null!=(n=bp(b,["videoMetadata"]))&&bo(c,["videoMetadata"],n),c})),bo(b,["parts"],a)}let d=bp(a,["role"]);return null!=d&&bo(b,["role"],d),b}(b3(n)));let o=bp(a,["tools"]);if(void 0!==b&&null!=o){let a=ca(o);Array.isArray(a)&&(a=a.map(a=>(function(a){let b={},c=bp(a,["functionDeclarations"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["functionDeclarations"],a)}if(void 0!==bp(a,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let d=bp(a,["googleSearchRetrieval"]);null!=d&&bo(b,["googleSearchRetrieval"],d);let e=bp(a,["computerUse"]);null!=e&&bo(b,["computerUse"],e);let f=bp(a,["fileSearch"]);null!=f&&bo(b,["fileSearch"],f);let g=bp(a,["codeExecution"]);if(null!=g&&bo(b,["codeExecution"],g),void 0!==bp(a,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");let h=bp(a,["googleMaps"]);null!=h&&bo(b,["googleMaps"],function(a){let b={};if(void 0!==bp(a,["authConfig"]))throw Error("authConfig parameter is not supported in Gemini API.");let c=bp(a,["enableWidget"]);return null!=c&&bo(b,["enableWidget"],c),b}(h));let i=bp(a,["googleSearch"]);null!=i&&bo(b,["googleSearch"],function(a){let b={};if(void 0!==bp(a,["excludeDomains"]))throw Error("excludeDomains parameter is not supported in Gemini API.");if(void 0!==bp(a,["blockingConfidence"]))throw Error("blockingConfidence parameter is not supported in Gemini API.");let c=bp(a,["timeRangeFilter"]);return null!=c&&bo(b,["timeRangeFilter"],c),b}(i));let j=bp(a,["urlContext"]);return null!=j&&bo(b,["urlContext"],j),b})(b9(a)))),bo(b,["setup","tools"],a)}let p=bp(a,["sessionResumption"]);void 0!==b&&null!=p&&bo(b,["setup","sessionResumption"],function(a){let b={},c=bp(a,["handle"]);if(null!=c&&bo(b,["handle"],c),void 0!==bp(a,["transparent"]))throw Error("transparent parameter is not supported in Gemini API.");return b}(p));let q=bp(a,["inputAudioTranscription"]);void 0!==b&&null!=q&&bo(b,["setup","inputAudioTranscription"],q);let r=bp(a,["outputAudioTranscription"]);void 0!==b&&null!=r&&bo(b,["setup","outputAudioTranscription"],r);let s=bp(a,["realtimeInputConfig"]);void 0!==b&&null!=s&&bo(b,["setup","realtimeInputConfig"],s);let t=bp(a,["contextWindowCompression"]);void 0!==b&&null!=t&&bo(b,["setup","contextWindowCompression"],t);let u=bp(a,["proactivity"]);if(void 0!==b&&null!=u&&bo(b,["setup","proactivity"],u),void 0!==bp(a,["explicitVadSignal"]))throw Error("explicitVadSignal parameter is not supported in Gemini API.");return{}}(k,i)),i)),r=bp(m,["lockAdditionalFields"]),void 0!==l&&null!=r&&bo(l,["fieldMask"],r),{})),l);g=bn("auth_tokens",s._url),h=s._query,delete s.config,delete s._url,delete s._query;let t=function(a,b){let c=null,d=a.bidiGenerateContentSetup;if("object"==typeof d&&null!==d&&"setup"in d){let b=d.setup;"object"==typeof b&&null!==b?(a.bidiGenerateContentSetup=b,c=b):delete a.bidiGenerateContentSetup}else void 0!==d&&delete a.bidiGenerateContentSetup;let e=a.fieldMask;if(c){let d=function(a){let b=[];for(let c in a)if(Object.prototype.hasOwnProperty.call(a,c)){let d=a[c];if("object"==typeof d&&null!=d&&Object.keys(d).length>0){let a=Object.keys(d).map(a=>`${c}.${a}`);b.push(...a)}else b.push(c)}return b.join(",")}(c);if(Array.isArray(null==b?void 0:b.lockAdditionalFields)&&(null==b?void 0:b.lockAdditionalFields.length)===0)d?a.fieldMask=d:delete a.fieldMask;else if((null==b?void 0:b.lockAdditionalFields)&&b.lockAdditionalFields.length>0&&null!==e&&Array.isArray(e)&&e.length>0){let b=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],c=[];e.length>0&&(c=e.map(a=>b.includes(a)?`generationConfig.${a}`:a));let f=[];d&&f.push(d),c.length>0&&f.push(...c),f.length>0?a.fieldMask=f.join(","):delete a.fieldMask}else delete a.fieldMask}else null!==e&&Array.isArray(e)&&e.length>0?a.fieldMask=e.join(","):delete a.fieldMask;return a}(s,a.config);return this.apiClient.request({path:g,queryParams:h,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}}}class dg extends bm{constructor(a){super(),this.apiClient=a,this.list=async a=>new cq(bd.PAGED_ITEM_DOCUMENTS,b=>this.listInternal({parent:a.parent,config:b.config}),await this.listInternal(a),a)}async get(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f,g,h=(f={},null!=(g=bp(a,["name"]))&&bo(f,["_url","name"],g),f);return d=bn("{name}",h._url),e=h._query,delete h._url,delete h._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(h),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}}async delete(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f,g,h,i,j=(f={},null!=(g=bp(a,["name"]))&&bo(f,["_url","name"],g),null!=(h=bp(a,["config"]))&&(i=bp(h,["force"]),void 0!==f&&null!=i&&bo(f,["_query","force"],i)),f);d=bn("{name}",j._url),e=j._query,delete j._url,delete j._query,await this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(j),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal})}}async listInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f,g,h,i,j,k=(f={},null!=(g=bp(a,["parent"]))&&bo(f,["_url","parent"],g),null!=(h=bp(a,["config"]))&&(i=bp(h,["pageSize"]),void 0!==f&&null!=i&&bo(f,["_query","pageSize"],i),j=bp(h,["pageToken"]),void 0!==f&&null!=j&&bo(f,["_query","pageToken"],j)),f);return d=bn("{parent}/documents",k._url),e=k._query,delete k._url,delete k._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(k),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=bp(a,["sdkHttpResponse"]);null!=c&&bo(b,["sdkHttpResponse"],c);let d=bp(a,["nextPageToken"]);null!=d&&bo(b,["nextPageToken"],d);let e=bp(a,["documents"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["documents"],a)}return b}(a),c=new bJ;return Object.assign(c,b),c})}}}class dh extends bm{constructor(a,b=new dg(a)){super(),this.apiClient=a,this.documents=b,this.list=async(a={})=>new cq(bd.PAGED_ITEM_FILE_SEARCH_STORES,a=>this.listInternal(a),await this.listInternal(a),a)}async uploadToFileSearchStore(a){if(this.apiClient.isVertexAI())throw Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(a.fileSearchStoreName,a.file,a.config)}async create(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f,g,h,i=(f={},null!=(g=bp(a,["config"]))&&(h=bp(g,["displayName"]),void 0!==f&&null!=h&&bo(f,["displayName"],h)),f);return d=bn("fileSearchStores",i._url),e=i._query,delete i._url,delete i._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}}async get(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f,g,h=(f={},null!=(g=bp(a,["name"]))&&bo(f,["_url","name"],g),f);return d=bn("{name}",h._url),e=h._query,delete h._url,delete h._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(h),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>a)}}async delete(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f,g,h,i,j=(f={},null!=(g=bp(a,["name"]))&&bo(f,["_url","name"],g),null!=(h=bp(a,["config"]))&&(i=bp(h,["force"]),void 0!==f&&null!=i&&bo(f,["_query","force"],i)),f);d=bn("{name}",j._url),e=j._query,delete j._url,delete j._query,await this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(j),httpMethod:"DELETE",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal})}}async listInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f,g,h,i,j=(f={},null!=(g=bp(a,["config"]))&&(h=bp(g,["pageSize"]),void 0!==f&&null!=h&&bo(f,["_query","pageSize"],h),i=bp(g,["pageToken"]),void 0!==f&&null!=i&&bo(f,["_query","pageToken"],i)),f);return d=bn("fileSearchStores",j._url),e=j._query,delete j._url,delete j._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(j),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b=function(a){let b={},c=bp(a,["sdkHttpResponse"]);null!=c&&bo(b,["sdkHttpResponse"],c);let d=bp(a,["nextPageToken"]);null!=d&&bo(b,["nextPageToken"],d);let e=bp(a,["fileSearchStores"]);if(null!=e){let a=e;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["fileSearchStores"],a)}return b}(a),c=new bK;return Object.assign(c,b),c})}}async uploadToFileSearchStoreInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f,g,h,i=(f={},null!=(g=bp(a,["fileSearchStoreName"]))&&bo(f,["_url","file_search_store_name"],g),null!=(h=bp(a,["config"]))&&cX(h,f),f);return d=bn("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",i._url),e=i._query,delete i._url,delete i._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{let b,c,d=(b={},null!=(c=bp(a,["sdkHttpResponse"]))&&bo(b,["sdkHttpResponse"],c),b),e=new bL;return Object.assign(e,d),e})}}async importFile(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f,g,h,i,j=(f={},null!=(g=bp(a,["fileSearchStoreName"]))&&bo(f,["_url","file_search_store_name"],g),null!=(h=bp(a,["fileName"]))&&bo(f,["fileName"],h),null!=(i=bp(a,["config"]))&&function(a,b){let c=bp(a,["customMetadata"]);if(void 0!==b&&null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),bo(b,["customMetadata"],a)}let d=bp(a,["chunkingConfig"]);void 0!==b&&null!=d&&bo(b,["chunkingConfig"],d)}(i,f),f);return d=bn("{file_search_store_name}:importFile",j._url),e=j._query,delete j._url,delete j._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(j),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json()).then(a=>{var b;let c,d,e,f,g,h,i,j,k,l,m=(g={},null!=(h=bp(a,["name"]))&&bo(g,["name"],h),null!=(i=bp(a,["metadata"]))&&bo(g,["metadata"],i),null!=(j=bp(a,["done"]))&&bo(g,["done"],j),null!=(k=bp(a,["error"]))&&bo(g,["error"],k),null!=(l=bp(a,["response"]))&&bo(g,["response"],(c={},null!=(d=bp(b=l,["sdkHttpResponse"]))&&bo(c,["sdkHttpResponse"],d),null!=(e=bp(b,["parent"]))&&bo(c,["parent"],e),null!=(f=bp(b,["documentName"]))&&bo(c,["documentName"],f),c)),g),n=new bM;return Object.assign(n,m),n})}}}let di=function(){let{crypto:a}=globalThis;if(null==a?void 0:a.randomUUID)return di=a.randomUUID.bind(a),a.randomUUID();let b=new Uint8Array(1),c=a?()=>a.getRandomValues(b)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,a=>(a^c()&15>>a/4).toString(16))};function dj(a){return"object"==typeof a&&null!==a&&("name"in a&&"AbortError"===a.name||"message"in a&&String(a.message).includes("FetchRequestCanceledException"))}let dk=a=>{if(a instanceof Error)return a;if("object"==typeof a&&null!==a){try{if("[object Error]"===Object.prototype.toString.call(a)){let b=Error(a.message,a.cause?{cause:a.cause}:{});return a.stack&&(b.stack=a.stack),a.cause&&!b.cause&&(b.cause=a.cause),a.name&&(b.name=a.name),b}}catch(a){}try{return Error(JSON.stringify(a))}catch(a){}}return Error(a)};class dl extends Error{}class dm extends dl{constructor(a,b,c,d){super(`${dm.makeMessage(a,b,c)}`),this.status=a,this.headers=d,this.error=b}static makeMessage(a,b,c){let d=(null==b?void 0:b.message)?"string"==typeof b.message?b.message:JSON.stringify(b.message):b?JSON.stringify(b):c;return a&&d?`${a} ${d}`:a?`${a} status code (no body)`:d||"(no status code or body)"}static generate(a,b,c,d){return a&&d?400===a?new dr(a,b,c,d):401===a?new ds(a,b,c,d):403===a?new dt(a,b,c,d):404===a?new du(a,b,c,d):409===a?new dv(a,b,c,d):422===a?new dw(a,b,c,d):429===a?new dx(a,b,c,d):a>=500?new dy(a,b,c,d):new dm(a,b,c,d):new dp({message:c,cause:dk(b)})}}class dn extends dm{constructor({message:a}={}){super(void 0,void 0,a||"Request was aborted.",void 0)}}class dp extends dm{constructor({message:a,cause:b}){super(void 0,void 0,a||"Connection error.",void 0),b&&(this.cause=b)}}class dq extends dp{constructor({message:a}={}){super({message:null!=a?a:"Request timed out."})}}class dr extends dm{}class ds extends dm{}class dt extends dm{}class du extends dm{}class dv extends dm{}class dw extends dm{}class dx extends dm{}class dy extends dm{}let dz=/^[a-z][a-z0-9+.-]*:/i,dA=a=>(dA=Array.isArray)(a),dB=dA,dC="0.0.1",dD=a=>"x32"===a?"x32":"x86_64"===a||"x64"===a?"x64":"arm"===a?"arm":"aarch64"===a||"arm64"===a?"arm64":a?`other:${a}`:"unknown",dE=a=>(a=a.toLowerCase()).includes("ios")?"iOS":"android"===a?"Android":"darwin"===a?"MacOS":"win32"===a?"Windows":"freebsd"===a?"FreeBSD":"openbsd"===a?"OpenBSD":"linux"===a?"Linux":a?`Other:${a}`:"Unknown";function dF(...a){let b=globalThis.ReadableStream;if(void 0===b)throw Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new b(...a)}function dG(a){if(a[Symbol.asyncIterator])return a;let b=a.getReader();return{async next(){try{let a=await b.read();return(null==a?void 0:a.done)&&b.releaseLock(),a}catch(a){throw b.releaseLock(),a}},async return(){let a=b.cancel();return b.releaseLock(),await a,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function dH(a){var b,c;if(null===a||"object"!=typeof a)return;if(a[Symbol.asyncIterator])return void await (null==(c=(b=a[Symbol.asyncIterator]()).return)?void 0:c.call(b));let d=a.getReader(),e=d.cancel();d.releaseLock(),await e}let dI=({headers:a,body:b})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(b)}),dJ=()=>{var a;if("undefined"==typeof File){let{process:b}=globalThis;throw Error("`File` is not defined as a global, which is required for file uploads."+("string"==typeof(null==(a=null==b?void 0:b.versions)?void 0:a.node)&&20>parseInt(b.versions.node.split("."))?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function dK(a,b,c){return dJ(),new File(a,null!=b?b:"unknown_file",c)}let dL=a=>null!=a&&"object"==typeof a&&"number"==typeof a.size&&"string"==typeof a.type&&"function"==typeof a.text&&"function"==typeof a.slice&&"function"==typeof a.arrayBuffer;async function dM(a,b,c){var d;let e,f;if(dJ(),null!=(e=a=await a)&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&dL(e))return a instanceof File?a:dK([await a.arrayBuffer()],a.name);if(null!=(f=a)&&"object"==typeof f&&"string"==typeof f.url&&"function"==typeof f.blob){let d=await a.blob();return b||(b=new URL(a.url).pathname.split(/[\\/]/).pop()),dK(await dN(d),b,c)}let g=await dN(a);if(b||(b=("object"==typeof(d=a)&&null!==d&&("name"in d&&d.name&&String(d.name)||"url"in d&&d.url&&String(d.url)||"filename"in d&&d.filename&&String(d.filename)||"path"in d&&d.path&&String(d.path))||"").split(/[\\/]/).pop()||void 0),!(null==c?void 0:c.type)){let a=g.find(a=>"object"==typeof a&&"type"in a&&a.type);"string"==typeof a&&(c=Object.assign(Object.assign({},c),{type:a}))}return dK(g,b,c)}async function dN(a){let b=[];if("string"==typeof a||ArrayBuffer.isView(a)||a instanceof ArrayBuffer)b.push(a);else if(dL(a))b.push(a instanceof Blob?a:await a.arrayBuffer());else if(null!=a&&"object"==typeof a&&"function"==typeof a[Symbol.asyncIterator])try{for(var c,d,e,f,g,h,i=!0,j=cx(a);!(c=(h=await j.next()).done);i=!0)f=h.value,i=!1,b.push(...await dN(f))}catch(a){d={error:a}}finally{try{!i&&!c&&(e=j.return)&&await e.call(j)}finally{if(d)throw d.error}}else{let b=null==(g=null==a?void 0:a.constructor)?void 0:g.name;throw Error(`Unexpected data type: ${typeof a}${b?`; constructor: ${b}`:""}${function(a){if("object"!=typeof a||null===a)return"";let b=Object.getOwnPropertyNames(a);return`; props: [${b.map(a=>`"${a}"`).join(", ")}]`}(a)}`)}return b}class dO{constructor(a){this._client=a}}function dP(a){return a.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}dO._key=[];let dQ=Object.freeze(Object.create(null)),dR=((a=dP)=>function(b,...c){let d;if(1===b.length)return b[0];let e=!1,f=[],g=b.reduce((b,d,g)=>{var h,i,j;/[?#]/.test(d)&&(e=!0);let k=c[g],l=(e?encodeURIComponent:a)(""+k);return g!==c.length&&(null==k||"object"==typeof k&&k.toString===(null==(j=Object.getPrototypeOf(null!=(i=Object.getPrototypeOf(null!=(h=k.hasOwnProperty)?h:dQ))?i:dQ))?void 0:j.toString))&&(l=k+"",f.push({start:b.length+d.length,length:l.length,error:`Value of type ${Object.prototype.toString.call(k).slice(8,-1)} is not a valid path parameter`})),b+d+(g===c.length?"":l)},""),h=g.split(/[?#]/,1)[0],i=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;for(;null!==(d=i.exec(h));)f.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(f.sort((a,b)=>a.start-b.start),f.length>0){let a=0,b=f.reduce((b,c)=>{let d=" ".repeat(c.start-a),e="^".repeat(c.length);return a=c.start+c.length,b+d+e},"");throw new dl(`Path parameters result in path with invalid segments:
${f.map(a=>a.error).join("\n")}
${g}
${b}`)}return g})(dP);class dS extends dO{create(a,b){var c;let{api_version:d=this._client.apiVersion}=a,e=cu(a,["api_version"]);if("model"in e&&"agent_config"in e)throw new dl("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in e&&"generation_config"in e)throw new dl("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(dR`/${d}/interactions`,Object.assign(Object.assign({body:e},b),{stream:null!=(c=a.stream)&&c}))}delete(a,b={},c){let{api_version:d=this._client.apiVersion}=null!=b?b:{};return this._client.delete(dR`/${d}/interactions/${a}`,c)}cancel(a,b={},c){let{api_version:d=this._client.apiVersion}=null!=b?b:{};return this._client.post(dR`/${d}/interactions/${a}/cancel`,c)}get(a,b={},c){var d;let e=null!=b?b:{},{api_version:f=this._client.apiVersion}=e,g=cu(e,["api_version"]);return this._client.get(dR`/${f}/interactions/${a}`,Object.assign(Object.assign({query:g},c),{stream:null!=(d=null==b?void 0:b.stream)&&d}))}}dS._key=Object.freeze(["interactions"]);class dT extends dS{}function dU(a){let b;return(null!=e?e:e=(b=new globalThis.TextEncoder).encode.bind(b))(a)}function dV(a){let b;return(null!=f?f:f=(b=new globalThis.TextDecoder).decode.bind(b))(a)}class dW{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(a){let b;if(null==a)return[];let c=a instanceof ArrayBuffer?new Uint8Array(a):"string"==typeof a?dU(a):a;this.buffer=function(a){let b=0;for(let c of a)b+=c.length;let c=new Uint8Array(b),d=0;for(let b of a)c.set(b,d),d+=b.length;return c}([this.buffer,c]);let d=[];for(;null!=(b=function(a,b){for(let c=null!=b?b:0;c<a.length;c++){if(10===a[c])return{preceding:c,index:c+1,carriage:!1};if(13===a[c])return{preceding:c,index:c+1,carriage:!0}}return null}(this.buffer,this.carriageReturnIndex));){if(b.carriage&&null==this.carriageReturnIndex){this.carriageReturnIndex=b.index;continue}if(null!=this.carriageReturnIndex&&(b.index!==this.carriageReturnIndex+1||b.carriage)){d.push(dV(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}let a=null!==this.carriageReturnIndex?b.preceding-1:b.preceding,c=dV(this.buffer.subarray(0,a));d.push(c),this.buffer=this.buffer.subarray(b.index),this.carriageReturnIndex=null}return d}flush(){return this.buffer.length?this.decode("\n"):[]}}dW.NEWLINE_CHARS=new Set(["\n","\r"]),dW.NEWLINE_REGEXP=/\r\n|[\n\r]/g;let dX={off:0,error:200,warn:300,info:400,debug:500},dY=(a,b,c)=>{if(a){if(Object.prototype.hasOwnProperty.call(dX,a))return a;d1(c).warn(`${b} was set to ${JSON.stringify(a)}, expected one of ${JSON.stringify(Object.keys(dX))}`)}};function dZ(){}function d$(a,b,c){return!b||dX[a]>dX[c]?dZ:b[a].bind(b)}let d_={error:dZ,warn:dZ,info:dZ,debug:dZ},d0=new WeakMap;function d1(a){var b;let c=a.logger,d=null!=(b=a.logLevel)?b:"off";if(!c)return d_;let e=d0.get(c);if(e&&e[0]===d)return e[1];let f={error:d$("error",c,d),warn:d$("warn",c,d),info:d$("info",c,d),debug:d$("debug",c,d)};return d0.set(c,[d,f]),f}let d2=a=>(a.options&&(a.options=Object.assign({},a.options),delete a.options.headers),a.headers&&(a.headers=Object.fromEntries((a.headers instanceof Headers?[...a.headers]:Object.entries(a.headers)).map(([a,b])=>[a,"x-goog-api-key"===a.toLowerCase()||"authorization"===a.toLowerCase()||"cookie"===a.toLowerCase()||"set-cookie"===a.toLowerCase()?"***":b]))),"retryOfRequestLogID"in a&&(a.retryOfRequestLogID&&(a.retryOf=a.retryOfRequestLogID),delete a.retryOfRequestLogID),a);class d3{constructor(a,b,c){this.iterator=a,this.controller=b,this.client=c}static fromSSEResponse(a,b,c){let d=!1,e=c?d1(c):console;return new d3(function(){return cw(this,arguments,function*(){var c,f,g,h;if(d)throw new dl("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");d=!0;let i=!1;try{try{for(var j,k=!0,l=cx(function(a,b){return cw(this,arguments,function*(){var c,d,e,f;if(!a.body){if(b.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new dl("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new dl("Attempted to iterate over a response with no body")}let g=new d4,h=new dW,i=dG(a.body);try{for(var j,k=!0,l=cx(function(a){return cw(this,arguments,function*(){var b,c,d,e;let f=new Uint8Array;try{for(var g,h=!0,i=cx(a);!(b=(g=yield cv(i.next())).done);h=!0){let a;if(e=g.value,h=!1,null==e)continue;let b=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?dU(e):e,c=new Uint8Array(f.length+b.length);for(c.set(f),c.set(b,f.length),f=c;-1!==(a=function(a){for(let b=0;b<a.length-1;b++){if(10===a[b]&&10===a[b+1]||13===a[b]&&13===a[b+1])return b+2;if(13===a[b]&&10===a[b+1]&&b+3<a.length&&13===a[b+2]&&10===a[b+3])return b+4}return -1}(f));)yield yield cv(f.slice(0,a)),f=f.slice(a)}}catch(a){c={error:a}}finally{try{!h&&!b&&(d=i.return)&&(yield cv(d.call(i)))}finally{if(c)throw c.error}}f.length>0&&(yield yield cv(f))})}(i));!(c=(j=yield cv(l.next())).done);k=!0)for(let a of(f=j.value,k=!1,h.decode(f))){let b=g.decode(a);b&&(yield yield cv(b))}}catch(a){d={error:a}}finally{try{!k&&!c&&(e=l.return)&&(yield cv(e.call(l)))}finally{if(d)throw d.error}}for(let a of h.flush()){let b=g.decode(a);b&&(yield yield cv(b))}})}(a,b));!(c=(j=yield cv(l.next())).done);k=!0)if(h=j.value,k=!1,!i)if(h.data.startsWith("[DONE]")){i=!0;continue}else try{yield yield cv(JSON.parse(h.data))}catch(a){throw e.error("Could not parse message into JSON:",h.data),e.error("From chunk:",h.raw),a}}catch(a){f={error:a}}finally{try{!k&&!c&&(g=l.return)&&(yield cv(g.call(l)))}finally{if(f)throw f.error}}i=!0}catch(a){if(dj(a))return yield cv(void 0);throw a}finally{i||b.abort()}})},b,c)}static fromReadableStream(a,b,c){let d=!1;return new d3(function(){return cw(this,arguments,function*(){var c,e,f,g;if(d)throw new dl("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");d=!0;let h=!1;try{try{for(var i,j=!0,k=cx(function(){return cw(this,arguments,function*(){var b,c,d,e;let f=new dW,g=dG(a);try{for(var h,i=!0,j=cx(g);!(b=(h=yield cv(j.next())).done);i=!0)for(let a of(e=h.value,i=!1,f.decode(e)))yield yield cv(a)}catch(a){c={error:a}}finally{try{!i&&!b&&(d=j.return)&&(yield cv(d.call(j)))}finally{if(c)throw c.error}}for(let a of f.flush())yield yield cv(a)})}());!(c=(i=yield cv(k.next())).done);j=!0)g=i.value,j=!1,!h&&g&&(yield yield cv(JSON.parse(g)))}catch(a){e={error:a}}finally{try{!j&&!c&&(f=k.return)&&(yield cv(f.call(k)))}finally{if(e)throw e.error}}h=!0}catch(a){if(dj(a))return yield cv(void 0);throw a}finally{h||b.abort()}})},b,c)}[Symbol.asyncIterator](){return this.iterator()}tee(){let a=[],b=[],c=this.iterator(),d=d=>({next:()=>{if(0===d.length){let d=c.next();a.push(d),b.push(d)}return d.shift()}});return[new d3(()=>d(a),this.controller,this.client),new d3(()=>d(b),this.controller,this.client)]}toReadableStream(){let a,b=this;return dF({async start(){a=b[Symbol.asyncIterator]()},async pull(b){try{let{value:c,done:d}=await a.next();if(d)return b.close();let e=dU(JSON.stringify(c)+"\n");b.enqueue(e)}catch(a){b.error(a)}},async cancel(){var b;await (null==(b=a.return)?void 0:b.call(a))}})}}class d4{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(a){var b;let c;if(a.endsWith("\r")&&(a=a.substring(0,a.length-1)),!a){if(!this.event&&!this.data.length)return null;let a={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(a),a.startsWith(":"))return null;let[d,e,f]=-1!==(c=(b=a).indexOf(":"))?[b.substring(0,c),":",b.substring(c+1)]:[b,"",""];return f.startsWith(" ")&&(f=f.substring(1)),"event"===d?this.event=f:"data"===d&&this.data.push(f),null}}async function d5(a,b){let{response:c,requestLogID:d,retryOfRequestLogID:e,startTime:f}=b,g=await (async()=>{var d;if(b.options.stream)return(d1(a).debug("response",c.status,c.url,c.headers,c.body),b.options.__streamClass)?b.options.__streamClass.fromSSEResponse(c,b.controller,a):d3.fromSSEResponse(c,b.controller,a);if(204===c.status)return null;if(b.options.__binaryResponse)return c;let e=c.headers.get("content-type"),f=null==(d=null==e?void 0:e.split(";")[0])?void 0:d.trim();return(null==f?void 0:f.includes("application/json"))||(null==f?void 0:f.endsWith("+json"))?await c.json():await c.text()})();return d1(a).debug(`[${d}] response parsed`,d2({retryOfRequestLogID:e,url:c.url,status:c.status,body:g,durationMs:Date.now()-f})),g}class d6 extends Promise{constructor(a,b,c=d5){super(a=>{a(null)}),this.responsePromise=b,this.parseResponse=c,this.client=a}_thenUnwrap(a){return new d6(this.client,this.responsePromise,async(b,c)=>a(await this.parseResponse(b,c),c))}asResponse(){return this.responsePromise.then(a=>a.response)}async withResponse(){let[a,b]=await Promise.all([this.parse(),this.asResponse()]);return{data:a,response:b}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(a=>this.parseResponse(this.client,a))),this.parsedPromise}then(a,b){return this.parse().then(a,b)}catch(a){return this.parse().catch(a)}finally(a){return this.parse().finally(a)}}let d7=Symbol("brand.privateNullableHeaders"),d8=a=>{let b=new Headers,c=new Set;for(let d of a){let a=new Set;for(let[e,f]of function*(a){let b;if(!a)return;if(d7 in a){let{values:b,nulls:c}=a;for(let a of(yield*b.entries(),c))yield[a,null];return}let c=!1;for(let d of(a instanceof Headers?b=a.entries():dB(a)?b=a:(c=!0,b=Object.entries(null!=a?a:{})),b)){let a=d[0];if("string"!=typeof a)throw TypeError("expected header name to be a string");let b=dB(d[1])?d[1]:[d[1]],e=!1;for(let d of b)void 0!==d&&(c&&!e&&(e=!0,yield[a,null]),yield[a,d])}}(d)){let d=e.toLowerCase();a.has(d)||(b.delete(e),a.add(d)),null===f?(b.delete(e),c.add(d)):(b.append(e,f),c.delete(d))}}return{[d7]:!0,values:b,nulls:c}},d9=a=>{var b,c,d,e,f,g;return void 0!==globalThis.process?null!=(d=null==(c=null==(b=globalThis.process.env)?void 0:b[a])?void 0:c.trim())?d:void 0:void 0!==globalThis.Deno?null==(g=null==(f=null==(e=globalThis.Deno.env)?void 0:e.get)?void 0:f.call(e,a))?void 0:g.trim():void 0};class ea{constructor(a){var b,c,d,e,f,g,h,i=void 0===a?{}:a,{baseURL:j=d9("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:k=null!=(b=d9("GEMINI_API_KEY"))?b:null,apiVersion:l="v1beta"}=i;const m=Object.assign(Object.assign({apiKey:k,apiVersion:l},cu(i,["baseURL","apiKey","apiVersion"])),{baseURL:j||"https://generativelanguage.googleapis.com"});this.baseURL=m.baseURL,this.timeout=null!=(c=m.timeout)?c:ea.DEFAULT_TIMEOUT,this.logger=null!=(d=m.logger)?d:console;const n="warn";this.logLevel=n,this.logLevel=null!=(f=null!=(e=dY(m.logLevel,"ClientOptions.logLevel",this))?e:dY(d9("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))?f:n,this.fetchOptions=m.fetchOptions,this.maxRetries=null!=(g=m.maxRetries)?g:2,this.fetch=null!=(h=m.fetch)?h:function(){if("undefined"!=typeof fetch)return fetch;throw Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}(),this.encoder=dI,this._options=m,this.apiKey=k,this.apiVersion=l}withOptions(a){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),a))}baseURLOverridden(){return"https://generativelanguage.googleapis.com"!==this.baseURL}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:a,nulls:b}){if(!(this.apiKey&&a.get("x-goog-api-key"))&&!b.has("x-goog-api-key"))throw Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(a){if(null!=this.apiKey)return d8([{"x-goog-api-key":this.apiKey}])}stringifyQuery(a){return Object.entries(a).filter(([a,b])=>void 0!==b).map(([a,b])=>{if("string"==typeof b||"number"==typeof b||"boolean"==typeof b)return`${encodeURIComponent(a)}=${encodeURIComponent(b)}`;if(null===b)return`${encodeURIComponent(a)}=`;throw new dl(`Cannot stringify type ${typeof b}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${dC}`}defaultIdempotencyKey(){return`stainless-node-retry-${di()}`}makeStatusError(a,b,c,d){return dm.generate(a,b,c,d)}buildURL(a,b,c){let d=!this.baseURLOverridden()&&c||this.baseURL,e=new URL(dz.test(a)?a:d+(d.endsWith("/")&&a.startsWith("/")?a.slice(1):a)),f=this.defaultQuery();return!function(a){if(!a)return!0;for(let b in a)return!1;return!0}(f)&&(b=Object.assign(Object.assign({},f),b)),"object"==typeof b&&b&&!Array.isArray(b)&&(e.search=this.stringifyQuery(b)),e.toString()}async prepareOptions(a){}async prepareRequest(a,{url:b,options:c}){}get(a,b){return this.methodRequest("get",a,b)}post(a,b){return this.methodRequest("post",a,b)}patch(a,b){return this.methodRequest("patch",a,b)}put(a,b){return this.methodRequest("put",a,b)}delete(a,b){return this.methodRequest("delete",a,b)}methodRequest(a,b,c){return this.request(Promise.resolve(c).then(c=>Object.assign({method:a,path:b},c)))}request(a,b=null){return new d6(this,this.makeRequest(a,b,void 0))}async makeRequest(a,b,c){var d,e,f;let g=await a,h=null!=(d=g.maxRetries)?d:this.maxRetries;null==b&&(b=h),await this.prepareOptions(g);let{req:i,url:j,timeout:k}=await this.buildRequest(g,{retryCount:h-b});await this.prepareRequest(i,{url:j,options:g});let l="log_"+(0x1000000*Math.random()|0).toString(16).padStart(6,"0"),m=void 0===c?"":`, retryOf: ${c}`,n=Date.now();if(d1(this).debug(`[${l}] sending request`,d2({retryOfRequestLogID:c,method:g.method,url:j,options:g,headers:i.headers})),null==(e=g.signal)?void 0:e.aborted)throw new dn;let o=new AbortController,p=await this.fetchWithTimeout(j,i,k,o).catch(dk),q=Date.now();if(p instanceof globalThis.Error){let a=`retrying, ${b} attempts remaining`;if(null==(f=g.signal)?void 0:f.aborted)throw new dn;let d=dj(p)||/timed? ?out/i.test(String(p)+("cause"in p?String(p.cause):""));if(b)return d1(this).info(`[${l}] connection ${d?"timed out":"failed"} - ${a}`),d1(this).debug(`[${l}] connection ${d?"timed out":"failed"} (${a})`,d2({retryOfRequestLogID:c,url:j,durationMs:q-n,message:p.message})),this.retryRequest(g,b,null!=c?c:l);if(d1(this).info(`[${l}] connection ${d?"timed out":"failed"} - error; no more retries left`),d1(this).debug(`[${l}] connection ${d?"timed out":"failed"} (error; no more retries left)`,d2({retryOfRequestLogID:c,url:j,durationMs:q-n,message:p.message})),d)throw new dq;throw new dp({cause:p})}let r=`[${l}${m}] ${i.method} ${j} ${p.ok?"succeeded":"failed"} with status ${p.status} in ${q-n}ms`;if(!p.ok){let a=await this.shouldRetry(p);if(b&&a){let a=`retrying, ${b} attempts remaining`;return await dH(p.body),d1(this).info(`${r} - ${a}`),d1(this).debug(`[${l}] response error (${a})`,d2({retryOfRequestLogID:c,url:p.url,status:p.status,headers:p.headers,durationMs:q-n})),this.retryRequest(g,b,null!=c?c:l,p.headers)}let d=a?"error; no more retries left":"error; not retryable";d1(this).info(`${r} - ${d}`);let e=await p.text().catch(a=>dk(a).message),f=(a=>{try{return JSON.parse(a)}catch(a){return}})(e),h=f?void 0:e;throw d1(this).debug(`[${l}] response error (${d})`,d2({retryOfRequestLogID:c,url:p.url,status:p.status,headers:p.headers,message:h,durationMs:Date.now()-n})),this.makeStatusError(p.status,f,h,p.headers)}return d1(this).info(r),d1(this).debug(`[${l}] response start`,d2({retryOfRequestLogID:c,url:p.url,status:p.status,headers:p.headers,durationMs:q-n})),{response:p,options:g,controller:o,requestLogID:l,retryOfRequestLogID:c,startTime:n}}async fetchWithTimeout(a,b,c,d){let e=b||{},{signal:f,method:g}=e,h=cu(e,["signal","method"]);f&&f.addEventListener("abort",()=>d.abort());let i=setTimeout(()=>d.abort(),c),j=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||"object"==typeof h.body&&null!==h.body&&Symbol.asyncIterator in h.body,k=Object.assign(Object.assign(Object.assign({signal:d.signal},j?{duplex:"half"}:{}),{method:"GET"}),h);g&&(k.method=g.toUpperCase());try{return await this.fetch.call(void 0,a,k)}finally{clearTimeout(i)}}async shouldRetry(a){let b=a.headers.get("x-should-retry");return"true"===b||"false"!==b&&(408===a.status||409===a.status||429===a.status||!!(a.status>=500))}async retryRequest(a,b,c,d){var e;let f,g,h=null==d?void 0:d.get("retry-after-ms");if(h){let a=parseFloat(h);Number.isNaN(a)||(f=a)}let i=null==d?void 0:d.get("retry-after");if(i&&!f){let a=parseFloat(i);f=Number.isNaN(a)?Date.parse(i)-Date.now():1e3*a}if(!(f&&0<=f&&f<6e4)){let c=null!=(e=a.maxRetries)?e:this.maxRetries;f=this.calculateDefaultRetryTimeoutMillis(b,c)}return await (g=f,new Promise(a=>setTimeout(a,g))),this.makeRequest(a,b-1,c)}calculateDefaultRetryTimeoutMillis(a,b){return Math.min(.5*Math.pow(2,b-a),8)*(1-.25*Math.random())*1e3}async buildRequest(a,{retryCount:b=0}={}){var c,d,e;let f=Object.assign({},a),{method:g,path:h,query:i,defaultBaseURL:j}=f,k=this.buildURL(h,i,j);"timeout"in f&&((a,b)=>{if("number"!=typeof b||!Number.isInteger(b))throw new dl(`${a} must be an integer`);if(b<0)throw new dl(`${a} must be a positive integer`)})("timeout",f.timeout),f.timeout=null!=(c=f.timeout)?c:this.timeout;let{bodyHeaders:l,body:m}=this.buildBody({options:f}),n=await this.buildHeaders({options:a,method:g,bodyHeaders:l,retryCount:b});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:g,headers:n},f.signal&&{signal:f.signal}),globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"}),m&&{body:m}),null!=(d=this.fetchOptions)?d:{}),null!=(e=f.fetchOptions)?e:{}),url:k,timeout:f.timeout}}async buildHeaders({options:a,method:b,bodyHeaders:c,retryCount:e}){let f={};this.idempotencyHeader&&"get"!==b&&(a.idempotencyKey||(a.idempotencyKey=this.defaultIdempotencyKey()),f[this.idempotencyHeader]=a.idempotencyKey);let g=d8([f,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(e)},a.timeout?{"X-Stainless-Timeout":String(Math.trunc(a.timeout/1e3))}:{}),null!=d?d:d=(()=>{var a,b,c,d,e;let f="undefined"!=typeof Deno&&null!=Deno.build?"deno":"undefined"!=typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown";if("deno"===f)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":dC,"X-Stainless-OS":dE(Deno.build.os),"X-Stainless-Arch":dD(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:null!=(b=null==(a=Deno.version)?void 0:a.deno)?b:"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":dC,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===f)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":dC,"X-Stainless-OS":dE(null!=(c=globalThis.process.platform)?c:"unknown"),"X-Stainless-Arch":dD(null!=(d=globalThis.process.arch)?d:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":null!=(e=globalThis.process.version)?e:"unknown"};let g=function(){if("undefined"==typeof navigator||!navigator)return null;for(let{key:a,pattern:b}of[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}]){let c=b.exec(navigator.userAgent);if(c){let b=c[1]||0,d=c[2]||0,e=c[3]||0;return{browser:a,version:`${b}.${d}.${e}`}}}return null}();return g?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":dC,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${g.browser}`,"X-Stainless-Runtime-Version":g.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":dC,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})()),await this.authHeaders(a),this._options.defaultHeaders,c,a.headers]);return this.validateHeaders(g),g.values}buildBody({options:{body:a,headers:b}}){let c;if(!a)return{bodyHeaders:void 0,body:void 0};let d=d8([b]);if(ArrayBuffer.isView(a)||a instanceof ArrayBuffer||a instanceof DataView||"string"==typeof a&&d.values.has("content-type")||globalThis.Blob&&a instanceof globalThis.Blob||a instanceof FormData||a instanceof URLSearchParams||globalThis.ReadableStream&&a instanceof globalThis.ReadableStream)return{bodyHeaders:void 0,body:a};if("object"!=typeof a||!(Symbol.asyncIterator in a)&&(!(Symbol.iterator in a)||!("next"in a)||"function"!=typeof a.next))return this.encoder({body:a,headers:d});return{bodyHeaders:void 0,body:(c=Symbol.asyncIterator in a?a[Symbol.asyncIterator]():a[Symbol.iterator](),dF({start(){},async pull(a){let{done:b,value:d}=await c.next();b?a.close():a.enqueue(d)},async cancel(){var a;await (null==(a=c.return)?void 0:a.call(c))}}))}}}ea.DEFAULT_TIMEOUT=6e4;class eb extends ea{constructor(){super(...arguments),this.interactions=new dT(this)}}eb.GeminiNextGenAPIClient=eb,eb.GeminiNextGenAPIClientError=dl,eb.APIError=dm,eb.APIConnectionError=dp,eb.APIConnectionTimeoutError=dq,eb.APIUserAbortError=dn,eb.NotFoundError=du,eb.ConflictError=dv,eb.RateLimitError=dx,eb.BadRequestError=dr,eb.AuthenticationError=ds,eb.InternalServerError=dy,eb.PermissionDeniedError=dt,eb.UnprocessableEntityError=dw,eb.toFile=dM,eb.Interactions=dT;let ec="x-goog-api-key",ed="https://www.googleapis.com/auth/cloud-platform";class ee{constructor(a){if(void 0!==a.apiKey){this.apiKey=a.apiKey;return}const b=function(a){let b;if(!a)return{scopes:[ed]};if((b=a).scopes){if("string"==typeof b.scopes&&b.scopes!==ed||Array.isArray(b.scopes)&&0>b.scopes.indexOf(ed))throw Error(`Invalid auth scopes. Scopes must include: ${ed}`)}else b.scopes=[ed];return b}(a.googleAuthOptions);this.googleAuth=new bf.kF(b)}async addAuthHeaders(a,b){if(void 0!==this.apiKey){if(this.apiKey.startsWith("auth_tokens/"))throw Error("Ephemeral tokens are only supported by the live API.");this.addKeyHeader(a);return}return this.addGoogleAuthHeaders(a,b)}addKeyHeader(a){if(null===a.get(ec)){if(void 0===this.apiKey)throw Error("Trying to set API key header but apiKey is not set");a.append(ec,this.apiKey)}}async addGoogleAuthHeaders(a,b){if(void 0===this.googleAuth)throw Error("Trying to set google-auth headers but googleAuth is unset");for(let[c,d]of(await this.googleAuth.getRequestHeaders(b)))null===a.get(c)&&a.append(c,d)}}class ef{async download(a,b){if(a.downloadPath){let c=await eg(a,b);if(c instanceof bs){let b=(0,bg.createWriteStream)(a.downloadPath);bi.Readable.fromWeb(c.responseInternal.body).pipe(b),await (0,bj.finished)(b)}else try{await (0,bh.writeFile)(a.downloadPath,c,{encoding:"base64"})}catch(b){throw Error(`Failed to write file to ${a.downloadPath}: ${b}`)}}}}async function eg(a,b){var c,d,e;let f=cf(a.file);if(void 0!==f)return await b.request({path:`files/${f}:download`,httpMethod:"GET",queryParams:{alt:"media"},httpOptions:null==(c=a.config)?void 0:c.httpOptions,abortSignal:null==(d=a.config)?void 0:d.abortSignal});if(cd(a.file)){let b=null==(e=a.file.video)?void 0:e.videoBytes;if("string"==typeof b)return b;throw Error("Failed to download generated video, Uri or videoBytes not found.")}if(ce(a.file)){let b=a.file.videoBytes;if("string"==typeof b)return b;throw Error("Failed to download video, Uri or videoBytes not found.")}throw Error("Unsupported file type")}class eh{create(a,b,c){return new ei(a,b,c)}}class ei{constructor(a,b,c){this.url=a,this.headers=b,this.callbacks=c}connect(){this.ws=new bk(this.url,{headers:this.headers}),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(a){if(void 0===this.ws)throw Error("WebSocket is not connected");this.ws.send(a)}close(){if(void 0===this.ws)throw Error("WebSocket is not connected");this.ws.close()}}function ej(a,b){let c,d,e,f={},g=bp(a,["sdkHttpResponse"]);null!=g&&bo(f,["sdkHttpResponse"],g);let h=bp(a,["name"]);null!=h&&bo(f,["name"],h);let i=bp(a,["state"]);null!=i&&bo(f,["state"],cc(i));let j=bp(a,["createTime"]);null!=j&&bo(f,["createTime"],j);let k=bp(a,["tuningTask","startTime"]);null!=k&&bo(f,["startTime"],k);let l=bp(a,["tuningTask","completeTime"]);null!=l&&bo(f,["endTime"],l);let m=bp(a,["updateTime"]);null!=m&&bo(f,["updateTime"],m);let n=bp(a,["description"]);null!=n&&bo(f,["description"],n);let o=bp(a,["baseModel"]);null!=o&&bo(f,["baseModel"],o);let p=bp(a,["_self"]);return null!=p&&bo(f,["tunedModel"],(c={},null!=(d=bp(p,["name"]))&&bo(c,["model"],d),null!=(e=bp(p,["name"]))&&bo(c,["endpoint"],e),c)),f}function ek(a,b){let c={},d=bp(a,["sdkHttpResponse"]);null!=d&&bo(c,["sdkHttpResponse"],d);let e=bp(a,["name"]);null!=e&&bo(c,["name"],e);let f=bp(a,["state"]);null!=f&&bo(c,["state"],cc(f));let g=bp(a,["createTime"]);null!=g&&bo(c,["createTime"],g);let h=bp(a,["startTime"]);null!=h&&bo(c,["startTime"],h);let i=bp(a,["endTime"]);null!=i&&bo(c,["endTime"],i);let j=bp(a,["updateTime"]);null!=j&&bo(c,["updateTime"],j);let k=bp(a,["error"]);null!=k&&bo(c,["error"],k);let l=bp(a,["description"]);null!=l&&bo(c,["description"],l);let m=bp(a,["baseModel"]);null!=m&&bo(c,["baseModel"],m);let n=bp(a,["tunedModel"]);null!=n&&bo(c,["tunedModel"],n);let o=bp(a,["preTunedModel"]);null!=o&&bo(c,["preTunedModel"],o);let p=bp(a,["supervisedTuningSpec"]);null!=p&&bo(c,["supervisedTuningSpec"],p);let q=bp(a,["preferenceOptimizationSpec"]);null!=q&&bo(c,["preferenceOptimizationSpec"],q);let r=bp(a,["tuningDataStats"]);null!=r&&bo(c,["tuningDataStats"],r);let s=bp(a,["encryptionSpec"]);null!=s&&bo(c,["encryptionSpec"],s);let t=bp(a,["partnerModelTuningSpec"]);null!=t&&bo(c,["partnerModelTuningSpec"],t);let u=bp(a,["customBaseModel"]);null!=u&&bo(c,["customBaseModel"],u);let v=bp(a,["experiment"]);null!=v&&bo(c,["experiment"],v);let w=bp(a,["labels"]);null!=w&&bo(c,["labels"],w);let x=bp(a,["outputUri"]);null!=x&&bo(c,["outputUri"],x);let y=bp(a,["pipelineJob"]);null!=y&&bo(c,["pipelineJob"],y);let z=bp(a,["serviceAccount"]);null!=z&&bo(c,["serviceAccount"],z);let A=bp(a,["tunedModelDisplayName"]);null!=A&&bo(c,["tunedModelDisplayName"],A);let B=bp(a,["veoTuningSpec"]);return null!=B&&bo(c,["veoTuningSpec"],B),c}function el(a,b){let c={},d=bp(a,["gcsUri"]);null!=d&&bo(c,["validationDatasetUri"],d);let e=bp(a,["vertexDatasetResource"]);return null!=e&&bo(c,["validationDatasetUri"],e),c}class em extends bm{constructor(a){super(),this.apiClient=a,this.list=async(a={})=>new cq(bd.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(a),a),this.get=async a=>await this.getInternal(a),this.tune=async a=>{var b;if(this.apiClient.isVertexAI())if(a.baseModel.startsWith("projects/")){let c={tunedModelName:a.baseModel};(null==(b=a.config)?void 0:b.preTunedModelCheckpointId)&&(c.checkpointId=a.config.preTunedModelCheckpointId);let d=Object.assign(Object.assign({},a),{preTunedModel:c});return d.baseModel=void 0,await this.tuneInternal(d)}else{let b=Object.assign({},a);return await this.tuneInternal(b)}{let b=Object.assign({},a),c=await this.tuneMldevInternal(b),d="";return void 0!==c.metadata&&void 0!==c.metadata.tunedModel?d=c.metadata.tunedModel:void 0!==c.name&&c.name.includes("/operations/")&&(d=c.name.split("/operations/")[0]),{name:d,state:aI.JOB_STATE_QUEUED}}}}async getInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d,e,h=(d={},null!=(e=bp(a,["name"]))&&bo(d,["_url","name"],e),d);return f=bn("{name}",h._url),g=h._query,delete h._url,delete h._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>ek(a))}{let b,c,h=(b={},null!=(c=bp(a,["name"]))&&bo(b,["_url","name"],c),b);return f=bn("{name}",h._url),g=h._query,delete h._url,delete h._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>ej(a))}}async listInternal(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d,e,h,i,j,k=(d={},null!=(e=bp(a,["config"]))&&(h=bp(e,["pageSize"]),void 0!==d&&null!=h&&bo(d,["_query","pageSize"],h),i=bp(e,["pageToken"]),void 0!==d&&null!=i&&bo(d,["_query","pageToken"],i),j=bp(e,["filter"]),void 0!==d&&null!=j&&bo(d,["_query","filter"],j)),d);return f=bn("tuningJobs",k._url),g=k._query,delete k._url,delete k._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(k),httpMethod:"GET",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a,b){let c={},d=bp(a,["sdkHttpResponse"]);null!=d&&bo(c,["sdkHttpResponse"],d);let e=bp(a,["nextPageToken"]);null!=e&&bo(c,["nextPageToken"],e);let f=bp(a,["tuningJobs"]);if(null!=f){let a=f;Array.isArray(a)&&(a=a.map(a=>ek(a))),bo(c,["tuningJobs"],a)}return c}(a),c=new bF;return Object.assign(c,b),c})}{let b,c,h,i,j,k=(b={},null!=(c=bp(a,["config"]))&&(h=bp(c,["pageSize"]),void 0!==b&&null!=h&&bo(b,["_query","pageSize"],h),i=bp(c,["pageToken"]),void 0!==b&&null!=i&&bo(b,["_query","pageToken"],i),j=bp(c,["filter"]),void 0!==b&&null!=j&&bo(b,["_query","filter"],j)),b);return f=bn("tunedModels",k._url),g=k._query,delete k._url,delete k._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(k),httpMethod:"GET",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b=function(a,b){let c={},d=bp(a,["sdkHttpResponse"]);null!=d&&bo(c,["sdkHttpResponse"],d);let e=bp(a,["nextPageToken"]);null!=e&&bo(c,["nextPageToken"],e);let f=bp(a,["tunedModels"]);if(null!=f){let a=f;Array.isArray(a)&&(a=a.map(a=>ej(a))),bo(c,["tuningJobs"],a)}return c}(a),c=new bF;return Object.assign(c,b),c})}}async cancel(a){var b,c,d,e;let f="",g={};if(this.apiClient.isVertexAI()){let d,e,h=(d={},null!=(e=bp(a,["name"]))&&bo(d,["_url","name"],e),d);return f=bn("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b,c,d=(b={},null!=(c=bp(a,["sdkHttpResponse"]))&&bo(b,["sdkHttpResponse"],c),b),e=new bG;return Object.assign(e,d),e})}{let b,c,h=(b={},null!=(c=bp(a,["name"]))&&bo(b,["_url","name"],c),b);return f=bn("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:null==(d=a.config)?void 0:d.httpOptions,abortSignal:null==(e=a.config)?void 0:e.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b,c,d=(b={},null!=(c=bp(a,["sdkHttpResponse"]))&&bo(b,["sdkHttpResponse"],c),b),e=new bG;return Object.assign(e,d),e})}}async tuneInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI()){let f,g,h,i,j,k=(f={},null!=(g=bp(a,["baseModel"]))&&bo(f,["baseModel"],g),null!=(h=bp(a,["preTunedModel"]))&&bo(f,["preTunedModel"],h),null!=(i=bp(a,["trainingDataset"]))&&function(a,b,c){let d=bp(c,["config","method"]);if(void 0===d&&(d="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===d){let c=bp(a,["gcsUri"]);void 0!==b&&null!=c&&bo(b,["supervisedTuningSpec","trainingDatasetUri"],c)}else if("PREFERENCE_TUNING"===d){let c=bp(a,["gcsUri"]);void 0!==b&&null!=c&&bo(b,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let e=bp(c,["config","method"]);if(void 0===e&&(e="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===e){let c=bp(a,["vertexDatasetResource"]);void 0!==b&&null!=c&&bo(b,["supervisedTuningSpec","trainingDatasetUri"],c)}else if("PREFERENCE_TUNING"===e){let c=bp(a,["vertexDatasetResource"]);void 0!==b&&null!=c&&bo(b,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(void 0!==bp(a,["examples"]))throw Error("examples parameter is not supported in Vertex AI.")}(i,f,a),null!=(j=bp(a,["config"]))&&function(a,b,c){let d=bp(c,["config","method"]);if(void 0===d&&(d="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===d){let c=bp(a,["validationDataset"]);void 0!==b&&null!=c&&bo(b,["supervisedTuningSpec"],el(c))}else if("PREFERENCE_TUNING"===d){let c=bp(a,["validationDataset"]);void 0!==b&&null!=c&&bo(b,["preferenceOptimizationSpec"],el(c))}let e=bp(a,["tunedModelDisplayName"]);void 0!==b&&null!=e&&bo(b,["tunedModelDisplayName"],e);let f=bp(a,["description"]);void 0!==b&&null!=f&&bo(b,["description"],f);let g=bp(c,["config","method"]);if(void 0===g&&(g="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===g){let c=bp(a,["epochCount"]);void 0!==b&&null!=c&&bo(b,["supervisedTuningSpec","hyperParameters","epochCount"],c)}else if("PREFERENCE_TUNING"===g){let c=bp(a,["epochCount"]);void 0!==b&&null!=c&&bo(b,["preferenceOptimizationSpec","hyperParameters","epochCount"],c)}let h=bp(c,["config","method"]);if(void 0===h&&(h="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===h){let c=bp(a,["learningRateMultiplier"]);void 0!==b&&null!=c&&bo(b,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],c)}else if("PREFERENCE_TUNING"===h){let c=bp(a,["learningRateMultiplier"]);void 0!==b&&null!=c&&bo(b,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],c)}let i=bp(c,["config","method"]);if(void 0===i&&(i="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===i){let c=bp(a,["exportLastCheckpointOnly"]);void 0!==b&&null!=c&&bo(b,["supervisedTuningSpec","exportLastCheckpointOnly"],c)}else if("PREFERENCE_TUNING"===i){let c=bp(a,["exportLastCheckpointOnly"]);void 0!==b&&null!=c&&bo(b,["preferenceOptimizationSpec","exportLastCheckpointOnly"],c)}let j=bp(c,["config","method"]);if(void 0===j&&(j="SUPERVISED_FINE_TUNING"),"SUPERVISED_FINE_TUNING"===j){let c=bp(a,["adapterSize"]);void 0!==b&&null!=c&&bo(b,["supervisedTuningSpec","hyperParameters","adapterSize"],c)}else if("PREFERENCE_TUNING"===j){let c=bp(a,["adapterSize"]);void 0!==b&&null!=c&&bo(b,["preferenceOptimizationSpec","hyperParameters","adapterSize"],c)}if(void 0!==bp(a,["batchSize"]))throw Error("batchSize parameter is not supported in Vertex AI.");if(void 0!==bp(a,["learningRate"]))throw Error("learningRate parameter is not supported in Vertex AI.");let k=bp(a,["labels"]);void 0!==b&&null!=k&&bo(b,["labels"],k);let l=bp(a,["beta"]);void 0!==b&&null!=l&&bo(b,["preferenceOptimizationSpec","hyperParameters","beta"],l)}(j,f,a),f);return d=bn("tuningJobs",k._url),e=k._query,delete k._url,delete k._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(k),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>ek(a))}throw Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(a){var b,c;let d="",e={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let f,g,h,i,j,k=(f={},null!=(g=bp(a,["baseModel"]))&&bo(f,["baseModel"],g),null!=(h=bp(a,["preTunedModel"]))&&bo(f,["preTunedModel"],h),null!=(i=bp(a,["trainingDataset"]))&&function(a,b){if(void 0!==bp(a,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==bp(a,["vertexDatasetResource"]))throw Error("vertexDatasetResource parameter is not supported in Gemini API.");let c=bp(a,["examples"]);if(null!=c){let a=c;Array.isArray(a)&&(a=a.map(a=>a)),bo({},["examples","examples"],a)}}(i),null!=(j=bp(a,["config"]))&&function(a,b,c){if(void 0!==bp(a,["validationDataset"]))throw Error("validationDataset parameter is not supported in Gemini API.");let d=bp(a,["tunedModelDisplayName"]);if(void 0!==b&&null!=d&&bo(b,["displayName"],d),void 0!==bp(a,["description"]))throw Error("description parameter is not supported in Gemini API.");let e=bp(a,["epochCount"]);void 0!==b&&null!=e&&bo(b,["tuningTask","hyperparameters","epochCount"],e);let f=bp(a,["learningRateMultiplier"]);if(null!=f&&bo({},["tuningTask","hyperparameters","learningRateMultiplier"],f),void 0!==bp(a,["exportLastCheckpointOnly"]))throw Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(void 0!==bp(a,["preTunedModelCheckpointId"]))throw Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(void 0!==bp(a,["adapterSize"]))throw Error("adapterSize parameter is not supported in Gemini API.");let g=bp(a,["batchSize"]);void 0!==b&&null!=g&&bo(b,["tuningTask","hyperparameters","batchSize"],g);let h=bp(a,["learningRate"]);if(void 0!==b&&null!=h&&bo(b,["tuningTask","hyperparameters","learningRate"],h),void 0!==bp(a,["labels"]))throw Error("labels parameter is not supported in Gemini API.");if(void 0!==bp(a,["beta"]))throw Error("beta parameter is not supported in Gemini API.")}(j,f),f);return d=bn("tunedModels",k._url),e=k._query,delete k._url,delete k._query,this.apiClient.request({path:d,queryParams:e,body:JSON.stringify(k),httpMethod:"POST",httpOptions:null==(b=a.config)?void 0:b.httpOptions,abortSignal:null==(c=a.config)?void 0:c.abortSignal}).then(a=>a.json().then(b=>(b.sdkHttpResponse={headers:a.headers},b))).then(a=>{let b,c,d,e,f,g;return b={},null!=(c=bp(a,["sdkHttpResponse"]))&&bo(b,["sdkHttpResponse"],c),null!=(d=bp(a,["name"]))&&bo(b,["name"],d),null!=(e=bp(a,["metadata"]))&&bo(b,["metadata"],e),null!=(f=bp(a,["done"]))&&bo(b,["done"],f),null!=(g=bp(a,["error"]))&&bo(b,["error"],g),b})}}}let en="x-goog-upload-status";async function eo(a,b,c){var d;let e=await eq(a,b,c),f=await (null==e?void 0:e.json());if((null==(d=null==e?void 0:e.headers)?void 0:d[en])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");return f.file}async function ep(a,b,c){var d;let e=await eq(a,b,c),f=await (null==e?void 0:e.json());if((null==(d=null==e?void 0:e.headers)?void 0:d[en])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");let g=br(f),h=new bT;return Object.assign(h,g),h}async function eq(a,b,c){var d,e;let f=0,g=0,h=new bs(new Response),i="upload";for(f=a.size;g<f;){let j=Math.min(8388608,f-g),k=a.slice(g,g+j);g+j>=f&&(i+=", finalize");let l=0,m=1e3;for(;l<3&&(null==(d=null==(h=await c.request({path:"",body:k,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:b,headers:{"X-Goog-Upload-Command":i,"X-Goog-Upload-Offset":String(g),"Content-Length":String(j)}}}))?void 0:h.headers)||!d[en]);)l++,await es(m),m*=2;if(g+=j,(null==(e=null==h?void 0:h.headers)?void 0:e[en])!=="active")break;if(f<=g)throw Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function er(a){return{size:a.size,type:a.type}}function es(a){return new Promise(b=>setTimeout(b,a))}class et{async stat(a){let b={size:0,type:void 0};return"string"==typeof a?(b.size=(await bh.stat(a)).size,b.type=this.inferMimeType(a),b):await er(a)}async upload(a,b,c){return"string"==typeof a?await this.uploadFileFromPath(a,b,c):eo(a,b,c)}async uploadToFileSearchStore(a,b,c){return"string"==typeof a?await this.uploadFileToFileSearchStoreFromPath(a,b,c):ep(a,b,c)}inferMimeType(a){return({aac:"audio/aac",abw:"application/x-abiword",arc:"application/x-freearc",avi:"video/x-msvideo",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bmp:"image/bmp",bz:"application/x-bzip",bz2:"application/x-bzip2",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gz:"application/gzip",gif:"image/gif",htm:"text/html",html:"text/html",ico:"image/vnd.microsoft.icon",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"text/javascript",json:"application/json",jsonld:"application/ld+json",kml:"application/vnd.google-earth.kml+xml",kmz:"application/vnd.google-earth.kmz+xml",mjs:"text/javascript",mp3:"audio/mpeg",mp4:"video/mp4",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",opus:"audio/opus",otf:"font/otf",png:"image/png",pdf:"application/pdf",php:"application/x-httpd-php",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",rar:"application/vnd.rar",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",ts:"video/mp2t",ttf:"font/ttf",txt:"text/plain",vsd:"application/vnd.visio",wav:"audio/wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip","3gp":"video/3gpp","3g2":"video/3gpp2","7z":"application/x-7z-compressed"})[a.slice(a.lastIndexOf(".")+1).toLowerCase()]}async uploadFileFromPath(a,b,c){var d;let e=await this.uploadFileFromPathInternal(a,b,c),f=await (null==e?void 0:e.json());if((null==(d=null==e?void 0:e.headers)?void 0:d[en])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");return f.file}async uploadFileToFileSearchStoreFromPath(a,b,c){var d;let e=await this.uploadFileFromPathInternal(a,b,c),f=await (null==e?void 0:e.json());if((null==(d=null==e?void 0:e.headers)?void 0:d[en])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");let g=br(f),h=new bT;return Object.assign(h,g),h}async uploadFileFromPathInternal(a,b,c){var d,e;let f,g=0,h=0,i=new bs(new Response),j="upload",k=bl.basename(a);try{if(!(f=await bh.open(a,"r")))throw Error("Failed to open file");for(g=(await f.stat()).size;h<g;){let a=Math.min(8388608,g-h);h+a>=g&&(j+=", finalize");let l=new Uint8Array(a),{bytesRead:m}=await f.read(l,0,a,h);if(m!==a)throw Error(`Failed to read ${a} bytes from file at offset ${h}. bytes actually read: ${m}`);let n=new Blob([l]),o=0,p=1e3;for(;o<3&&(null==(d=null==(i=await c.request({path:"",body:n,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:b,headers:{"X-Goog-Upload-Command":j,"X-Goog-Upload-Offset":String(h),"Content-Length":String(m),"X-Goog-Upload-File-Name":k}}}))?void 0:i.headers)||!d[en]);)o++,await es(p),p*=2;if(h+=m,(null==(e=null==i?void 0:i.headers)?void 0:e[en])!=="active")break;if(g<=h)throw Error("All content has been uploaded, but the upload status is not finalized.")}return i}finally{f&&await f.close()}}}class eu{get interactions(){if(void 0!==this._interactions)return this._interactions;if(console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions."),this.vertexai)throw Error("This version of the GenAI SDK does not support Vertex AI API for interactions.");let a=this.httpOptions;(null==a?void 0:a.extraBody)&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");let b=new eb({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:null==a?void 0:a.timeout});return this._interactions=b.interactions,this._interactions}constructor(a){var b,c,d,e,f,i;if((a.project||a.location)&&a.apiKey)throw Error("Project/location and API key are mutually exclusive in the client initializer.");this.vertexai=null!=(c=null!=(b=a.vertexai)?b:function(a){var b;return void 0!==(b=ev(a))&&"true"===b.toLowerCase()}("GOOGLE_GENAI_USE_VERTEXAI"))&&c;const j=function(){let a=ev("GOOGLE_API_KEY"),b=ev("GEMINI_API_KEY");return a&&b&&console.warn("Both GOOGLE_API_KEY and GEMINI_API_KEY are set. Using GOOGLE_API_KEY."),a||b||void 0}(),k=ev("GOOGLE_CLOUD_PROJECT"),l=ev("GOOGLE_CLOUD_LOCATION");this.apiKey=null!=(d=a.apiKey)?d:j,this.project=null!=(e=a.project)?e:k,this.location=null!=(f=a.location)?f:l,a.vertexai&&((null==(i=a.googleAuthOptions)?void 0:i.credentials)&&(console.debug("The user provided Google Cloud credentials will take precedence over the API key from the environment variable."),this.apiKey=void 0),(k||l)&&a.apiKey?(console.debug("The user provided Vertex AI API key will take precedence over the project/location from the environment variables."),this.project=void 0,this.location=void 0):(a.project||a.location)&&j?(console.debug("The user provided project/location will take precedence over the API key from the environment variables."),this.apiKey=void 0):(k||l)&&j&&(console.debug("The project/location from the environment variables will take precedence over the API key from the environment variables."),this.apiKey=void 0),this.location||this.apiKey||(this.location="global"));const m=function(a,b,c,d){return(null==a?void 0:a.baseUrl)?a.baseUrl:b?null!=h?h:c:null!=g?g:d}(a.httpOptions,a.vertexai,ev("GOOGLE_VERTEX_BASE_URL"),ev("GOOGLE_GEMINI_BASE_URL"));m&&(a.httpOptions?a.httpOptions.baseUrl=m:a.httpOptions={baseUrl:m}),this.apiVersion=a.apiVersion,this.httpOptions=a.httpOptions;const n=new ee({apiKey:this.apiKey,googleAuthOptions:a.googleAuthOptions});this.apiClient=new cZ({auth:n,project:this.project,location:this.location,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:"gl-node/"+process.version,uploader:new et,downloader:new ef}),this.models=new dd(this.apiClient),this.live=new c6(this.apiClient,n,new eh),this.batches=new cr(this.apiClient),this.chats=new cA(this.models,this.apiClient),this.caches=new ct(this.apiClient),this.files=new cD(this.apiClient),this.operations=new de(this.apiClient),this.authTokens=new df(this.apiClient),this.tunings=new em(this.apiClient),this.fileSearchStores=new dh(this.apiClient)}}function ev(a){var b,c,d;return null!=(d=null==(c=null==(b=null==process?void 0:process.env)?void 0:b[a])?void 0:c.trim())?d:void 0}var ew=c(9337);let ex={type:ao.OBJECT,properties:{subject:{type:ao.STRING,enum:["L\xedngua Portuguesa","Racioc\xednio L\xf3gico","Matem\xe1tica","Inform\xe1tica","Atualidades","Estat\xedstica","Ingl\xeas","Direito Constitucional","Direito Administrativo","Direito Penal","Direito Processual Penal","Direito Civil","Direito Processual Civil","Direito do Trabalho","Direito Processual do Trabalho","Direito Tribut\xe1rio","Direito Previdenci\xe1rio","Direito Empresarial","Direito Ambiental","Direitos Humanos","Legisla\xe7\xe3o Penal Especial","Legisla\xe7\xe3o Tribut\xe1ria","Legisla\xe7\xe3o Educacional","Legisla\xe7\xe3o Militar","Legisla\xe7\xe3o Ambiental","Administra\xe7\xe3o Geral","Administra\xe7\xe3o P\xfablica","AFO","Gest\xe3o de Pessoas","Arquivologia","\xc9tica no Servi\xe7o P\xfablico","Contabilidade Geral","Contabilidade P\xfablica","Auditoria","Economia","Finan\xe7as P\xfablicas","Matem\xe1tica Financeira","Criminologia","Conhecimentos Banc\xe1rios","Sistema Financeiro Nacional","Vendas e Negocia\xe7\xe3o","Seguridade Social","Pol\xedticas P\xfablicas de Sa\xfade","SUS","Sa\xfade P\xfablica","Epidemiologia","Educa\xe7\xe3o (LDB, BNCC, Did\xe1tica)","Conhecimentos Militares","Regula\xe7\xe3o e Ag\xeancias","Tecnologia da Informa\xe7\xe3o","Algoritmos e Programa\xe7\xe3o","Banco de Dados","Redes de Computadores","Seguran\xe7a da Informa\xe7\xe3o","Engenharia de Software","F\xedsica","Qu\xedmica","Hist\xf3ria","Geografia","Filosofia e Sociologia","Outros"],description:"The main academic subject of the document."},flashcards:{type:ao.ARRAY,items:{type:ao.OBJECT,properties:{question:{type:ao.STRING},answer:{type:ao.STRING}},required:["question","answer"]}},mindMap:{type:ao.OBJECT,properties:{name:{type:ao.STRING},children:{type:ao.ARRAY,items:{type:ao.OBJECT,properties:{name:{type:ao.STRING},children:{type:ao.ARRAY,items:{type:ao.OBJECT,properties:{name:{type:ao.STRING},children:{type:ao.ARRAY,items:{type:ao.OBJECT,properties:{name:{type:ao.STRING}},required:["name"]}}},required:["name"]}}},required:["name"]}}},required:["name","children"]},quiz:{type:ao.ARRAY,items:{type:ao.OBJECT,properties:{question:{type:ao.STRING},options:{type:ao.ARRAY,items:{type:ao.STRING}},correctAnswerIndex:{type:ao.INTEGER},explanation:{type:ao.STRING}},required:["question","options","correctAnswerIndex","explanation"]}}},required:["subject","flashcards","mindMap","quiz"]},ey=async(a,b)=>{let c=process.env.GEMINI_API_KEY;if(!c)throw Error("GEMINI_API_KEY is not configured on the server.");let d=new eu({apiKey:c});try{let c=await d.models.generateContent({model:"gemini-2.0-flash-exp",contents:{parts:[{inlineData:{data:a,mimeType:b}},{text:`Analyze this document and generate study materials.
            
            1. CLASSIFY the document into the most appropriate Subject from the provided enum list (e.g., 'Direito Constitucional', 'L\xedngua Portuguesa', 'AFO', 'Tecnologia da Informa\xe7\xe3o', etc.).
            2. Create 40 high-quality flashcards.
            3. Create a hierarchical mind map structure.
            4. Create a Quiz with 15 multiple-choice questions. 
               - Each question must have exactly 5 options.
               - Indicate the index of the correct answer (0-4).
               - Provide a brief explanation.
            
            Return ONLY the JSON matching the schema.`}]},config:{responseMimeType:"application/json",responseSchema:ex}});if(!c.text)throw Error("No response from Gemini");return JSON.parse(c.text)}catch(a){throw console.error("Gemini API Error:",a),a}};(0,ew.D)([ey]),(0,be.A)(ey,"7f1b93d6f3d6719dec90ae789e11bb25ea35cf28e1",null)},1630:a=>{"use strict";a.exports=require("http")},1645:a=>{"use strict";a.exports=require("net")},1708:a=>{"use strict";a.exports=require("node:process")},1723:a=>{"use strict";a.exports=require("querystring")},1726:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.UrlSubjectTokenSupplier=void 0;let d=c(7493);class e{url;headers;formatType;subjectTokenFieldName;additionalGaxiosOptions;constructor(a){this.url=a.url,this.formatType=a.formatType,this.subjectTokenFieldName=a.subjectTokenFieldName,this.headers=a.headers,this.additionalGaxiosOptions=a.additionalGaxiosOptions}async getSubjectToken(a){let b,c={...this.additionalGaxiosOptions,url:this.url,method:"GET",headers:this.headers};if(d.AuthClient.setMethodName(c,"getSubjectToken"),"text"===this.formatType?b=(await a.transporter.request(c)).data:"json"===this.formatType&&this.subjectTokenFieldName&&(b=(await a.transporter.request(c)).data[this.subjectTokenFieldName]),!b)throw Error("Unable to parse the subject_token from the credential_source URL");return b}}b.UrlSubjectTokenSupplier=e},1777:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.BaseExternalAccountClient=b.CLOUD_RESOURCE_MANAGER=b.EXTERNAL_ACCOUNT_TYPE=b.EXPIRATION_TIME_OFFSET=void 0;let d=c(5065),e=c(7910),f=c(7493),g=c(8256),h=c(2433),i=c(8871),j="https://www.googleapis.com/auth/cloud-platform";b.EXPIRATION_TIME_OFFSET=3e5,b.EXTERNAL_ACCOUNT_TYPE="external_account",b.CLOUD_RESOURCE_MANAGER="https://cloudresourcemanager.googleapis.com/v1/projects/";class k extends f.AuthClient{scopes;projectNumber;audience;subjectTokenType;stsCredential;clientAuth;credentialSourceType;cachedAccessToken;serviceAccountImpersonationUrl;serviceAccountImpersonationLifetime;workforcePoolUserProject;configLifetimeRequested;tokenUrl;cloudResourceManagerURL;supplierContext;#e=null;constructor(a){super(a);const c=(0,h.originalOrCamelOptions)(a),d=c.get("type");if(d&&d!==b.EXTERNAL_ACCOUNT_TYPE)throw Error(`Expected "${b.EXTERNAL_ACCOUNT_TYPE}" type but received "${a.type}"`);const e=c.get("client_id"),f=c.get("client_secret");this.tokenUrl=c.get("token_url")??"https://sts.{universeDomain}/v1/token".replace("{universeDomain}",this.universeDomain);const i=c.get("subject_token_type"),k=c.get("workforce_pool_user_project"),l=c.get("service_account_impersonation_url"),m=c.get("service_account_impersonation"),n=(0,h.originalOrCamelOptions)(m).get("token_lifetime_seconds");this.cloudResourceManagerURL=new URL(c.get("cloud_resource_manager_url")||`https://cloudresourcemanager.${this.universeDomain}/v1/projects/`),e&&(this.clientAuth={confidentialClientType:"basic",clientId:e,clientSecret:f}),this.stsCredential=new g.StsCredentials({tokenExchangeEndpoint:this.tokenUrl,clientAuthentication:this.clientAuth}),this.scopes=c.get("scopes")||[j],this.cachedAccessToken=null,this.audience=c.get("audience"),this.subjectTokenType=i,this.workforcePoolUserProject=k;const o=RegExp("//iam\\.googleapis\\.com/locations/[^/]+/workforcePools/[^/]+/providers/.+");if(this.workforcePoolUserProject&&!this.audience.match(o))throw Error("workforcePoolUserProject should not be set for non-workforce pool credentials.");this.serviceAccountImpersonationUrl=l,this.serviceAccountImpersonationLifetime=n,this.serviceAccountImpersonationLifetime?this.configLifetimeRequested=!0:(this.configLifetimeRequested=!1,this.serviceAccountImpersonationLifetime=3600),this.projectNumber=this.getProjectNumber(this.audience),this.supplierContext={audience:this.audience,subjectTokenType:this.subjectTokenType,transporter:this.transporter}}getServiceAccountEmail(){if(this.serviceAccountImpersonationUrl){if(this.serviceAccountImpersonationUrl.length>256)throw RangeError(`URL is too long: ${this.serviceAccountImpersonationUrl}`);let a=/serviceAccounts\/(?<email>[^:]+):generateAccessToken$/.exec(this.serviceAccountImpersonationUrl);return a?.groups?.email||null}return null}setCredentials(a){super.setCredentials(a),this.cachedAccessToken=a}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let a=await this.getAccessToken(),b=new Headers({authorization:`Bearer ${a.token}`});return this.addSharedMetadataHeaders(b)}request(a,b){if(!b)return this.requestAsync(a);this.requestAsync(a).then(a=>b(null,a),a=>b(a,a.response))}async getProjectId(){let a=this.projectNumber||this.workforcePoolUserProject;if(this.projectId)return this.projectId;if(a){let b=await this.getRequestHeaders(),c={...k.RETRY_CONFIG,headers:b,url:`${this.cloudResourceManagerURL.toString()}${a}`};f.AuthClient.setMethodName(c,"getProjectId");let d=await this.transporter.request(c);return this.projectId=d.data.projectId,this.projectId}return null}async requestAsync(a,b=!1){let c;try{let b=await this.getRequestHeaders();a.headers=d.Gaxios.mergeHeaders(a.headers),this.addUserProjectAndAuthHeaders(a.headers,b),c=await this.transporter.request(a)}catch(d){let c=d.response;if(c){let d=c.status,f=c.config.data instanceof e.Readable;if(!b&&(401===d||403===d)&&!f&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(a,!0)}throw d}return c}async refreshAccessTokenAsync(){this.#e=this.#e||this.#f();try{return await this.#e}finally{this.#e=null}}async #f(){let a=await this.retrieveSubjectToken(),b={grantType:"urn:ietf:params:oauth:grant-type:token-exchange",audience:this.audience,requestedTokenType:"urn:ietf:params:oauth:token-type:access_token",subjectToken:a,subjectTokenType:this.subjectTokenType,scope:this.serviceAccountImpersonationUrl?[j]:this.getScopesArray()},c=!this.clientAuth&&this.workforcePoolUserProject?{userProject:this.workforcePoolUserProject}:void 0,d=new Headers({"x-goog-api-client":this.getMetricsHeaderValue()}),e=await this.stsCredential.exchangeToken(b,d,c);return this.serviceAccountImpersonationUrl?this.cachedAccessToken=await this.getImpersonatedAccessToken(e.access_token):e.expires_in?this.cachedAccessToken={access_token:e.access_token,expiry_date:new Date().getTime()+1e3*e.expires_in,res:e.res}:this.cachedAccessToken={access_token:e.access_token,res:e.res},this.credentials={},Object.assign(this.credentials,this.cachedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedAccessToken.expiry_date,access_token:this.cachedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedAccessToken}getProjectNumber(a){let b=a.match(/\/projects\/([^/]+)/);return b?b[1]:null}async getImpersonatedAccessToken(a){let b={...k.RETRY_CONFIG,url:this.serviceAccountImpersonationUrl,method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${a}`},data:{scope:this.getScopesArray(),lifetime:this.serviceAccountImpersonationLifetime+"s"}};f.AuthClient.setMethodName(b,"getImpersonatedAccessToken");let c=await this.transporter.request(b),d=c.data;return{access_token:d.accessToken,expiry_date:new Date(d.expireTime).getTime(),res:c}}isExpired(a){let b=new Date().getTime();return!!a.expiry_date&&b>=a.expiry_date-this.eagerRefreshThresholdMillis}getScopesArray(){return"string"==typeof this.scopes?[this.scopes]:this.scopes||[j]}getMetricsHeaderValue(){let a=process.version.replace(/^v/,""),b=void 0!==this.serviceAccountImpersonationUrl,c=this.credentialSourceType?this.credentialSourceType:"unknown";return`gl-node/${a} auth/${i.pkg.version} google-byoid-sdk source/${c} sa-impersonation/${b} config-lifetime/${this.configLifetimeRequested}`}getTokenUrl(){return this.tokenUrl}}b.BaseExternalAccountClient=k},1820:a=>{"use strict";a.exports=require("os")},1932:a=>{"use strict";a.exports=require("url")},1936:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AwsClient=void 0;let d=c(6486),e=c(1777),f=c(6104),g=c(2433),h=c(5065);class i extends e.BaseExternalAccountClient{environmentId;awsSecurityCredentialsSupplier;regionalCredVerificationUrl;awsRequestSigner;region;static #g="https://sts.{region}.amazonaws.com?Action=GetCallerIdentity&Version=2011-06-15";static AWS_EC2_METADATA_IPV4_ADDRESS="169.254.169.254";static AWS_EC2_METADATA_IPV6_ADDRESS="fd00:ec2::254";constructor(a){super(a);const b=(0,g.originalOrCamelOptions)(a),c=b.get("credential_source"),d=b.get("aws_security_credentials_supplier");if(!c&&!d)throw Error("A credential source or AWS security credentials supplier must be specified.");if(c&&d)throw Error("Only one of credential source or AWS security credentials supplier can be specified.");if(d)this.awsSecurityCredentialsSupplier=d,this.regionalCredVerificationUrl=i.#g,this.credentialSourceType="programmatic";else{const a=(0,g.originalOrCamelOptions)(c);this.environmentId=a.get("environment_id");const b=a.get("region_url"),d=a.get("url"),e=a.get("imdsv2_session_token_url");this.awsSecurityCredentialsSupplier=new f.DefaultAwsSecurityCredentialsSupplier({regionUrl:b,securityCredentialsUrl:d,imdsV2SessionTokenUrl:e}),this.regionalCredVerificationUrl=a.get("regional_cred_verification_url"),this.credentialSourceType="aws",this.validateEnvironmentId()}this.awsRequestSigner=null,this.region=""}validateEnvironmentId(){let a=this.environmentId?.match(/^(aws)(\d+)$/);if(a&&this.regionalCredVerificationUrl){if(1!==parseInt(a[2],10))throw Error(`aws version "${a[2]}" is not supported in the current build.`)}else throw Error('No valid AWS "credential_source" provided')}async retrieveSubjectToken(){this.awsRequestSigner||(this.region=await this.awsSecurityCredentialsSupplier.getAwsRegion(this.supplierContext),this.awsRequestSigner=new d.AwsRequestSigner(async()=>this.awsSecurityCredentialsSupplier.getAwsSecurityCredentials(this.supplierContext),this.region));let a=await this.awsRequestSigner.getRequestOptions({...i.RETRY_CONFIG,url:this.regionalCredVerificationUrl.replace("{region}",this.region),method:"POST"}),b=[];return h.Gaxios.mergeHeaders({"x-goog-cloud-target-resource":this.audience},a.headers).forEach((a,c)=>b.push({key:c,value:a})),encodeURIComponent(JSON.stringify({url:a.url,method:a.method,headers:b}))}}b.AwsClient=i},2012:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Compute=void 0;let d=c(5065),e=c(257),f=c(3914);class g extends f.OAuth2Client{serviceAccountEmail;scopes;constructor(a={}){super(a),this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=a.serviceAccountEmail||"default",this.scopes=Array.isArray(a.scopes)?a.scopes:a.scopes?[a.scopes]:[]}async refreshTokenNoCache(){let a,b=`service-accounts/${this.serviceAccountEmail}/token`;try{let c={property:b};this.scopes.length>0&&(c.params={scopes:this.scopes.join(",")}),a=await e.instance(c)}catch(a){throw a instanceof d.GaxiosError&&(a.message=`Could not refresh access token: ${a.message}`,this.wrapError(a)),a}let c=a;return a&&a.expires_in&&(c.expiry_date=new Date().getTime()+1e3*a.expires_in,delete c.expires_in),this.emit("tokens",c),{tokens:c,res:null}}async fetchIdToken(a){let b,c=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${a}`;try{b=await e.instance({property:c})}catch(a){throw a instanceof Error&&(a.message=`Could not fetch ID token: ${a.message}`),a}return b}wrapError(a){let b=a.response;b&&b.status&&(a.status=b.status,403===b.status?a.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+a.message:404===b.status&&(a.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+a.message))}}b.Compute=g},2158:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c={DOC_PREFETCH_RANGE_HEADER_VALUE:function(){return f},doesExportedHtmlMatchBuildId:function(){return i},insertBuildIdComment:function(){return h}};for(var d in c)Object.defineProperty(b,d,{enumerable:!0,get:c[d]});let e="<!DOCTYPE html>",f="bytes=0-63";function g(a){return a.slice(0,24).replace(/-/g,"_")}function h(a,b){return b.includes("--\x3e")||!a.startsWith(e)?a:a.replace(e,e+"\x3c!--"+g(b)+"--\x3e")}function i(a,b){return a.startsWith(e+"\x3c!--"+g(b)+"--\x3e")}},2202:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>L,handler:()=>N,routeModule:()=>M});var d=c(7553),e=c(4006),f=c(7798),g=c(4775),h=c(9373),i=c(3461),j=c(1020),k=c(6349),l=c(4365),m=c(6023),n=c(3747),o=c(8564),p=c(3938),q=c(8575),r=c(261),s=c(6758),t=c(7243),u=c(6713),v=c(7527),w=c(2820),x=c(8216),y=c(7929),z=c(9551),A=c(9125),B=c(6439),C=c(5547),D=c.n(C),E=c(1287),F=c(1494),G=c(722),H=c(753),I=c(3954),J={};for(let a in E)0>["default","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(J[a]=()=>E[a]);c.d(b,J);let K=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,4494)),"/home/jhon/Desktop/ALURA/fullstack/GabaritandoIA/src/app/page.tsx"],metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}]},{layout:[()=>Promise.resolve().then(c.bind(c,6537)),"/home/jhon/Desktop/ALURA/fullstack/GabaritandoIA/src/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,5547,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,5091,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,5270,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,8193,23)),"next/dist/client/components/builtin/unauthorized.js"],metadata:{icon:[],apple:[],openGraph:[],twitter:[],manifest:"/manifest.webmanifest"}}],L={require:c,loadChunk:()=>Promise.resolve()},M=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:K},distDir:".next",relativeProjectDir:""});async function N(a,b,d){var C;M.isDev&&(0,h.addRequestMeta)(a,"devRequestTimingInternalsEnd",process.hrtime.bigint());let J="/page";"/index"===J&&(J="/");let O=!!(0,h.getRequestMeta)(a,"minimalMode"),P=await M.prepare(a,b,{srcPage:J,multiZoneDraftMode:!1});if(!P)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:Q,query:R,params:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,parsedUrl:ae,interceptionRoutePatterns:af}=P,ag=(0,r.normalizeAppPath)(J),{isOnDemandRevalidate:ah}=P,ai=ad.experimental.ppr&&!ad.cacheComponents&&(0,I.isInterceptionRouteAppPath)(aa)?null:M.match(aa,$),aj=!!$.routes[aa],ak=a.headers["user-agent"]||"",al=(0,u.getBotType)(ak),am=(0,p.isHtmlBotRequest)(a),an=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ao=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],ap=(0,s.getIsPossibleServerAction)(a),aq=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",ar=!1,as=!1,at=aq?(0,h.getRequestMeta)(a,"postponed"):void 0,au=aq&&ao&&!an;O&&(au=au&&!!at);let av=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),aw=(!am||!aq)&&(!ak||(0,p.shouldServeStreamingMetadata)(ak,ad.htmlLimitedBots)),ax=!!((ai||aj||$.routes[ag])&&!(am&&aq)),ay=aq&&!0===ad.cacheComponents,az=!0===M.isDev||!ax||"string"==typeof at||(ay&&(0,h.getRequestMeta)(a,"onCacheEntryV2")?au&&!O:au),aA=am&&aq,aB=null;_||!ax||az||ap||at||au||(aB=aa);let aC=aB;!aC&&M.isDev&&(aC=aa),M.isDev||_||!ax||!ao||au||(0,k.d)(a.headers);let aD={...E,tree:K,GlobalError:D(),handler:N,routeModule:M,__next_app__:L};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:J,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aE=a.method||"GET",aF=(0,g.getTracer)(),aG=aF.getActiveScopeSpan(),aH=async()=>((null==ac?void 0:ac.render404)?await ac.render404(a,b,ae,!1):b.end("This page could not be found"),null);try{let f=M.getVaryHeader(aa,af);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return M.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let a=aF.getRootSpanAttributes();if(!a)return;if(a.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${a.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let d=a.get("next.route");if(d){let a=`${aE} ${d}`;c.setAttributes({"next.route":d,"http.route":d,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aE} ${J}`)})},m=(0,h.getRequestMeta)(a,"incrementalCache"),o=async({span:e,postponed:f,fallbackRouteParams:g,forceStaticRender:i})=>{let l={query:R,params:S,page:ag,sharedContext:{buildId:Q},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aD,Component:(0,j.T)(aD),params:S,routeModule:M,page:J,postponed:f,shouldWaitOnAllReady:aA,serveStreamingMetadata:aw,supportsDynamicResponse:"string"==typeof f||az,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setCacheStatus:null==ac?void 0:ac.setCacheStatus,setIsrStatus:null==ac?void 0:ac.setIsrStatus,setReactDebugChannel:null==ac?void 0:ac.setReactDebugChannel,dir:c(3873).join(process.cwd(),M.relativeProjectDir),isDraftMode:_,botType:al,isOnDemandRevalidate:ah,isPossibleServerAction:ap,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,images:ad.images,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:m,cacheLifeProfiles:ad.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...ar||as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isDebugDynamicAccesses:ar}:{},cacheComponents:!!ad.cacheComponents,experimental:{isRoutePPREnabled:aq,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[],clientParamParsingOrigins:ad.experimental.clientParamParsingOrigins},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>M.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:M.isDev}};ar&&(l.renderOpts.nextExport=!0,l.renderOpts.supportsDynamicResponse=!1,l.renderOpts.isDebugDynamicAccesses=ar),i&&(l.renderOpts.supportsDynamicResponse=!1);let n=await k(e,l),{metadata:o}=n,{cacheControl:p,headers:q={},fetchTags:r,fetchMetrics:s}=o;if(r&&(q[y.NEXT_CACHE_TAGS_HEADER]=r),a.fetchMetrics=s,ax&&(null==p?void 0:p.revalidate)===0&&!M.isDev&&!aq){let a=o.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:n,headers:q,rscData:o.flightData,postponed:o.postponed,status:o.statusCode,segmentData:o.segmentData},cacheControl:p}},p=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i,forceStaticRender:j=!1})=>{let k,l=!1===M.isDev,q=c||b.writableEnded;if(ah&&ab&&!f&&!O)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(k=(0,w.parseFallbackField)(ai.fallback)),k===w.FallbackMode.PRERENDER&&(0,u.isBot)(ak)&&(!aq||am)&&(k=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(k!==w.FallbackMode.NOT_FOUND||f)&&(k=w.FallbackMode.BLOCKING_STATIC_RENDER),!O&&k!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aC&&!q&&!_&&T&&(l||!aj)){if((l||ai)&&k===w.FallbackMode.NOT_FOUND){if(ad.experimental.adapterPath)return await aH();throw new B.NoFallbackError}if(aq&&(ad.cacheComponents?!au:!ao)){let b=l&&"string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:ag,c=l&&(null==ai?void 0:ai.fallbackRouteParams)?(0,n.createOpaqueFallbackRouteParams)(ai.fallbackRouteParams):as?(0,n.getFallbackRouteParams)(ag,M):null,f=await M.handleResponse({cacheKey:b,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:aq,responseGenerator:async()=>o({span:i,postponed:void 0,fallbackRouteParams:c,forceStaticRender:!1}),waitUntil:d.waitUntil,isMinimalMode:O});if(null===f)return null;if(f)return delete f.cacheControl,f}}let r=ah||g||!at?void 0:at;if(ay&&!O&&m&&au&&!j){let b=await m.get(aa,{kind:v.IncrementalCacheKind.APP_PAGE,isRoutePPREnabled:!0,isFallback:!1});b&&b.value&&b.value.kind===v.CachedRouteKind.APP_PAGE&&(r=b.value.postponed,b&&(-1===b.isStale||!0===b.isStale)&&(0,H.scheduleOnNextTick)(async()=>{let b=M.getResponseCache(a);try{await b.revalidate(aa,m,aq,!1,a=>p({...a,forceStaticRender:!0}),null,c,d.waitUntil)}catch(a){console.error("Error revalidating the page in the background",a)}}))}if(ar&&void 0!==r)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let s=l&&(null==ai?void 0:ai.fallbackRouteParams)&&(0,h.getRequestMeta)(a,"renderFallbackShell")?(0,n.createOpaqueFallbackRouteParams)(ai.fallbackRouteParams):as?(0,n.getFallbackRouteParams)(ag,M):null;return o({span:i,postponed:r,fallbackRouteParams:s,forceStaticRender:j})},q=async c=>{var f,g,i,j,k;let l,m=await M.handleResponse({cacheKey:aB,responseGenerator:a=>p({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:aq,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil,isMinimalMode:O});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),M.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!m){if(aB)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=m.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=m.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let n="string"==typeof m.value.postponed;ax&&!au&&(!n||an)&&(O||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":m.isMiss?"MISS":m.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=m;if(at)l={revalidate:0,expire:void 0};else if(au)l={revalidate:0,expire:void 0};else if(!M.isDev)if(_)l={revalidate:0,expire:void 0};else if(ax){if(m.cacheControl)if("number"==typeof m.cacheControl.revalidate){if(m.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${m.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:m.cacheControl.revalidate,expire:(null==(j=m.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(m.cacheControl=l,"string"==typeof av&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];O&&ax&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(av);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:m.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:m.cacheControl}))}let r=ay?(0,h.getRequestMeta)(a,"onCacheEntryV2")??(0,h.getRequestMeta)(a,"onCacheEntry"):(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r(m,{url:(0,h.getRequestMeta)(a,"initURL")??a.url}))return null;if(q.headers){let a={...q.headers};for(let[c,d]of(O&&ax||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(O&&ax&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ao&&aq||(b.statusCode=q.status),!O&&q.status&&F.RedirectStatusCode[q.status]&&ao&&(b.statusCode=200),n&&!au&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ao&&!_){if(void 0===q.rscData){if(q.html.contentType!==t.RSC_CONTENT_TYPE_HEADER)if(ad.cacheComponents)return b.statusCode=404,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:m.cacheControl});else throw Object.defineProperty(new G.InvariantError(`Expected RSC response, got ${q.html.contentType}`),"__NEXT_ERROR_CODE",{value:"E789",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:m.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:m.cacheControl})}let u=q.html;if(!n||O||ao)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:m.cacheControl});if(ar)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),o({span:c,postponed:q.postponed,fallbackRouteParams:null,forceStaticRender:!1}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aG)return await aF.withPropagatedContext(a.headers,()=>aF.trace(i.BaseServerSpan.handleRequest,{spanName:`${aE} ${J}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aE,"http.target":a.url}},q));await q(aG)}catch(b){throw b instanceof B.NoFallbackError||await M.onRequestError(a,b,{routerKind:"App Router",routePath:J,routeType:"render",revalidateReason:(0,f.c)({isStaticGeneration:ax,isOnDemandRevalidate:ah})},ac),b}}},2267:a=>{"use strict";var b=Object.prototype.hasOwnProperty,c=Object.prototype.toString,d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=function(a){return"function"==typeof Array.isArray?Array.isArray(a):"[object Array]"===c.call(a)},g=function(a){if(!a||"[object Object]"!==c.call(a))return!1;var d,e=b.call(a,"constructor"),f=a.constructor&&a.constructor.prototype&&b.call(a.constructor.prototype,"isPrototypeOf");if(a.constructor&&!e&&!f)return!1;for(d in a);return void 0===d||b.call(a,d)},h=function(a,b){d&&"__proto__"===b.name?d(a,b.name,{enumerable:!0,configurable:!0,value:b.newValue,writable:!0}):a[b.name]=b.newValue},i=function(a,c){if("__proto__"===c){if(!b.call(a,c))return;else if(e)return e(a,c).value}return a[c]};a.exports=function a(){var b,c,d,e,j,k,l=arguments[0],m=1,n=arguments.length,o=!1;for("boolean"==typeof l&&(o=l,l=arguments[1]||{},m=2),(null==l||"object"!=typeof l&&"function"!=typeof l)&&(l={});m<n;++m)if(b=arguments[m],null!=b)for(c in b)d=i(l,c),l!==(e=i(b,c))&&(o&&e&&(g(e)||(j=f(e)))?(j?(j=!1,k=d&&f(d)?d:[]):k=d&&g(d)?d:{},h(l,{name:c,newValue:a(o,k,e)})):void 0!==e&&h(l,{name:c,newValue:e}));return l}},2412:a=>{"use strict";a.exports=require("assert")},2433:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.LRUCache=void 0,b.snakeToCamel=h,b.originalOrCamelOptions=function(a){return{get:function(b){let c=a||{};return c[b]??c[h(b)]}}},b.removeUndefinedValuesInObject=function(a){return Object.entries(a).forEach(([b,c])=>{(void 0===c||"undefined"===c)&&delete a[b]}),a},b.isValidFile=j,b.getWellKnownCertificateConfigFileLocation=function(){let a=process.env.CLOUDSDK_CONFIG||(e.platform().startsWith("win")?f.join(process.env.APPDATA||"",g):f.join(process.env.HOME||"",".config",g));return f.join(a,"certificate_config.json")};let d=c(9021),e=c(1820),f=c(3873),g="gcloud";function h(a){return a.replace(/([_][^_])/g,a=>a.slice(1).toUpperCase())}class i{capacity;#h=new Map;maxAge;constructor(a){this.capacity=a.capacity,this.maxAge=a.maxAge}#i(a,b){this.#h.delete(a),this.#h.set(a,{value:b,lastAccessed:Date.now()})}set(a,b){this.#i(a,b),this.#j()}get(a){let b=this.#h.get(a);if(b)return this.#i(a,b.value),this.#j(),b.value}#j(){let a=this.maxAge?Date.now()-this.maxAge:0,b=this.#h.entries().next();for(;!b.done&&(this.#h.size>this.capacity||b.value[1].lastAccessed<a);)this.#h.delete(b.value[0]),b=this.#h.entries().next()}}async function j(a){try{return(await d.promises.lstat(a)).isFile()}catch(a){return!1}}b.LRUCache=i},2517:(a,b,c)=>{"use strict";let d;Object.defineProperty(b,"__esModule",{value:!0});var e={arrayBufferToString:function(){return j},decrypt:function(){return m},encrypt:function(){return l},getActionEncryptionKey:function(){return r},getClientReferenceManifestForRsc:function(){return q},getServerModuleMap:function(){return p},setReferenceManifestsSingleton:function(){return o},stringToUint8Array:function(){return k}};for(var f in e)Object.defineProperty(b,f,{enumerable:!0,get:e[f]});let g=c(9516),h=c(8461),i=c(9294);function j(a){let b=new Uint8Array(a),c=b.byteLength;if(c<65535)return String.fromCharCode.apply(null,b);let d="";for(let a=0;a<c;a++)d+=String.fromCharCode(b[a]);return d}function k(a){let b=a.length,c=new Uint8Array(b);for(let d=0;d<b;d++)c[d]=a.charCodeAt(d);return c}function l(a,b,c){return crypto.subtle.encrypt({name:"AES-GCM",iv:b},a,c)}function m(a,b,c){return crypto.subtle.decrypt({name:"AES-GCM",iv:b},a,c)}let n=Symbol.for("next.server.action-manifests");function o({page:a,clientReferenceManifest:b,serverActionsManifest:c,serverModuleMap:d}){var e;let f=null==(e=globalThis[n])?void 0:e.clientReferenceManifestsPerPage;globalThis[n]={clientReferenceManifestsPerPage:{...f,[(0,h.normalizeAppPath)(a)]:b},serverActionsManifest:c,serverModuleMap:d}}function p(){let a=globalThis[n];if(!a)throw Object.defineProperty(new g.InvariantError("Missing manifest for Server Actions."),"__NEXT_ERROR_CODE",{value:"E606",enumerable:!1,configurable:!0});return a.serverModuleMap}function q(){let a=globalThis[n];if(!a)throw Object.defineProperty(new g.InvariantError("Missing manifest for Server Actions."),"__NEXT_ERROR_CODE",{value:"E606",enumerable:!1,configurable:!0});let{clientReferenceManifestsPerPage:b}=a,c=i.workAsyncStorage.getStore();if(!c){var d=b;let a=Object.values(d),c={clientModules:{},edgeRscModuleMapping:{},rscModuleMapping:{}};for(let b of a)c.clientModules={...c.clientModules,...b.clientModules},c.edgeRscModuleMapping={...c.edgeRscModuleMapping,...b.edgeRscModuleMapping},c.rscModuleMapping={...c.rscModuleMapping,...b.rscModuleMapping};return c}let e=b[c.route];if(!e)throw Object.defineProperty(new g.InvariantError(`Missing Client Reference Manifest for ${c.route}.`),"__NEXT_ERROR_CODE",{value:"E570",enumerable:!1,configurable:!0});return e}async function r(){if(d)return d;let a=globalThis[n];if(!a)throw Object.defineProperty(new g.InvariantError("Missing manifest for Server Actions."),"__NEXT_ERROR_CODE",{value:"E606",enumerable:!1,configurable:!0});let b=process.env.NEXT_SERVER_ACTIONS_ENCRYPTION_KEY||a.serverActionsManifest.encryptionKey;if(void 0===b)throw Object.defineProperty(new g.InvariantError("Missing encryption key for Server Actions"),"__NEXT_ERROR_CODE",{value:"E571",enumerable:!1,configurable:!0});return d=await crypto.subtle.importKey("raw",k(atob(b)),"AES-GCM",!0,["encrypt","decrypt"])}},2529:(a,b)=>{"use strict";function c(a){return null!==a&&"object"==typeof a&&"then"in a&&"function"==typeof a.then}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"isThenable",{enumerable:!0,get:function(){return c}})},2551:()=>{},2681:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GoogleToken=void 0;var d,e=j(c(9021)),f=c(5065),g=j(c(8687)),h=j(c(3873)),i=c(8354);function j(a,b){if("function"==typeof WeakMap)var c=new WeakMap,d=new WeakMap;return(j=function(a,b){if(!b&&a&&a.__esModule)return a;var e,f,g={__proto__:null,default:a};if(null===a||"object"!=k(a)&&"function"!=typeof a)return g;if(e=b?d:c){if(e.has(a))return e.get(a);e.set(a,g)}for(var h in a)"default"!==h&&({}).hasOwnProperty.call(a,h)&&((f=(e=Object.defineProperty)&&Object.getOwnPropertyDescriptor(a,h))&&(f.get||f.set)?e(g,h,f):g[h]=a[h]);return g})(a,b)}function k(a){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function l(a,b){if(b.has(a))throw TypeError("Cannot initialize the same private elements twice on an object")}function m(a,b,c){return a.set(n(a,b),c),c}function n(a,b,c){if("function"==typeof a?a===b:a.has(b))return arguments.length<3?b:c;throw TypeError("Private element is not present on this object")}function o(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,w(d.key),d)}}function p(a,b,c){return b&&o(a.prototype,b),c&&o(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a}function q(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")}function r(a){var b="function"==typeof Map?new Map:void 0;return(r=function(a){if(null===a||!function(a){try{return -1!==Function.toString.call(a).indexOf("[native code]")}catch(b){return"function"==typeof a}}(a))return a;if("function"!=typeof a)throw TypeError("Super expression must either be null or a function");if(void 0!==b){if(b.has(a))return b.get(a);b.set(a,c)}function c(){return function(a,b,c){if(s())return Reflect.construct.apply(null,arguments);var d=[null];d.push.apply(d,b);var e=new(a.bind.apply(a,d));return c&&t(e,c.prototype),e}(a,arguments,u(this).constructor)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),t(c,a)})(a)}function s(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(a){}return(s=function(){return!!a})()}function t(a,b){return(t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){return a.__proto__=b,a})(a,b)}function u(a){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function v(a,b,c){return(b=w(b))in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function w(a){var b=function(a,b){if("object"!=k(a)||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=k(d))return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==k(b)?b:b+""}function x(){var a,b,c="function"==typeof Symbol?Symbol:{},d=c.iterator||"@@iterator",e=c.toStringTag||"@@toStringTag";function f(c,d,e,f){var i=Object.create((d&&d.prototype instanceof h?d:h).prototype);return y(i,"_invoke",function(c,d,e){var f,h,i,j=0,k=e||[],l=!1,m={p:0,n:0,v:a,a:n,f:n.bind(a,4),d:function(b,c){return f=b,h=0,i=a,m.n=c,g}};function n(c,d){for(h=c,i=d,b=0;!l&&j&&!e&&b<k.length;b++){var e,f=k[b],n=m.p,o=f[2];c>3?(e=o===d)&&(i=f[(h=f[4])?5:(h=3,3)],f[4]=f[5]=a):f[0]<=n&&((e=c<2&&n<f[1])?(h=0,m.v=d,m.n=f[1]):n<o&&(e=c<3||f[0]>d||d>o)&&(f[4]=c,f[5]=d,m.n=o,h=0))}if(e||c>1)return g;throw l=!0,d}return function(e,k,o){if(j>1)throw TypeError("Generator is already running");for(l&&1===k&&n(k,o),h=k,i=o;(b=h<2?a:i)||!l;){f||(h?h<3?(h>1&&(m.n=-1),n(h,i)):m.n=i:m.v=i);try{if(j=2,f){if(h||(e="next"),b=f[e]){if(!(b=b.call(f,i)))throw TypeError("iterator result is not an object");if(!b.done)return b;i=b.value,h<2&&(h=0)}else 1===h&&(b=f.return)&&b.call(f),h<2&&(i=TypeError("The iterator does not provide a '"+e+"' method"),h=1);f=a}else if((b=(l=m.n<0)?i:c.call(d,m))!==g)break}catch(b){f=a,h=1,i=b}finally{j=1}}return{value:b,done:l}}}(c,e,f),!0),i}var g={};function h(){}function i(){}function j(){}b=Object.getPrototypeOf;var k=j.prototype=h.prototype=Object.create([][d]?b(b([][d]())):(y(b={},d,function(){return this}),b));function l(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,j):(a.__proto__=j,y(a,e,"GeneratorFunction")),a.prototype=Object.create(k),a}return i.prototype=j,y(k,"constructor",j),y(j,"constructor",i),i.displayName="GeneratorFunction",y(j,e,"GeneratorFunction"),y(k),y(k,e,"Generator"),y(k,d,function(){return this}),y(k,"toString",function(){return"[object Generator]"}),(x=function(){return{w:f,m:l}})()}function y(a,b,c,d){var e=Object.defineProperty;try{e({},"",{})}catch(a){e=0}(y=function(a,b,c,d){if(b)e?e(a,b,{value:c,enumerable:!d,configurable:!d,writable:!d}):a[b]=c;else{var f=function(b,c){y(a,b,function(a){return this._invoke(b,c,a)})};f("next",0),f("throw",1),f("return",2)}})(a,b,c,d)}function z(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}function A(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var f=a.apply(b,c);function g(a){z(f,d,e,g,h,"next",a)}function h(a){z(f,d,e,g,h,"throw",a)}g(void 0)})}}var B=e.readFile?(0,i.promisify)(e.readFile):A(x().m(function a(){return x().w(function(a){for(;;)switch(a.n){case 0:throw new D("use key rather than keyFile.","MISSING_CREDENTIALS");case 1:return a.a(2)}},a)})),C="https://oauth2.googleapis.com/token",D=function(a){function b(a,c){var d,e,f;return q(this,b),e=b,f=[a],e=u(e),v(d=function(a,b){if(b&&("object"==k(b)||"function"==typeof b))return b;if(void 0!==b)throw TypeError("Derived constructors may only return object or undefined");var c=a;if(void 0===c)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return c}(this,s()?Reflect.construct(e,f||[],u(this).constructor):e.apply(this,f)),"code",void 0),d.code=c,d}if("function"!=typeof a&&null!==a)throw TypeError("Super expression must either be null or a function");return b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),Object.defineProperty(b,"prototype",{writable:!1}),a&&t(b,a),p(b)}(r(Error)),E=new WeakMap,F=new WeakSet;function G(a){return H.apply(this,arguments)}function H(){return(H=A(x().m(function a(b){return x().w(function(a){for(;;)switch(a.n){case 0:if(!E.get(n(E,this))||b.forceRefresh){a.n=1;break}return a.a(2,E.get(n(E,this)));case 1:return a.p=1,a.n=2,m(E,this,n(F,this,I).call(this,b));case 2:return a.a(2,a.v);case 3:return a.p=3,m(E,this,void 0),a.f(3);case 4:return a.a(2)}},a,this,[[1,,3,4]])}))).apply(this,arguments)}function I(a){return J.apply(this,arguments)}function J(){return(J=A(x().m(function a(b){var c;return x().w(function(a){for(;;)switch(a.n){case 0:if(!1!==this.isTokenExpiring()||!1!==b.forceRefresh){a.n=1;break}return a.a(2,Promise.resolve(this.rawToken));case 1:if(!(!this.key&&!this.keyFile)){a.n=2;break}throw Error("No key or keyFile set.");case 2:if(!(!this.key&&this.keyFile)){a.n=4;break}return a.n=3,this.getCredentials(this.keyFile);case 3:c=a.v,this.key=c.privateKey,this.iss=c.clientEmail||this.iss,c.clientEmail||n(F,this,K).call(this);case 4:return a.a(2,n(F,this,O).call(this))}},a,this)}))).apply(this,arguments)}function K(){if(!this.iss)throw new D("email is required.","MISSING_CREDENTIALS")}function L(){return M.apply(this,arguments)}function M(){return(M=A(x().m(function a(){var b;return x().w(function(a){for(;;)switch(a.n){case 0:if(this.accessToken){a.n=1;break}throw Error("No token to revoke.");case 1:return b="https://oauth2.googleapis.com/revoke?token="+this.accessToken,a.n=2,this.transporter.request({url:b,retry:!0});case 2:n(F,this,N).call(this,{email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims});case 3:return a.a(2)}},a,this)}))).apply(this,arguments)}function N(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.keyFile=a.keyFile,this.key=a.key,this.rawToken=void 0,this.iss=a.email||a.iss,this.sub=a.sub,this.additionalClaims=a.additionalClaims,"object"===k(a.scope)?this.scope=a.scope.join(" "):this.scope=a.scope,this.eagerRefreshThresholdMillis=a.eagerRefreshThresholdMillis,a.transporter&&(this.transporter=a.transporter)}function O(){return P.apply(this,arguments)}function P(){return(P=A(x().m(function a(){var b,c,d,e,f,h,i,j,k,l;return x().w(function(a){for(;;)switch(a.n){case 0:return b=Math.floor(new Date().getTime()/1e3),c=this.additionalClaims||{},d=Object.assign({iss:this.iss,scope:this.scope,aud:C,exp:b+3600,iat:b,sub:this.sub},c),e=g.sign({header:{alg:"RS256"},payload:d,secret:this.key}),a.p=1,a.n=2,this.transporter.request({method:"POST",url:C,data:new URLSearchParams({grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:e}),responseType:"json",retryConfig:{httpMethodsToRetry:["POST"]}});case 2:return f=a.v,this.rawToken=f.data,this.expiresAt=null===f.data.expires_in||void 0===f.data.expires_in?void 0:(b+f.data.expires_in)*1e3,a.a(2,this.rawToken);case 3:throw a.p=3,l=a.v,this.rawToken=void 0,this.tokenExpires=void 0,(j=l.response&&null!=(h=l.response)&&h.data?null==(i=l.response)?void 0:i.data:{}).error&&(k=j.error_description?": ".concat(j.error_description):"",l.message="".concat(j.error).concat(k)),l;case 4:return a.a(2)}},a,this,[[1,3]])}))).apply(this,arguments)}b.GoogleToken=p(function a(b){q(this,a),l(this,F),F.add(this),v(this,"expiresAt",void 0),v(this,"key",void 0),v(this,"keyFile",void 0),v(this,"iss",void 0),v(this,"sub",void 0),v(this,"scope",void 0),v(this,"rawToken",void 0),v(this,"tokenExpires",void 0),v(this,"email",void 0),v(this,"additionalClaims",void 0),v(this,"eagerRefreshThresholdMillis",void 0),v(this,"transporter",{request:function(a){return(0,f.request)(a)}}),l(this,E),E.set(this,void 0),n(F,this,N).call(this,b)},[{key:"accessToken",get:function(){return this.rawToken?this.rawToken.access_token:void 0}},{key:"idToken",get:function(){return this.rawToken?this.rawToken.id_token:void 0}},{key:"tokenType",get:function(){return this.rawToken?this.rawToken.token_type:void 0}},{key:"refreshToken",get:function(){return this.rawToken?this.rawToken.refresh_token:void 0}},{key:"hasExpired",value:function(){var a=new Date().getTime();return!this.rawToken||!this.expiresAt||a>=this.expiresAt}},{key:"isTokenExpiring",value:function(){var a,b=new Date().getTime(),c=null!=(a=this.eagerRefreshThresholdMillis)?a:0;return!this.rawToken||!this.expiresAt||this.expiresAt<=b+c}},{key:"getToken",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===k(a)&&(b=a,a=void 0),b=Object.assign({forceRefresh:!1},b),a){var c=a;n(F,this,G).call(this,b).then(function(a){return c(null,a)},a);return}return n(F,this,G).call(this,b)}},{key:"getCredentials",value:(d=A(x().m(function a(b){var c,d,e,f,g;return x().w(function(a){for(;;)switch(a.n){case 0:a.n=".json"===(g=h.extname(b))?1:".der"===g||".crt"===g||".pem"===g?4:".p12"===g||".pfx"===g?6:7;break;case 1:return a.n=2,B(b,"utf8");case 2:if(d=(c=JSON.parse(a.v)).private_key,e=c.client_email,!(!d||!e)){a.n=3;break}throw new D("private_key and client_email are required.","MISSING_CREDENTIALS");case 3:return a.a(2,{privateKey:d,clientEmail:e});case 4:return a.n=5,B(b,"utf8");case 5:return f=a.v,a.a(2,{privateKey:f});case 6:throw new D("*.p12 certificates are not supported after v6.1.2. Consider utilizing *.json format or converting *.p12 to *.pem using the OpenSSL CLI.","UNKNOWN_CERTIFICATE_TYPE");case 7:throw new D("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, and *.pem.","UNKNOWN_CERTIFICATE_TYPE");case 8:return a.a(2)}},a)})),function(a){return d.apply(this,arguments)})},{key:"revokeToken",value:function(a){return a?void n(F,this,L).call(this).then(function(){return a()},a):n(F,this,L).call(this)}}])},2698:(a,b,c)=>{"use strict";var d,e;let f;Object.defineProperty(b,"__esModule",{value:!0}),b.GCPEnv=void 0,b.clear=function(){f=void 0},b.getEnv=h;let g=c(257);async function h(){return f||(f=i())}async function i(){d.NONE;return process.env.GAE_SERVICE||process.env.GAE_MODULE_NAME?d.APP_ENGINE:process.env.FUNCTION_NAME||process.env.FUNCTION_TARGET?d.CLOUD_FUNCTIONS:await k()?await j()?d.KUBERNETES_ENGINE:process.env.K_CONFIGURATION?d.CLOUD_RUN:process.env.CLOUD_RUN_JOB?d.CLOUD_RUN_JOBS:d.COMPUTE_ENGINE:d.NONE}async function j(){try{return await g.instance("attributes/cluster-name"),!0}catch(a){return!1}}async function k(){return g.isAvailable()}(e=d||(b.GCPEnv=d={})).APP_ENGINE="APP_ENGINE",e.KUBERNETES_ENGINE="KUBERNETES_ENGINE",e.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",e.COMPUTE_ENGINE="COMPUTE_ENGINE",e.CLOUD_RUN="CLOUD_RUN",e.CLOUD_RUN_JOBS="CLOUD_RUN_JOBS",e.NONE="NONE"},2752:(a,b,c)=>{"use strict";a.exports=c(7553).vendored["react-rsc"].ReactDOM},2772:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,5547,23)),Promise.resolve().then(c.t.bind(c,5098,23)),Promise.resolve().then(c.t.bind(c,7644,23)),Promise.resolve().then(c.t.bind(c,3859,23)),Promise.resolve().then(c.t.bind(c,8099,23)),Promise.resolve().then(c.t.bind(c,6237,23)),Promise.resolve().then(c.t.bind(c,8562,23)),Promise.resolve().then(c.t.bind(c,6675,23))},2804:(a,b,c)=>{"use strict";let d=c(4735),e=c(5591),f=c(1630),g=c(1645),h=c(4631),{randomBytes:i,createHash:j}=c(5511),{Duplex:k,Readable:l}=c(7910),{URL:m}=c(1932),n=c(8071),o=c(4452),p=c(1256),{isBlob:q}=c(3770),{BINARY_TYPES:r,EMPTY_BUFFER:s,GUID:t,kForOnEventAttribute:u,kListener:v,kStatusCode:w,kWebSocket:x,NOOP:y}=c(1010),{EventTarget:{addEventListener:z,removeEventListener:A}}=c(3781),{format:B,parse:C}=c(370),{toBuffer:D}=c(6078),E=Symbol("kAborted"),F=[8,13],G=["CONNECTING","OPEN","CLOSING","CLOSED"],H=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class I extends d{constructor(a,b,c){super(),this._binaryType=r[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=s,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=I.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==a?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===b?b=[]:Array.isArray(b)||("object"==typeof b&&null!==b?(c=b,b=[]):b=[b]),function a(b,c,d,g){let h,k,l,o,p={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:F[1],maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...g,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(b._autoPong=p.autoPong,!F.includes(p.protocolVersion))throw RangeError(`Unsupported protocol version: ${p.protocolVersion} (supported versions: ${F.join(", ")})`);if(c instanceof m)h=c;else try{h=new m(c)}catch(a){throw SyntaxError(`Invalid URL: ${c}`)}"http:"===h.protocol?h.protocol="ws:":"https:"===h.protocol&&(h.protocol="wss:"),b._url=h.href;let q="wss:"===h.protocol,r="ws+unix:"===h.protocol;if("ws:"===h.protocol||q||r?r&&!h.pathname?k="The URL's pathname is empty":h.hash&&(k="The URL contains a fragment identifier"):k='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"',k){let a=SyntaxError(k);if(0!==b._redirects)return void J(b,a);throw a}let s=q?443:80,u=i(16).toString("base64"),v=q?e.request:f.request,w=new Set;if(p.createConnection=p.createConnection||(q?L:K),p.defaultPort=p.defaultPort||s,p.port=h.port||s,p.host=h.hostname.startsWith("[")?h.hostname.slice(1,-1):h.hostname,p.headers={...p.headers,"Sec-WebSocket-Version":p.protocolVersion,"Sec-WebSocket-Key":u,Connection:"Upgrade",Upgrade:"websocket"},p.path=h.pathname+h.search,p.timeout=p.handshakeTimeout,p.perMessageDeflate&&(l=new n(!0!==p.perMessageDeflate?p.perMessageDeflate:{},!1,p.maxPayload),p.headers["Sec-WebSocket-Extensions"]=B({[n.extensionName]:l.offer()})),d.length){for(let a of d){if("string"!=typeof a||!H.test(a)||w.has(a))throw SyntaxError("An invalid or duplicated subprotocol was specified");w.add(a)}p.headers["Sec-WebSocket-Protocol"]=d.join(",")}if(p.origin&&(p.protocolVersion<13?p.headers["Sec-WebSocket-Origin"]=p.origin:p.headers.Origin=p.origin),(h.username||h.password)&&(p.auth=`${h.username}:${h.password}`),r){let a=p.path.split(":");p.socketPath=a[0],p.path=a[1]}if(p.followRedirects){if(0===b._redirects){b._originalIpc=r,b._originalSecure=q,b._originalHostOrSocketPath=r?p.socketPath:h.host;let a=g&&g.headers;if(g={...g,headers:{}},a)for(let[b,c]of Object.entries(a))g.headers[b.toLowerCase()]=c}else if(0===b.listenerCount("redirect")){let a=r?!!b._originalIpc&&p.socketPath===b._originalHostOrSocketPath:!b._originalIpc&&h.host===b._originalHostOrSocketPath;a&&(!b._originalSecure||q)||(delete p.headers.authorization,delete p.headers.cookie,a||delete p.headers.host,p.auth=void 0)}p.auth&&!g.headers.authorization&&(g.headers.authorization="Basic "+Buffer.from(p.auth).toString("base64")),o=b._req=v(p),b._redirects&&b.emit("redirect",b.url,o)}else o=b._req=v(p);p.timeout&&o.on("timeout",()=>{M(b,o,"Opening handshake has timed out")}),o.on("error",a=>{null===o||o[E]||(o=b._req=null,J(b,a))}),o.on("response",e=>{let f=e.headers.location,h=e.statusCode;if(f&&p.followRedirects&&h>=300&&h<400){let e;if(++b._redirects>p.maxRedirects)return void M(b,o,"Maximum redirects exceeded");o.abort();try{e=new m(f,c)}catch(a){J(b,SyntaxError(`Invalid URL: ${f}`));return}a(b,e,d,g)}else b.emit("unexpected-response",o,e)||M(b,o,`Unexpected server response: ${e.statusCode}`)}),o.on("upgrade",(a,c,d)=>{let e;if(b.emit("upgrade",a),b.readyState!==I.CONNECTING)return;o=b._req=null;let f=a.headers.upgrade;if(void 0===f||"websocket"!==f.toLowerCase())return void M(b,c,"Invalid Upgrade header");let g=j("sha1").update(u+t).digest("base64");if(a.headers["sec-websocket-accept"]!==g)return void M(b,c,"Invalid Sec-WebSocket-Accept header");let h=a.headers["sec-websocket-protocol"];if(void 0!==h?w.size?w.has(h)||(e="Server sent an invalid subprotocol"):e="Server sent a subprotocol but none was requested":w.size&&(e="Server sent no subprotocol"),e)return void M(b,c,e);h&&(b._protocol=h);let i=a.headers["sec-websocket-extensions"];if(void 0!==i){let a;if(!l)return void M(b,c,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");try{a=C(i)}catch(a){M(b,c,"Invalid Sec-WebSocket-Extensions header");return}let d=Object.keys(a);if(1!==d.length||d[0]!==n.extensionName)return void M(b,c,"Server indicated an extension that was not requested");try{l.accept(a[n.extensionName])}catch(a){M(b,c,"Invalid Sec-WebSocket-Extensions header");return}b._extensions[n.extensionName]=l}b.setSocket(c,d,{allowSynchronousEvents:p.allowSynchronousEvents,generateMask:p.generateMask,maxPayload:p.maxPayload,skipUTF8Validation:p.skipUTF8Validation})}),p.finishRequest?p.finishRequest(o,b):o.end()}(this,a,b,c)):(this._autoPong=c.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(a){r.includes(a)&&(this._binaryType=a,this._receiver&&(this._receiver._binaryType=a))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(a,b,c){let d=new o({allowSynchronousEvents:c.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:c.maxPayload,skipUTF8Validation:c.skipUTF8Validation}),e=new p(a,this._extensions,c.generateMask);this._receiver=d,this._sender=e,this._socket=a,d[x]=this,e[x]=this,a[x]=this,d.on("conclude",O),d.on("drain",P),d.on("error",Q),d.on("message",S),d.on("ping",T),d.on("pong",U),e.onerror=W,a.setTimeout&&a.setTimeout(0),a.setNoDelay&&a.setNoDelay(),b.length>0&&a.unshift(b),a.on("close",Y),a.on("data",Z),a.on("end",$),a.on("error",_),this._readyState=I.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=I.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[n.extensionName]&&this._extensions[n.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=I.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(a,b){if(this.readyState!==I.CLOSED){if(this.readyState===I.CONNECTING)return void M(this,this._req,"WebSocket was closed before the connection was established");if(this.readyState===I.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=I.CLOSING,this._sender.close(a,b,!this._isServer,a=>{!a&&(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),X(this)}}pause(){this.readyState!==I.CONNECTING&&this.readyState!==I.CLOSED&&(this._paused=!0,this._socket.pause())}ping(a,b,c){if(this.readyState===I.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");("function"==typeof a?(c=a,a=b=void 0):"function"==typeof b&&(c=b,b=void 0),"number"==typeof a&&(a=a.toString()),this.readyState!==I.OPEN)?N(this,a,c):(void 0===b&&(b=!this._isServer),this._sender.ping(a||s,b,c))}pong(a,b,c){if(this.readyState===I.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");("function"==typeof a?(c=a,a=b=void 0):"function"==typeof b&&(c=b,b=void 0),"number"==typeof a&&(a=a.toString()),this.readyState!==I.OPEN)?N(this,a,c):(void 0===b&&(b=!this._isServer),this._sender.pong(a||s,b,c))}resume(){this.readyState!==I.CONNECTING&&this.readyState!==I.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(a,b,c){if(this.readyState===I.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof b&&(c=b,b={}),"number"==typeof a&&(a=a.toString()),this.readyState!==I.OPEN)return void N(this,a,c);let d={binary:"string"!=typeof a,mask:!this._isServer,compress:!0,fin:!0,...b};this._extensions[n.extensionName]||(d.compress=!1),this._sender.send(a||s,d,c)}terminate(){if(this.readyState!==I.CLOSED){if(this.readyState===I.CONNECTING)return void M(this,this._req,"WebSocket was closed before the connection was established");this._socket&&(this._readyState=I.CLOSING,this._socket.destroy())}}}function J(a,b){a._readyState=I.CLOSING,a._errorEmitted=!0,a.emit("error",b),a.emitClose()}function K(a){return a.path=a.socketPath,g.connect(a)}function L(a){return a.path=void 0,a.servername||""===a.servername||(a.servername=g.isIP(a.host)?"":a.host),h.connect(a)}function M(a,b,c){a._readyState=I.CLOSING;let d=Error(c);Error.captureStackTrace(d,M),b.setHeader?(b[E]=!0,b.abort(),b.socket&&!b.socket.destroyed&&b.socket.destroy(),process.nextTick(J,a,d)):(b.destroy(d),b.once("error",a.emit.bind(a,"error")),b.once("close",a.emitClose.bind(a)))}function N(a,b,c){if(b){let c=q(b)?b.size:D(b).length;a._socket?a._sender._bufferedBytes+=c:a._bufferedAmount+=c}if(c){let b=Error(`WebSocket is not open: readyState ${a.readyState} (${G[a.readyState]})`);process.nextTick(c,b)}}function O(a,b){let c=this[x];c._closeFrameReceived=!0,c._closeMessage=b,c._closeCode=a,void 0!==c._socket[x]&&(c._socket.removeListener("data",Z),process.nextTick(V,c._socket),1005===a?c.close():c.close(a,b))}function P(){let a=this[x];a.isPaused||a._socket.resume()}function Q(a){let b=this[x];void 0!==b._socket[x]&&(b._socket.removeListener("data",Z),process.nextTick(V,b._socket),b.close(a[w])),b._errorEmitted||(b._errorEmitted=!0,b.emit("error",a))}function R(){this[x].emitClose()}function S(a,b){this[x].emit("message",a,b)}function T(a){let b=this[x];b._autoPong&&b.pong(a,!this._isServer,y),b.emit("ping",a)}function U(a){this[x].emit("pong",a)}function V(a){a.resume()}function W(a){let b=this[x];b.readyState!==I.CLOSED&&(b.readyState===I.OPEN&&(b._readyState=I.CLOSING,X(b)),this._socket.end(),b._errorEmitted||(b._errorEmitted=!0,b.emit("error",a)))}function X(a){a._closeTimer=setTimeout(a._socket.destroy.bind(a._socket),3e4)}function Y(){let a,b=this[x];this.removeListener("close",Y),this.removeListener("data",Z),this.removeListener("end",$),b._readyState=I.CLOSING,this._readableState.endEmitted||b._closeFrameReceived||b._receiver._writableState.errorEmitted||null===(a=b._socket.read())||b._receiver.write(a),b._receiver.end(),this[x]=void 0,clearTimeout(b._closeTimer),b._receiver._writableState.finished||b._receiver._writableState.errorEmitted?b.emitClose():(b._receiver.on("error",R),b._receiver.on("finish",R))}function Z(a){this[x]._receiver.write(a)||this.pause()}function $(){let a=this[x];a._readyState=I.CLOSING,a._receiver.end(),this.end()}function _(){let a=this[x];this.removeListener("error",_),this.on("error",y),a&&(a._readyState=I.CLOSING,this.destroy())}Object.defineProperty(I,"CONNECTING",{enumerable:!0,value:G.indexOf("CONNECTING")}),Object.defineProperty(I.prototype,"CONNECTING",{enumerable:!0,value:G.indexOf("CONNECTING")}),Object.defineProperty(I,"OPEN",{enumerable:!0,value:G.indexOf("OPEN")}),Object.defineProperty(I.prototype,"OPEN",{enumerable:!0,value:G.indexOf("OPEN")}),Object.defineProperty(I,"CLOSING",{enumerable:!0,value:G.indexOf("CLOSING")}),Object.defineProperty(I.prototype,"CLOSING",{enumerable:!0,value:G.indexOf("CLOSING")}),Object.defineProperty(I,"CLOSED",{enumerable:!0,value:G.indexOf("CLOSED")}),Object.defineProperty(I.prototype,"CLOSED",{enumerable:!0,value:G.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(a=>{Object.defineProperty(I.prototype,a,{enumerable:!0})}),["open","error","close","message"].forEach(a=>{Object.defineProperty(I.prototype,`on${a}`,{enumerable:!0,get(){for(let b of this.listeners(a))if(b[u])return b[v];return null},set(b){for(let b of this.listeners(a))if(b[u]){this.removeListener(a,b);break}"function"==typeof b&&this.addEventListener(a,b,{[u]:!0})}})}),I.prototype.addEventListener=z,I.prototype.removeEventListener=A,a.exports=I},2817:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d,e,f={decryptActionBoundArgs:function(){return w},encryptActionBoundArgs:function(){return v}};for(var g in f)Object.defineProperty(b,g,{enumerable:!0,get:f[g]});c(6197);let h=c(944),i=c(6887),j=c(8218),k=c(2517),l=c(3033),m=c(202),n=(d=c(4863))&&d.__esModule?d:{default:d},o=new TextEncoder,p=new TextDecoder,q,r;async function s(a,b){let c=await (0,k.getActionEncryptionKey)();if(void 0===c)throw Object.defineProperty(Error("Missing encryption key for Server Action. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E65",enumerable:!1,configurable:!0});let d=atob(b),e=d.slice(0,16),f=d.slice(16),g=p.decode(await (0,k.decrypt)(c,(0,k.stringToUint8Array)(e),(0,k.stringToUint8Array)(f)));if(!g.startsWith(a))throw Object.defineProperty(Error("Invalid Server Action payload: failed to decrypt."),"__NEXT_ERROR_CODE",{value:"E191",enumerable:!1,configurable:!0});return g.slice(a.length)}async function t(a,b){let c=await (0,k.getActionEncryptionKey)();if(void 0===c)throw Object.defineProperty(Error("Missing encryption key for Server Action. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E65",enumerable:!1,configurable:!0});let d=new Uint8Array(16);l.workUnitAsyncStorage.exit(()=>crypto.getRandomValues(d));let e=(0,k.arrayBufferToString)(d.buffer),f=await (0,k.encrypt)(c,d,o.encode(a+b));return btoa(e+(0,k.arrayBufferToString)(f))}var u=((e=u||{})[e.Ready=0]="Ready",e[e.Pending=1]="Pending",e[e.Complete=2]="Complete",e);let v=n.default.cache(async function a(b,...c){let d=l.workUnitAsyncStorage.getStore(),e=d?(0,l.getCacheSignal)(d):void 0,{clientModules:f}=(0,k.getClientReferenceManifestForRsc)(),g=Error();Error.captureStackTrace(g,a);let i=!1,n=d?(0,m.createHangingInputAbortSignal)(d):void 0,o=0;function p(){0===o&&(o=1,null==e||e.beginRead())}function r(){1===o&&(null==e||e.endRead()),o=2}n&&e&&n.addEventListener("abort",p,{once:!0});let s=await (0,j.streamToString)((0,h.renderToReadableStream)(c,f,{filterStackFrame:q,signal:n,onError(a){(null==n?void 0:n.aborted)||i||(i=!0,g.message=a instanceof Error?a.message:String(a))}}),n);if(i)throw r(),g;if(!d)return t(b,s);p();let u=(0,l.getPrerenderResumeDataCache)(d),v=(0,l.getRenderResumeDataCache)(d),w=b+s,x=(null==u?void 0:u.encryptedBoundArgs.get(w))??(null==v?void 0:v.encryptedBoundArgs.get(w));if(x)return x;let y=await t(b,s);return r(),null==u||u.encryptedBoundArgs.set(w,y),y});async function w(a,b){let c,d=await b,e=l.workUnitAsyncStorage.getStore();if(e){let b=(0,l.getCacheSignal)(e),f=(0,l.getPrerenderResumeDataCache)(e),g=(0,l.getRenderResumeDataCache)(e);(c=(null==f?void 0:f.decryptedBoundArgs.get(d))??(null==g?void 0:g.decryptedBoundArgs.get(d)))||(null==b||b.beginRead(),c=await s(a,d),null==b||b.endRead(),null==f||f.decryptedBoundArgs.set(d,c))}else c=await s(a,d);let{edgeRscModuleMapping:f,rscModuleMapping:g}=(0,k.getClientReferenceManifestForRsc)();return await (0,i.createFromReadableStream)(new ReadableStream({start(a){switch(a.enqueue(o.encode(c)),null==e?void 0:e.type){case"prerender":case"prerender-runtime":e.renderSignal.aborted?a.close():e.renderSignal.addEventListener("abort",()=>a.close(),{once:!0});break;case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"request":case"cache":case"private-cache":case"unstable-cache":case void 0:return a.close()}}}),{findSourceMapURL:r,serverConsumerManifest:{moduleLoading:null,moduleMap:g,serverModuleMap:(0,k.getServerModuleMap)()}})}},3015:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.NodeCrypto=void 0;let d=c(5511);class e{async sha256DigestBase64(a){return d.createHash("sha256").update(a).digest("base64")}randomBytesBase64(a){return d.randomBytes(a).toString("base64")}async verify(a,b,c){let e=d.createVerify("RSA-SHA256");return e.update(b),e.end(),e.verify(a,c,"base64")}async sign(a,b){let c=d.createSign("RSA-SHA256");return c.update(b),c.end(),c.sign(a,"base64")}decodeBase64StringUtf8(a){return Buffer.from(a,"base64").toString("utf-8")}encodeBase64StringUtf8(a){return Buffer.from(a,"utf-8").toString("base64")}async sha256DigestHex(a){return d.createHash("sha256").update(a).digest("hex")}async signWithHmacSha256(a,b){var c,e;let f="string"==typeof a?a:(c=a,Buffer.from(c));return(e=d.createHmac("sha256",f).update(b).digest()).buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}}b.NodeCrypto=e},3024:a=>{"use strict";a.exports=require("node:fs")},3033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3494:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c={METADATA_BOUNDARY_NAME:function(){return e},OUTLET_BOUNDARY_NAME:function(){return g},ROOT_LAYOUT_BOUNDARY_NAME:function(){return h},VIEWPORT_BOUNDARY_NAME:function(){return f}};for(var d in c)Object.defineProperty(b,d,{enumerable:!0,get:c[d]});let e="__next_metadata_boundary__",f="__next_viewport_boundary__",g="__next_outlet_boundary__",h="__next_root_layout_boundary__"},3503:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.FileSubjectTokenSupplier=void 0;let d=c(8354),e=c(9021),f=(0,d.promisify)(e.readFile??(()=>{})),g=(0,d.promisify)(e.realpath??(()=>{})),h=(0,d.promisify)(e.lstat??(()=>{}));class i{filePath;formatType;subjectTokenFieldName;constructor(a){this.filePath=a.filePath,this.formatType=a.formatType,this.subjectTokenFieldName=a.subjectTokenFieldName}async getSubjectToken(){let a,b=this.filePath;try{if(b=await g(b),!(await h(b)).isFile())throw Error()}catch(a){throw a instanceof Error&&(a.message=`The file at ${b} does not exist, or it is not a file. ${a.message}`),a}let c=await f(b,{encoding:"utf8"});if("text"===this.formatType?a=c:"json"===this.formatType&&this.subjectTokenFieldName&&(a=JSON.parse(c)[this.subjectTokenFieldName]),!a)throw Error("Unable to parse the subject_token from the credential_source file");return a}}b.FileSubjectTokenSupplier=i},3563:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d,e={RenderStage:function(){return i},StagedRenderingController:function(){return j}};for(var f in e)Object.defineProperty(b,f,{enumerable:!0,get:e[f]});let g=c(9516),h=c(6277);var i=((d={})[d.Static=1]="Static",d[d.Runtime=2]="Runtime",d[d.Dynamic=3]="Dynamic",d);class j{constructor(a=null){this.abortSignal=a,this.currentStage=1,this.runtimeStagePromise=(0,h.createPromiseWithResolvers)(),this.dynamicStagePromise=(0,h.createPromiseWithResolvers)(),a&&a.addEventListener("abort",()=>{let{reason:b}=a;this.currentStage<2&&(this.runtimeStagePromise.promise.catch(k),this.runtimeStagePromise.reject(b)),this.currentStage<3&&(this.dynamicStagePromise.promise.catch(k),this.dynamicStagePromise.reject(b))},{once:!0})}advanceStage(a){!(this.currentStage>=a)&&(this.currentStage=a,a>=2&&this.runtimeStagePromise.resolve(),a>=3&&this.dynamicStagePromise.resolve())}getStagePromise(a){switch(a){case 2:return this.runtimeStagePromise.promise;case 3:return this.dynamicStagePromise.promise;default:throw Object.defineProperty(new g.InvariantError(`Invalid render stage: ${a}`),"__NEXT_ERROR_CODE",{value:"E881",enumerable:!1,configurable:!0})}}waitForStage(a){return this.getStagePromise(a)}delayUntilStage(a,b,c){var d,e,f;let g,h=(d=this.getStagePromise(a),e=b,f=c,g=new Promise((a,b)=>{d.then(a.bind(null,f),b)}),void 0!==e&&(g.displayName=e),g);return this.abortSignal&&h.catch(k),h}}function k(){}},3566:a=>{"use strict";a.exports=require("worker_threads")},3770:(a,b,c)=>{"use strict";let{isUtf8:d}=c(9428),{hasBlob:e}=c(1010);function f(a){let b=a.length,c=0;for(;c<b;)if((128&a[c])==0)c++;else if((224&a[c])==192){if(c+1===b||(192&a[c+1])!=128||(254&a[c])==192)return!1;c+=2}else if((240&a[c])==224){if(c+2>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||224===a[c]&&(224&a[c+1])==128||237===a[c]&&(224&a[c+1])==160)return!1;c+=3}else{if((248&a[c])!=240||c+3>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||(192&a[c+3])!=128||240===a[c]&&(240&a[c+1])==128||244===a[c]&&a[c+1]>143||a[c]>244)return!1;c+=4}return!0}if(a.exports={isBlob:function(a){return e&&"object"==typeof a&&"function"==typeof a.arrayBuffer&&"string"==typeof a.type&&"function"==typeof a.stream&&("Blob"===a[Symbol.toStringTag]||"File"===a[Symbol.toStringTag])},isValidStatusCode:function(a){return a>=1e3&&a<=1014&&1004!==a&&1005!==a&&1006!==a||a>=3e3&&a<=4999},isValidUTF8:f,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},d)a.exports.isValidUTF8=function(a){return a.length<24?f(a):d(a)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let b=c(7990);a.exports.isValidUTF8=function(a){return a.length<32?f(a):b(a)}}catch(a){}},3781:(a,b,c)=>{"use strict";let{kForOnEventAttribute:d,kListener:e}=c(1010),f=Symbol("kCode"),g=Symbol("kData"),h=Symbol("kError"),i=Symbol("kMessage"),j=Symbol("kReason"),k=Symbol("kTarget"),l=Symbol("kType"),m=Symbol("kWasClean");class n{constructor(a){this[k]=null,this[l]=a}get target(){return this[k]}get type(){return this[l]}}Object.defineProperty(n.prototype,"target",{enumerable:!0}),Object.defineProperty(n.prototype,"type",{enumerable:!0});class o extends n{constructor(a,b={}){super(a),this[f]=void 0===b.code?0:b.code,this[j]=void 0===b.reason?"":b.reason,this[m]=void 0!==b.wasClean&&b.wasClean}get code(){return this[f]}get reason(){return this[j]}get wasClean(){return this[m]}}Object.defineProperty(o.prototype,"code",{enumerable:!0}),Object.defineProperty(o.prototype,"reason",{enumerable:!0}),Object.defineProperty(o.prototype,"wasClean",{enumerable:!0});class p extends n{constructor(a,b={}){super(a),this[h]=void 0===b.error?null:b.error,this[i]=void 0===b.message?"":b.message}get error(){return this[h]}get message(){return this[i]}}Object.defineProperty(p.prototype,"error",{enumerable:!0}),Object.defineProperty(p.prototype,"message",{enumerable:!0});class q extends n{constructor(a,b={}){super(a),this[g]=void 0===b.data?null:b.data}get data(){return this[g]}}function r(a,b,c){"object"==typeof a&&a.handleEvent?a.handleEvent.call(a,c):a.call(b,c)}Object.defineProperty(q.prototype,"data",{enumerable:!0}),a.exports={CloseEvent:o,ErrorEvent:p,Event:n,EventTarget:{addEventListener(a,b,c={}){let f;for(let f of this.listeners(a))if(!c[d]&&f[e]===b&&!f[d])return;if("message"===a)f=function(a,c){let d=new q("message",{data:c?a:a.toString()});d[k]=this,r(b,this,d)};else if("close"===a)f=function(a,c){let d=new o("close",{code:a,reason:c.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});d[k]=this,r(b,this,d)};else if("error"===a)f=function(a){let c=new p("error",{error:a,message:a.message});c[k]=this,r(b,this,c)};else{if("open"!==a)return;f=function(){let a=new n("open");a[k]=this,r(b,this,a)}}f[d]=!!c[d],f[e]=b,c.once?this.once(a,f):this.on(a,f)},removeEventListener(a,b){for(let c of this.listeners(a))if(c[e]===b&&!c[d]){this.removeListener(a,c);break}}},MessageEvent:q}},3873:a=>{"use strict";a.exports=require("path")},3907:(a,b,c)=>{var d=c(57).Buffer,e=c(386),f=c(8061),g=c(7910),h=c(1573),i=c(8354),j=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function k(a){var b=a.split(".",1)[0],c=d.from(b,"base64").toString("binary");if("[object Object]"===Object.prototype.toString.call(c))return c;try{return JSON.parse(c)}catch(a){return}}function l(a){return a.split(".")[2]}function m(a){return j.test(a)&&!!k(a)}function n(a,b,c){if(!b){var d=Error("Missing algorithm parameter for jws.verify");throw d.code="MISSING_ALGORITHM",d}var e=l(a=h(a)),g=a.split(".",2).join(".");return f(b).verify(g,e,c)}function o(a,b){if(b=b||{},!m(a=h(a)))return null;var c,e,f=k(a);if(!f)return null;var g=(c=c||"utf8",e=a.split(".")[1],d.from(e,"base64").toString(c));return("JWT"===f.typ||b.json)&&(g=JSON.parse(g,b.encoding)),{header:f,payload:g,signature:l(a)}}function p(a){var b=(a=a||{}).secret;if(b=null==(b=null==b?a.publicKey:b)?a.key:b,!0===/^hs/i.test(a.algorithm)&&null==b)throw TypeError("secret must be a string or buffer or a KeyObject");var c=new e(b);this.readable=!0,this.algorithm=a.algorithm,this.encoding=a.encoding,this.secret=this.publicKey=this.key=c,this.signature=new e(a.signature),this.secret.once("close",(function(){!this.signature.writable&&this.readable&&this.verify()}).bind(this)),this.signature.once("close",(function(){!this.secret.writable&&this.readable&&this.verify()}).bind(this))}i.inherits(p,g),p.prototype.verify=function(){try{var a=n(this.signature.buffer,this.algorithm,this.key.buffer),b=o(this.signature.buffer,this.encoding);return this.emit("done",a,b),this.emit("data",a),this.emit("end"),this.readable=!1,a}catch(a){this.readable=!1,this.emit("error",a),this.emit("close")}},p.decode=o,p.isValid=m,p.verify=n,a.exports=p},3914:(a,b,c)=>{"use strict";var d,e,f,g,h,i;Object.defineProperty(b,"__esModule",{value:!0}),b.OAuth2Client=b.ClientAuthentication=b.CertificateFormat=b.CodeChallengeMethod=void 0;let j=c(5065),k=c(1723),l=c(7910),m=c(7164),n=c(2433),o=c(5618),p=c(7493),q=c(1045);(g=d||(b.CodeChallengeMethod=d={})).Plain="plain",g.S256="S256",(h=e||(b.CertificateFormat=e={})).PEM="PEM",h.JWK="JWK",(i=f||(b.ClientAuthentication=f={})).ClientSecretPost="ClientSecretPost",i.ClientSecretBasic="ClientSecretBasic",i.None="None";class r extends p.AuthClient{redirectUri;certificateCache={};certificateExpiry=null;certificateCacheFormat=e.PEM;refreshTokenPromises=new Map;endpoints;issuers;clientAuthentication;_clientId;_clientSecret;refreshHandler;constructor(a={},b,c){super("object"==typeof a?a:{}),"object"!=typeof a&&(a={clientId:a,clientSecret:b,redirectUri:c}),this._clientId=a.clientId||a.client_id,this._clientSecret=a.clientSecret||a.client_secret,this.redirectUri=a.redirectUri||a.redirect_uris?.[0],this.endpoints={tokenInfoUrl:"https://oauth2.googleapis.com/tokeninfo",oauth2AuthBaseUrl:"https://accounts.google.com/o/oauth2/v2/auth",oauth2TokenUrl:"https://oauth2.googleapis.com/token",oauth2RevokeUrl:"https://oauth2.googleapis.com/revoke",oauth2FederatedSignonPemCertsUrl:"https://www.googleapis.com/oauth2/v1/certs",oauth2FederatedSignonJwkCertsUrl:"https://www.googleapis.com/oauth2/v3/certs",oauth2IapPublicKeyUrl:"https://www.gstatic.com/iap/verify/public_key",...a.endpoints},this.clientAuthentication=a.clientAuthentication||f.ClientSecretPost,this.issuers=a.issuers||["accounts.google.com","https://accounts.google.com",this.universeDomain]}static GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo";static CLOCK_SKEW_SECS_=300;static DEFAULT_MAX_TOKEN_LIFETIME_SECS_=86400;generateAuthUrl(a={}){if(a.code_challenge_method&&!a.code_challenge)throw Error("If a code_challenge_method is provided, code_challenge must be included.");return a.response_type=a.response_type||"code",a.client_id=a.client_id||this._clientId,a.redirect_uri=a.redirect_uri||this.redirectUri,Array.isArray(a.scope)&&(a.scope=a.scope.join(" ")),this.endpoints.oauth2AuthBaseUrl.toString()+"?"+k.stringify(a)}generateCodeVerifier(){throw Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}async generateCodeVerifierAsync(){let a=(0,o.createCrypto)(),b=a.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),c=(await a.sha256DigestBase64(b)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:b,codeChallenge:c}}getToken(a,b){let c="string"==typeof a?{code:a}:a;if(!b)return this.getTokenAsync(c);this.getTokenAsync(c).then(a=>b(null,a.tokens,a.res),a=>b(a,null,a.response))}async getTokenAsync(a){let b=this.endpoints.oauth2TokenUrl.toString(),c=new Headers,d={client_id:a.client_id||this._clientId,code_verifier:a.codeVerifier,code:a.code,grant_type:"authorization_code",redirect_uri:a.redirect_uri||this.redirectUri};if(this.clientAuthentication===f.ClientSecretBasic){let a=Buffer.from(`${this._clientId}:${this._clientSecret}`);c.set("authorization",`Basic ${a.toString("base64")}`)}this.clientAuthentication===f.ClientSecretPost&&(d.client_secret=this._clientSecret);let e={...r.RETRY_CONFIG,method:"POST",url:b,data:new URLSearchParams((0,n.removeUndefinedValuesInObject)(d)),headers:c};p.AuthClient.setMethodName(e,"getTokenAsync");let g=await this.transporter.request(e),h=g.data;return g.data&&g.data.expires_in&&(h.expiry_date=new Date().getTime()+1e3*g.data.expires_in,delete h.expires_in),this.emit("tokens",h),{tokens:h,res:g}}async refreshToken(a){if(!a)return this.refreshTokenNoCache(a);if(this.refreshTokenPromises.has(a))return this.refreshTokenPromises.get(a);let b=this.refreshTokenNoCache(a).then(b=>(this.refreshTokenPromises.delete(a),b),b=>{throw this.refreshTokenPromises.delete(a),b});return this.refreshTokenPromises.set(a,b),b}async refreshTokenNoCache(a){let b;if(!a)throw Error("No refresh token is set.");let c=this.endpoints.oauth2TokenUrl.toString(),d={refresh_token:a,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"};try{let a={...r.RETRY_CONFIG,method:"POST",url:c,data:new URLSearchParams((0,n.removeUndefinedValuesInObject)(d))};p.AuthClient.setMethodName(a,"refreshTokenNoCache"),b=await this.transporter.request(a)}catch(a){throw a instanceof j.GaxiosError&&"invalid_grant"===a.message&&a.response?.data&&/ReAuth/i.test(a.response.data.error_description)&&(a.message=JSON.stringify(a.response.data)),a}let e=b.data;return b.data&&b.data.expires_in&&(e.expiry_date=new Date().getTime()+1e3*b.data.expires_in,delete e.expires_in),this.emit("tokens",e),{tokens:e,res:b}}refreshAccessToken(a){if(!a)return this.refreshAccessTokenAsync();this.refreshAccessTokenAsync().then(b=>a(null,b.credentials,b.res),a)}async refreshAccessTokenAsync(){let a=await this.refreshToken(this.credentials.refresh_token),b=a.tokens;return b.refresh_token=this.credentials.refresh_token,this.credentials=b,{credentials:this.credentials,res:a.res}}getAccessToken(a){if(!a)return this.getAccessTokenAsync();this.getAccessTokenAsync().then(b=>a(null,b.token,b.res),a)}async getAccessTokenAsync(){if(!(!this.credentials.access_token||this.isTokenExpiring()))return{token:this.credentials.access_token};{if(!this.credentials.refresh_token)if(this.refreshHandler){let a=await this.processAndValidateRefreshHandler();if(a?.access_token)return this.setCredentials(a),{token:this.credentials.access_token}}else throw Error("No refresh token or refresh handler callback is set.");let a=await this.refreshAccessTokenAsync();if(!a.credentials||a.credentials&&!a.credentials.access_token)throw Error("Could not refresh access token.");return{token:a.credentials.access_token,res:a.res}}}async getRequestHeaders(a){return(await this.getRequestMetadataAsync(a)).headers}async getRequestMetadataAsync(a){let b=this.credentials;if(!b.access_token&&!b.refresh_token&&!this.apiKey&&!this.refreshHandler)throw Error("No access, refresh token, API key or refresh handler callback is set.");if(b.access_token&&!this.isTokenExpiring()){b.token_type=b.token_type||"Bearer";let a=new Headers({authorization:b.token_type+" "+b.access_token});return{headers:this.addSharedMetadataHeaders(a)}}if(this.refreshHandler){let a=await this.processAndValidateRefreshHandler();if(a?.access_token){this.setCredentials(a);let b=new Headers({authorization:"Bearer "+this.credentials.access_token});return{headers:this.addSharedMetadataHeaders(b)}}}if(this.apiKey)return{headers:new Headers({"X-Goog-Api-Key":this.apiKey})};let c=null,d=null;try{d=(c=await this.refreshToken(b.refresh_token)).tokens}catch(a){throw a.response&&(403===a.response.status||404===a.response.status)&&(a.message=`Could not refresh access token: ${a.message}`),a}let e=this.credentials;e.token_type=e.token_type||"Bearer",d.refresh_token=e.refresh_token,this.credentials=d;let f=new Headers({authorization:e.token_type+" "+d.access_token});return{headers:this.addSharedMetadataHeaders(f),res:c.res}}static getRevokeTokenUrl(a){return new r().getRevokeTokenURL(a).toString()}getRevokeTokenURL(a){let b=new URL(this.endpoints.oauth2RevokeUrl);return b.searchParams.append("token",a),b}revokeToken(a,b){let c={...r.RETRY_CONFIG,url:this.getRevokeTokenURL(a).toString(),method:"POST"};if(p.AuthClient.setMethodName(c,"revokeToken"),!b)return this.transporter.request(c);this.transporter.request(c).then(a=>b(null,a),b)}revokeCredentials(a){if(!a)return this.revokeCredentialsAsync();this.revokeCredentialsAsync().then(b=>a(null,b),a)}async revokeCredentialsAsync(){let a=this.credentials.access_token;if(this.credentials={},a)return this.revokeToken(a);throw Error("No access token to revoke.")}request(a,b){if(!b)return this.requestAsync(a);this.requestAsync(a).then(a=>b(null,a),a=>b(a,a.response))}async requestAsync(a,b=!1){try{let b=await this.getRequestMetadataAsync();return a.headers=j.Gaxios.mergeHeaders(a.headers),this.addUserProjectAndAuthHeaders(a.headers,b.headers),this.apiKey&&a.headers.set("X-Goog-Api-Key",this.apiKey),await this.transporter.request(a)}catch(d){let c=d.response;if(c){let d=c.status,e=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),f=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,g=c.config.data instanceof l.Readable,h=401===d||403===d;if(!b&&h&&!g&&e)return await this.refreshAccessTokenAsync(),this.requestAsync(a,!0);if(!b&&h&&!g&&f){let b=await this.processAndValidateRefreshHandler();return b?.access_token&&this.setCredentials(b),this.requestAsync(a,!0)}}throw d}}verifyIdToken(a,b){if(b&&"function"!=typeof b)throw Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(!b)return this.verifyIdTokenAsync(a);this.verifyIdTokenAsync(a).then(a=>b(null,a),b)}async verifyIdTokenAsync(a){if(!a.idToken)throw Error("The verifyIdToken method requires an ID Token");let b=await this.getFederatedSignonCertsAsync();return await this.verifySignedJwtWithCertsAsync(a.idToken,b.certs,a.audience,this.issuers,a.maxExpiry)}async getTokenInfo(a){let{data:b}=await this.transporter.request({...r.RETRY_CONFIG,method:"POST",headers:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8",authorization:`Bearer ${a}`},url:this.endpoints.tokenInfoUrl.toString()}),c=Object.assign({expiry_date:new Date().getTime()+1e3*b.expires_in,scopes:b.scope.split(" ")},b);return delete c.expires_in,delete c.scope,c}getFederatedSignonCerts(a){if(!a)return this.getFederatedSignonCertsAsync();this.getFederatedSignonCertsAsync().then(b=>a(null,b.certs,b.res),a)}async getFederatedSignonCertsAsync(){let a,b,c=new Date().getTime(),d=(0,o.hasBrowserCrypto)()?e.JWK:e.PEM;if(this.certificateExpiry&&c<this.certificateExpiry.getTime()&&this.certificateCacheFormat===d)return{certs:this.certificateCache,format:d};switch(d){case e.PEM:b=this.endpoints.oauth2FederatedSignonPemCertsUrl.toString();break;case e.JWK:b=this.endpoints.oauth2FederatedSignonJwkCertsUrl.toString();break;default:throw Error(`Unsupported certificate format ${d}`)}try{let c={...r.RETRY_CONFIG,url:b};p.AuthClient.setMethodName(c,"getFederatedSignonCertsAsync"),a=await this.transporter.request(c)}catch(a){throw a instanceof Error&&(a.message=`Failed to retrieve verification certificates: ${a.message}`),a}let f=a?.headers.get("cache-control"),g=-1;if(f){let a=/max-age=(?<maxAge>[0-9]+)/.exec(f)?.groups?.maxAge;a&&(g=1e3*Number(a))}let h={};switch(d){case e.PEM:h=a.data;break;case e.JWK:for(let b of a.data.keys)h[b.kid]=b;break;default:throw Error(`Unsupported certificate format ${d}`)}let i=new Date;return this.certificateExpiry=-1===g?null:new Date(i.getTime()+g),this.certificateCache=h,this.certificateCacheFormat=d,{certs:h,format:d,res:a}}getIapPublicKeys(a){if(!a)return this.getIapPublicKeysAsync();this.getIapPublicKeysAsync().then(b=>a(null,b.pubkeys,b.res),a)}async getIapPublicKeysAsync(){let a,b=this.endpoints.oauth2IapPublicKeyUrl.toString();try{let c={...r.RETRY_CONFIG,url:b};p.AuthClient.setMethodName(c,"getIapPublicKeysAsync"),a=await this.transporter.request(c)}catch(a){throw a instanceof Error&&(a.message=`Failed to retrieve verification certificates: ${a.message}`),a}return{pubkeys:a.data,res:a}}verifySignedJwtWithCerts(){throw Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}async verifySignedJwtWithCertsAsync(a,b,c,d,e){let f,g,h=(0,o.createCrypto)();e||(e=r.DEFAULT_MAX_TOKEN_LIFETIME_SECS_);let i=a.split(".");if(3!==i.length)throw Error("Wrong number of segments in token: "+a);let j=i[0]+"."+i[1],k=i[2];try{f=JSON.parse(h.decodeBase64StringUtf8(i[0]))}catch(a){throw a instanceof Error&&(a.message=`Can't parse token envelope: ${i[0]}': ${a.message}`),a}if(!f)throw Error("Can't parse token envelope: "+i[0]);try{g=JSON.parse(h.decodeBase64StringUtf8(i[1]))}catch(a){throw a instanceof Error&&(a.message=`Can't parse token payload '${i[0]}`),a}if(!g)throw Error("Can't parse token payload: "+i[1]);if(!Object.prototype.hasOwnProperty.call(b,f.kid))throw Error("No pem found for envelope: "+JSON.stringify(f));let l=b[f.kid];if("ES256"===f.alg&&(k=m.joseToDer(k,"ES256").toString("base64")),!await h.verify(l,j,k))throw Error("Invalid token signature: "+a);if(!g.iat)throw Error("No issue time in token: "+JSON.stringify(g));if(!g.exp)throw Error("No expiration time in token: "+JSON.stringify(g));let n=Number(g.iat);if(isNaN(n))throw Error("iat field using invalid format");let p=Number(g.exp);if(isNaN(p))throw Error("exp field using invalid format");let s=new Date().getTime()/1e3;if(p>=s+e)throw Error("Expiration time too far in future: "+JSON.stringify(g));let t=n-r.CLOCK_SKEW_SECS_,u=p+r.CLOCK_SKEW_SECS_;if(s<t)throw Error("Token used too early, "+s+" < "+t+": "+JSON.stringify(g));if(s>u)throw Error("Token used too late, "+s+" > "+u+": "+JSON.stringify(g));if(d&&0>d.indexOf(g.iss))throw Error("Invalid issuer, expected one of ["+d+"], but got "+g.iss);if(null!=c){let a=g.aud;if(!(c.constructor===Array?c.indexOf(a)>-1:a===c))throw Error("Wrong recipient, payload audience != requiredAudience")}return new q.LoginTicket(f,g)}async processAndValidateRefreshHandler(){if(this.refreshHandler){let a=await this.refreshHandler();if(!a.access_token)throw Error("No access token is returned by the refreshHandler callback.");return a}}isTokenExpiring(){let a=this.credentials.expiry_date;return!!a&&a<=new Date().getTime()+this.eagerRefreshThresholdMillis}}b.OAuth2Client=r},3954:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/interception-routes")},3997:a=>{"use strict";a.exports=require("tty")},4038:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.InvalidSubjectTokenError=b.InvalidMessageFieldError=b.InvalidCodeFieldError=b.InvalidTokenTypeFieldError=b.InvalidExpirationTimeFieldError=b.InvalidSuccessFieldError=b.InvalidVersionFieldError=b.ExecutableResponseError=b.ExecutableResponse=void 0;let c="urn:ietf:params:oauth:token-type:saml2",d="urn:ietf:params:oauth:token-type:id_token",e="urn:ietf:params:oauth:token-type:jwt";class f{version;success;expirationTime;tokenType;errorCode;errorMessage;subjectToken;constructor(a){if(!a.version)throw new h("Executable response must contain a 'version' field.");if(void 0===a.success)throw new i("Executable response must contain a 'success' field.");if(this.version=a.version,this.success=a.success,this.success){if(this.expirationTime=a.expiration_time,this.tokenType=a.token_type,this.tokenType!==c&&this.tokenType!==d&&this.tokenType!==e)throw new k(`Executable response must contain a 'token_type' field when successful and it must be one of ${d}, ${e}, or ${c}.`);if(this.tokenType===c){if(!a.saml_response)throw new n(`Executable response must contain a 'saml_response' field when token_type=${c}.`);this.subjectToken=a.saml_response}else{if(!a.id_token)throw new n(`Executable response must contain a 'id_token' field when token_type=${d} or ${e}.`);this.subjectToken=a.id_token}}else{if(!a.code)throw new l("Executable response must contain a 'code' field when unsuccessful.");if(!a.message)throw new m("Executable response must contain a 'message' field when unsuccessful.");this.errorCode=a.code,this.errorMessage=a.message}}isValid(){return!this.isExpired()&&this.success}isExpired(){return void 0!==this.expirationTime&&this.expirationTime<Math.round(Date.now()/1e3)}}b.ExecutableResponse=f;class g extends Error{constructor(a){super(a),Object.setPrototypeOf(this,new.target.prototype)}}b.ExecutableResponseError=g;class h extends g{}b.InvalidVersionFieldError=h;class i extends g{}b.InvalidSuccessFieldError=i;class j extends g{}b.InvalidExpirationTimeFieldError=j;class k extends g{}b.InvalidTokenTypeFieldError=k;class l extends g{}b.InvalidCodeFieldError=l;class m extends g{}b.InvalidMessageFieldError=m;class n extends g{}b.InvalidSubjectTokenError=n},4072:function(a,b,c){"use strict";var d,e=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(b,"__esModule",{value:!0}),b.Gaxios=void 0;let f=e(c(2267)),g=c(5591),h=c(6560),i=c(963),j=c(7910),k=c(9440),l=async()=>globalThis.crypto?.randomUUID()||(await Promise.resolve().then(c.t.bind(c,5511,23))).randomUUID();class m{agentCache=new Map;defaults;interceptors;constructor(a){this.defaults=a||{},this.interceptors={request:new k.GaxiosInterceptorManager,response:new k.GaxiosInterceptorManager}}fetch(...a){let b,c=a[0],e=a[1],f=new Headers;return("string"==typeof c?b=new URL(c):c instanceof URL?b=c:c&&c.url&&(b=new URL(c.url)),c&&"object"==typeof c&&"headers"in c&&d.mergeHeaders(f,c.headers),e&&d.mergeHeaders(f,new Headers(e.headers)),"object"!=typeof c||c instanceof URL)?this.request({...e,headers:f,url:b}):this.request({...e,...c,headers:f,url:b})}async request(a={}){let b=await this.#k(a);return b=await this.#l(b),this.#m(this._request(b))}async _defaultAdapter(a){let b=a.fetchImplementation||this.defaults.fetchImplementation||await d.#n(),c={...a};delete c.data;let e=await b(a.url,c),f=await this.getResponseData(a,e);return Object.getOwnPropertyDescriptor(e,"data")?.configurable||Object.defineProperties(e,{data:{configurable:!0,writable:!0,enumerable:!0,value:f}}),Object.assign(e,{config:a,data:f})}async _request(a){try{let b;if(b=a.adapter?await a.adapter(a,this._defaultAdapter.bind(this)):await this._defaultAdapter(a),!a.validateStatus(b.status)){if("stream"===a.responseType){let a=[];for await(let c of b.data)a.push(c);b.data=a.toString()}let c=h.GaxiosError.extractAPIErrorFromResponse(b,`Request failed with status code ${b.status}`);throw new h.GaxiosError(c?.message,a,b,c)}return b}catch(e){let b;b=e instanceof h.GaxiosError?e:e instanceof Error?new h.GaxiosError(e.message,a,void 0,e):new h.GaxiosError("Unexpected Gaxios Error",a,void 0,e);let{shouldRetry:c,config:d}=await (0,i.getRetryConfig)(b);if(c&&d)return b.config.retryConfig.currentRetryAttempt=d.retryConfig.currentRetryAttempt,a.retryConfig=b.config?.retryConfig,this.#o(a),this._request(a);throw a.errorRedactor&&a.errorRedactor(b),b}}async getResponseData(a,b){if(204===b.status)return"";if(a.maxContentLength&&b.headers.has("content-length")&&a.maxContentLength<Number.parseInt(b.headers?.get("content-length")||""))throw new h.GaxiosError("Response's `Content-Length` is over the limit.",a,Object.assign(b,{config:a}));switch(a.responseType){case"stream":return b.body;case"json":{let a=await b.text();try{return JSON.parse(a)}catch{return a}}case"arraybuffer":return b.arrayBuffer();case"blob":return b.blob();case"text":return b.text();default:return this.getResponseDataFromContentType(b)}}#p(a,b=[]){let c=new URL(a),d=[...b];for(let a of(process.env.NO_PROXY??process.env.no_proxy)?.split(",")||[])d.push(a.trim());for(let a of d)if(a instanceof RegExp){if(a.test(c.toString()))return!1}else if(a instanceof URL){if(a.origin===c.origin)return!1}else if(a.startsWith("*.")||a.startsWith(".")){let b=a.replace(/^\*\./,".");if(c.hostname.endsWith(b))return!1}else if(a===c.origin||a===c.hostname||a===c.href)return!1;return!0}async #l(a){let b=Promise.resolve(a);for(let a of this.interceptors.request.values())a&&(b=b.then(a.resolved,a.rejected));return b}async #m(a){let b=Promise.resolve(a);for(let a of this.interceptors.response.values())a&&(b=b.then(a.resolved,a.rejected));return b}async #k(a){let b=new Headers(this.defaults.headers);d.mergeHeaders(b,a.headers);let c=(0,f.default)(!0,{},this.defaults,a);if(!c.url)throw Error("URL is required.");if(c.baseURL&&(c.url=new URL(c.url,c.baseURL)),c.url=new URL(c.url),c.params)if(c.paramsSerializer){let a=c.paramsSerializer(c.params);a.startsWith("?")&&(a=a.slice(1));let b=c.url.toString().includes("?")?"&":"?";c.url=c.url+b+a}else{let a=c.url instanceof URL?c.url:new URL(c.url);for(let[b,d]of new URLSearchParams(c.params))a.searchParams.append(b,d);c.url=a}"number"==typeof a.maxContentLength&&(c.size=a.maxContentLength),"number"==typeof a.maxRedirects&&(c.follow=a.maxRedirects);let e="string"==typeof c.data||c.data instanceof ArrayBuffer||c.data instanceof Blob||globalThis.File&&c.data instanceof File||c.data instanceof FormData||c.data instanceof j.Readable||c.data instanceof ReadableStream||c.data instanceof String||c.data instanceof URLSearchParams||ArrayBuffer.isView(c.data)||["Blob","File","FormData"].includes(c.data?.constructor?.name||"");if(c.multipart?.length){let a=await l();b.set("content-type",`multipart/related; boundary=${a}`),c.body=j.Readable.from(this.getMultipartRequest(c.multipart,a))}else e?c.body=c.data:"object"==typeof c.data?"application/x-www-form-urlencoded"===b.get("Content-Type")?c.body=c.paramsSerializer?c.paramsSerializer(c.data):new URLSearchParams(c.data):(b.has("content-type")||b.set("content-type","application/json"),c.body=JSON.stringify(c.data)):c.data&&(c.body=c.data);c.validateStatus=c.validateStatus||this.validateStatus,c.responseType=c.responseType||"unknown",b.has("accept")||"json"!==c.responseType||b.set("accept","application/json");let i=c.proxy||process?.env?.HTTPS_PROXY||process?.env?.https_proxy||process?.env?.HTTP_PROXY||process?.env?.http_proxy;if(c.agent);else if(i&&this.#p(c.url,c.noProxy)){let a=await d.#q();this.agentCache.has(i)?c.agent=this.agentCache.get(i):(c.agent=new a(i,{cert:c.cert,key:c.key}),this.agentCache.set(i,c.agent))}else c.cert&&c.key&&(this.agentCache.has(c.key)?c.agent=this.agentCache.get(c.key):(c.agent=new g.Agent({cert:c.cert,key:c.key}),this.agentCache.set(c.key,c.agent)));return"function"!=typeof c.errorRedactor&&!1!==c.errorRedactor&&(c.errorRedactor=h.defaultErrorRedactor),!c.body||"duplex"in c||(c.duplex="half"),this.#o(c),Object.assign(c,{headers:b,url:c.url instanceof URL?c.url:new URL(c.url)})}#o(a){if(a.timeout){let b=AbortSignal.timeout(a.timeout);a.signal&&!a.signal.aborted?a.signal=AbortSignal.any([a.signal,b]):a.signal=b}}validateStatus(a){return a>=200&&a<300}async getResponseDataFromContentType(a){let b=a.headers.get("Content-Type");if(null===b)return a.text();if((b=b.toLowerCase()).includes("application/json")){let b=await a.text();try{b=JSON.parse(b)}catch{}return b}return b.match(/^text\//)?a.text():a.blob()}async *getMultipartRequest(a,b){let c=`--${b}--`;for(let c of a){let a=c.headers.get("Content-Type")||"application/octet-stream",d=`--${b}\r
Content-Type: ${a}\r
\r
`;yield d,"string"==typeof c.content?yield c.content:yield*c.content,yield"\r\n"}yield c}static #r;static #s;static async #q(){return this.#r||=(await c.e(720).then(c.t.bind(c,8720,23))).HttpsProxyAgent,this.#r}static async #n(){let a="undefined"!=typeof window&&!!window;return this.#s||=a?window.fetch:(await c.e(297).then(c.bind(c,8297))).default,this.#s}static mergeHeaders(a,...b){for(let c of(a=a instanceof Headers?a:new Headers(a),b))(c instanceof Headers?c:new Headers(c)).forEach((b,c)=>{"set-cookie"===c?a.append(c,b):a.set(c,b)});return a}}b.Gaxios=m,d=m},4075:a=>{"use strict";a.exports=require("zlib")},4251:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.PluggableAuthHandler=b.ExecutableError=void 0;let d=c(4038),e=c(9646),f=c(9021);class g extends Error{code;constructor(a,b){super(`The executable failed with exit code: ${b} and error message: ${a}.`),this.code=b,Object.setPrototypeOf(this,new.target.prototype)}}b.ExecutableError=g;class h{commandComponents;timeoutMillis;outputFile;constructor(a){if(!a.command)throw Error("No command provided.");if(this.commandComponents=h.parseCommand(a.command),this.timeoutMillis=a.timeoutMillis,!this.timeoutMillis)throw Error("No timeoutMillis provided.");this.outputFile=a.outputFile}retrieveResponseFromExecutable(a){return new Promise((b,c)=>{let f=e.spawn(this.commandComponents[0],this.commandComponents.slice(1),{env:{...process.env,...Object.fromEntries(a)}}),h="";f.stdout.on("data",a=>{h+=a}),f.stderr.on("data",a=>{h+=a});let i=setTimeout(()=>(f.removeAllListeners(),f.kill(),c(Error("The executable failed to finish within the timeout specified."))),this.timeoutMillis);f.on("close",a=>{if(clearTimeout(i),0!==a)return c(new g(h,a.toString()));try{let a=JSON.parse(h),c=new d.ExecutableResponse(a);return b(c)}catch(a){if(a instanceof d.ExecutableResponseError)return c(a);return c(new d.ExecutableResponseError(`The executable returned an invalid response: ${h}`))}})})}async retrieveCachedResponse(){let a;if(!this.outputFile||0===this.outputFile.length)return;try{a=await f.promises.realpath(this.outputFile)}catch{return}if(!(await f.promises.lstat(a)).isFile())return;let b=await f.promises.readFile(a,{encoding:"utf8"});if(""!==b)try{let a=JSON.parse(b);if(new d.ExecutableResponse(a).isValid())return new d.ExecutableResponse(a);return}catch(a){if(a instanceof d.ExecutableResponseError)throw a;throw new d.ExecutableResponseError(`The output file contained an invalid response: ${b}`)}}static parseCommand(a){let b=a.match(/(?:[^\s"]+|"[^"]*")+/g);if(!b)throw Error(`Provided command: "${a}" could not be parsed.`);for(let a=0;a<b.length;a++)'"'===b[a][0]&&'"'===b[a].slice(-1)&&(b[a]=b[a].slice(1,-1));return b}}b.PluggableAuthHandler=h},4312:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GCE_LINUX_BIOS_PATHS=void 0,b.isGoogleCloudServerless=g,b.isGoogleComputeEngineLinux=h,b.isGoogleComputeEngineMACAddress=i,b.isGoogleComputeEngine=j,b.detectGCPResidency=function(){return g()||j()};let d=c(9021),e=c(1820);b.GCE_LINUX_BIOS_PATHS={BIOS_DATE:"/sys/class/dmi/id/bios_date",BIOS_VENDOR:"/sys/class/dmi/id/bios_vendor"};let f=/^42:01/;function g(){return!!(process.env.CLOUD_RUN_JOB||process.env.FUNCTION_NAME||process.env.K_SERVICE)}function h(){if("linux"!==(0,e.platform)())return!1;try{(0,d.statSync)(b.GCE_LINUX_BIOS_PATHS.BIOS_DATE);let a=(0,d.readFileSync)(b.GCE_LINUX_BIOS_PATHS.BIOS_VENDOR,"utf8");return/Google/.test(a)}catch{return!1}}function i(){for(let a of Object.values((0,e.networkInterfaces)()))if(a){for(let{mac:b}of a)if(f.test(b))return!0}return!1}function j(){return h()||i()}},4420:(a,b,c)=>{"use strict";a.exports={pkg:c(6300)}},4442:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ExternalAccountClient=void 0;let d=c(1777),e=c(9831),f=c(1936),g=c(4972);class h{constructor(){throw Error("ExternalAccountClients should be initialized via: ExternalAccountClient.fromJSON(), directly via explicit constructors, eg. new AwsClient(options), new IdentityPoolClient(options), newPluggableAuthClientOptions, or via new GoogleAuth(options).getClient()")}static fromJSON(a){return a&&a.type===d.EXTERNAL_ACCOUNT_TYPE?a.credential_source?.environment_id?new f.AwsClient(a):a.credential_source?.executable?new g.PluggableAuthClient(a):new e.IdentityPoolClient(a):null}}b.ExternalAccountClient=h},4452:(a,b,c)=>{"use strict";let{Writable:d}=c(7910),e=c(8071),{BINARY_TYPES:f,EMPTY_BUFFER:g,kStatusCode:h,kWebSocket:i}=c(1010),{concat:j,toArrayBuffer:k,unmask:l}=c(6078),{isValidStatusCode:m,isValidUTF8:n}=c(3770),o=Buffer[Symbol.species];class p extends d{constructor(a={}){super(),this._allowSynchronousEvents=void 0===a.allowSynchronousEvents||a.allowSynchronousEvents,this._binaryType=a.binaryType||f[0],this._extensions=a.extensions||{},this._isServer=!!a.isServer,this._maxPayload=0|a.maxPayload,this._skipUTF8Validation=!!a.skipUTF8Validation,this[i]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(a,b,c){if(8===this._opcode&&0==this._state)return c();this._bufferedBytes+=a.length,this._buffers.push(a),this.startLoop(c)}consume(a){if(this._bufferedBytes-=a,a===this._buffers[0].length)return this._buffers.shift();if(a<this._buffers[0].length){let b=this._buffers[0];return this._buffers[0]=new o(b.buffer,b.byteOffset+a,b.length-a),new o(b.buffer,b.byteOffset,a)}let b=Buffer.allocUnsafe(a);do{let c=this._buffers[0],d=b.length-a;a>=c.length?b.set(this._buffers.shift(),d):(b.set(new Uint8Array(c.buffer,c.byteOffset,a),d),this._buffers[0]=new o(c.buffer,c.byteOffset+a,c.length-a)),a-=c.length}while(a>0);return b}startLoop(a){this._loop=!0;do switch(this._state){case 0:this.getInfo(a);break;case 1:this.getPayloadLength16(a);break;case 2:this.getPayloadLength64(a);break;case 3:this.getMask();break;case 4:this.getData(a);break;case 5:case 6:this._loop=!1;return}while(this._loop);this._errored||a()}getInfo(a){if(this._bufferedBytes<2){this._loop=!1;return}let b=this.consume(2);if((48&b[0])!=0)return void a(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"));let c=(64&b[0])==64;if(c&&!this._extensions[e.extensionName])return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._fin=(128&b[0])==128,this._opcode=15&b[0],this._payloadLength=127&b[1],0===this._opcode){if(c)return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(!this._fragmented)return void a(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"));this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return void a(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));this._compressed=c}else{if(!(this._opcode>7)||!(this._opcode<11))return void a(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"));if(!this._fin)return void a(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"));if(c)return void a(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"));if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength)return void a(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=(128&b[1])==128,this._isServer){if(!this._masked)return void a(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}else if(this._masked)return void a(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"));126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(a)}getPayloadLength16(a){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(a)}getPayloadLength64(a){if(this._bufferedBytes<8){this._loop=!1;return}let b=this.consume(8),c=b.readUInt32BE(0);c>2097151?a(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=0x100000000*c+b.readUInt32BE(4),this.haveLength(a))}haveLength(a){this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)?a(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH")):this._masked?this._state=3:this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(a){let b=g;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}b=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!=0&&l(b,this._mask)}if(this._opcode>7)return void this.controlMessage(b,a);if(this._compressed){this._state=5,this.decompress(b,a);return}b.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(b)),this.dataMessage(a)}decompress(a,b){this._extensions[e.extensionName].decompress(a,this._fin,(a,c)=>{if(a)return b(a);if(c.length){if(this._messageLength+=c.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return void b(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(c)}this.dataMessage(b),0===this._state&&this.startLoop(b)})}dataMessage(a){if(!this._fin){this._state=0;return}let b=this._messageLength,c=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let d;d="nodebuffer"===this._binaryType?j(c,b):"arraybuffer"===this._binaryType?k(j(c,b)):"blob"===this._binaryType?new Blob(c):c,this._allowSynchronousEvents?(this.emit("message",d,!0),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",d,!0),this._state=0,this.startLoop(a)}))}else{let d=j(c,b);if(!this._skipUTF8Validation&&!n(d))return void a(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));5===this._state||this._allowSynchronousEvents?(this.emit("message",d,!1),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",d,!1),this._state=0,this.startLoop(a)}))}}controlMessage(a,b){if(8===this._opcode){if(0===a.length)this._loop=!1,this.emit("conclude",1005,g),this.end();else{let c=a.readUInt16BE(0);if(!m(c))return void b(this.createError(RangeError,`invalid status code ${c}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE"));let d=new o(a.buffer,a.byteOffset+2,a.length-2);if(!this._skipUTF8Validation&&!n(d))return void b(this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8"));this._loop=!1,this.emit("conclude",c,d),this.end()}this._state=0;return}this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",a),this._state=0):(this._state=6,setImmediate(()=>{this.emit(9===this._opcode?"ping":"pong",a),this._state=0,this.startLoop(b)}))}createError(a,b,c,d,e){this._loop=!1,this._errored=!0;let f=new a(c?`Invalid WebSocket frame: ${b}`:b);return Error.captureStackTrace(f,this.createError),f.code=e,f[h]=d,f}}a.exports=p},4458:function(a,b,c){var d;!function(e){"use strict";var f,g=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,h=Math.ceil,i=Math.floor,j="[BigNumber Error] ",k=j+"Number primitive has more than 15 significant digits: ",l=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13];function m(a){var b=0|a;return a>0||a===b?b:b-1}function n(a){for(var b,c,d=1,e=a.length,f=a[0]+"";d<e;){for(c=14-(b=a[d++]+"").length;c--;b="0"+b);f+=b}for(e=f.length;48===f.charCodeAt(--e););return f.slice(0,e+1||1)}function o(a,b){var c,d,e=a.c,f=b.c,g=a.s,h=b.s,i=a.e,j=b.e;if(!g||!h)return null;if(c=e&&!e[0],d=f&&!f[0],c||d)return c?d?0:-h:g;if(g!=h)return g;if(c=g<0,d=i==j,!e||!f)return d?0:!e^c?1:-1;if(!d)return i>j^c?1:-1;for(g=0,h=(i=e.length)<(j=f.length)?i:j;g<h;g++)if(e[g]!=f[g])return e[g]>f[g]^c?1:-1;return i==j?0:i>j^c?1:-1}function p(a,b,c,d){if(a<b||a>c||a!==i(a))throw Error(j+(d||"Argument")+("number"==typeof a?a<b||a>c?" out of range: ":" not an integer: ":" not a primitive number: ")+String(a))}function q(a){var b=a.c.length-1;return m(a.e/14)==b&&a.c[b]%2!=0}function r(a,b){return(a.length>1?a.charAt(0)+"."+a.slice(1):a)+(b<0?"e":"e+")+b}function s(a,b,c){var d,e;if(b<0){for(e=c+".";++b;e+=c);a=e+a}else if(d=a.length,++b>d){for(e=c,b-=d;--b;e+=c);a+=e}else b<d&&(a=a.slice(0,b)+"."+a.slice(b));return a}(f=function a(b){var c,d,e,f,t,u,v,w,x,y=M.prototype={constructor:M,toString:null,valueOf:null},z=new M(1),A=20,B=4,C=-7,D=21,E=-1e7,F=1e7,G=!1,H=1,I=0,J={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},K="0123456789abcdefghijklmnopqrstuvwxyz",L=!0;function M(a,b){var c,d,e,f,h,j,l,m,n=this;if(!(n instanceof M))return new M(a,b);if(null==b){if(a&&!0===a._isBigNumber){n.s=a.s,!a.c||a.e>F?n.c=n.e=null:a.e<E?n.c=[n.e=0]:(n.e=a.e,n.c=a.c.slice());return}if((j="number"==typeof a)&&0*a==0){if(n.s=1/a<0?(a=-a,-1):1,a===~~a){for(f=0,h=a;h>=10;h/=10,f++);f>F?n.c=n.e=null:(n.e=f,n.c=[a]);return}m=String(a)}else{if(!g.test(m=String(a)))return x(n,m,j);n.s=45==m.charCodeAt(0)?(m=m.slice(1),-1):1}(f=m.indexOf("."))>-1&&(m=m.replace(".","")),(h=m.search(/e/i))>0?(f<0&&(f=h),f+=+m.slice(h+1),m=m.substring(0,h)):f<0&&(f=m.length)}else{if(p(b,2,K.length,"Base"),10==b&&L)return Q(n=new M(a),A+n.e+1,B);if(m=String(a),j="number"==typeof a){if(0*a!=0)return x(n,m,j,b);if(n.s=1/a<0?(m=m.slice(1),-1):1,M.DEBUG&&m.replace(/^0\.0*|\./,"").length>15)throw Error(k+a)}else n.s=45===m.charCodeAt(0)?(m=m.slice(1),-1):1;for(c=K.slice(0,b),f=h=0,l=m.length;h<l;h++)if(0>c.indexOf(d=m.charAt(h))){if("."==d){if(h>f){f=l;continue}}else if(!e&&(m==m.toUpperCase()&&(m=m.toLowerCase())||m==m.toLowerCase()&&(m=m.toUpperCase()))){e=!0,h=-1,f=0;continue}return x(n,String(a),j,b)}j=!1,(f=(m=w(m,b,10,n.s)).indexOf("."))>-1?m=m.replace(".",""):f=m.length}for(h=0;48===m.charCodeAt(h);h++);for(l=m.length;48===m.charCodeAt(--l););if(m=m.slice(h,++l)){if(l-=h,j&&M.DEBUG&&l>15&&(a>0x1fffffffffffff||a!==i(a)))throw Error(k+n.s*a);if((f=f-h-1)>F)n.c=n.e=null;else if(f<E)n.c=[n.e=0];else{if(n.e=f,n.c=[],h=(f+1)%14,f<0&&(h+=14),h<l){for(h&&n.c.push(+m.slice(0,h)),l-=14;h<l;)n.c.push(+m.slice(h,h+=14));h=14-(m=m.slice(h)).length}else h-=l;for(;h--;m+="0");n.c.push(+m)}}else n.c=[n.e=0]}function N(a,b,c,d){var e,f,g,h,i;if(null==c?c=B:p(c,0,8),!a.c)return a.toString();if(e=a.c[0],g=a.e,null==b)i=n(a.c),i=1==d||2==d&&(g<=C||g>=D)?r(i,g):s(i,g,"0");else if(f=(a=Q(new M(a),b,c)).e,h=(i=n(a.c)).length,1==d||2==d&&(b<=f||f<=C)){for(;h<b;i+="0",h++);i=r(i,f)}else if(b-=g+(2===d&&f>g),i=s(i,f,"0"),f+1>h){if(--b>0)for(i+=".";b--;i+="0");}else if((b+=f-h)>0)for(f+1==h&&(i+=".");b--;i+="0");return a.s<0&&e?"-"+i:i}function O(a,b){for(var c,d,e=1,f=new M(a[0]);e<a.length;e++)(d=new M(a[e])).s&&(c=o(f,d))!==b&&(0!==c||f.s!==b)||(f=d);return f}function P(a,b,c){for(var d=1,e=b.length;!b[--e];b.pop());for(e=b[0];e>=10;e/=10,d++);return(c=d+14*c-1)>F?a.c=a.e=null:c<E?a.c=[a.e=0]:(a.e=c,a.c=b),a}function Q(a,b,c,d){var e,f,g,j,k,m,n,o=a.c;if(o){a:{for(e=1,j=o[0];j>=10;j/=10,e++);if((f=b-e)<0)f+=14,g=b,n=i((k=o[m=0])/l[e-g-1]%10);else if((m=h((f+1)/14))>=o.length)if(d){for(;o.length<=m;o.push(0));k=n=0,e=1,f%=14,g=f-14+1}else break a;else{for(e=1,k=j=o[m];j>=10;j/=10,e++);f%=14,n=(g=f-14+e)<0?0:i(k/l[e-g-1]%10)}if(d=d||b<0||null!=o[m+1]||(g<0?k:k%l[e-g-1]),d=c<4?(n||d)&&(0==c||c==(a.s<0?3:2)):n>5||5==n&&(4==c||d||6==c&&(f>0?g>0?k/l[e-g]:0:o[m-1])%10&1||c==(a.s<0?8:7)),b<1||!o[0])return o.length=0,d?(b-=a.e+1,o[0]=l[(14-b%14)%14],a.e=-b||0):o[0]=a.e=0,a;if(0==f?(o.length=m,j=1,m--):(o.length=m+1,j=l[14-f],o[m]=g>0?i(k/l[e-g]%l[g])*j:0),d)for(;;)if(0==m){for(f=1,g=o[0];g>=10;g/=10,f++);for(g=o[0]+=j,j=1;g>=10;g/=10,j++);f!=j&&(a.e++,1e14==o[0]&&(o[0]=1));break}else{if(o[m]+=j,1e14!=o[m])break;o[m--]=0,j=1}for(f=o.length;0===o[--f];o.pop());}a.e>F?a.c=a.e=null:a.e<E&&(a.c=[a.e=0])}return a}function R(a){var b,c=a.e;return null===c?a.toString():(b=n(a.c),b=c<=C||c>=D?r(b,c):s(b,c,"0"),a.s<0?"-"+b:b)}return M.clone=a,M.ROUND_UP=0,M.ROUND_DOWN=1,M.ROUND_CEIL=2,M.ROUND_FLOOR=3,M.ROUND_HALF_UP=4,M.ROUND_HALF_DOWN=5,M.ROUND_HALF_EVEN=6,M.ROUND_HALF_CEIL=7,M.ROUND_HALF_FLOOR=8,M.EUCLID=9,M.config=M.set=function(a){var b,c;if(null!=a)if("object"==typeof a){if(a.hasOwnProperty(b="DECIMAL_PLACES")&&(p(c=a[b],0,1e9,b),A=c),a.hasOwnProperty(b="ROUNDING_MODE")&&(p(c=a[b],0,8,b),B=c),a.hasOwnProperty(b="EXPONENTIAL_AT")&&((c=a[b])&&c.pop?(p(c[0],-1e9,0,b),p(c[1],0,1e9,b),C=c[0],D=c[1]):(p(c,-1e9,1e9,b),C=-(D=c<0?-c:c))),a.hasOwnProperty(b="RANGE"))if((c=a[b])&&c.pop)p(c[0],-1e9,-1,b),p(c[1],1,1e9,b),E=c[0],F=c[1];else if(p(c,-1e9,1e9,b),c)E=-(F=c<0?-c:c);else throw Error(j+b+" cannot be zero: "+c);if(a.hasOwnProperty(b="CRYPTO"))if(!!(c=a[b])===c)if(c)if("undefined"!=typeof crypto&&crypto&&(crypto.getRandomValues||crypto.randomBytes))G=c;else throw G=!c,Error(j+"crypto unavailable");else G=c;else throw Error(j+b+" not true or false: "+c);if(a.hasOwnProperty(b="MODULO_MODE")&&(p(c=a[b],0,9,b),H=c),a.hasOwnProperty(b="POW_PRECISION")&&(p(c=a[b],0,1e9,b),I=c),a.hasOwnProperty(b="FORMAT"))if("object"==typeof(c=a[b]))J=c;else throw Error(j+b+" not an object: "+c);if(a.hasOwnProperty(b="ALPHABET")){if("string"!=typeof(c=a[b])||/^.?$|[+\-.\s]|(.).*\1/.test(c))throw Error(j+b+" invalid: "+c);L="0123456789"==c.slice(0,10),K=c}}else throw Error(j+"Object expected: "+a);return{DECIMAL_PLACES:A,ROUNDING_MODE:B,EXPONENTIAL_AT:[C,D],RANGE:[E,F],CRYPTO:G,MODULO_MODE:H,POW_PRECISION:I,FORMAT:J,ALPHABET:K}},M.isBigNumber=function(a){if(!a||!0!==a._isBigNumber)return!1;if(!M.DEBUG)return!0;var b,c,d=a.c,e=a.e,f=a.s;a:if("[object Array]"==({}).toString.call(d)){if((1===f||-1===f)&&e>=-1e9&&e<=1e9&&e===i(e)){if(0===d[0]){if(0===e&&1===d.length)return!0;break a}if((b=(e+1)%14)<1&&(b+=14),String(d[0]).length==b){for(b=0;b<d.length;b++)if((c=d[b])<0||c>=1e14||c!==i(c))break a;if(0!==c)return!0}}}else if(null===d&&null===e&&(null===f||1===f||-1===f))return!0;throw Error(j+"Invalid BigNumber: "+a)},M.maximum=M.max=function(){return O(arguments,-1)},M.minimum=M.min=function(){return O(arguments,1)},c=0x20000000000000*Math.random()&2097151?function(){return i(0x20000000000000*Math.random())}:function(){return(0x40000000*Math.random()|0)*8388608+(8388608*Math.random()|0)},M.random=function(a){var b,d,e,f,g,k=0,m=[],n=new M(z);if(null==a?a=A:p(a,0,1e9),f=h(a/14),G)if(crypto.getRandomValues){for(b=crypto.getRandomValues(new Uint32Array(f*=2));k<f;)(g=131072*b[k]+(b[k+1]>>>11))>=9e15?(d=crypto.getRandomValues(new Uint32Array(2)),b[k]=d[0],b[k+1]=d[1]):(m.push(g%1e14),k+=2);k=f/2}else if(crypto.randomBytes){for(b=crypto.randomBytes(f*=7);k<f;)(g=(31&b[k])*0x1000000000000+0x10000000000*b[k+1]+0x100000000*b[k+2]+0x1000000*b[k+3]+(b[k+4]<<16)+(b[k+5]<<8)+b[k+6])>=9e15?crypto.randomBytes(7).copy(b,k):(m.push(g%1e14),k+=7);k=f/7}else throw G=!1,Error(j+"crypto unavailable");if(!G)for(;k<f;)(g=c())<9e15&&(m[k++]=g%1e14);for(f=m[--k],a%=14,f&&a&&(g=l[14-a],m[k]=i(f/g)*g);0===m[k];m.pop(),k--);if(k<0)m=[e=0];else{for(e=-1;0===m[0];m.splice(0,1),e-=14);for(k=1,g=m[0];g>=10;g/=10,k++);k<14&&(e-=14-k)}return n.e=e,n.c=m,n},M.sum=function(){for(var a=1,b=arguments,c=new M(b[0]);a<b.length;)c=c.plus(b[a++]);return c},w=function(){var a="0123456789";function b(a,b,c,d){for(var e,f,g=[0],h=0,i=a.length;h<i;){for(f=g.length;f--;g[f]*=b);for(g[0]+=d.indexOf(a.charAt(h++)),e=0;e<g.length;e++)g[e]>c-1&&(null==g[e+1]&&(g[e+1]=0),g[e+1]+=g[e]/c|0,g[e]%=c)}return g.reverse()}return function(c,d,e,f,g){var h,i,j,k,l,m,o,p,q=c.indexOf("."),r=A,t=B;for(q>=0&&(k=I,I=0,c=c.replace(".",""),m=(p=new M(d)).pow(c.length-q),I=k,p.c=b(s(n(m.c),m.e,"0"),10,e,a),p.e=p.c.length),j=k=(o=b(c,d,e,g?(h=K,a):(h=a,K))).length;0==o[--k];o.pop());if(!o[0])return h.charAt(0);if(q<0?--j:(m.c=o,m.e=j,m.s=f,o=(m=v(m,p,r,t,e)).c,l=m.r,j=m.e),q=o[i=j+r+1],k=e/2,l=l||i<0||null!=o[i+1],l=t<4?(null!=q||l)&&(0==t||t==(m.s<0?3:2)):q>k||q==k&&(4==t||l||6==t&&1&o[i-1]||t==(m.s<0?8:7)),i<1||!o[0])c=l?s(h.charAt(1),-r,h.charAt(0)):h.charAt(0);else{if(o.length=i,l)for(--e;++o[--i]>e;)o[i]=0,i||(++j,o=[1].concat(o));for(k=o.length;!o[--k];);for(q=0,c="";q<=k;c+=h.charAt(o[q++]));c=s(c,j,h.charAt(0))}return c}}(),v=function(){function a(a,b,c){var d,e,f,g,h=0,i=a.length,j=b%1e7,k=b/1e7|0;for(a=a.slice();i--;)d=k*(f=a[i]%1e7)+(g=a[i]/1e7|0)*j,h=((e=j*f+d%1e7*1e7+h)/c|0)+(d/1e7|0)+k*g,a[i]=e%c;return h&&(a=[h].concat(a)),a}function b(a,b,c,d){var e,f;if(c!=d)f=c>d?1:-1;else for(e=f=0;e<c;e++)if(a[e]!=b[e]){f=a[e]>b[e]?1:-1;break}return f}function c(a,b,c,d){for(var e=0;c--;)a[c]-=e,e=+(a[c]<b[c]),a[c]=e*d+a[c]-b[c];for(;!a[0]&&a.length>1;a.splice(0,1));}return function(d,e,f,g,h){var j,k,l,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=d.s==e.s?1:-1,C=d.c,D=e.c;if(!C||!C[0]||!D||!D[0])return new M(!d.s||!e.s||(C?D&&C[0]==D[0]:!D)?NaN:C&&0==C[0]||!D?0*B:B/0);for(s=(r=new M(B)).c=[],B=f+(k=d.e-e.e)+1,h||(h=1e14,k=m(d.e/14)-m(e.e/14),B=B/14|0),l=0;D[l]==(C[l]||0);l++);if(D[l]>(C[l]||0)&&k--,B<0)s.push(1),n=!0;else{for(x=C.length,z=D.length,l=0,B+=2,(o=i(h/(D[0]+1)))>1&&(D=a(D,o,h),C=a(C,o,h),z=D.length,x=C.length),w=z,u=(t=C.slice(0,z)).length;u<z;t[u++]=0);A=[0].concat(A=D.slice()),y=D[0],D[1]>=h/2&&y++;do{if(o=0,(j=b(D,t,z,u))<0){if(v=t[0],z!=u&&(v=v*h+(t[1]||0)),(o=i(v/y))>1)for(o>=h&&(o=h-1),q=(p=a(D,o,h)).length,u=t.length;1==b(p,t,q,u);)o--,c(p,z<q?A:D,q,h),q=p.length,j=1;else 0==o&&(j=o=1),q=(p=D.slice()).length;if(q<u&&(p=[0].concat(p)),c(t,p,u,h),u=t.length,-1==j)for(;1>b(D,t,z,u);)o++,c(t,z<u?A:D,u,h),u=t.length}else 0===j&&(o++,t=[0]);s[l++]=o,t[0]?t[u++]=C[w]||0:(t=[C[w]],u=1)}while((w++<x||null!=t[0])&&B--);n=null!=t[0],s[0]||s.splice(0,1)}if(1e14==h){for(l=1,B=s[0];B>=10;B/=10,l++);Q(r,f+(r.e=l+14*k-1)+1,g,n)}else r.e=k,r.r=+n;return r}}(),d=/^(-?)0([xbo])(?=\w[\w.]*$)/i,e=/^([^.]+)\.$/,f=/^\.([^.]+)$/,t=/^-?(Infinity|NaN)$/,u=/^\s*\+(?=[\w.])|^\s+|\s+$/g,x=function(a,b,c,g){var h,i=c?b:b.replace(u,"");if(t.test(i))a.s=isNaN(i)?null:i<0?-1:1;else{if(!c&&(i=i.replace(d,function(a,b,c){return h="x"==(c=c.toLowerCase())?16:"b"==c?2:8,g&&g!=h?a:b}),g&&(h=g,i=i.replace(e,"$1").replace(f,"0.$1")),b!=i))return new M(i,h);if(M.DEBUG)throw Error(j+"Not a"+(g?" base "+g:"")+" number: "+b);a.s=null}a.c=a.e=null},y.absoluteValue=y.abs=function(){var a=new M(this);return a.s<0&&(a.s=1),a},y.comparedTo=function(a,b){return o(this,new M(a,b))},y.decimalPlaces=y.dp=function(a,b){var c,d,e;if(null!=a)return p(a,0,1e9),null==b?b=B:p(b,0,8),Q(new M(this),a+this.e+1,b);if(!(c=this.c))return null;if(d=((e=c.length-1)-m(this.e/14))*14,e=c[e])for(;e%10==0;e/=10,d--);return d<0&&(d=0),d},y.dividedBy=y.div=function(a,b){return v(this,new M(a,b),A,B)},y.dividedToIntegerBy=y.idiv=function(a,b){return v(this,new M(a,b),0,1)},y.exponentiatedBy=y.pow=function(a,b){var c,d,e,f,g,k,l,m,n,o=this;if((a=new M(a)).c&&!a.isInteger())throw Error(j+"Exponent not an integer: "+R(a));if(null!=b&&(b=new M(b)),k=a.e>14,!o.c||!o.c[0]||1==o.c[0]&&!o.e&&1==o.c.length||!a.c||!a.c[0])return n=new M(Math.pow(+R(o),k?a.s*(2-q(a)):+R(a))),b?n.mod(b):n;if(l=a.s<0,b){if(b.c?!b.c[0]:!b.s)return new M(NaN);(d=!l&&o.isInteger()&&b.isInteger())&&(o=o.mod(b))}else{if(a.e>9&&(o.e>0||o.e<-1||(0==o.e?o.c[0]>1||k&&o.c[1]>=24e7:o.c[0]<8e13||k&&o.c[0]<=9999975e7)))return f=o.s<0&&q(a)?-0:0,o.e>-1&&(f=1/f),new M(l?1/f:f);I&&(f=h(I/14+2))}for(k?(c=new M(.5),l&&(a.s=1),m=q(a)):m=(e=Math.abs(+R(a)))%2,n=new M(z);;){if(m){if(!(n=n.times(o)).c)break;f?n.c.length>f&&(n.c.length=f):d&&(n=n.mod(b))}if(e){if(0===(e=i(e/2)))break;m=e%2}else if(Q(a=a.times(c),a.e+1,1),a.e>14)m=q(a);else{if(0==(e=+R(a)))break;m=e%2}o=o.times(o),f?o.c&&o.c.length>f&&(o.c.length=f):d&&(o=o.mod(b))}return d?n:(l&&(n=z.div(n)),b?n.mod(b):f?Q(n,I,B,g):n)},y.integerValue=function(a){var b=new M(this);return null==a?a=B:p(a,0,8),Q(b,b.e+1,a)},y.isEqualTo=y.eq=function(a,b){return 0===o(this,new M(a,b))},y.isFinite=function(){return!!this.c},y.isGreaterThan=y.gt=function(a,b){return o(this,new M(a,b))>0},y.isGreaterThanOrEqualTo=y.gte=function(a,b){return 1===(b=o(this,new M(a,b)))||0===b},y.isInteger=function(){return!!this.c&&m(this.e/14)>this.c.length-2},y.isLessThan=y.lt=function(a,b){return 0>o(this,new M(a,b))},y.isLessThanOrEqualTo=y.lte=function(a,b){return -1===(b=o(this,new M(a,b)))||0===b},y.isNaN=function(){return!this.s},y.isNegative=function(){return this.s<0},y.isPositive=function(){return this.s>0},y.isZero=function(){return!!this.c&&0==this.c[0]},y.minus=function(a,b){var c,d,e,f,g=this.s;if(b=(a=new M(a,b)).s,!g||!b)return new M(NaN);if(g!=b)return a.s=-b,this.plus(a);var h=this.e/14,i=a.e/14,j=this.c,k=a.c;if(!h||!i){if(!j||!k)return j?(a.s=-b,a):new M(k?this:NaN);if(!j[0]||!k[0])return k[0]?(a.s=-b,a):new M(j[0]?this:3==B?-0:0)}if(h=m(h),i=m(i),j=j.slice(),g=h-i){for((f=g<0)?(g=-g,e=j):(i=h,e=k),e.reverse(),b=g;b--;e.push(0));e.reverse()}else for(d=(f=(g=j.length)<(b=k.length))?g:b,g=b=0;b<d;b++)if(j[b]!=k[b]){f=j[b]<k[b];break}if(f&&(e=j,j=k,k=e,a.s=-a.s),(b=(d=k.length)-(c=j.length))>0)for(;b--;j[c++]=0);for(b=1e14-1;d>g;){if(j[--d]<k[d]){for(c=d;c&&!j[--c];j[c]=b);--j[c],j[d]+=1e14}j[d]-=k[d]}for(;0==j[0];j.splice(0,1),--i);return j[0]?P(a,j,i):(a.s=3==B?-1:1,a.c=[a.e=0],a)},y.modulo=y.mod=function(a,b){var c,d;return(a=new M(a,b),this.c&&a.s&&(!a.c||a.c[0]))?a.c&&(!this.c||this.c[0])?(9==H?(d=a.s,a.s=1,c=v(this,a,0,3),a.s=d,c.s*=d):c=v(this,a,0,H),(a=this.minus(c.times(a))).c[0]||1!=H||(a.s=this.s),a):new M(this):new M(NaN)},y.multipliedBy=y.times=function(a,b){var c,d,e,f,g,h,i,j,k,l,n,o,p,q=this.c,r=(a=new M(a,b)).c;if(!q||!r||!q[0]||!r[0])return this.s&&a.s&&(!q||q[0]||r)&&(!r||r[0]||q)?(a.s*=this.s,q&&r?(a.c=[0],a.e=0):a.c=a.e=null):a.c=a.e=a.s=null,a;for(d=m(this.e/14)+m(a.e/14),a.s*=this.s,(i=q.length)<(l=r.length)&&(p=q,q=r,r=p,e=i,i=l,l=e),e=i+l,p=[];e--;p.push(0));for(e=l;--e>=0;){for(c=0,n=r[e]%1e7,o=r[e]/1e7|0,f=e+(g=i);f>e;)h=o*(j=q[--g]%1e7)+(k=q[g]/1e7|0)*n,c=((j=n*j+h%1e7*1e7+p[f]+c)/1e14|0)+(h/1e7|0)+o*k,p[f--]=j%1e14;p[f]=c}return c?++d:p.splice(0,1),P(a,p,d)},y.negated=function(){var a=new M(this);return a.s=-a.s||null,a},y.plus=function(a,b){var c,d=this.s;if(b=(a=new M(a,b)).s,!d||!b)return new M(NaN);if(d!=b)return a.s=-b,this.minus(a);var e=this.e/14,f=a.e/14,g=this.c,h=a.c;if(!e||!f){if(!g||!h)return new M(d/0);if(!g[0]||!h[0])return h[0]?a:new M(g[0]?this:0*d)}if(e=m(e),f=m(f),g=g.slice(),d=e-f){for(d>0?(f=e,c=h):(d=-d,c=g),c.reverse();d--;c.push(0));c.reverse()}for((d=g.length)-(b=h.length)<0&&(c=h,h=g,g=c,b=d),d=0;b;)d=(g[--b]=g[b]+h[b]+d)/1e14|0,g[b]=1e14===g[b]?0:g[b]%1e14;return d&&(g=[d].concat(g),++f),P(a,g,f)},y.precision=y.sd=function(a,b){var c,d,e;if(null!=a&&!!a!==a)return p(a,1,1e9),null==b?b=B:p(b,0,8),Q(new M(this),a,b);if(!(c=this.c))return null;if(d=14*(e=c.length-1)+1,e=c[e]){for(;e%10==0;e/=10,d--);for(e=c[0];e>=10;e/=10,d++);}return a&&this.e+1>d&&(d=this.e+1),d},y.shiftedBy=function(a){return p(a,-0x1fffffffffffff,0x1fffffffffffff),this.times("1e"+a)},y.squareRoot=y.sqrt=function(){var a,b,c,d,e,f=this.c,g=this.s,h=this.e,i=A+4,j=new M("0.5");if(1!==g||!f||!f[0])return new M(!g||g<0&&(!f||f[0])?NaN:f?this:1/0);if(0==(g=Math.sqrt(+R(this)))||g==1/0?(((b=n(f)).length+h)%2==0&&(b+="0"),g=Math.sqrt(+b),h=m((h+1)/2)-(h<0||h%2),c=new M(b=g==1/0?"5e"+h:(b=g.toExponential()).slice(0,b.indexOf("e")+1)+h)):c=new M(g+""),c.c[0]){for((g=(h=c.e)+i)<3&&(g=0);;)if(e=c,c=j.times(e.plus(v(this,e,i,1))),n(e.c).slice(0,g)===(b=n(c.c)).slice(0,g)){if(c.e<h&&--g,"9999"!=(b=b.slice(g-3,g+1))&&(d||"4999"!=b)){+b&&(+b.slice(1)||"5"!=b.charAt(0))||(Q(c,c.e+A+2,1),a=!c.times(c).eq(this));break}if(!d&&(Q(e,e.e+A+2,0),e.times(e).eq(this))){c=e;break}i+=4,g+=4,d=1}}return Q(c,c.e+A+1,B,a)},y.toExponential=function(a,b){return null!=a&&(p(a,0,1e9),a++),N(this,a,b,1)},y.toFixed=function(a,b){return null!=a&&(p(a,0,1e9),a=a+this.e+1),N(this,a,b)},y.toFormat=function(a,b,c){var d;if(null==c)null!=a&&b&&"object"==typeof b?(c=b,b=null):a&&"object"==typeof a?(c=a,a=b=null):c=J;else if("object"!=typeof c)throw Error(j+"Argument not an object: "+c);if(d=this.toFixed(a,b),this.c){var e,f=d.split("."),g=+c.groupSize,h=+c.secondaryGroupSize,i=c.groupSeparator||"",k=f[0],l=f[1],m=this.s<0,n=m?k.slice(1):k,o=n.length;if(h&&(e=g,g=h,h=e,o-=e),g>0&&o>0){for(e=o%g||g,k=n.substr(0,e);e<o;e+=g)k+=i+n.substr(e,g);h>0&&(k+=i+n.slice(e)),m&&(k="-"+k)}d=l?k+(c.decimalSeparator||"")+((h=+c.fractionGroupSize)?l.replace(RegExp("\\d{"+h+"}\\B","g"),"$&"+(c.fractionGroupSeparator||"")):l):k}return(c.prefix||"")+d+(c.suffix||"")},y.toFraction=function(a){var b,c,d,e,f,g,h,i,k,m,o,p,q=this.c;if(null!=a&&(!(h=new M(a)).isInteger()&&(h.c||1!==h.s)||h.lt(z)))throw Error(j+"Argument "+(h.isInteger()?"out of range: ":"not an integer: ")+R(h));if(!q)return new M(this);for(b=new M(z),k=c=new M(z),d=i=new M(z),p=n(q),f=b.e=p.length-this.e-1,b.c[0]=l[(g=f%14)<0?14+g:g],a=!a||h.comparedTo(b)>0?f>0?b:k:h,g=F,F=1/0,h=new M(p),i.c[0]=0;m=v(h,b,0,1),1!=(e=c.plus(m.times(d))).comparedTo(a);)c=d,d=e,k=i.plus(m.times(e=k)),i=e,b=h.minus(m.times(e=b)),h=e;return e=v(a.minus(c),d,0,1),i=i.plus(e.times(k)),c=c.plus(e.times(d)),i.s=k.s=this.s,f*=2,o=1>v(k,d,f,B).minus(this).abs().comparedTo(v(i,c,f,B).minus(this).abs())?[k,d]:[i,c],F=g,o},y.toNumber=function(){return+R(this)},y.toPrecision=function(a,b){return null!=a&&p(a,1,1e9),N(this,a,b,2)},y.toString=function(a){var b,c=this,d=c.s,e=c.e;return null===e?d?(b="Infinity",d<0&&(b="-"+b)):b="NaN":(null==a?b=e<=C||e>=D?r(n(c.c),e):s(n(c.c),e,"0"):10===a&&L?b=s(n((c=Q(new M(c),A+e+1,B)).c),c.e,"0"):(p(a,2,K.length,"Base"),b=w(s(n(c.c),e,"0"),10,a,d,!0)),d<0&&c.c[0]&&(b="-"+b)),b},y.valueOf=y.toJSON=function(){return R(this)},y._isBigNumber=!0,null!=b&&M.set(b),M}()).default=f.BigNumber=f,void 0===(d=(function(){return f}).call(b,c,b,a))||(a.exports=d)}(0)},4494:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(7943).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/jhon/Desktop/ALURA/fullstack/GabaritandoIA/src/app/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/jhon/Desktop/ALURA/fullstack/GabaritandoIA/src/app/page.tsx","default")},4560:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"MISSING_ROOT_TAGS_ERROR",{enumerable:!0,get:function(){return c}});let c="NEXT_MISSING_ROOT_TAGS";("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},4573:a=>{"use strict";a.exports=require("node:buffer")},4575:(a,b,c)=>{"use strict";let{tokenChars:d}=c(3770);a.exports={parse:function(a){let b=new Set,c=-1,e=-1,f=0;for(;f<a.length;f++){let g=a.charCodeAt(f);if(-1===e&&1===d[g])-1===c&&(c=f);else if(0!==f&&(32===g||9===g))-1===e&&-1!==c&&(e=f);else if(44===g){if(-1===c)throw SyntaxError(`Unexpected character at index ${f}`);-1===e&&(e=f);let d=a.slice(c,e);if(b.has(d))throw SyntaxError(`The "${d}" subprotocol is duplicated`);b.add(d),c=e=-1}else throw SyntaxError(`Unexpected character at index ${f}`)}if(-1===c||-1!==e)throw SyntaxError("Unexpected end of input");let g=a.slice(c,f);if(b.has(g))throw SyntaxError(`The "${g}" subprotocol is duplicated`);return b.add(g),b}}},4631:a=>{"use strict";a.exports=require("tls")},4708:a=>{"use strict";a.exports=require("node:https")},4735:a=>{"use strict";a.exports=require("events")},4747:(a,b,c)=>{var d=c(57).Buffer,e=c(386),f=c(8061),g=c(7910),h=c(1573),i=c(8354);function j(a,b){return d.from(a,b).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function k(a){var b,c,d,e=a.header,g=a.payload,k=a.secret||a.privateKey,l=a.encoding,m=f(e.alg),n=(b=(b=l)||"utf8",c=j(h(e),"binary"),d=j(h(g),b),i.format("%s.%s",c,d)),o=m.sign(n,k);return i.format("%s.%s",n,o)}function l(a){var b=a.secret;if(b=null==(b=null==b?a.privateKey:b)?a.key:b,!0===/^hs/i.test(a.header.alg)&&null==b)throw TypeError("secret must be a string or buffer or a KeyObject");var c=new e(b);this.readable=!0,this.header=a.header,this.encoding=a.encoding,this.secret=this.privateKey=this.key=c,this.payload=new e(a.payload),this.secret.once("close",(function(){!this.payload.writable&&this.readable&&this.sign()}).bind(this)),this.payload.once("close",(function(){!this.secret.writable&&this.readable&&this.sign()}).bind(this))}i.inherits(l,g),l.prototype.sign=function(){try{var a=k({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",a),this.emit("data",a),this.emit("end"),this.readable=!1,a}catch(a){this.readable=!1,this.emit("error",a),this.emit("close")}},l.sign=k,a.exports=l},4833:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.IdTokenClient=void 0;let d=c(3914);class e extends d.OAuth2Client{targetAudience;idTokenProvider;constructor(a){super(a),this.targetAudience=a.targetAudience,this.idTokenProvider=a.idTokenProvider}async getRequestMetadataAsync(){if(!this.credentials.id_token||!this.credentials.expiry_date||this.isTokenExpiring()){let a=await this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:a,expiry_date:this.getIdTokenExpiryDate(a)}}return{headers:new Headers({authorization:"Bearer "+this.credentials.id_token})}}getIdTokenExpiryDate(a){let b=a.split(".")[1];if(b)return 1e3*JSON.parse(Buffer.from(b,"base64").toString("ascii")).exp}}b.IdTokenClient=e},4863:(a,b,c)=>{"use strict";a.exports=c(7553).vendored["react-rsc"].React},4972:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.PluggableAuthClient=b.ExecutableError=void 0;let d=c(1777),e=c(4038),f=c(4251);var g=c(4251);Object.defineProperty(b,"ExecutableError",{enumerable:!0,get:function(){return g.ExecutableError}});class h extends d.BaseExternalAccountClient{command;timeoutMillis;outputFile;handler;constructor(a){if(super(a),!a.credential_source.executable||(this.command=a.credential_source.executable.command,!this.command))throw Error('No valid Pluggable Auth "credential_source" provided.');if(void 0===a.credential_source.executable.timeout_millis)this.timeoutMillis=3e4;else if(this.timeoutMillis=a.credential_source.executable.timeout_millis,this.timeoutMillis<5e3||this.timeoutMillis>12e4)throw Error("Timeout must be between 5000120000 milliseconds.");this.outputFile=a.credential_source.executable.output_file,this.handler=new f.PluggableAuthHandler({command:this.command,timeoutMillis:this.timeoutMillis,outputFile:this.outputFile}),this.credentialSourceType="executable"}async retrieveSubjectToken(){let a;if("1"!==process.env.GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES)throw Error("Pluggable Auth executables need to be explicitly allowed to run by setting the GOOGLE_EXTERNAL_ACCOUNT_ALLOW_EXECUTABLES environment Variable to 1.");if(this.outputFile&&(a=await this.handler.retrieveCachedResponse()),!a){let b=new Map;b.set("GOOGLE_EXTERNAL_ACCOUNT_AUDIENCE",this.audience),b.set("GOOGLE_EXTERNAL_ACCOUNT_TOKEN_TYPE",this.subjectTokenType),b.set("GOOGLE_EXTERNAL_ACCOUNT_INTERACTIVE","0"),this.outputFile&&b.set("GOOGLE_EXTERNAL_ACCOUNT_OUTPUT_FILE",this.outputFile);let c=this.getServiceAccountEmail();c&&b.set("GOOGLE_EXTERNAL_ACCOUNT_IMPERSONATED_EMAIL",c),a=await this.handler.retrieveResponseFromExecutable(b)}if(a.version>1)throw Error("Version of executable is not currently supported, maximum supported version is 1.");if(!a.success)throw new f.ExecutableError(a.errorMessage,a.errorCode);if(this.outputFile&&!a.expirationTime)throw new e.InvalidExpirationTimeFieldError("The executable response must contain the `expiration_time` field for successful responses when an output_file has been specified in the configuration.");if(a.isExpired())throw Error("Executable response is expired.");return a.subjectToken}}b.PluggableAuthClient=h},4983:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Colours=void 0;class c{static isEnabled(a){return a&&a.isTTY&&("function"!=typeof a.getColorDepth||a.getColorDepth()>2)}static refresh(){c.enabled=c.isEnabled(null==process?void 0:process.stderr),this.enabled?(c.reset="\x1b[0m",c.bright="\x1b[1m",c.dim="\x1b[2m",c.red="\x1b[31m",c.green="\x1b[32m",c.yellow="\x1b[33m",c.blue="\x1b[34m",c.magenta="\x1b[35m",c.cyan="\x1b[36m",c.white="\x1b[37m",c.grey="\x1b[90m"):(c.reset="",c.bright="",c.dim="",c.red="",c.green="",c.yellow="",c.blue="",c.magenta="",c.cyan="",c.white="",c.grey="")}}b.Colours=c,c.enabled=!1,c.reset="",c.bright="",c.dim="",c.red="",c.green="",c.yellow="",c.blue="",c.magenta="",c.cyan="",c.white="",c.grey="",c.refresh()},4987:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c={djb2Hash:function(){return e},hexHash:function(){return f}};for(var d in c)Object.defineProperty(b,d,{enumerable:!0,get:c[d]});function e(a){let b=5381;for(let c=0;c<a.length;c++)b=(b<<5)+b+a.charCodeAt(c)|0;return b>>>0}function f(a){return e(a).toString(36).slice(0,5)}},5065:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),b.instance=b.Gaxios=b.GaxiosError=void 0,b.request=h;let f=c(4072);Object.defineProperty(b,"Gaxios",{enumerable:!0,get:function(){return f.Gaxios}});var g=c(6560);async function h(a){return b.instance.request(a)}Object.defineProperty(b,"GaxiosError",{enumerable:!0,get:function(){return g.GaxiosError}}),e(c(9440),b),b.instance=new f.Gaxios},5091:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"default",{enumerable:!0,get:function(){return f}});let d=c(5735),e=c(2675);function f(){return(0,d.jsx)(e.HTTPAccessErrorFallback,{status:404,message:"This page could not be found."})}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},5125:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,5547,23))},5128:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),e(c(8267),b)},5348:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.OAuthClientAuthHandler=void 0,b.getErrorFromOAuthErrorResponse=function(a,b){let c=a.error,d=a.error_description,e=a.error_uri,f=`Error code ${c}`;void 0!==d&&(f+=`: ${d}`),void 0!==e&&(f+=` - ${e}`);let g=Error(f);if(b){let a=Object.keys(b);b.stack&&a.push("stack"),a.forEach(a=>{"message"!==a&&Object.defineProperty(g,a,{value:b[a],writable:!1,enumerable:!0})})}return g};let d=c(5065),e=c(5618),f=["PUT","POST","PATCH"];class g{#t=(0,e.createCrypto)();#u;transporter;constructor(a){a&&"clientId"in a?(this.#u=a,this.transporter=new d.Gaxios):(this.#u=a?.clientAuthentication,this.transporter=a?.transporter||new d.Gaxios)}applyClientAuthenticationOptions(a,b){a.headers=d.Gaxios.mergeHeaders(a.headers),this.injectAuthenticatedHeaders(a,b),b||this.injectAuthenticatedRequestBody(a)}injectAuthenticatedHeaders(a,b){if(b)a.headers=d.Gaxios.mergeHeaders(a.headers,{authorization:`Bearer ${b}`});else if(this.#u?.confidentialClientType==="basic"){a.headers=d.Gaxios.mergeHeaders(a.headers);let b=this.#u.clientId,c=this.#u.clientSecret||"",e=this.#t.encodeBase64StringUtf8(`${b}:${c}`);d.Gaxios.mergeHeaders(a.headers,{authorization:`Basic ${e}`})}}injectAuthenticatedRequestBody(a){if(this.#u?.confidentialClientType==="request-body"){let b=(a.method||"GET").toUpperCase();if(!f.includes(b))throw Error(`${b} HTTP method does not support ${this.#u.confidentialClientType} client authentication`);let c=new Headers(a.headers).get("content-type");if(c?.startsWith("application/x-www-form-urlencoded")||a.data instanceof URLSearchParams){let b=new URLSearchParams(a.data??"");b.append("client_id",this.#u.clientId),b.append("client_secret",this.#u.clientSecret||""),a.data=b}else if(c?.startsWith("application/json"))a.data=a.data||{},Object.assign(a.data,{client_id:this.#u.clientId,client_secret:this.#u.clientSecret||""});else throw Error(`${c} content-types are not supported with ${this.#u.confidentialClientType} client authentication`)}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}}b.OAuthClientAuthHandler=g},5349:(a,b,c)=>{"use strict";Object.defineProperty(b,"A",{enumerable:!0,get:function(){return d.registerServerReference}});let d=c(944)},5426:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.UserRefreshClient=b.USER_REFRESH_ACCOUNT_TYPE=void 0;let d=c(3914),e=c(7493);b.USER_REFRESH_ACCOUNT_TYPE="authorized_user";class f extends d.OAuth2Client{_refreshToken;constructor(a,b,c,d,e){const f=a&&"object"==typeof a?a:{clientId:a,clientSecret:b,refreshToken:c,eagerRefreshThresholdMillis:d,forceRefreshOnFailure:e};super(f),this._refreshToken=f.refreshToken,this.credentials.refresh_token=f.refreshToken}async refreshTokenNoCache(){return super.refreshTokenNoCache(this._refreshToken)}async fetchIdToken(a){let b={...f.RETRY_CONFIG,url:this.endpoints.oauth2TokenUrl,method:"POST",data:new URLSearchParams({client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token",refresh_token:this._refreshToken,target_audience:a})};return e.AuthClient.setMethodName(b,"fetchIdToken"),(await this.transporter.request(b)).data.id_token}fromJSON(a){if(!a)throw Error("Must pass in a JSON object containing the user refresh token");if("authorized_user"!==a.type)throw Error('The incoming JSON object does not have the "authorized_user" type');if(!a.client_id)throw Error("The incoming JSON object does not contain a client_id field");if(!a.client_secret)throw Error("The incoming JSON object does not contain a client_secret field");if(!a.refresh_token)throw Error("The incoming JSON object does not contain a refresh_token field");this._clientId=a.client_id,this._clientSecret=a.client_secret,this._refreshToken=a.refresh_token,this.credentials.refresh_token=a.refresh_token,this.quotaProjectId=a.quota_project_id,this.universeDomain=a.universe_domain||this.universeDomain}fromStream(a,b){if(!b)return this.fromStreamAsync(a);this.fromStreamAsync(a).then(()=>b(),b)}async fromStreamAsync(a){return new Promise((b,c)=>{if(!a)return c(Error("Must pass in a stream containing the user refresh token."));let d="";a.setEncoding("utf8").on("error",c).on("data",a=>d+=a).on("end",()=>{try{let a=JSON.parse(d);return this.fromJSON(a),b()}catch(a){return c(a)}})})}static fromJSON(a){let b=new f;return b.fromJSON(a),b}}b.UserRefreshClient=f},5511:a=>{"use strict";a.exports=require("crypto")},5557:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>b6});var d,e,f,g=c(8249),h=c(7484);let i=({className:a="h-10 w-auto"})=>(0,g.jsxs)("div",{className:`flex items-center gap-2 ${a}`,children:[(0,g.jsxs)("svg",{viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-full w-auto flex-shrink-0","aria-label":"GabaritandoIA Logo",children:[(0,g.jsx)("path",{d:"M50 15C30.67 15 15 30.67 15 50C15 69.33 30.67 85 50 85C69.33 85 85 69.33 85 50C85 30.67 69.33 15 50 15ZM50 78C34.536 78 22 65.464 22 50C22 34.536 34.536 22 50 22C65.464 22 78 34.536 78 50C78 65.464 65.464 78 50 78Z",fill:"currentColor",fillOpacity:"0.2"}),(0,g.jsx)("path",{d:"M68.5 35L44 59.5L31.5 47",stroke:"currentColor",strokeWidth:"8",strokeLinecap:"round",strokeLinejoin:"round"}),(0,g.jsx)("path",{d:"M50 10C27.9086 10 10 27.9086 10 50C10 72.0914 27.9086 90 50 90C72.0914 90 90 72.0914 90 50C90 27.9086 72.0914 10 50 10Z",stroke:"currentColor",strokeWidth:"6"}),(0,g.jsx)("circle",{cx:"50",cy:"10",r:"4",fill:"currentColor"}),(0,g.jsx)("circle",{cx:"90",cy:"50",r:"4",fill:"currentColor"}),(0,g.jsx)("circle",{cx:"50",cy:"90",r:"4",fill:"currentColor"}),(0,g.jsx)("circle",{cx:"10",cy:"50",r:"4",fill:"currentColor"})]}),(0,g.jsxs)("span",{className:"font-bold tracking-tight select-none",style:{fontSize:"1.75em",lineHeight:1},children:["Gabaritando",(0,g.jsx)("span",{className:"opacity-80",children:"IA"})]})]}),j=({onLogin:a})=>{let[b,c]=(0,h.useState)(""),[d,e]=(0,h.useState)(""),[f,j]=(0,h.useState)(""),k=(a,b)=>{c(a),e(b)};return(0,g.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:(0,g.jsxs)("div",{className:"max-w-4xl w-full grid md:grid-cols-2 gap-8 items-start",children:[(0,g.jsxs)("div",{className:"bg-white rounded-xl shadow-xl overflow-hidden order-2 md:order-1",children:[(0,g.jsxs)("div",{className:"bg-indigo-600 p-8 text-center flex flex-col items-center justify-center",children:[(0,g.jsx)(i,{className:"h-16 text-white mb-2"}),(0,g.jsx)("p",{className:"text-indigo-200 mt-2",children:"Seu assistente de estudos inteligente"})]}),(0,g.jsxs)("form",{onSubmit:c=>{c.preventDefault(),j(""),"admin"===b&&"admin"===d?a({username:"admin",role:"admin",hasPaid:!0}):"usuario"===b&&"usuario"===d?a({username:"usuario",role:"user",hasPaid:!1}):"premium"===b&&"premium"===d?a({username:"premium",role:"user",hasPaid:!0}):b&&d?a({username:b,role:"user",hasPaid:!1}):j("Preencha todos os campos.")},className:"p-8 space-y-6",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Usu\xe1rio"}),(0,g.jsx)("input",{type:"text",value:b,onChange:a=>c(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all",placeholder:"Digite seu usu\xe1rio"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha"}),(0,g.jsx)("input",{type:"password",value:d,onChange:a=>e(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all",placeholder:"Digite sua senha"})]}),f&&(0,g.jsx)("p",{className:"text-red-500 text-sm text-center",children:f}),(0,g.jsx)("button",{type:"submit",className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg transition-colors shadow-lg shadow-indigo-200",children:"Entrar"})]})]}),(0,g.jsxs)("div",{className:"flex flex-col space-y-4 order-1 md:order-2",children:[(0,g.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-md border-l-4 border-indigo-500",children:[(0,g.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"Credenciais de Teste"}),(0,g.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Clique em um cart\xe3o abaixo para preencher automaticamente."}),(0,g.jsxs)("div",{className:"space-y-3",children:[(0,g.jsxs)("div",{onClick:()=>k("admin","admin"),className:"p-3 bg-purple-50 hover:bg-purple-100 border border-purple-200 rounded-lg cursor-pointer transition-colors group",children:[(0,g.jsxs)("div",{className:"flex justify-between items-center",children:[(0,g.jsx)("span",{className:"font-bold text-purple-700",children:"Admin"}),(0,g.jsx)("span",{className:"text-xs bg-purple-200 text-purple-800 px-2 py-0.5 rounded-full",children:"Ilimitado"})]}),(0,g.jsx)("div",{className:"text-xs text-purple-600 mt-1",children:"User: admin | Pass: admin"})]}),(0,g.jsxs)("div",{onClick:()=>k("premium","premium"),className:"p-3 bg-amber-50 hover:bg-amber-100 border border-amber-200 rounded-lg cursor-pointer transition-colors group",children:[(0,g.jsxs)("div",{className:"flex justify-between items-center",children:[(0,g.jsx)("span",{className:"font-bold text-amber-700",children:"Premium"}),(0,g.jsx)("span",{className:"text-xs bg-amber-200 text-amber-800 px-2 py-0.5 rounded-full",children:"Ilimitado"})]}),(0,g.jsx)("div",{className:"text-xs text-amber-600 mt-1",children:"User: premium | Pass: premium"})]}),(0,g.jsxs)("div",{onClick:()=>k("usuario","usuario"),className:"p-3 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg cursor-pointer transition-colors group",children:[(0,g.jsxs)("div",{className:"flex justify-between items-center",children:[(0,g.jsx)("span",{className:"font-bold text-gray-700",children:"Usu\xe1rio Free"}),(0,g.jsx)("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-0.5 rounded-full",children:"1 PDF Gr\xe1tis"})]}),(0,g.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"User: usuario | Pass: usuario"})]})]})]}),(0,g.jsx)("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 text-sm text-blue-800",children:(0,g.jsxs)("p",{children:["\uD83D\uDCA1 ",(0,g.jsx)("strong",{children:"Dica:"})," O usu\xe1rio ",(0,g.jsx)("b",{children:"Free"})," ser\xe1 bloqueado ao tentar enviar o segundo PDF, ativando o fluxo de pagamento do AbacatePay."]})})]})]})})},k="abc_dev_0Qufg3hj3GNf3bHknDTXHmBB",l=async a=>{let b=`${window.location.origin}/?status=paid`;if(k.includes("YOUR_ABACATE_PAY_API_TOKEN_HERE"))return console.warn("AbacatePay API Key not set. Running in DEMO mode (simulated payment)."),await new Promise(a=>setTimeout(a,1500)),b;let c={frequency:"ONE_TIME",methods:["PIX","CARD"],products:[{externalId:"gabaritando-premium",name:"GabaritandoIA Premium",description:"Acesso ilimitado a gera\xe7\xe3o de flashcards e mapas mentais.",quantity:1,price:1e3}],returnUrl:b,completionUrl:b,customer:{name:a.username||"Cliente GabaritandoIA",email:"cliente@exemplo.com",taxId:"123.456.789-01",cellphone:"(11) 99999-9999"}};try{let a=await fetch("https://api.abacatepay.com/v1/billing/create",{method:"POST",headers:{Authorization:`Bearer ${k}`,"Content-Type":"application/json"},body:JSON.stringify(c)});if(!a.ok){let b=await a.json().catch(()=>({}));throw console.warn("AbacatePay API Warning:",b),Error("Falha ao criar sess\xe3o de pagamento.")}let b=await a.json(),d=b?.data?.url||b?.url;if(!d)throw Error("URL de pagamento n\xe3o retornada pela API.");return d}catch(a){throw console.warn("Payment Gateway Error (Network/CORS/Key):",a),Error("Erro de conex\xe3o com o pagamento. Verifique a API Key ou tente novamente.")}},m=({onClose:a,onSimulatePayment:b,user:c})=>{let[d,e]=(0,h.useState)(!1),[f,i]=(0,h.useState)(null),j=async()=>{if(c){e(!0),i(null);try{let a=await l(c);window.location.href=a}catch(a){a instanceof Error?i(a.message):i("Erro desconhecido ao processar pagamento.")}finally{e(!1)}}};return(0,g.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm p-4",children:(0,g.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden transform transition-all",children:[(0,g.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-6 text-center",children:[(0,g.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Desbloqueie o Ilimitado"}),(0,g.jsx)("p",{className:"text-indigo-100",children:"Torne-se um mestre nos estudos agora!"})]}),(0,g.jsxs)("div",{className:"p-8",children:[(0,g.jsx)("div",{className:"flex justify-center mb-6",children:(0,g.jsx)("div",{className:"w-16 h-16 bg-indigo-100 rounded-full flex items-center justify-center",children:(0,g.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,g.jsx)("p",{className:"text-gray-600 text-center mb-6",children:"Voc\xea atingiu o limite do plano gratuito (1 PDF). Para gerar materiais de estudo ilimitados, assine o plano Premium."}),(0,g.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 border border-gray-100 text-center",children:[(0,g.jsx)("span",{className:"text-3xl font-bold text-gray-800",children:"R$ 10,00"}),(0,g.jsx)("span",{className:"text-gray-500 text-sm",children:" / m\xeas"})]}),f&&(0,g.jsx)("p",{className:"text-red-500 text-sm text-center mb-4 bg-red-50 p-2 rounded",children:f}),(0,g.jsxs)("div",{className:"space-y-3",children:[(0,g.jsx)("button",{onClick:j,disabled:d,className:`w-full py-3 px-4 bg-[#2C3E2C] hover:bg-[#3A523A] text-white font-semibold rounded-lg shadow transition-colors duration-200 flex items-center justify-center ${d?"opacity-70 cursor-not-allowed":""}`,children:d?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,g.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,g.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processando..."]}):"Pagar com AbacatePay"}),(0,g.jsx)("button",{onClick:a,disabled:d,className:"w-full py-3 px-4 bg-white hover:bg-gray-50 text-gray-700 font-medium rounded-lg border border-gray-200 transition-colors duration-200",children:"Cancelar"})]}),(0,g.jsx)("div",{className:"mt-4 text-center",children:(0,g.jsx)("p",{className:"text-[10px] text-gray-400",children:"Pagamento seguro via AbacatePay"})})]})]})})},n=({cards:a})=>{let[b,c]=(0,h.useState)(0),[d,e]=(0,h.useState)(!1),f=a.length+1,i=b===a.length;(0,h.useEffect)(()=>{c(0),e(!1)},[a]);let j=()=>{i||e(!1),setTimeout(()=>{c(a=>(a+1)%f)},150*!i)},k=()=>{i||e(!1),setTimeout(()=>{c(a=>(a-1+f)%f)},150*!i)},l=()=>{i||e(!d)};if((0,h.useEffect)(()=>{let a=a=>{"ArrowRight"===a.key&&j(),"ArrowLeft"===a.key&&k()," "!==a.key&&"Enter"!==a.key||i||l()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[a.length,i,f]),!a||0===a.length)return(0,g.jsx)("div",{className:"text-gray-500 text-center py-10",children:"Nenhum cart\xe3o gerado."});let m=i?null:a[b];return(0,g.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 min-h-[600px]",children:[(0,g.jsx)("style",{children:`
        @keyframes firework {
          0% { transform: translate(var(--x), var(--initialY)); width: var(--initialSize); opacity: 1; }
          50% { width: 0.5vmin; opacity: 1; }
          100% { width: var(--finalSize); opacity: 0; }
        }
        .firework,
        .firework::before,
        .firework::after {
          --initialSize: 0.5vmin;
          --finalSize: 45vmin;
          --particleSize: 0.2vmin;
          --color1: yellow;
          --color2: khaki;
          --color3: white;
          --color4: lime;
          --color5: gold;
          --color6: mediumseagreen;
          --y: -30vmin;
          --x: -50%;
          --initialY: 60vmin;
          content: "";
          animation: firework 2s infinite;
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, var(--y));
          width: var(--initialSize);
          aspect-ratio: 1;
          background: 
            radial-gradient(circle, var(--color1) var(--particleSize), #0000 0) 50% 0%,
            radial-gradient(circle, var(--color2) var(--particleSize), #0000 0) 100% 50%,
            radial-gradient(circle, var(--color3) var(--particleSize), #0000 0) 50% 100%,
            radial-gradient(circle, var(--color4) var(--particleSize), #0000 0) 0% 50%,
            
            radial-gradient(circle, var(--color5) var(--particleSize), #0000 0) 80% 90%,
            radial-gradient(circle, var(--color6) var(--particleSize), #0000 0) 95% 90%,
            radial-gradient(circle, var(--color1) var(--particleSize), #0000 0) 90% 70%,
            radial-gradient(circle, var(--color2) var(--particleSize), #0000 0) 100% 60%,
            radial-gradient(circle, var(--color3) var(--particleSize), #0000 0) 55% 80%,
            radial-gradient(circle, var(--color4) var(--particleSize), #0000 0) 70% 77%,
            
            radial-gradient(circle, var(--color5) var(--particleSize), #0000 0) 22% 90%,
            radial-gradient(circle, var(--color6) var(--particleSize), #0000 0) 45% 90%,
            radial-gradient(circle, var(--color1) var(--particleSize), #0000 0) 33% 70%,
            radial-gradient(circle, var(--color2) var(--particleSize), #0000 0) 10% 60%,
            radial-gradient(circle, var(--color3) var(--particleSize), #0000 0) 31% 80%,
            radial-gradient(circle, var(--color4) var(--particleSize), #0000 0) 28% 77%,
            radial-gradient(circle, var(--color5) var(--particleSize), #0000 0) 13% 72%,
            
            radial-gradient(circle, var(--color6) var(--particleSize), #0000 0) 80% 10%,
            radial-gradient(circle, var(--color1) var(--particleSize), #0000 0) 95% 14%,
            radial-gradient(circle, var(--color2) var(--particleSize), #0000 0) 90% 23%,
            radial-gradient(circle, var(--color3) var(--particleSize), #0000 0) 100% 43%,
            radial-gradient(circle, var(--color4) var(--particleSize), #0000 0) 85% 27%,
            radial-gradient(circle, var(--color5) var(--particleSize), #0000 0) 77% 37%,
            radial-gradient(circle, var(--color6) var(--particleSize), #0000 0) 60% 7%,
            
            radial-gradient(circle, var(--color1) var(--particleSize), #0000 0) 22% 14%,
            radial-gradient(circle, var(--color1) var(--particleSize), #0000 0) 45% 20%,
            radial-gradient(circle, var(--color1) var(--particleSize), #0000 0) 33% 34%,
            radial-gradient(circle, var(--color1) var(--particleSize), #0000 0) 10% 29%,
            radial-gradient(circle, var(--color1) var(--particleSize), #0000 0) 31% 37%,
            radial-gradient(circle, var(--color1) var(--particleSize), #0000 0) 28% 7%,
            radial-gradient(circle, var(--color1) var(--particleSize), #0000 0) 13% 42%
            ;
          background-size: var(--initialSize) var(--initialSize);
          background-repeat: no-repeat;
        }

        .firework::before {
          --x: -50%;
          --y: -50%;
          --initialY: -50%;
          transform: translate(-50%, -50%) rotate(40deg) scale(1.3) rotateY(40deg);
        }

        .firework::after {
          --x: -50%;
          --y: -50%;
          --initialY: -50%;
          transform: translate(-50%, -50%) rotate(170deg) scale(1.15) rotateY(-30deg);
        }

        .firework:nth-child(2) {
          --x: 30vmin;
          --y: -30vmin;
        }
        .firework:nth-child(2),
        .firework:nth-child(2)::before,
        .firework:nth-child(2)::after {
          --color1: pink;
          --color2: violet;
          --color3: fuchsia;
          --color4: orchid;
          --color5: plum;
          --color6: lavender;  
          --finalSize: 40vmin;
          left: 30%;
          top: 60%;
          animation-delay: -0.25s;
        }

        .firework:nth-child(3) {
          --x: -30vmin;
          --y: -50vmin;
        }
        .firework:nth-child(3),
        .firework:nth-child(3)::before,
        .firework:nth-child(3)::after {
          --color1: cyan;
          --color2: lightcyan;
          --color3: lightblue;
          --color4: palequoturquoise;
          --color5: skyblue;
          --color6: lavender;
          --finalSize: 35vmin;
          left: 70%;
          top: 60%;
          animation-delay: -0.4s;
        }
      `}),(0,g.jsxs)("div",{className:"flex items-center justify-center w-full max-w-5xl gap-4 md:gap-8",children:[(0,g.jsx)("button",{onClick:k,className:"p-3 md:p-4 rounded-full bg-white shadow-lg text-indigo-600 hover:bg-indigo-50 transition-transform hover:-translate-x-1 focus:outline-none z-10",title:"Anterior (Seta Esquerda)",children:(0,g.jsx)("svg",{className:"w-6 h-6 md:w-8 md:h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,g.jsx)("div",{className:"relative w-full max-w-2xl aspect-[3/4] md:aspect-[3/2] perspective-1000",children:i?(0,g.jsxs)("div",{className:"relative w-full h-full bg-gradient-to-br from-indigo-900 to-purple-800 rounded-2xl shadow-2xl flex flex-col items-center justify-center text-center p-8 overflow-hidden",children:[(0,g.jsx)("div",{className:"firework"}),(0,g.jsx)("div",{className:"firework"}),(0,g.jsx)("div",{className:"firework"}),(0,g.jsxs)("div",{className:"z-10 bg-white/10 backdrop-blur-md p-8 rounded-xl border border-white/20",children:[(0,g.jsx)("span",{className:"text-4xl mb-4 block",children:"\uD83C\uDF89"}),(0,g.jsx)("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Parab\xe9ns!"}),(0,g.jsxs)("p",{className:"text-xl text-indigo-100",children:["Voc\xea concluiu todos os ",a.length," cards."]}),(0,g.jsx)("button",{onClick:()=>c(0),className:"mt-8 px-6 py-2 bg-white text-indigo-900 font-bold rounded-full hover:bg-indigo-50 transition-colors shadow-lg",children:"Estudar Novamente"})]})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-indigo-100 rounded-2xl transform translate-x-4 translate-y-4 -z-10 shadow-sm opacity-60"}),(0,g.jsx)("div",{className:"absolute top-0 left-0 w-full h-full bg-indigo-200 rounded-2xl transform translate-x-2 translate-y-2 -z-10 shadow-sm opacity-80"}),(0,g.jsxs)("div",{className:`relative w-full h-full transition-transform duration-500 transform-style-3d cursor-pointer shadow-2xl rounded-2xl ${d?"rotate-y-180":""}`,style:{transformStyle:"preserve-3d",transform:d?"rotateY(180deg)":"rotateY(0deg)"},onClick:l,children:[(0,g.jsxs)("div",{className:"absolute w-full h-full bg-white rounded-2xl border-2 border-indigo-50 p-8 md:p-12 flex flex-col items-center justify-center backface-hidden",children:[(0,g.jsx)("span",{className:"text-sm font-bold text-indigo-500 uppercase tracking-widest mb-6 bg-indigo-50 px-3 py-1 rounded-full",children:"Pergunta"}),(0,g.jsx)("p",{className:"text-lg md:text-2xl font-medium text-gray-800 text-center leading-relaxed select-none",children:m.question}),(0,g.jsx)("div",{className:"absolute bottom-6 text-sm text-gray-400 font-medium animate-bounce",children:"Clique para ver a resposta"})]}),(0,g.jsxs)("div",{className:"absolute w-full h-full bg-indigo-600 rounded-2xl p-8 md:p-12 flex flex-col items-center justify-center backface-hidden",style:{transform:"rotateY(180deg)",backfaceVisibility:"hidden"},children:[(0,g.jsx)("span",{className:"text-sm font-bold text-indigo-200 uppercase tracking-widest mb-6 bg-indigo-700 px-3 py-1 rounded-full",children:"Resposta"}),(0,g.jsx)("p",{className:"text-lg md:text-2xl font-medium text-white text-center leading-relaxed select-none",children:m.answer})]})]})]})}),(0,g.jsx)("button",{onClick:j,className:"p-3 md:p-4 rounded-full bg-white shadow-lg text-indigo-600 hover:bg-indigo-50 transition-transform hover:translate-x-1 focus:outline-none z-10",title:"Pr\xf3ximo (Seta Direita)",children:(0,g.jsx)("svg",{className:"w-6 h-6 md:w-8 md:h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),(0,g.jsxs)("div",{className:"mt-8 flex flex-col items-center",children:[(0,g.jsxs)("div",{className:"text-2xl font-bold text-indigo-900 font-mono",children:[i?a.length:b+1," ",(0,g.jsx)("span",{className:"text-gray-400 text-lg",children:"/"})," ",a.length]}),(0,g.jsx)("div",{className:"w-64 h-2 bg-gray-200 rounded-full mt-3 overflow-hidden",children:(0,g.jsx)("div",{className:`h-full bg-indigo-500 transition-all duration-300 ease-out ${i?"bg-green-500":""}`,style:{width:`${b/a.length*100}%`}})}),(0,g.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Use as setas do teclado para navegar"})]})]})};function o(){}function p(a){return null==a?o:function(){return this.querySelector(a)}}function q(){return[]}function r(a){return null==a?q:function(){return this.querySelectorAll(a)}}function s(a){return function(){return this.matches(a)}}function t(a){return function(b){return b.matches(a)}}var u=Array.prototype.find;function v(){return this.firstElementChild}var w=Array.prototype.filter;function x(){return Array.from(this.children)}function y(a){return Array(a.length)}function z(a,b){this.ownerDocument=a.ownerDocument,this.namespaceURI=a.namespaceURI,this._next=null,this._parent=a,this.__data__=b}function A(a,b,c,d,e,f){for(var g,h=0,i=b.length,j=f.length;h<j;++h)(g=b[h])?(g.__data__=f[h],d[h]=g):c[h]=new z(a,f[h]);for(;h<i;++h)(g=b[h])&&(e[h]=g)}function B(a,b,c,d,e,f,g){var h,i,j,k=new Map,l=b.length,m=f.length,n=Array(l);for(h=0;h<l;++h)(i=b[h])&&(n[h]=j=g.call(i,i.__data__,h,b)+"",k.has(j)?e[h]=i:k.set(j,i));for(h=0;h<m;++h)j=g.call(a,f[h],h,f)+"",(i=k.get(j))?(d[h]=i,i.__data__=f[h],k.delete(j)):c[h]=new z(a,f[h]);for(h=0;h<l;++h)(i=b[h])&&k.get(n[h])===i&&(e[h]=i)}function C(a){return a.__data__}function D(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}z.prototype={constructor:z,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,b){return this._parent.insertBefore(a,b)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};var E="http://www.w3.org/1999/xhtml";let F={svg:"http://www.w3.org/2000/svg",xhtml:E,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function G(a){var b=a+="",c=b.indexOf(":");return c>=0&&"xmlns"!==(b=a.slice(0,c))&&(a=a.slice(c+1)),F.hasOwnProperty(b)?{space:F[b],local:a}:a}function H(a){return a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView}function I(a,b){return a.style.getPropertyValue(b)||H(a).getComputedStyle(a,null).getPropertyValue(b)}function J(a){return a.trim().split(/^|\s+/)}function K(a){return a.classList||new L(a)}function L(a){this._node=a,this._names=J(a.getAttribute("class")||"")}function M(a,b){for(var c=K(a),d=-1,e=b.length;++d<e;)c.add(b[d])}function N(a,b){for(var c=K(a),d=-1,e=b.length;++d<e;)c.remove(b[d])}function O(){this.textContent=""}function P(){this.innerHTML=""}function Q(){this.nextSibling&&this.parentNode.appendChild(this)}function R(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function S(a){var b=G(a);return(b.local?function(a){return function(){return this.ownerDocument.createElementNS(a.space,a.local)}}:function(a){return function(){var b=this.ownerDocument,c=this.namespaceURI;return c===E&&b.documentElement.namespaceURI===E?b.createElement(a):b.createElementNS(c,a)}})(b)}function T(){return null}function U(){var a=this.parentNode;a&&a.removeChild(this)}function V(){var a=this.cloneNode(!1),b=this.parentNode;return b?b.insertBefore(a,this.nextSibling):a}function W(){var a=this.cloneNode(!0),b=this.parentNode;return b?b.insertBefore(a,this.nextSibling):a}function X(a){return function(){var b=this.__on;if(b){for(var c,d=0,e=-1,f=b.length;d<f;++d)(c=b[d],a.type&&c.type!==a.type||c.name!==a.name)?b[++e]=c:this.removeEventListener(c.type,c.listener,c.options);++e?b.length=e:delete this.__on}}}function Y(a,b,c){return function(){var d,e=this.__on,f=function(a){b.call(this,a,this.__data__)};if(e){for(var g=0,h=e.length;g<h;++g)if((d=e[g]).type===a.type&&d.name===a.name){this.removeEventListener(d.type,d.listener,d.options),this.addEventListener(d.type,d.listener=f,d.options=c),d.value=b;return}}this.addEventListener(a.type,f,c),d={type:a.type,name:a.name,value:b,listener:f,options:c},e?e.push(d):this.__on=[d]}}function Z(a,b,c){var d=H(a),e=d.CustomEvent;"function"==typeof e?e=new e(b,c):(e=d.document.createEvent("Event"),c?(e.initEvent(b,c.bubbles,c.cancelable),e.detail=c.detail):e.initEvent(b,!1,!1)),a.dispatchEvent(e)}L.prototype={add:function(a){0>this._names.indexOf(a)&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){var b=this._names.indexOf(a);b>=0&&(this._names.splice(b,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return this._names.indexOf(a)>=0}};var $=[null];function _(a,b){this._groups=a,this._parents=b}function aa(){return new _([[document.documentElement]],$)}_.prototype=aa.prototype={constructor:_,select:function(a){"function"!=typeof a&&(a=p(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var f,g,h=b[e],i=h.length,j=d[e]=Array(i),k=0;k<i;++k)(f=h[k])&&(g=a.call(f,f.__data__,k,h))&&("__data__"in f&&(g.__data__=f.__data__),j[k]=g);return new _(d,this._parents)},selectAll:function(a){if("function"==typeof a){var b;b=a,a=function(){var a;return a=b.apply(this,arguments),null==a?[]:Array.isArray(a)?a:Array.from(a)}}else a=r(a);for(var c=this._groups,d=c.length,e=[],f=[],g=0;g<d;++g)for(var h,i=c[g],j=i.length,k=0;k<j;++k)(h=i[k])&&(e.push(a.call(h,h.__data__,k,i)),f.push(h));return new _(e,f)},selectChild:function(a){var b;return this.select(null==a?v:(b="function"==typeof a?a:t(a),function(){return u.call(this.children,b)}))},selectChildren:function(a){var b;return this.selectAll(null==a?x:(b="function"==typeof a?a:t(a),function(){return w.call(this.children,b)}))},filter:function(a){"function"!=typeof a&&(a=s(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var f,g=b[e],h=g.length,i=d[e]=[],j=0;j<h;++j)(f=g[j])&&a.call(f,f.__data__,j,g)&&i.push(f);return new _(d,this._parents)},data:function(a,b){if(!arguments.length)return Array.from(this,C);var c=b?B:A,d=this._parents,e=this._groups;"function"!=typeof a&&(s=a,a=function(){return s});for(var f=e.length,g=Array(f),h=Array(f),i=Array(f),j=0;j<f;++j){var k=d[j],l=e[j],m=l.length,n="object"==typeof(r=a.call(k,k&&k.__data__,j,d))&&"length"in r?r:Array.from(r),o=n.length,p=h[j]=Array(o),q=g[j]=Array(o);c(k,l,p,q,i[j]=Array(m),n,b);for(var r,s,t,u,v=0,w=0;v<o;++v)if(t=p[v]){for(v>=w&&(w=v+1);!(u=q[w])&&++w<o;);t._next=u||null}}return(g=new _(g,d))._enter=h,g._exit=i,g},enter:function(){return new _(this._enter||this._groups.map(y),this._parents)},exit:function(){return new _(this._exit||this._groups.map(y),this._parents)},join:function(a,b,c){var d=this.enter(),e=this,f=this.exit();return"function"==typeof a?(d=a(d))&&(d=d.selection()):d=d.append(a+""),null!=b&&(e=b(e))&&(e=e.selection()),null==c?f.remove():c(f),d&&e?d.merge(e).order():e},merge:function(a){for(var b=a.selection?a.selection():a,c=this._groups,d=b._groups,e=c.length,f=d.length,g=Math.min(e,f),h=Array(e),i=0;i<g;++i)for(var j,k=c[i],l=d[i],m=k.length,n=h[i]=Array(m),o=0;o<m;++o)(j=k[o]||l[o])&&(n[o]=j);for(;i<e;++i)h[i]=c[i];return new _(h,this._parents)},selection:function(){return this},order:function(){for(var a=this._groups,b=-1,c=a.length;++b<c;)for(var d,e=a[b],f=e.length-1,g=e[f];--f>=0;)(d=e[f])&&(g&&4^d.compareDocumentPosition(g)&&g.parentNode.insertBefore(d,g),g=d);return this},sort:function(a){function b(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}a||(a=D);for(var c=this._groups,d=c.length,e=Array(d),f=0;f<d;++f){for(var g,h=c[f],i=h.length,j=e[f]=Array(i),k=0;k<i;++k)(g=h[k])&&(j[k]=g);j.sort(b)}return new _(e,this._parents).order()},call:function(){var a=arguments[0];return arguments[0]=this,a.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var a=this._groups,b=0,c=a.length;b<c;++b)for(var d=a[b],e=0,f=d.length;e<f;++e){var g=d[e];if(g)return g}return null},size:function(){let a=0;for(let b of this)++a;return a},empty:function(){return!this.node()},each:function(a){for(var b=this._groups,c=0,d=b.length;c<d;++c)for(var e,f=b[c],g=0,h=f.length;g<h;++g)(e=f[g])&&a.call(e,e.__data__,g,f);return this},attr:function(a,b){var c=G(a);if(arguments.length<2){var d=this.node();return c.local?d.getAttributeNS(c.space,c.local):d.getAttribute(c)}return this.each((null==b?c.local?function(a){return function(){this.removeAttributeNS(a.space,a.local)}}:function(a){return function(){this.removeAttribute(a)}}:"function"==typeof b?c.local?function(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}}:function(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}}:c.local?function(a,b){return function(){this.setAttributeNS(a.space,a.local,b)}}:function(a,b){return function(){this.setAttribute(a,b)}})(c,b))},style:function(a,b,c){return arguments.length>1?this.each((null==b?function(a){return function(){this.style.removeProperty(a)}}:"function"==typeof b?function(a,b,c){return function(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}}:function(a,b,c){return function(){this.style.setProperty(a,b,c)}})(a,b,null==c?"":c)):I(this.node(),a)},property:function(a,b){return arguments.length>1?this.each((null==b?function(a){return function(){delete this[a]}}:"function"==typeof b?function(a,b){return function(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}}:function(a,b){return function(){this[a]=b}})(a,b)):this.node()[a]},classed:function(a,b){var c=J(a+"");if(arguments.length<2){for(var d=K(this.node()),e=-1,f=c.length;++e<f;)if(!d.contains(c[e]))return!1;return!0}return this.each(("function"==typeof b?function(a,b){return function(){(b.apply(this,arguments)?M:N)(this,a)}}:b?function(a){return function(){M(this,a)}}:function(a){return function(){N(this,a)}})(c,b))},text:function(a){return arguments.length?this.each(null==a?O:("function"==typeof a?function(a){return function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}}:function(a){return function(){this.textContent=a}})(a)):this.node().textContent},html:function(a){return arguments.length?this.each(null==a?P:("function"==typeof a?function(a){return function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}}:function(a){return function(){this.innerHTML=a}})(a)):this.node().innerHTML},raise:function(){return this.each(Q)},lower:function(){return this.each(R)},append:function(a){var b="function"==typeof a?a:S(a);return this.select(function(){return this.appendChild(b.apply(this,arguments))})},insert:function(a,b){var c="function"==typeof a?a:S(a),d=null==b?T:"function"==typeof b?b:p(b);return this.select(function(){return this.insertBefore(c.apply(this,arguments),d.apply(this,arguments)||null)})},remove:function(){return this.each(U)},clone:function(a){return this.select(a?W:V)},datum:function(a){return arguments.length?this.property("__data__",a):this.node().__data__},on:function(a,b,c){var d,e,f=(a+"").trim().split(/^|\s+/).map(function(a){var b="",c=a.indexOf(".");return c>=0&&(b=a.slice(c+1),a=a.slice(0,c)),{type:a,name:b}}),g=f.length;if(arguments.length<2){var h=this.node().__on;if(h){for(var i,j=0,k=h.length;j<k;++j)for(d=0,i=h[j];d<g;++d)if((e=f[d]).type===i.type&&e.name===i.name)return i.value}return}for(d=0,h=b?Y:X;d<g;++d)this.each(h(f[d],b,c));return this},dispatch:function(a,b){return this.each(("function"==typeof b?function(a,b){return function(){return Z(this,a,b.apply(this,arguments))}}:function(a,b){return function(){return Z(this,a,b)}})(a,b))},[Symbol.iterator]:function*(){for(var a=this._groups,b=0,c=a.length;b<c;++b)for(var d,e=a[b],f=0,g=e.length;f<g;++f)(d=e[f])&&(yield d)}};var ab={value:()=>{}};function ac(){for(var a,b=0,c=arguments.length,d={};b<c;++b){if(!(a=arguments[b]+"")||a in d||/[\s.]/.test(a))throw Error("illegal type: "+a);d[a]=[]}return new ad(d)}function ad(a){this._=a}function ae(a,b,c){for(var d=0,e=a.length;d<e;++d)if(a[d].name===b){a[d]=ab,a=a.slice(0,d).concat(a.slice(d+1));break}return null!=c&&a.push({name:b,value:c}),a}ad.prototype=ac.prototype={constructor:ad,on:function(a,b){var c,d=this._,e=(a+"").trim().split(/^|\s+/).map(function(a){var b="",c=a.indexOf(".");if(c>=0&&(b=a.slice(c+1),a=a.slice(0,c)),a&&!d.hasOwnProperty(a))throw Error("unknown type: "+a);return{type:a,name:b}}),f=-1,g=e.length;if(arguments.length<2){for(;++f<g;)if((c=(a=e[f]).type)&&(c=function(a,b){for(var c,d=0,e=a.length;d<e;++d)if((c=a[d]).name===b)return c.value}(d[c],a.name)))return c;return}if(null!=b&&"function"!=typeof b)throw Error("invalid callback: "+b);for(;++f<g;)if(c=(a=e[f]).type)d[c]=ae(d[c],a.name,b);else if(null==b)for(c in d)d[c]=ae(d[c],a.name,null);return this},copy:function(){var a={},b=this._;for(var c in b)a[c]=b[c].slice();return new ad(a)},call:function(a,b){if((c=arguments.length-2)>0)for(var c,d,e=Array(c),f=0;f<c;++f)e[f]=arguments[f+2];if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);for(d=this._[a],f=0,c=d.length;f<c;++f)d[f].value.apply(b,e)},apply:function(a,b,c){if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);for(var d=this._[a],e=0,f=d.length;e<f;++e)d[e].value.apply(b,c)}};var af,ag,ah=0,ai=0,aj=0,ak=0,al=0,am=0,an="object"==typeof performance&&performance.now?performance:Date,ao="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(a){setTimeout(a,17)};function ap(){return al||(ao(aq),al=an.now()+am)}function aq(){al=0}function ar(){this._call=this._time=this._next=null}function as(a,b,c){var d=new ar;return d.restart(a,b,c),d}function at(){al=(ak=an.now())+am,ah=ai=0;try{ap(),++ah;for(var a,b=af;b;)(a=al-b._time)>=0&&b._call.call(void 0,a),b=b._next;--ah}finally{ah=0,function(){for(var a,b,c=af,d=1/0;c;)c._call?(d>c._time&&(d=c._time),a=c,c=c._next):(b=c._next,c._next=null,c=a?a._next=b:af=b);ag=a,av(d)}(),al=0}}function au(){var a=an.now(),b=a-ak;b>1e3&&(am-=b,ak=a)}function av(a){!ah&&(ai&&(ai=clearTimeout(ai)),a-al>24?(a<1/0&&(ai=setTimeout(at,a-an.now()-am)),aj&&(aj=clearInterval(aj))):(aj||(ak=an.now(),aj=setInterval(au,1e3)),ah=1,ao(at)))}function aw(a,b,c){var d=new ar;return b=null==b?0:+b,d.restart(c=>{d.stop(),a(c+b)},b,c),d}ar.prototype=as.prototype={constructor:ar,restart:function(a,b,c){if("function"!=typeof a)throw TypeError("callback is not a function");c=(null==c?ap():+c)+(null==b?0:+b),this._next||ag===this||(ag?ag._next=this:af=this,ag=this),this._call=a,this._time=c,av()},stop:function(){this._call&&(this._call=null,this._time=1/0,av())}};var ax=ac("start","end","cancel","interrupt"),ay=[];function az(a,b,c,d,e,f){var g=a.__transition;if(g){if(c in g)return}else a.__transition={};!function(a,b,c){var d,e=a.__transition;function f(i){var j,k,l,m;if(1!==c.state)return h();for(j in e)if((m=e[j]).name===c.name){if(3===m.state)return aw(f);4===m.state?(m.state=6,m.timer.stop(),m.on.call("interrupt",a,a.__data__,m.index,m.group),delete e[j]):+j<b&&(m.state=6,m.timer.stop(),m.on.call("cancel",a,a.__data__,m.index,m.group),delete e[j])}if(aw(function(){3===c.state&&(c.state=4,c.timer.restart(g,c.delay,c.time),g(i))}),c.state=2,c.on.call("start",a,a.__data__,c.index,c.group),2===c.state){for(j=0,c.state=3,d=Array(l=c.tween.length),k=-1;j<l;++j)(m=c.tween[j].value.call(a,a.__data__,c.index,c.group))&&(d[++k]=m);d.length=k+1}}function g(b){for(var e=b<c.duration?c.ease.call(null,b/c.duration):(c.timer.restart(h),c.state=5,1),f=-1,g=d.length;++f<g;)d[f].call(a,e);5===c.state&&(c.on.call("end",a,a.__data__,c.index,c.group),h())}function h(){for(var d in c.state=6,c.timer.stop(),delete e[b],e)return;delete a.__transition}e[b]=c,c.timer=as(function(a){c.state=1,c.timer.restart(f,c.delay,c.time),c.delay<=a&&f(a-c.delay)},0,c.time)}(a,c,{name:b,index:d,group:e,on:ax,tween:ay,time:f.time,delay:f.delay,duration:f.duration,ease:f.ease,timer:null,state:0})}function aA(a,b){var c=aC(a,b);if(c.state>0)throw Error("too late; already scheduled");return c}function aB(a,b){var c=aC(a,b);if(c.state>3)throw Error("too late; already running");return c}function aC(a,b){var c=a.__transition;if(!c||!(c=c[b]))throw Error("transition not found");return c}function aD(a,b){var c,d,e,f=a.__transition,g=!0;if(f){for(e in b=null==b?null:b+"",f){if((c=f[e]).name!==b){g=!1;continue}d=c.state>2&&c.state<5,c.state=6,c.timer.stop(),c.on.call(d?"interrupt":"cancel",a,a.__data__,c.index,c.group),delete f[e]}g&&delete a.__transition}}function aE(a,b){return a*=1,b*=1,function(c){return a*(1-c)+b*c}}var aF=180/Math.PI,aG={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function aH(a,b,c,d,e,f){var g,h,i;return(g=Math.sqrt(a*a+b*b))&&(a/=g,b/=g),(i=a*c+b*d)&&(c-=a*i,d-=b*i),(h=Math.sqrt(c*c+d*d))&&(c/=h,d/=h,i/=h),a*d<b*c&&(a=-a,b=-b,i=-i,g=-g),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*aF,skewX:Math.atan(i)*aF,scaleX:g,scaleY:h}}function aI(a,b,c,d){function e(a){return a.length?a.pop()+" ":""}return function(f,g){var h,i,j,k,l=[],m=[];return f=a(f),g=a(g),!function(a,d,e,f,g,h){if(a!==e||d!==f){var i=g.push("translate(",null,b,null,c);h.push({i:i-4,x:aE(a,e)},{i:i-2,x:aE(d,f)})}else(e||f)&&g.push("translate("+e+b+f+c)}(f.translateX,f.translateY,g.translateX,g.translateY,l,m),h=f.rotate,i=g.rotate,h!==i?(h-i>180?i+=360:i-h>180&&(h+=360),m.push({i:l.push(e(l)+"rotate(",null,d)-2,x:aE(h,i)})):i&&l.push(e(l)+"rotate("+i+d),j=f.skewX,k=g.skewX,j!==k?m.push({i:l.push(e(l)+"skewX(",null,d)-2,x:aE(j,k)}):k&&l.push(e(l)+"skewX("+k+d),!function(a,b,c,d,f,g){if(a!==c||b!==d){var h=f.push(e(f)+"scale(",null,",",null,")");g.push({i:h-4,x:aE(a,c)},{i:h-2,x:aE(b,d)})}else(1!==c||1!==d)&&f.push(e(f)+"scale("+c+","+d+")")}(f.scaleX,f.scaleY,g.scaleX,g.scaleY,l,m),f=g=null,function(a){for(var b,c=-1,d=m.length;++c<d;)l[(b=m[c]).i]=b.x(a);return l.join("")}}}var aJ=aI(function(a){let b=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(a+"");return b.isIdentity?aG:aH(b.a,b.b,b.c,b.d,b.e,b.f)},"px, ","px)","deg)"),aK=aI(function(a){return null==a?aG:(f||(f=document.createElementNS("http://www.w3.org/2000/svg","g")),f.setAttribute("transform",a),a=f.transform.baseVal.consolidate())?aH((a=a.matrix).a,a.b,a.c,a.d,a.e,a.f):aG},", ",")",")");function aL(a,b,c){var d=a._id;return a.each(function(){var a=aB(this,d);(a.value||(a.value={}))[b]=c.apply(this,arguments)}),function(a){return aC(a,d).value[b]}}function aM(a,b,c){a.prototype=b.prototype=c,c.constructor=a}function aN(a,b){var c=Object.create(a.prototype);for(var d in b)c[d]=b[d];return c}function aO(){}var aP="\\s*([+-]?\\d+)\\s*",aQ="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",aR="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",aS=/^#([0-9a-f]{3,8})$/,aT=RegExp(`^rgb\\(${aP},${aP},${aP}\\)$`),aU=RegExp(`^rgb\\(${aR},${aR},${aR}\\)$`),aV=RegExp(`^rgba\\(${aP},${aP},${aP},${aQ}\\)$`),aW=RegExp(`^rgba\\(${aR},${aR},${aR},${aQ}\\)$`),aX=RegExp(`^hsl\\(${aQ},${aR},${aR}\\)$`),aY=RegExp(`^hsla\\(${aQ},${aR},${aR},${aQ}\\)$`),aZ={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function a$(){return this.rgb().formatHex()}function a_(){return this.rgb().formatRgb()}function a0(a){var b,c;return a=(a+"").trim().toLowerCase(),(b=aS.exec(a))?(c=b[1].length,b=parseInt(b[1],16),6===c?a1(b):3===c?new a4(b>>8&15|b>>4&240,b>>4&15|240&b,(15&b)<<4|15&b,1):8===c?a2(b>>24&255,b>>16&255,b>>8&255,(255&b)/255):4===c?a2(b>>12&15|b>>8&240,b>>8&15|b>>4&240,b>>4&15|240&b,((15&b)<<4|15&b)/255):null):(b=aT.exec(a))?new a4(b[1],b[2],b[3],1):(b=aU.exec(a))?new a4(255*b[1]/100,255*b[2]/100,255*b[3]/100,1):(b=aV.exec(a))?a2(b[1],b[2],b[3],b[4]):(b=aW.exec(a))?a2(255*b[1]/100,255*b[2]/100,255*b[3]/100,b[4]):(b=aX.exec(a))?ba(b[1],b[2]/100,b[3]/100,1):(b=aY.exec(a))?ba(b[1],b[2]/100,b[3]/100,b[4]):aZ.hasOwnProperty(a)?a1(aZ[a]):"transparent"===a?new a4(NaN,NaN,NaN,0):null}function a1(a){return new a4(a>>16&255,a>>8&255,255&a,1)}function a2(a,b,c,d){return d<=0&&(a=b=c=NaN),new a4(a,b,c,d)}function a3(a,b,c,d){var e;return 1==arguments.length?((e=a)instanceof aO||(e=a0(e)),e)?new a4((e=e.rgb()).r,e.g,e.b,e.opacity):new a4:new a4(a,b,c,null==d?1:d)}function a4(a,b,c,d){this.r=+a,this.g=+b,this.b=+c,this.opacity=+d}function a5(){return`#${a9(this.r)}${a9(this.g)}${a9(this.b)}`}function a6(){let a=a7(this.opacity);return`${1===a?"rgb(":"rgba("}${a8(this.r)}, ${a8(this.g)}, ${a8(this.b)}${1===a?")":`, ${a})`}`}function a7(a){return isNaN(a)?1:Math.max(0,Math.min(1,a))}function a8(a){return Math.max(0,Math.min(255,Math.round(a)||0))}function a9(a){return((a=a8(a))<16?"0":"")+a.toString(16)}function ba(a,b,c,d){return d<=0?a=b=c=NaN:c<=0||c>=1?a=b=NaN:b<=0&&(a=NaN),new bc(a,b,c,d)}function bb(a){if(a instanceof bc)return new bc(a.h,a.s,a.l,a.opacity);if(a instanceof aO||(a=a0(a)),!a)return new bc;if(a instanceof bc)return a;var b=(a=a.rgb()).r/255,c=a.g/255,d=a.b/255,e=Math.min(b,c,d),f=Math.max(b,c,d),g=NaN,h=f-e,i=(f+e)/2;return h?(g=b===f?(c-d)/h+(c<d)*6:c===f?(d-b)/h+2:(b-c)/h+4,h/=i<.5?f+e:2-f-e,g*=60):h=i>0&&i<1?0:g,new bc(g,h,i,a.opacity)}function bc(a,b,c,d){this.h=+a,this.s=+b,this.l=+c,this.opacity=+d}function bd(a){return(a=(a||0)%360)<0?a+360:a}function be(a){return Math.max(0,Math.min(1,a||0))}function bf(a,b,c){return(a<60?b+(c-b)*a/60:a<180?c:a<240?b+(c-b)*(240-a)/60:b)*255}function bg(a,b,c,d,e){var f=a*a,g=f*a;return((1-3*a+3*f-g)*b+(4-6*f+3*g)*c+(1+3*a+3*f-3*g)*d+g*e)/6}aM(aO,a0,{copy(a){return Object.assign(new this.constructor,this,a)},displayable(){return this.rgb().displayable()},hex:a$,formatHex:a$,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return bb(this).formatHsl()},formatRgb:a_,toString:a_}),aM(a4,a3,aN(aO,{brighter(a){return a=null==a?1.4285714285714286:Math.pow(1.4285714285714286,a),new a4(this.r*a,this.g*a,this.b*a,this.opacity)},darker(a){return a=null==a?.7:Math.pow(.7,a),new a4(this.r*a,this.g*a,this.b*a,this.opacity)},rgb(){return this},clamp(){return new a4(a8(this.r),a8(this.g),a8(this.b),a7(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:a5,formatHex:a5,formatHex8:function(){return`#${a9(this.r)}${a9(this.g)}${a9(this.b)}${a9((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:a6,toString:a6})),aM(bc,function(a,b,c,d){return 1==arguments.length?bb(a):new bc(a,b,c,null==d?1:d)},aN(aO,{brighter(a){return a=null==a?1.4285714285714286:Math.pow(1.4285714285714286,a),new bc(this.h,this.s,this.l*a,this.opacity)},darker(a){return a=null==a?.7:Math.pow(.7,a),new bc(this.h,this.s,this.l*a,this.opacity)},rgb(){var a=this.h%360+(this.h<0)*360,b=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l,d=c+(c<.5?c:1-c)*b,e=2*c-d;return new a4(bf(a>=240?a-240:a+120,e,d),bf(a,e,d),bf(a<120?a+240:a-120,e,d),this.opacity)},clamp(){return new bc(bd(this.h),be(this.s),be(this.l),a7(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let a=a7(this.opacity);return`${1===a?"hsl(":"hsla("}${bd(this.h)}, ${100*be(this.s)}%, ${100*be(this.l)}%${1===a?")":`, ${a})`}`}}));let bh=a=>()=>a;function bi(a,b){var c=b-a;return c?function(b){return a+b*c}:bh(isNaN(a)?b:a)}let bj=function a(b){var c,d=1==(c=+b)?bi:function(a,b){var d,e,f;return b-a?(d=a,e=b,d=Math.pow(d,f=c),e=Math.pow(e,f)-d,f=1/f,function(a){return Math.pow(d+a*e,f)}):bh(isNaN(a)?b:a)};function e(a,b){var c=d((a=a3(a)).r,(b=a3(b)).r),e=d(a.g,b.g),f=d(a.b,b.b),g=bi(a.opacity,b.opacity);return function(b){return a.r=c(b),a.g=e(b),a.b=f(b),a.opacity=g(b),a+""}}return e.gamma=a,e}(1);function bk(a){return function(b){var c,d,e=b.length,f=Array(e),g=Array(e),h=Array(e);for(c=0;c<e;++c)d=a3(b[c]),f[c]=d.r||0,g[c]=d.g||0,h[c]=d.b||0;return f=a(f),g=a(g),h=a(h),d.opacity=1,function(a){return d.r=f(a),d.g=g(a),d.b=h(a),d+""}}}bk(function(a){var b=a.length-1;return function(c){var d=c<=0?c=0:c>=1?(c=1,b-1):Math.floor(c*b),e=a[d],f=a[d+1],g=d>0?a[d-1]:2*e-f,h=d<b-1?a[d+2]:2*f-e;return bg((c-d/b)*b,g,e,f,h)}}),bk(function(a){var b=a.length;return function(c){var d=Math.floor(((c%=1)<0?++c:c)*b),e=a[(d+b-1)%b],f=a[d%b],g=a[(d+1)%b],h=a[(d+2)%b];return bg((c-d/b)*b,e,f,g,h)}});var bl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bm=RegExp(bl.source,"g");function bn(a,b){var c;return("number"==typeof b?aE:b instanceof a0?bj:(c=a0(b))?(b=c,bj):function(a,b){var c,d,e,f,g,h=bl.lastIndex=bm.lastIndex=0,i=-1,j=[],k=[];for(a+="",b+="";(e=bl.exec(a))&&(f=bm.exec(b));)(g=f.index)>h&&(g=b.slice(h,g),j[i]?j[i]+=g:j[++i]=g),(e=e[0])===(f=f[0])?j[i]?j[i]+=f:j[++i]=f:(j[++i]=null,k.push({i:i,x:aE(e,f)})),h=bm.lastIndex;return h<b.length&&(g=b.slice(h),j[i]?j[i]+=g:j[++i]=g),j.length<2?k[0]?(c=k[0].x,function(a){return c(a)+""}):(d=b,function(){return d}):(b=k.length,function(a){for(var c,d=0;d<b;++d)j[(c=k[d]).i]=c.x(a);return j.join("")})})(a,b)}var bo=aa.prototype.constructor;function bp(a){return function(){this.style.removeProperty(a)}}var bq=0;function br(a,b,c,d){this._groups=a,this._parents=b,this._name=c,this._id=d}var bs=aa.prototype;br.prototype=(function(a){return aa().transition(a)}).prototype={constructor:br,select:function(a){var b=this._name,c=this._id;"function"!=typeof a&&(a=p(a));for(var d=this._groups,e=d.length,f=Array(e),g=0;g<e;++g)for(var h,i,j=d[g],k=j.length,l=f[g]=Array(k),m=0;m<k;++m)(h=j[m])&&(i=a.call(h,h.__data__,m,j))&&("__data__"in h&&(i.__data__=h.__data__),l[m]=i,az(l[m],b,c,m,l,aC(h,c)));return new br(f,this._parents,b,c)},selectAll:function(a){var b=this._name,c=this._id;"function"!=typeof a&&(a=r(a));for(var d=this._groups,e=d.length,f=[],g=[],h=0;h<e;++h)for(var i,j=d[h],k=j.length,l=0;l<k;++l)if(i=j[l]){for(var m,n=a.call(i,i.__data__,l,j),o=aC(i,c),p=0,q=n.length;p<q;++p)(m=n[p])&&az(m,b,c,p,n,o);f.push(n),g.push(i)}return new br(f,g,b,c)},selectChild:bs.selectChild,selectChildren:bs.selectChildren,filter:function(a){"function"!=typeof a&&(a=s(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var f,g=b[e],h=g.length,i=d[e]=[],j=0;j<h;++j)(f=g[j])&&a.call(f,f.__data__,j,g)&&i.push(f);return new br(d,this._parents,this._name,this._id)},merge:function(a){if(a._id!==this._id)throw Error();for(var b=this._groups,c=a._groups,d=b.length,e=c.length,f=Math.min(d,e),g=Array(d),h=0;h<f;++h)for(var i,j=b[h],k=c[h],l=j.length,m=g[h]=Array(l),n=0;n<l;++n)(i=j[n]||k[n])&&(m[n]=i);for(;h<d;++h)g[h]=b[h];return new br(g,this._parents,this._name,this._id)},selection:function(){return new bo(this._groups,this._parents)},transition:function(){for(var a=this._name,b=this._id,c=++bq,d=this._groups,e=d.length,f=0;f<e;++f)for(var g,h=d[f],i=h.length,j=0;j<i;++j)if(g=h[j]){var k=aC(g,b);az(g,a,c,j,h,{time:k.time+k.delay+k.duration,delay:0,duration:k.duration,ease:k.ease})}return new br(d,this._parents,a,c)},call:bs.call,nodes:bs.nodes,node:bs.node,size:bs.size,empty:bs.empty,each:bs.each,on:function(a,b){var c,d,e,f,g,h,i=this._id;return arguments.length<2?aC(this.node(),i).on.on(a):this.each((c=i,d=a,e=b,h=(d+"").trim().split(/^|\s+/).every(function(a){var b=a.indexOf(".");return b>=0&&(a=a.slice(0,b)),!a||"start"===a})?aA:aB,function(){var a=h(this,c),b=a.on;b!==f&&(g=(f=b).copy()).on(d,e),a.on=g}))},attr:function(a,b){var c=G(a),d="transform"===c?aK:bn;return this.attrTween(a,"function"==typeof b?(c.local?function(a,b,c){var d,e,f;return function(){var g,h,i=c(this);return null==i?void this.removeAttributeNS(a.space,a.local):(g=this.getAttributeNS(a.space,a.local))===(h=i+"")?null:g===d&&h===e?f:(e=h,f=b(d=g,i))}}:function(a,b,c){var d,e,f;return function(){var g,h,i=c(this);return null==i?void this.removeAttribute(a):(g=this.getAttribute(a))===(h=i+"")?null:g===d&&h===e?f:(e=h,f=b(d=g,i))}})(c,d,aL(this,"attr."+a,b)):null==b?(c.local?function(a){return function(){this.removeAttributeNS(a.space,a.local)}}:function(a){return function(){this.removeAttribute(a)}})(c):(c.local?function(a,b,c){var d,e,f=c+"";return function(){var g=this.getAttributeNS(a.space,a.local);return g===f?null:g===d?e:e=b(d=g,c)}}:function(a,b,c){var d,e,f=c+"";return function(){var g=this.getAttribute(a);return g===f?null:g===d?e:e=b(d=g,c)}})(c,d,b))},attrTween:function(a,b){var c="attr."+a;if(arguments.length<2)return(c=this.tween(c))&&c._value;if(null==b)return this.tween(c,null);if("function"!=typeof b)throw Error();var d=G(a);return this.tween(c,(d.local?function(a,b){var c,d;function e(){var e=b.apply(this,arguments);return e!==d&&(c=(d=e)&&function(b){this.setAttributeNS(a.space,a.local,e.call(this,b))}),c}return e._value=b,e}:function(a,b){var c,d;function e(){var e=b.apply(this,arguments);return e!==d&&(c=(d=e)&&function(b){this.setAttribute(a,e.call(this,b))}),c}return e._value=b,e})(d,b))},style:function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y="transform"==(a+="")?aJ:bn;return null==b?this.styleTween(a,(d=a,function(){var a=I(this,d),b=(this.style.removeProperty(d),I(this,d));return a===b?null:a===e&&b===f?g:g=y(e=a,f=b)})).on("end.style."+a,bp(a)):"function"==typeof b?this.styleTween(a,(h=a,i=aL(this,"style."+a,b),function(){var a=I(this,h),b=i(this),c=b+"";return null==b&&(this.style.removeProperty(h),c=b=I(this,h)),a===c?null:a===j&&c===k?l:(k=c,l=y(j=a,b))})).each((m=this._id,t="end."+(s="style."+(n=a)),function(){var a=aB(this,m),b=a.on,c=null==a.value[s]?r||(r=bp(n)):void 0;(b!==o||q!==c)&&(p=(o=b).copy()).on(t,q=c),a.on=p})):this.styleTween(a,(u=a,x=b+"",function(){var a=I(this,u);return a===x?null:a===v?w:w=y(v=a,b)}),c).on("end.style."+a,null)},styleTween:function(a,b,c){var d="style."+(a+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(null==b)return this.tween(d,null);if("function"!=typeof b)throw Error();return this.tween(d,function(a,b,c){var d,e;function f(){var f=b.apply(this,arguments);return f!==e&&(d=(e=f)&&function(b){this.style.setProperty(a,f.call(this,b),c)}),d}return f._value=b,f}(a,b,null==c?"":c))},text:function(a){var b,c;return this.tween("text","function"==typeof a?(b=aL(this,"text",a),function(){var a=b(this);this.textContent=null==a?"":a}):(c=null==a?"":a+"",function(){this.textContent=c}))},textTween:function(a){var b="text";if(arguments.length<1)return(b=this.tween(b))&&b._value;if(null==a)return this.tween(b,null);if("function"!=typeof a)throw Error();return this.tween(b,function(a){var b,c;function d(){var d=a.apply(this,arguments);return d!==c&&(b=(c=d)&&function(a){this.textContent=d.call(this,a)}),b}return d._value=a,d}(a))},remove:function(){var a;return this.on("end.remove",(a=this._id,function(){var b=this.parentNode;for(var c in this.__transition)if(+c!==a)return;b&&b.removeChild(this)}))},tween:function(a,b){var c=this._id;if(a+="",arguments.length<2){for(var d,e=aC(this.node(),c).tween,f=0,g=e.length;f<g;++f)if((d=e[f]).name===a)return d.value;return null}return this.each((null==b?function(a,b){var c,d;return function(){var e=aB(this,a),f=e.tween;if(f!==c){d=c=f;for(var g=0,h=d.length;g<h;++g)if(d[g].name===b){(d=d.slice()).splice(g,1);break}}e.tween=d}}:function(a,b,c){var d,e;if("function"!=typeof c)throw Error();return function(){var f=aB(this,a),g=f.tween;if(g!==d){e=(d=g).slice();for(var h={name:b,value:c},i=0,j=e.length;i<j;++i)if(e[i].name===b){e[i]=h;break}i===j&&e.push(h)}f.tween=e}})(c,a,b))},delay:function(a){var b=this._id;return arguments.length?this.each(("function"==typeof a?function(a,b){return function(){aA(this,a).delay=+b.apply(this,arguments)}}:function(a,b){return b*=1,function(){aA(this,a).delay=b}})(b,a)):aC(this.node(),b).delay},duration:function(a){var b=this._id;return arguments.length?this.each(("function"==typeof a?function(a,b){return function(){aB(this,a).duration=+b.apply(this,arguments)}}:function(a,b){return b*=1,function(){aB(this,a).duration=b}})(b,a)):aC(this.node(),b).duration},ease:function(a){var b=this._id;return arguments.length?this.each(function(a,b){if("function"!=typeof b)throw Error();return function(){aB(this,a).ease=b}}(b,a)):aC(this.node(),b).ease},easeVarying:function(a){var b;if("function"!=typeof a)throw Error();return this.each((b=this._id,function(){var c=a.apply(this,arguments);if("function"!=typeof c)throw Error();aB(this,b).ease=c}))},end:function(){var a,b,c=this,d=c._id,e=c.size();return new Promise(function(f,g){var h={value:g},i={value:function(){0==--e&&f()}};c.each(function(){var c=aB(this,d),e=c.on;e!==a&&((b=(a=e).copy())._.cancel.push(h),b._.interrupt.push(h),b._.end.push(i)),c.on=b}),0===e&&f()})},[Symbol.iterator]:bs[Symbol.iterator]};var bt={time:null,delay:0,duration:250,ease:function(a){return((a*=2)<=1?a*a*a:(a-=2)*a*a+2)/2}};aa.prototype.interrupt=function(a){return this.each(function(){aD(this,a)})},aa.prototype.transition=function(a){var b,c;a instanceof br?(b=a._id,a=a._name):(b=++bq,(c=bt).time=ap(),a=null==a?null:a+"");for(var d=this._groups,e=d.length,f=0;f<e;++f)for(var g,h=d[f],i=h.length,j=0;j<i;++j)(g=h[j])&&az(g,a,b,j,h,c||function(a,b){for(var c;!(c=a.__transition)||!(c=c[b]);)if(!(a=a.parentNode))throw Error(`transition ${b} not found`);return c}(g,b));return new br(d,this._parents,a,b)};let{abs:bu,max:bv,min:bw}=Math;function bx(a){return{type:a}}function by(a){var b=0,c=a.children,d=c&&c.length;if(d)for(;--d>=0;)b+=c[d].value;else b=1;a.value=b}function bz(a,b){a instanceof Map?(a=[void 0,a],void 0===b&&(b=bB)):void 0===b&&(b=bA);for(var c,d,e,f,g,h=new bE(a),i=[h];c=i.pop();)if((e=b(c.data))&&(g=(e=Array.from(e)).length))for(c.children=e,f=g-1;f>=0;--f)i.push(d=e[f]=new bE(e[f])),d.parent=c,d.depth=c.depth+1;return h.eachBefore(bD)}function bA(a){return a.children}function bB(a){return Array.isArray(a)?a[1]:null}function bC(a){void 0!==a.data.value&&(a.value=a.data.value),a.data=a.data.data}function bD(a){var b=0;do a.height=b;while((a=a.parent)&&a.height<++b)}function bE(a){this.data=a,this.depth=this.height=0,this.parent=null}function bF(a,b){return a.parent===b.parent?1:2}function bG(a){var b=a.children;return b?b[0]:a.t}function bH(a){var b=a.children;return b?b[b.length-1]:a.t}function bI(a,b){this._=a,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=b}function bJ(a){return"string"==typeof a?new _([[document.querySelector(a)]],[document.documentElement]):new _([[a]],$)}["w","e"].map(bx),["n","s"].map(bx),["n","w","e","s","nw","ne","sw","se"].map(bx),bE.prototype=bz.prototype={constructor:bE,count:function(){return this.eachAfter(by)},each:function(a,b){let c=-1;for(let d of this)a.call(b,d,++c,this);return this},eachAfter:function(a,b){for(var c,d,e,f=this,g=[f],h=[],i=-1;f=g.pop();)if(h.push(f),c=f.children)for(d=0,e=c.length;d<e;++d)g.push(c[d]);for(;f=h.pop();)a.call(b,f,++i,this);return this},eachBefore:function(a,b){for(var c,d,e=this,f=[e],g=-1;e=f.pop();)if(a.call(b,e,++g,this),c=e.children)for(d=c.length-1;d>=0;--d)f.push(c[d]);return this},find:function(a,b){let c=-1;for(let d of this)if(a.call(b,d,++c,this))return d},sum:function(a){return this.eachAfter(function(b){for(var c=+a(b.data)||0,d=b.children,e=d&&d.length;--e>=0;)c+=d[e].value;b.value=c})},sort:function(a){return this.eachBefore(function(b){b.children&&b.children.sort(a)})},path:function(a){for(var b=this,c=function(a,b){if(a===b)return a;var c=a.ancestors(),d=b.ancestors(),e=null;for(a=c.pop(),b=d.pop();a===b;)e=a,a=c.pop(),b=d.pop();return e}(b,a),d=[b];b!==c;)d.push(b=b.parent);for(var e=d.length;a!==c;)d.splice(e,0,a),a=a.parent;return d},ancestors:function(){for(var a=this,b=[a];a=a.parent;)b.push(a);return b},descendants:function(){return Array.from(this)},leaves:function(){var a=[];return this.eachBefore(function(b){b.children||a.push(b)}),a},links:function(){var a=this,b=[];return a.each(function(c){c!==a&&b.push({source:c.parent,target:c})}),b},copy:function(){return bz(this).eachBefore(bC)},[Symbol.iterator]:function*(){var a,b,c,d,e=this,f=[e];do for(a=f.reverse(),f=[];e=a.pop();)if(yield e,b=e.children)for(c=0,d=b.length;c<d;++c)f.push(b[c]);while(f.length)}},bI.prototype=Object.create(bE.prototype);let bK={capture:!0,passive:!1};function bL(a){a.preventDefault(),a.stopImmediatePropagation()}function bM(a){return((a=Math.exp(a))+1/a)/2}let bN=function a(b,c,d){function e(a,e){var f,g,h=a[0],i=a[1],j=a[2],k=e[0],l=e[1],m=e[2],n=k-h,o=l-i,p=n*n+o*o;if(p<1e-12)g=Math.log(m/j)/b,f=function(a){return[h+a*n,i+a*o,j*Math.exp(b*a*g)]};else{var q=Math.sqrt(p),r=(m*m-j*j+d*p)/(2*j*c*q),s=(m*m-j*j-d*p)/(2*m*c*q),t=Math.log(Math.sqrt(r*r+1)-r);g=(Math.log(Math.sqrt(s*s+1)-s)-t)/b,f=function(a){var d,e,f=a*g,k=bM(t),l=j/(c*q)*(k*(((d=Math.exp(2*(d=b*f+t)))-1)/(d+1))-((e=Math.exp(e=t))-1/e)/2);return[h+l*n,i+l*o,j*k/bM(b*f+t)]}}return f.duration=1e3*g*b/Math.SQRT2,f}return e.rho=function(b){var c=Math.max(.001,+b),d=c*c;return a(c,d,d*d)},e}(Math.SQRT2,2,4);function bO(a,b){if(a=function(a){let b;for(;b=a.sourceEvent;)a=b;return a}(a),void 0===b&&(b=a.currentTarget),b){var c=b.ownerSVGElement||b;if(c.createSVGPoint){var d=c.createSVGPoint();return d.x=a.clientX,d.y=a.clientY,[(d=d.matrixTransform(b.getScreenCTM().inverse())).x,d.y]}if(b.getBoundingClientRect){var e=b.getBoundingClientRect();return[a.clientX-e.left-b.clientLeft,a.clientY-e.top-b.clientTop]}}return[a.pageX,a.pageY]}let bP=a=>()=>a;function bQ(a,{sourceEvent:b,target:c,transform:d,dispatch:e}){Object.defineProperties(this,{type:{value:a,enumerable:!0,configurable:!0},sourceEvent:{value:b,enumerable:!0,configurable:!0},target:{value:c,enumerable:!0,configurable:!0},transform:{value:d,enumerable:!0,configurable:!0},_:{value:e}})}function bR(a,b,c){this.k=a,this.x=b,this.y=c}bR.prototype={constructor:bR,scale:function(a){return 1===a?this:new bR(this.k*a,this.x,this.y)},translate:function(a,b){return 0===a&0===b?this:new bR(this.k,this.x+this.k*a,this.y+this.k*b)},apply:function(a){return[a[0]*this.k+this.x,a[1]*this.k+this.y]},applyX:function(a){return a*this.k+this.x},applyY:function(a){return a*this.k+this.y},invert:function(a){return[(a[0]-this.x)/this.k,(a[1]-this.y)/this.k]},invertX:function(a){return(a-this.x)/this.k},invertY:function(a){return(a-this.y)/this.k},rescaleX:function(a){return a.copy().domain(a.range().map(this.invertX,this).map(a.invert,a))},rescaleY:function(a){return a.copy().domain(a.range().map(this.invertY,this).map(a.invert,a))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var bS=new bR(1,0,0);function bT(a){a.stopImmediatePropagation()}function bU(a){a.preventDefault(),a.stopImmediatePropagation()}function bV(a){return(!a.ctrlKey||"wheel"===a.type)&&!a.button}function bW(){var a=this;return a instanceof SVGElement?(a=a.ownerSVGElement||a).hasAttribute("viewBox")?[[(a=a.viewBox.baseVal).x,a.y],[a.x+a.width,a.y+a.height]]:[[0,0],[a.width.baseVal.value,a.height.baseVal.value]]:[[0,0],[a.clientWidth,a.clientHeight]]}function bX(){return this.__zoom||bS}function bY(a){return-a.deltaY*(1===a.deltaMode?.05:a.deltaMode?1:.002)*(a.ctrlKey?10:1)}function bZ(){return navigator.maxTouchPoints||"ontouchstart"in this}function b$(a,b,c){var d=a.invertX(b[0][0])-c[0][0],e=a.invertX(b[1][0])-c[1][0],f=a.invertY(b[0][1])-c[0][1],g=a.invertY(b[1][1])-c[1][1];return a.translate(e>d?(d+e)/2:Math.min(0,d)||Math.max(0,e),g>f?(f+g)/2:Math.min(0,f)||Math.max(0,g))}bR.prototype;let b_=({data:a})=>{let b=(0,h.useRef)(null),c=(0,h.useRef)(null),[d,e]=(0,h.useState)({width:800,height:600});return((0,h.useEffect)(()=>{let a=()=>{c.current&&e({width:c.current.offsetWidth,height:600})};return window.addEventListener("resize",a),a(),()=>window.removeEventListener("resize",a)},[]),(0,h.useEffect)(()=>{if(!a||!b.current)return;let{width:c,height:e}=d;bJ(b.current).selectAll("*").remove();let f=bJ(b.current).attr("viewBox",`0 0 ${c} ${e}`).attr("width","100%").attr("height","100%"),g=f.append("g").attr("transform","translate(90,20)"),h=(function(){var a,b,c,d=bV,e=bW,f=b$,g=bY,h=bZ,i=[0,1/0],j=[[-1/0,-1/0],[1/0,1/0]],k=250,l=bN,m=ac("start","zoom","end"),n=0,o=10;function p(a){a.property("__zoom",bX).on("wheel.zoom",w,{passive:!1}).on("mousedown.zoom",x).on("dblclick.zoom",y).filter(h).on("touchstart.zoom",z).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",B).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function q(a,b){return(b=Math.max(i[0],Math.min(i[1],b)))===a.k?a:new bR(b,a.x,a.y)}function r(a,b,c){var d=b[0]-c[0]*a.k,e=b[1]-c[1]*a.k;return d===a.x&&e===a.y?a:new bR(a.k,d,e)}function s(a){return[(+a[0][0]+ +a[1][0])/2,(+a[0][1]+ +a[1][1])/2]}function t(a,b,c,d){a.on("start.zoom",function(){u(this,arguments).event(d).start()}).on("interrupt.zoom end.zoom",function(){u(this,arguments).event(d).end()}).tween("zoom",function(){var a=arguments,f=u(this,a).event(d),g=e.apply(this,a),h=null==c?s(g):"function"==typeof c?c.apply(this,a):c,i=Math.max(g[1][0]-g[0][0],g[1][1]-g[0][1]),j=this.__zoom,k="function"==typeof b?b.apply(this,a):b,m=l(j.invert(h).concat(i/j.k),k.invert(h).concat(i/k.k));return function(a){if(1===a)a=k;else{var b=m(a),c=i/b[2];a=new bR(c,h[0]-b[0]*c,h[1]-b[1]*c)}f.zoom(null,a)}})}function u(a,b,c){return!c&&a.__zooming||new v(a,b)}function v(a,b){this.that=a,this.args=b,this.active=0,this.sourceEvent=null,this.extent=e.apply(a,b),this.taps=0}function w(a,...b){if(d.apply(this,arguments)){var c=u(this,b).event(a),e=this.__zoom,h=Math.max(i[0],Math.min(i[1],e.k*Math.pow(2,g.apply(this,arguments)))),k=bO(a);if(c.wheel)(c.mouse[0][0]!==k[0]||c.mouse[0][1]!==k[1])&&(c.mouse[1]=e.invert(c.mouse[0]=k)),clearTimeout(c.wheel);else{if(e.k===h)return;c.mouse=[k,e.invert(k)],aD(this),c.start()}bU(a),c.wheel=setTimeout(function(){c.wheel=null,c.end()},150),c.zoom("mouse",f(r(q(e,h),c.mouse[0],c.mouse[1]),c.extent,j))}}function x(a,...b){if(!c&&d.apply(this,arguments)){var e,g,h,i=a.currentTarget,k=u(this,b,!0).event(a),l=bJ(a.view).on("mousemove.zoom",function(a){if(bU(a),!k.moved){var b=a.clientX-o,c=a.clientY-p;k.moved=b*b+c*c>n}k.event(a).zoom("mouse",f(r(k.that.__zoom,k.mouse[0]=bO(a,i),k.mouse[1]),k.extent,j))},!0).on("mouseup.zoom",function(a){var b,c,d,e;l.on("mousemove.zoom mouseup.zoom",null),b=a.view,c=k.moved,d=b.document.documentElement,e=bJ(b).on("dragstart.drag",null),c&&(e.on("click.drag",bL,bK),setTimeout(function(){e.on("click.drag",null)},0)),"onselectstart"in d?e.on("selectstart.drag",null):(d.style.MozUserSelect=d.__noselect,delete d.__noselect),bU(a),k.event(a).end()},!0),m=bO(a,i),o=a.clientX,p=a.clientY;g=(e=a.view).document.documentElement,h=bJ(e).on("dragstart.drag",bL,bK),"onselectstart"in g?h.on("selectstart.drag",bL,bK):(g.__noselect=g.style.MozUserSelect,g.style.MozUserSelect="none"),bT(a),k.mouse=[m,this.__zoom.invert(m)],aD(this),k.start()}}function y(a,...b){if(d.apply(this,arguments)){var c=this.__zoom,g=bO(a.changedTouches?a.changedTouches[0]:a,this),h=c.invert(g),i=c.k*(a.shiftKey?.5:2),l=f(r(q(c,i),g,h),e.apply(this,b),j);bU(a),k>0?bJ(this).transition().duration(k).call(t,l,g,a):bJ(this).call(p.transform,l,g,a)}}function z(c,...e){if(d.apply(this,arguments)){var f,g,h,i,j=c.touches,k=j.length,l=u(this,e,c.changedTouches.length===k).event(c);for(bT(c),g=0;g<k;++g)i=[i=bO(h=j[g],this),this.__zoom.invert(i),h.identifier],l.touch0?l.touch1||l.touch0[2]===i[2]||(l.touch1=i,l.taps=0):(l.touch0=i,f=!0,l.taps=1+!!a);a&&(a=clearTimeout(a)),f&&(l.taps<2&&(b=i[0],a=setTimeout(function(){a=null},500)),aD(this),l.start())}}function A(a,...b){if(this.__zooming){var c,d,e,g,h=u(this,b).event(a),i=a.changedTouches,k=i.length;for(bU(a),c=0;c<k;++c)e=bO(d=i[c],this),h.touch0&&h.touch0[2]===d.identifier?h.touch0[0]=e:h.touch1&&h.touch1[2]===d.identifier&&(h.touch1[0]=e);if(d=h.that.__zoom,h.touch1){var l=h.touch0[0],m=h.touch0[1],n=h.touch1[0],o=h.touch1[1],p=(p=n[0]-l[0])*p+(p=n[1]-l[1])*p,s=(s=o[0]-m[0])*s+(s=o[1]-m[1])*s;d=q(d,Math.sqrt(p/s)),e=[(l[0]+n[0])/2,(l[1]+n[1])/2],g=[(m[0]+o[0])/2,(m[1]+o[1])/2]}else{if(!h.touch0)return;e=h.touch0[0],g=h.touch0[1]}h.zoom("touch",f(r(d,e,g),h.extent,j))}}function B(a,...d){if(this.__zooming){var e,f,g=u(this,d).event(a),h=a.changedTouches,i=h.length;for(bT(a),c&&clearTimeout(c),c=setTimeout(function(){c=null},500),e=0;e<i;++e)f=h[e],g.touch0&&g.touch0[2]===f.identifier?delete g.touch0:g.touch1&&g.touch1[2]===f.identifier&&delete g.touch1;if(g.touch1&&!g.touch0&&(g.touch0=g.touch1,delete g.touch1),g.touch0)g.touch0[1]=this.__zoom.invert(g.touch0[0]);else if(g.end(),2===g.taps&&(f=bO(f,this),Math.hypot(b[0]-f[0],b[1]-f[1])<o)){var j=bJ(this).on("dblclick.zoom");j&&j.apply(this,arguments)}}}return p.transform=function(a,b,c,d){var e=a.selection?a.selection():a;e.property("__zoom",bX),a!==e?t(a,b,c,d):e.interrupt().each(function(){u(this,arguments).event(d).start().zoom(null,"function"==typeof b?b.apply(this,arguments):b).end()})},p.scaleBy=function(a,b,c,d){p.scaleTo(a,function(){var a=this.__zoom.k,c="function"==typeof b?b.apply(this,arguments):b;return a*c},c,d)},p.scaleTo=function(a,b,c,d){p.transform(a,function(){var a=e.apply(this,arguments),d=this.__zoom,g=null==c?s(a):"function"==typeof c?c.apply(this,arguments):c,h=d.invert(g),i="function"==typeof b?b.apply(this,arguments):b;return f(r(q(d,i),g,h),a,j)},c,d)},p.translateBy=function(a,b,c,d){p.transform(a,function(){return f(this.__zoom.translate("function"==typeof b?b.apply(this,arguments):b,"function"==typeof c?c.apply(this,arguments):c),e.apply(this,arguments),j)},null,d)},p.translateTo=function(a,b,c,d,g){p.transform(a,function(){var a=e.apply(this,arguments),g=this.__zoom,h=null==d?s(a):"function"==typeof d?d.apply(this,arguments):d;return f(bS.translate(h[0],h[1]).scale(g.k).translate("function"==typeof b?-b.apply(this,arguments):-b,"function"==typeof c?-c.apply(this,arguments):-c),a,j)},d,g)},v.prototype={event:function(a){return a&&(this.sourceEvent=a),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(a,b){return this.mouse&&"mouse"!==a&&(this.mouse[1]=b.invert(this.mouse[0])),this.touch0&&"touch"!==a&&(this.touch0[1]=b.invert(this.touch0[0])),this.touch1&&"touch"!==a&&(this.touch1[1]=b.invert(this.touch1[0])),this.that.__zoom=b,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(a){var b=bJ(this.that).datum();m.call(a,this.that,new bQ(a,{sourceEvent:this.sourceEvent,target:p,type:a,transform:this.that.__zoom,dispatch:m}),b)}},p.wheelDelta=function(a){return arguments.length?(g="function"==typeof a?a:bP(+a),p):g},p.filter=function(a){return arguments.length?(d="function"==typeof a?a:bP(!!a),p):d},p.touchable=function(a){return arguments.length?(h="function"==typeof a?a:bP(!!a),p):h},p.extent=function(a){return arguments.length?(e="function"==typeof a?a:bP([[+a[0][0],+a[0][1]],[+a[1][0],+a[1][1]]]),p):e},p.scaleExtent=function(a){return arguments.length?(i[0]=+a[0],i[1]=+a[1],p):[i[0],i[1]]},p.translateExtent=function(a){return arguments.length?(j[0][0]=+a[0][0],j[1][0]=+a[1][0],j[0][1]=+a[0][1],j[1][1]=+a[1][1],p):[[j[0][0],j[0][1]],[j[1][0],j[1][1]]]},p.constrain=function(a){return arguments.length?(f=a,p):f},p.duration=function(a){return arguments.length?(k=+a,p):k},p.interpolate=function(a){return arguments.length?(l=a,p):l},p.on=function(){var a=m.on.apply(m,arguments);return a===m?p:a},p.clickDistance=function(a){return arguments.length?(n=(a*=1)*a,p):Math.sqrt(n)},p.tapDistance=function(a){return arguments.length?(o=+a,p):o},p})().scaleExtent([.1,3]).on("zoom",a=>{g.attr("transform",a.transform)});f.call(h),f.call(h.transform,bS.translate(90,20).scale(.8));let i=0,j=bz(a);j.x0=e/2,j.y0=0;let k=a=>{a.children&&(a._children=a.children,a._children.forEach(k),a.children=null)};j.children&&j.children.forEach(k);let l=(function(){var a=bF,b=1,c=1,d=null;function e(e){var i=function(a){for(var b,c,d,e,f,g=new bI(a,0),h=[g];b=h.pop();)if(d=b._.children)for(b.children=Array(f=d.length),e=f-1;e>=0;--e)h.push(c=b.children[e]=new bI(d[e],e)),c.parent=b;return(g.parent=new bI(null,0)).children=[g],g}(e);if(i.eachAfter(f),i.parent.m=-i.z,i.eachBefore(g),d)e.eachBefore(h);else{var j=e,k=e,l=e;e.eachBefore(function(a){a.x<j.x&&(j=a),a.x>k.x&&(k=a),a.depth>l.depth&&(l=a)});var m=j===k?1:a(j,k)/2,n=m-j.x,o=b/(k.x+m+n),p=c/(l.depth||1);e.eachBefore(function(a){a.x=(a.x+n)*o,a.y=a.depth*p})}return e}function f(b){var c=b.children,d=b.parent.children,e=b.i?d[b.i-1]:null;if(c){!function(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)b=e[f],b.z+=c,b.m+=c,c+=b.s+(d+=b.c)}(b);var f=(c[0].z+c[c.length-1].z)/2;e?(b.z=e.z+a(b._,e._),b.m=b.z-f):b.z=f}else e&&(b.z=e.z+a(b._,e._));b.parent.A=function(b,c,d){if(c){for(var e,f,g,h=b,i=b,j=c,k=h.parent.children[0],l=h.m,m=i.m,n=j.m,o=k.m;j=bH(j),h=bG(h),j&&h;)k=bG(k),(i=bH(i)).a=b,(g=j.z+n-h.z-l+a(j._,h._))>0&&(!function(a,b,c){var d=c/(b.i-a.i);b.c-=d,b.s+=c,a.c+=d,b.z+=c,b.m+=c}((e=j,f=d,e.a.parent===b.parent?e.a:f),b,g),l+=g,m+=g),n+=j.m,l+=h.m,o+=k.m,m+=i.m;j&&!bH(i)&&(i.t=j,i.m+=n-m),h&&!bG(k)&&(k.t=h,k.m+=l-o,d=b)}return d}(b,e,b.parent.A||d[0])}function g(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function h(a){a.x*=b,a.y=a.depth*c}return e.separation=function(b){return arguments.length?(a=b,e):a},e.size=function(a){return arguments.length?(d=!1,b=+a[0],c=+a[1],e):d?null:[b,c]},e.nodeSize=function(a){return arguments.length?(d=!0,b=+a[0],c=+a[1],e):d?[b,c]:null},e})().nodeSize([80,250]);function m(a,b){a.each(function(){let a=bJ(this),b=a.text().length,c=a.text();b>30&&(a.text(c.substring(0,30)+"..."),a.append("title").text(c))})}!function a(b){let c=l(j),d=c.descendants(),e=c.links();d.forEach(a=>{a.y=250*a.depth});let f=g.selectAll("g.node").data(d,a=>a.id||(a.id=++i)),h=f.enter().append("g").attr("class","node").attr("transform",a=>"translate("+b.y0+","+b.x0+")").on("click",function(b,c){c.children?(c._children=c.children,c.children=null):(c.children=c._children,c._children=null),a(c)}).style("cursor","pointer");h.append("circle").attr("class","node").attr("r",1e-6).style("fill",a=>a._children?"#6366f1":"#fff").style("stroke","#6366f1").style("stroke-width","2.5px"),h.append("text").attr("dy",".35em").attr("x",a=>a.children||a._children?-20:20).attr("text-anchor",a=>a.children||a._children?"end":"start").text(a=>a.data.name).style("font-size","14px").style("font-family","Inter, sans-serif").style("fill","#374151").style("font-weight","500").style("fill-opacity",1e-6).call(m,220);let k=h.merge(f);k.transition().duration(500).attr("transform",a=>"translate("+a.y+","+a.x+")"),k.select("circle.node").attr("r",8).style("fill",a=>a._children?"#6366f1":"#fff").attr("cursor","pointer"),k.select("text").style("fill-opacity",1);let n=f.exit().transition().duration(500).attr("transform",a=>"translate("+b.y+","+b.x+")").remove();n.select("circle").attr("r",1e-6),n.select("text").style("fill-opacity",1e-6);let o=g.selectAll("path.link").data(e,a=>a.target.id);function p(a,b){return`M ${a.y} ${a.x}
                    C ${(a.y+b.y)/2} ${a.x},
                      ${(a.y+b.y)/2} ${b.x},
                      ${b.y} ${b.x}`}o.enter().insert("path","g").attr("class","link").attr("d",a=>{let c={x:b.x0,y:b.y0};return p(c,c)}).style("fill","none").style("stroke","#cbd5e1").style("stroke-width","2px").merge(o).transition().duration(500).attr("d",a=>p(a.source,a.target)),o.exit().transition().duration(500).attr("d",a=>{let c={x:b.x,y:b.y};return p(c,c)}).remove(),d.forEach(a=>{a.x0=a.x,a.y0=a.y})}(j)},[a,d]),a)?(0,g.jsxs)("div",{ref:c,className:"w-full h-[600px] bg-gray-50 rounded-xl shadow-inner border border-gray-200 relative overflow-hidden",children:[(0,g.jsx)("div",{className:"absolute top-4 left-4 z-10 bg-white/80 backdrop-blur p-2 rounded-lg text-xs text-gray-500 shadow-sm pointer-events-none",children:"Use o scroll para zoom  Arraste para mover  Clique nos pontos azuis"}),(0,g.jsx)("svg",{ref:b,className:"w-full h-full cursor-grab active:cursor-grabbing"})]}):(0,g.jsx)("div",{className:"text-gray-500 text-center py-10",children:"Nenhum mapa mental gerado."})},b0=({questions:a})=>{let[b,c]=(0,h.useState)(0),[d,e]=(0,h.useState)(null),[f,i]=(0,h.useState)(0),[j,k]=(0,h.useState)(!1);if((0,h.useEffect)(()=>{c(0),e(null),i(0),k(!1)},[a]),!a||0===a.length)return(0,g.jsx)("div",{className:"text-gray-500 text-center py-10",children:"Nenhum question\xe1rio gerado."});if(j)return(0,g.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 bg-white rounded-xl shadow-lg max-w-2xl mx-auto mt-10",children:[(0,g.jsx)("h2",{className:"text-3xl font-bold text-indigo-700 mb-4",children:"Resultado do Quiz"}),(0,g.jsxs)("div",{className:"text-6xl font-bold text-gray-800 mb-6",children:[Math.round(f/a.length*100),"%"]}),(0,g.jsxs)("p",{className:"text-xl text-gray-600 mb-8",children:["Voc\xea acertou"," ",(0,g.jsx)("span",{className:"font-bold text-indigo-600",children:f})," de"," ",(0,g.jsx)("span",{className:"font-bold text-indigo-600",children:a.length})," ","quest\xf5es."]}),(0,g.jsx)("button",{onClick:()=>{c(0),e(null),i(0),k(!1)},className:"px-6 py-3 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 transition-colors shadow-md",children:"Tentar Novamente"})]});let l=a[b],m=Number(l.correctAnswerIndex);return(0,g.jsx)("div",{className:"w-full max-w-3xl mx-auto p-4 md:p-6",children:(0,g.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100",children:[(0,g.jsxs)("div",{className:"bg-indigo-50 px-6 py-4 flex justify-between items-center border-b border-indigo-100",children:[(0,g.jsxs)("span",{className:"text-indigo-800 font-bold uppercase tracking-wider text-sm",children:["Quest\xe3o ",b+1," de ",a.length]}),(0,g.jsxs)("span",{className:"text-indigo-600 font-bold text-sm",children:["Pontua\xe7\xe3o: ",f]})]}),(0,g.jsx)("div",{className:"w-full h-1.5 bg-gray-100",children:(0,g.jsx)("div",{className:"h-full bg-indigo-500 transition-all duration-300",style:{width:`${(b+1)/a.length*100}%`}})}),(0,g.jsxs)("div",{className:"p-6 md:p-8",children:[(0,g.jsx)("h3",{className:"text-xl md:text-2xl font-semibold text-gray-800 mb-6 leading-relaxed",children:l.question}),(0,g.jsx)("div",{className:"space-y-3",children:l.options.map((c,f)=>{let h="border-gray-200 hover:bg-indigo-50 hover:border-indigo-300 text-gray-700";return h=null!==d?f===m?"bg-green-100 border-green-500 text-green-800 font-medium":f===d?"bg-red-100 border-red-500 text-red-800":"border-gray-100 text-gray-400 opacity-60":"bg-white border-gray-200 hover:border-indigo-500 hover:shadow-md cursor-pointer",(0,g.jsxs)("button",{onClick:()=>{null!==d||(e(f),f===Number(a[b].correctAnswerIndex)&&i(a=>a+1))},disabled:null!==d,className:`w-full text-left p-4 rounded-xl border-2 transition-all duration-200 flex items-center ${h}`,children:[(0,g.jsx)("div",{className:`flex-shrink-0 w-8 h-8 rounded-full border-2 flex items-center justify-center mr-4 font-bold text-sm
                    ${null!==d&&f===m?"border-green-500 bg-green-500 text-white":d===f?"border-red-500 bg-red-500 text-white":"border-gray-300 text-gray-400"}`,children:String.fromCharCode(65+f)}),(0,g.jsx)("span",{className:"text-base",children:c})]},f)})}),null!==d&&(0,g.jsxs)("div",{className:"mt-6 p-4 bg-indigo-50 rounded-lg border border-indigo-100 animate-fade-in",children:[(0,g.jsxs)("div",{className:"flex items-start",children:[(0,g.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,g.jsx)("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,g.jsxs)("div",{className:"ml-3",children:[(0,g.jsx)("h4",{className:"text-sm font-bold text-indigo-900 mb-1",children:"Explica\xe7\xe3o"}),(0,g.jsx)("p",{className:"text-sm text-indigo-800 leading-relaxed",children:l.explanation})]})]}),(0,g.jsx)("div",{className:"mt-4 flex justify-end",children:(0,g.jsxs)("button",{onClick:()=>{b<a.length-1?(c(a=>a+1),e(null)):k(!0)},className:"px-6 py-2 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition-colors flex items-center shadow-lg shadow-indigo-200",children:[b===a.length-1?"Ver Resultado":"Pr\xf3xima Quest\xe3o",(0,g.jsx)("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})]})]})})};var b1=c(9829);let b2=(0,b1.createServerReference)("7f1b93d6f3d6719dec90ae789e11bb25ea35cf28e1",b1.callServer,void 0,b1.findSourceMapURL,"processPdfContent");var b3=((d=b3||{}).FLASHCARDS="Flashcards",d.MINDMAP="Mapa Mental",d.QUIZ="Question\xe1rio",d),b4=((e=b4||{}).MY_DOCS="MY_DOCS",e.GLOBAL_QUIZ="GLOBAL_QUIZ",e.GLOBAL_FLASHCARDS="GLOBAL_FLASHCARDS",e);let b5={"Concursos Policiais (PF, PRF, PC, PM)":["L\xedngua Portuguesa","Racioc\xednio L\xf3gico","Inform\xe1tica","Atualidades","Direitos Humanos","Direito Constitucional","Direito Administrativo","Direito Penal","Direito Processual Penal","Legisla\xe7\xe3o Penal Especial","Criminologia"],"Concursos Fiscais (Receita, SEFAZ, ISS)":["L\xedngua Portuguesa","Racioc\xednio L\xf3gico","Estat\xedstica","Inform\xe1tica","Direito Constitucional","Direito Administrativo","Direito Tribut\xe1rio","Legisla\xe7\xe3o Tribut\xe1ria","Contabilidade Geral","Contabilidade P\xfablica","Auditoria","Economia","Finan\xe7as P\xfablicas"],"Concursos de Tribunais (TJ, TRF, TRT, TRE)":["L\xedngua Portuguesa","Racioc\xednio L\xf3gico","Inform\xe1tica","Direito Constitucional","Direito Administrativo","Direito Civil","Direito Processual Civil","Direito Penal","Direito Processual Penal","Direito do Trabalho","Direito Processual do Trabalho"],"Concursos Administrativos":["L\xedngua Portuguesa","Racioc\xednio L\xf3gico","Matem\xe1tica","Inform\xe1tica","Direito Constitucional","Direito Administrativo","Administra\xe7\xe3o P\xfablica","Administra\xe7\xe3o Geral","Arquivologia","Gest\xe3o de Pessoas","AFO"],"Concursos INSS / Previdenci\xe1rios":["L\xedngua Portuguesa","Racioc\xednio L\xf3gico","Inform\xe1tica","Direito Constitucional","Direito Administrativo","Direito Previdenci\xe1rio","Seguridade Social","\xc9tica no Servi\xe7o P\xfablico"],"Concursos Banc\xe1rios":["L\xedngua Portuguesa","Matem\xe1tica","Racioc\xednio L\xf3gico","Inform\xe1tica","Atualidades","Conhecimentos Banc\xe1rios","Sistema Financeiro Nacional","Matem\xe1tica Financeira","Vendas e Negocia\xe7\xe3o"],"Concursos de Controle (TCU, CGU)":["L\xedngua Portuguesa","Racioc\xednio L\xf3gico","Estat\xedstica","Direito Constitucional","Direito Administrativo","Administra\xe7\xe3o P\xfablica","Contabilidade Geral","Contabilidade P\xfablica","Auditoria","AFO","Economia","Finan\xe7as P\xfablicas"],"Concursos Jur\xeddicos (Juiz, MP, Defensoria)":["Direito Constitucional","Direito Administrativo","Direito Civil","Direito Processual Civil","Direito Penal","Direito Processual Penal","Direito do Trabalho","Direito Processual do Trabalho","Direito Tribut\xe1rio","Direito Empresarial","Direitos Humanos","Filosofia e Sociologia"],"Concursos de TI":["L\xedngua Portuguesa","Racioc\xednio L\xf3gico","Tecnologia da Informa\xe7\xe3o","Algoritmos e Programa\xe7\xe3o","Banco de Dados","Engenharia de Software","Redes de Computadores","Seguran\xe7a da Informa\xe7\xe3o"],"Concursos da Sa\xfade":["L\xedngua Portuguesa","Inform\xe1tica","Pol\xedticas P\xfablicas de Sa\xfade","SUS","Sa\xfade P\xfablica","Epidemiologia","\xc9tica no Servi\xe7o P\xfablico"],"Concursos da Educa\xe7\xe3o":["L\xedngua Portuguesa","Inform\xe1tica","Legisla\xe7\xe3o Educacional","Educa\xe7\xe3o (LDB, BNCC, Did\xe1tica)"],"Concursos Militares":["L\xedngua Portuguesa","Matem\xe1tica","F\xedsica","Qu\xedmica","Hist\xf3ria","Geografia","Conhecimentos Militares","Legisla\xe7\xe3o Militar"],"Concursos Ambientais (IBAMA, ICMBio)":["L\xedngua Portuguesa","Inform\xe1tica","Direito Ambiental","Legisla\xe7\xe3o Ambiental","Direito Administrativo"],"Ag\xeancias Reguladoras":["L\xedngua Portuguesa","Racioc\xednio L\xf3gico","Direito Administrativo","Regula\xe7\xe3o e Ag\xeancias"]};function b6(){let[a,b]=(0,h.useState)(null),[c,d]=(0,h.useState)([]),[e,f]=(0,h.useState)([]),[k,l]=(0,h.useState)([]),[o,p]=(0,h.useState)([]),[q,r]=(0,h.useState)(new Set),[s,t]=(0,h.useState)(null),[u,v]=(0,h.useState)("Flashcards"),[w,x]=(0,h.useState)("MY_DOCS"),[y,z]=(0,h.useState)(""),[A,B]=(0,h.useState)(""),[C,D]=(0,h.useState)(null),[E,F]=(0,h.useState)(null),[G,H]=(0,h.useState)(!1),[I,J]=(0,h.useState)(!1),[K,L]=(0,h.useState)(!1),[M,N]=(0,h.useState)(null),[O,P]=(0,h.useState)(""),[Q,R]=(0,h.useState)(null),[S,T]=(0,h.useState)(null),[U,V]=(0,h.useState)(null),[W,X]=(0,h.useState)(!1),[Y,Z]=(0,h.useState)(""),$=()=>{X(!1),Z("")},_=a=>{a.preventDefault(),a.dataTransfer.dropEffect="move"},aa=()=>{V(null)},ab=a=>{a.preventDefault(),V(null),S&&(d(a=>a.map(a=>a.id===S?{...a,folderId:null}:a)),T(null))},ac=async b=>{if(!b.target.files||!b.target.files[0])return;let e=b.target.files[0];if("application/pdf"!==e.type){alert("Apenas arquivos .pdf s\xe3o permitidos."),b.target.value="";return}if(e.size>5242880){alert("O arquivo excede o limite de 5MB."),b.target.value="";return}if(a?.role!=="admin"&&c.length>=1&&!a?.hasPaid){H(!0),b.target.value="";return}J(!0),L(!1);let f=Date.now().toString(),g={id:f,name:e.name,timestamp:Date.now(),content:null,isLoading:!0,folderId:null};d(a=>[g,...a]),t(f),x("MY_DOCS");try{let a=new FileReader;a.readAsDataURL(e),a.onload=async()=>{let b=a.result.split(",")[1];try{var c,g,h;let a,i,j,m,n=await b2(b,e.type);d(a=>a.map(a=>a.id===f?{...a,content:n,isLoading:!1}:a)),n&&(c=n.quiz,g=n.flashcards,h=n.subject,a=c.map(a=>({...a,subject:h})),i=g.map(a=>({...a,subject:h})),j=[...k,...a],m=[...o,...i],l(j),p(m),localStorage.setItem("gabaritando_global_quiz_db",JSON.stringify(j)),localStorage.setItem("gabaritando_global_flash_db",JSON.stringify(m)))}catch(a){console.error(a),d(b=>b.map(b=>b.id===f?{...b,isLoading:!1,error:a?.message||"Falha ao processar."}:b))}}}catch(a){console.error("File reading error",a)}finally{J(!1),b.target.value=""}},ad=()=>{M&&O.trim()&&d(a=>a.map(a=>a.id===M?{...a,name:O}:a)),N(null),P("")},ae=()=>{a?.role==="admin"||a?.hasPaid?(x("GLOBAL_QUIZ"),D(null),z(""),B(""),L(!1)):H(!0)},af=()=>{a?.role==="admin"||a?.hasPaid?(x("GLOBAL_FLASHCARDS"),F(null),z(""),B(""),L(!1)):H(!0)},ag=c.find(a=>a.id===s),ah=a=>(0,g.jsx)("div",{className:`relative group ml-2 transition-transform duration-200 ${S===a.id?"opacity-50 scale-95":""}`,draggable:!0,onDragStart:b=>{T(a.id),b.dataTransfer.effectAllowed="move"},children:M===a.id?(0,g.jsxs)("div",{className:"px-2 py-2 flex items-center bg-indigo-50 rounded-md",children:[(0,g.jsx)("input",{type:"text",value:O,onChange:a=>P(a.target.value),onKeyDown:a=>{"Enter"===a.key&&ad(),"Escape"===a.key&&N(null)},autoFocus:!0,className:"w-full text-sm bg-white border border-indigo-200 rounded px-2 py-1 outline-none text-gray-700"}),(0,g.jsx)("button",{onClick:ad,className:"ml-2 text-green-600",children:(0,g.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]}):(0,g.jsxs)("button",{onClick:()=>{t(a.id),x("MY_DOCS"),L(!1)},className:`w-full text-left px-3 py-2 rounded-md text-sm transition-colors flex items-center pr-16 cursor-grab active:cursor-grabbing ${s===a.id&&"MY_DOCS"===w?"bg-indigo-50 text-indigo-700 font-medium":"text-gray-600 hover:bg-gray-100"}`,children:[(0,g.jsx)("svg",{className:"w-4 h-4 mr-2 flex-shrink-0 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,g.jsxs)("div",{className:"truncate flex flex-col items-start",children:[(0,g.jsx)("span",{children:a.name}),a.content?.subject&&(0,g.jsx)("span",{className:"text-[10px] text-gray-400 bg-gray-100 px-1 rounded",children:a.content.subject})]}),a.isLoading&&(0,g.jsx)("span",{className:"ml-auto w-2 h-2 bg-indigo-500 rounded-full animate-pulse"}),(0,g.jsxs)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity bg-inherit",children:[(0,g.jsx)("span",{onClick:b=>{b.stopPropagation(),N(a.id),P(a.name)},className:"p-1 text-gray-400 hover:text-indigo-600 cursor-pointer",children:(0,g.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),(0,g.jsx)("span",{onClick:b=>{b.stopPropagation(),R(a.id)},className:"p-1 text-gray-400 hover:text-red-600 cursor-pointer",children:(0,g.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},a.id),ai=()=>(0,g.jsxs)("div",{className:`flex-1 overflow-y-auto px-2 space-y-1 transition-colors duration-200 ${S?"bg-gray-50":""} scrollbar-hide`,onDragOver:_,onDrop:ab,children:[(0,g.jsxs)("div",{className:"mb-6 space-y-1",children:[(0,g.jsx)("h3",{className:"px-4 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Navega\xe7\xe3o"}),(0,g.jsxs)("button",{onClick:()=>x("MY_DOCS"),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium flex items-center ${"MY_DOCS"===w?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"}`,children:[(0,g.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"Meus Arquivos"]}),(0,g.jsxs)("button",{onClick:ae,className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium flex items-center ${"GLOBAL_QUIZ"===w?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"}`,children:[(0,g.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Banco de Quest\xf5es",a?.role!=="admin"&&!a?.hasPaid&&(0,g.jsx)("svg",{className:"w-3 h-3 ml-auto text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,g.jsx)("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})})]}),(0,g.jsxs)("button",{onClick:af,className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium flex items-center ${"GLOBAL_FLASHCARDS"===w?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"}`,children:[(0,g.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"Banco de Flashcards",a?.role!=="admin"&&!a?.hasPaid&&(0,g.jsx)("svg",{className:"w-3 h-3 ml-auto text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,g.jsx)("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})})]})]}),(0,g.jsx)("h3",{className:"px-4 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Meus Documentos"}),W&&(0,g.jsxs)("div",{className:"px-3 py-2 mb-2 bg-indigo-50 rounded flex items-center",children:[(0,g.jsx)("svg",{className:"w-4 h-4 mr-2 text-indigo-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,g.jsx)("path",{d:"M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"})}),(0,g.jsx)("input",{type:"text",value:Y,onChange:a=>Z(a.target.value),onKeyDown:a=>{"Enter"===a.key&&(()=>{if(Y.trim()){let a=Date.now().toString(),b={id:a,name:Y.trim()};f(a=>[...a,b]),r(b=>new Set(b).add(a))}X(!1),Z("")})(),"Escape"===a.key&&$()},onBlur:$,autoFocus:!0,placeholder:"Nome da pasta",className:"w-full text-sm bg-transparent border-b border-indigo-300 outline-none text-gray-700"})]}),e.map(a=>(0,g.jsxs)("div",{className:`mb-2 rounded-lg transition-colors duration-200 ${U===a.id?"bg-indigo-100 ring-2 ring-indigo-400":""}`,onDragOver:_,onDrop:b=>{var c;return c=a.id,void(b.preventDefault(),b.stopPropagation(),V(null),S&&(d(a=>a.map(a=>a.id===S?{...a,folderId:c}:a)),T(null),r(a=>new Set(a).add(c))))},onDragEnter:()=>{var b;return b=a.id,void(S&&V(b))},onDragLeave:aa,children:[(0,g.jsxs)("div",{onClick:()=>{var b;return b=a.id,void r(a=>{let c=new Set(a);return c.has(b)?c.delete(b):c.add(b),c})},className:`px-3 py-2 flex items-center text-sm font-semibold rounded cursor-pointer select-none ${U===a.id?"text-indigo-800":"text-gray-700 bg-gray-50 hover:bg-gray-100"}`,children:[(0,g.jsx)("svg",{className:`w-3 h-3 mr-2 text-gray-400 transition-transform duration-200 ${q.has(a.id)?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,g.jsx)("svg",{className:`w-4 h-4 mr-2 ${U===a.id?"text-indigo-600":"text-yellow-500"}`,fill:"currentColor",viewBox:"0 0 20 20",children:(0,g.jsx)("path",{d:"M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"})}),(0,g.jsx)("span",{className:"flex-1 truncate",children:a.name}),(0,g.jsx)("span",{className:"text-xs text-gray-400 ml-2 font-normal",children:c.filter(b=>b.folderId===a.id).length})]}),q.has(a.id)&&(0,g.jsxs)("div",{className:"pl-2 border-l-2 border-gray-100 ml-3 mt-1 space-y-1",children:[c.filter(b=>b.folderId===a.id).map(ah),0===c.filter(b=>b.folderId===a.id).length&&!U&&(0,g.jsx)("p",{className:"text-xs text-gray-400 pl-2 py-1",children:"Pasta vazia"})]})]},a.id)),(0,g.jsx)("div",{className:"mt-2 space-y-1",children:c.filter(a=>!a.folderId).map(ah)}),0===c.length&&0===e.length&&!W&&(0,g.jsx)("p",{className:"px-4 text-sm text-gray-400 italic",children:"Nenhum documento."})]});return a?(0,g.jsxs)("div",{className:"flex h-screen overflow-hidden bg-gray-50 flex-col md:flex-row",children:[(0,g.jsxs)("aside",{className:"hidden md:flex w-64 bg-white border-r border-gray-200 flex-col relative z-20 h-full",children:[(0,g.jsx)("div",{className:"p-6 border-b border-gray-100 flex items-center justify-center cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>x("MY_DOCS"),children:(0,g.jsx)(i,{className:"h-8 text-indigo-600"})}),(0,g.jsxs)("div",{className:"p-4 space-y-2",children:[(0,g.jsxs)("label",{className:"flex items-center justify-center w-full px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg shadow-md cursor-pointer transition-colors group text-sm",children:[(0,g.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,g.jsx)("span",{className:"font-medium",children:"Novo PDF"}),(0,g.jsx)("input",{type:"file",accept:"application/pdf",className:"hidden",onChange:ac,disabled:I})]}),(0,g.jsxs)("button",{onClick:()=>{a?.role==="admin"||a?.hasPaid?(X(!0),Z(""),L(!0)):H(!0)},className:"flex items-center justify-center w-full px-4 py-2 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 rounded-lg text-sm transition-colors",children:[(0,g.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})}),"Nova Pasta","admin"!==a.role&&!a.hasPaid&&(0,g.jsx)("svg",{className:"w-3 h-3 ml-2 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})]})]}),ai()]}),(0,g.jsxs)("main",{className:"flex-1 flex flex-col h-full overflow-hidden relative",children:[(0,g.jsxs)("header",{className:"bg-white border-b border-gray-200 px-4 md:px-6 py-3 md:py-4 flex items-center justify-between shadow-sm z-30 shrink-0",children:[(0,g.jsxs)("div",{className:"flex items-center overflow-hidden",children:[(0,g.jsx)("div",{className:"md:hidden mr-4 flex-shrink-0 cursor-pointer",onClick:()=>x("MY_DOCS"),children:(0,g.jsx)(i,{className:"h-6 text-indigo-600"})}),(0,g.jsx)("div",{className:"hidden md:block text-sm text-gray-500 truncate",children:"GLOBAL_QUIZ"===w?(0,g.jsxs)("span",{className:"font-bold text-purple-700 flex items-center",children:[(0,g.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,g.jsx)("path",{d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})," ","Banco de Quest\xf5es Global"]}):"GLOBAL_FLASHCARDS"===w?(0,g.jsxs)("span",{className:"font-bold text-green-700 flex items-center",children:[(0,g.jsxs)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,g.jsx)("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),(0,g.jsx)("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z",clipRule:"evenodd"})]})," ","Banco de Flashcards Global"]}):!ag||ag.isLoading||ag.error?null:(0,g.jsxs)(g.Fragment,{children:["Visualizando:"," ",(0,g.jsx)("span",{className:"font-semibold text-gray-800",children:ag.name})]})})]}),(0,g.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,g.jsxs)("div",{className:"text-right hidden sm:block",children:[(0,g.jsxs)("p",{className:"text-sm font-medium text-gray-700 flex items-center justify-end",children:[a?.username,a?.role==="admin"?(0,g.jsx)("span",{className:"ml-2 px-1.5 py-0.5 text-[10px] bg-purple-100 text-purple-700 rounded-full border border-purple-200",children:"Admin"}):a?.hasPaid?(0,g.jsx)("span",{className:"ml-2 px-1.5 py-0.5 text-[10px] bg-amber-100 text-amber-700 rounded-full border border-amber-200",children:"Premium"}):(0,g.jsx)("span",{className:"ml-2 px-1.5 py-0.5 text-[10px] bg-gray-100 text-gray-500 rounded-full border border-gray-200",children:"Free"})]}),(0,g.jsx)("button",{onClick:()=>{b(null),localStorage.removeItem("gabaritando_user"),d([]),f([]),t(null),D(null),F(null),x("MY_DOCS"),r(new Set)},className:"text-xs text-red-500 hover:text-red-700 font-medium",children:"Sair"})]}),(0,g.jsx)("div",{className:"w-9 h-9 rounded-full bg-indigo-600 text-white flex items-center justify-center font-bold text-sm shadow-md",children:a?.username.substring(0,2).toUpperCase()})]})]}),"MY_DOCS"===w&&ag&&!ag.isLoading&&!ag.error&&(0,g.jsx)("div",{className:"bg-white border-b border-gray-100 px-4 py-2 flex items-center justify-center md:justify-start overflow-x-auto no-scrollbar",children:(0,g.jsx)("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg shrink-0",children:Object.values(b3).map(b=>(0,g.jsxs)("button",{onClick:()=>{"Question\xe1rio"!==b||"admin"===a.role||a.hasPaid?v(b):H(!0)},className:`px-3 py-1.5 md:px-4 md:py-2 rounded-md text-xs md:text-sm font-medium transition-all flex items-center whitespace-nowrap ${u===b?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[b,"Question\xe1rio"===b&&"admin"!==a.role&&!a.hasPaid&&(0,g.jsx)("svg",{className:"w-3 h-3 ml-2 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})]},b))})}),(0,g.jsx)("div",{className:"flex-1 overflow-y-auto p-4 pb-20 md:pb-4 md:p-8 relative bg-gray-50",children:"GLOBAL_QUIZ"===w?(0,g.jsx)("div",{className:"max-w-4xl mx-auto",children:C?(0,g.jsxs)("div",{children:[(0,g.jsxs)("button",{onClick:()=>D(null),className:"mb-4 flex items-center text-gray-500 hover:text-indigo-600",children:[(0,g.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Voltar para Sele\xe7\xe3o"]}),(0,g.jsx)(b0,{questions:C})]}):(0,g.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[(0,g.jsxs)("div",{className:"text-center mb-10",children:[(0,g.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Banco de Quest\xf5es Global"}),(0,g.jsx)("p",{className:"text-gray-500",children:"Pratique com quest\xf5es geradas por toda a comunidade. Selecione o concurso e a mat\xe9ria."})]}),(0,g.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 mb-8",children:[(0,g.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-xl border border-indigo-100 col-span-2 md:col-span-1",children:[(0,g.jsx)("h3",{className:"font-bold text-indigo-800 text-lg mb-1",children:"1. Tipo de Concurso"}),(0,g.jsxs)("select",{value:y,onChange:a=>z(a.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md border",children:[(0,g.jsx)("option",{value:"",children:"Selecione um concurso..."}),Object.keys(b5).map(a=>(0,g.jsx)("option",{value:a,children:a},a))]})]}),(0,g.jsxs)("div",{className:"bg-purple-50 p-4 rounded-xl border border-purple-100 col-span-2 md:col-span-1",children:[(0,g.jsx)("h3",{className:"font-bold text-purple-800 text-lg mb-1",children:"2. Mat\xe9ria"}),(0,g.jsxs)("select",{value:A,onChange:a=>B(a.target.value),disabled:!y,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md border disabled:bg-gray-100 disabled:text-gray-400",children:[(0,g.jsx)("option",{value:"",children:y?"Selecione uma mat\xe9ria...":"Escolha um concurso primeiro"}),y&&b5[y]?.map(a=>(0,g.jsx)("option",{value:a,children:a},a))]})]})]}),(0,g.jsxs)("div",{className:"flex flex-col items-center",children:[(0,g.jsx)("div",{className:"text-sm text-gray-500 mb-4",children:A?(0,g.jsxs)("span",{children:[k.filter(a=>a.subject===A).length," ","quest\xf5es de ",(0,g.jsx)("b",{children:A})," dispon\xedveis."]}):(0,g.jsxs)("span",{children:["Total geral: ",k.length," quest\xf5es."]})}),(0,g.jsxs)("button",{onClick:()=>{A&&D([...k.filter(a=>a.subject===A)].sort(()=>.5-Math.random()).slice(0,20))},disabled:!A||0===k.filter(a=>a.subject===A).length,className:"px-8 py-3 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[(0,g.jsxs)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Iniciar Simulado R\xe1pido (20 Quest\xf5es)"]})]})]})}):"GLOBAL_FLASHCARDS"===w?(0,g.jsx)("div",{className:"max-w-4xl mx-auto",children:E?(0,g.jsxs)("div",{children:[(0,g.jsxs)("button",{onClick:()=>F(null),className:"mb-4 flex items-center text-gray-500 hover:text-green-600",children:[(0,g.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Voltar para Sele\xe7\xe3o"]}),(0,g.jsx)(n,{cards:E})]}):(0,g.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[(0,g.jsxs)("div",{className:"text-center mb-10",children:[(0,g.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Banco de Flashcards Global"}),(0,g.jsx)("p",{className:"text-gray-500",children:"Revise conte\xfados de toda a comunidade. Selecione o concurso e a mat\xe9ria."})]}),(0,g.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 mb-8",children:[(0,g.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-xl border border-indigo-100 col-span-2 md:col-span-1",children:[(0,g.jsx)("h3",{className:"font-bold text-indigo-800 text-lg mb-1",children:"1. Tipo de Concurso"}),(0,g.jsxs)("select",{value:y,onChange:a=>z(a.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md border",children:[(0,g.jsx)("option",{value:"",children:"Selecione um concurso..."}),Object.keys(b5).map(a=>(0,g.jsx)("option",{value:a,children:a},a))]})]}),(0,g.jsxs)("div",{className:"bg-green-50 p-4 rounded-xl border border-green-100 col-span-2 md:col-span-1",children:[(0,g.jsx)("h3",{className:"font-bold text-green-800 text-lg mb-1",children:"2. Mat\xe9ria"}),(0,g.jsxs)("select",{value:A,onChange:a=>B(a.target.value),disabled:!y,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm rounded-md border disabled:bg-gray-100 disabled:text-gray-400",children:[(0,g.jsx)("option",{value:"",children:y?"Selecione uma mat\xe9ria...":"Escolha um concurso primeiro"}),y&&b5[y]?.map(a=>(0,g.jsx)("option",{value:a,children:a},a))]})]})]}),(0,g.jsxs)("div",{className:"flex flex-col items-center",children:[(0,g.jsx)("div",{className:"text-sm text-gray-500 mb-4",children:A?(0,g.jsxs)("span",{children:[o.filter(a=>a.subject===A).length," ","flashcards de ",(0,g.jsx)("b",{children:A})," dispon\xedveis."]}):(0,g.jsxs)("span",{children:["Total geral: ",o.length," flashcards."]})}),(0,g.jsxs)("button",{onClick:()=>{A&&F([...o.filter(a=>a.subject===A)].sort(()=>.5-Math.random()).slice(0,40))},disabled:!A||0===o.filter(a=>a.subject===A).length,className:"px-8 py-3 bg-green-600 text-white font-bold rounded-lg hover:bg-green-700 transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[(0,g.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"Iniciar Revis\xe3o R\xe1pida (40 Cards)"]})]})]})}):(0,g.jsx)(g.Fragment,{children:ag?ag.isLoading?(0,g.jsxs)("div",{className:"h-full flex flex-col items-center justify-center p-4 text-center",children:[(0,g.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 md:h-16 md:w-16 border-t-4 border-b-4 border-indigo-600 mb-6"}),(0,g.jsx)("h3",{className:"text-lg md:text-xl font-semibold text-gray-700",children:"A IA est\xe1 estudando..."}),(0,g.jsx)("p",{className:"text-gray-500 mt-2 text-sm",children:"Gerando materiais de estudo."})]}):ag.error?(0,g.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-red-500 p-4 text-center",children:[(0,g.jsx)("svg",{className:"w-16 h-16 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,g.jsx)("p",{children:ag.error})]}):ag.content?(0,g.jsxs)("div",{className:"max-w-7xl mx-auto h-full",children:["Flashcards"===u&&(0,g.jsx)(n,{cards:ag.content.flashcards}),"Mapa Mental"===u&&(0,g.jsx)(b_,{data:ag.content.mindMap}),"Question\xe1rio"===u&&(0,g.jsx)(b0,{questions:ag.content.quiz})]}):null:(0,g.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 p-4 text-center",children:[(0,g.jsx)("svg",{className:"w-16 h-16 md:w-20 md:h-20 mb-4 text-gray-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,g.jsx)("p",{className:"text-base md:text-lg font-medium",children:"Adicione um PDF para come\xe7ar."})]})})}),(0,g.jsxs)("div",{className:"md:hidden fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 h-16 flex items-center justify-around z-50 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]",children:[(0,g.jsxs)("button",{onClick:()=>L(!K),className:`flex flex-col items-center justify-center w-full h-full space-y-1 ${K?"text-indigo-600":"text-gray-500"}`,children:[(0,g.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,g.jsx)("span",{className:"text-[10px] font-medium",children:"Menu"})]}),(0,g.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-full space-y-1 text-gray-500 hover:text-indigo-600 cursor-pointer",children:[(0,g.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,g.jsx)("span",{className:"text-[10px] font-medium",children:"Add PDF"}),(0,g.jsx)("input",{type:"file",accept:"application/pdf",className:"hidden",onChange:ac,disabled:I})]})]}),K&&(0,g.jsxs)("div",{className:"md:hidden fixed inset-0 z-40",children:[(0,g.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:()=>L(!1)}),(0,g.jsxs)("div",{className:"absolute bottom-16 left-0 w-full h-[70vh] bg-white rounded-t-2xl shadow-xl flex flex-col animate-slide-up",children:[(0,g.jsxs)("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center bg-gray-50 rounded-t-2xl",children:[(0,g.jsx)("h3",{className:"font-bold text-gray-700",children:"Navega\xe7\xe3o e Documentos"}),(0,g.jsx)("button",{onClick:()=>L(!1),className:"p-1 bg-white rounded-full text-gray-500 shadow-sm",children:(0,g.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,g.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:ai()})]})]})]}),G&&(0,g.jsx)(m,{onClose:()=>H(!1),onSimulatePayment:()=>{if(a){let c={...a,hasPaid:!0};b(c),localStorage.setItem("gabaritando_user",JSON.stringify(c)),H(!1),alert("Pagamento realizado com sucesso! Agora voc\xea \xe9 Premium.")}},user:a}),Q&&(0,g.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm p-4",children:(0,g.jsx)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-sm overflow-hidden p-6 animate-scale-in",children:(0,g.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,g.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4 text-red-600",children:(0,g.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,g.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Excluir Documento?"}),(0,g.jsx)("p",{className:"text-gray-500 mb-6",children:"Tem certeza que deseja excluir este PDF e todos os materiais gerados? Esta a\xe7\xe3o n\xe3o pode ser desfeita."}),(0,g.jsxs)("div",{className:"flex space-x-3 w-full",children:[(0,g.jsx)("button",{onClick:()=>R(null),className:"flex-1 px-4 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium",children:"Cancelar"}),(0,g.jsx)("button",{onClick:()=>{Q&&(d(a=>a.filter(a=>a.id!==Q)),s===Q&&t(null),R(null))},className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium shadow-md",children:"Excluir"})]})]})})})]}):(0,g.jsx)(j,{onLogin:a=>{b(a),localStorage.setItem("gabaritando_user",JSON.stringify(a))}})}},5591:a=>{"use strict";a.exports=require("https")},5618:function(a,b,c){"use strict";var d=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=this&&this.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(b,"__esModule",{value:!0}),b.createCrypto=function(){return h()?new f.BrowserCrypto:new g.NodeCrypto},b.hasBrowserCrypto=h;let f=c(9517),g=c(3015);function h(){return"undefined"!=typeof window&&void 0!==window.crypto&&void 0!==window.crypto.subtle}e(c(9370),b)},5636:(a,b,c)=>{Promise.resolve().then(c.bind(c,4494))},5695:()=>{},5936:(a,b,c)=>{var d=null;let e=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,f=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/;a.exports=function(a){"use strict";var b={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(null!=a){if(!0===a.strict&&(b.strict=!0),!0===a.storeAsString&&(b.storeAsString=!0),b.alwaysParseAsBig=!0===a.alwaysParseAsBig&&a.alwaysParseAsBig,b.useNativeBigInt=!0===a.useNativeBigInt&&a.useNativeBigInt,void 0!==a.constructorAction)if("error"===a.constructorAction||"ignore"===a.constructorAction||"preserve"===a.constructorAction)b.constructorAction=a.constructorAction;else throw Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${a.constructorAction}`);if(void 0!==a.protoAction)if("error"===a.protoAction||"ignore"===a.protoAction||"preserve"===a.protoAction)b.protoAction=a.protoAction;else throw Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${a.protoAction}`)}var g,h,i,j,k={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},l=function(a){throw{name:"SyntaxError",message:a,at:g,text:i}},m=function(a){return a&&a!==h&&l("Expected '"+a+"' instead of '"+h+"'"),h=i.charAt(g),g+=1,h},n=function(){var a,e="";for("-"===h&&(e="-",m("-"));h>="0"&&h<="9";)e+=h,m();if("."===h)for(e+=".";m()&&h>="0"&&h<="9";)e+=h;if("e"===h||"E"===h)for(e+=h,m(),("-"===h||"+"===h)&&(e+=h,m());h>="0"&&h<="9";)e+=h,m();if(isFinite(a=+e))return(null==d&&(d=c(4458)),e.length>15)?b.storeAsString?e:b.useNativeBigInt?BigInt(e):new d(e):b.alwaysParseAsBig?b.useNativeBigInt?BigInt(a):new d(a):a;l("Bad number")},o=function(){var a,b,c,d="";if('"'===h)for(var e=g;m();){if('"'===h)return g-1>e&&(d+=i.substring(e,g-1)),m(),d;if("\\"===h){if(g-1>e&&(d+=i.substring(e,g-1)),m(),"u"===h){for(b=0,c=0;b<4&&isFinite(a=parseInt(m(),16));b+=1)c=16*c+a;d+=String.fromCharCode(c)}else if("string"==typeof k[h])d+=k[h];else break;e=g}}l("Bad string")},p=function(){for(;h&&h<=" ";)m()},q=function(){switch(h){case"t":return m("t"),m("r"),m("u"),m("e"),!0;case"f":return m("f"),m("a"),m("l"),m("s"),m("e"),!1;case"n":return m("n"),m("u"),m("l"),m("l"),null}l("Unexpected '"+h+"'")},r=function(){var a=[];if("["===h){if(m("["),p(),"]"===h)return m("]"),a;for(;h;){if(a.push(j()),p(),"]"===h)return m("]"),a;m(","),p()}}l("Bad array")},s=function(){var a,c=Object.create(null);if("{"===h){if(m("{"),p(),"}"===h)return m("}"),c;for(;h;){if(a=o(),p(),m(":"),!0===b.strict&&Object.hasOwnProperty.call(c,a)&&l('Duplicate key "'+a+'"'),!0===e.test(a)?"error"===b.protoAction?l("Object contains forbidden prototype property"):"ignore"===b.protoAction?j():c[a]=j():!0===f.test(a)?"error"===b.constructorAction?l("Object contains forbidden constructor property"):"ignore"===b.constructorAction?j():c[a]=j():c[a]=j(),p(),"}"===h)return m("}"),c;m(","),p()}}l("Bad object")};return j=function(){switch(p(),h){case"{":return s();case"[":return r();case'"':return o();case"-":return n();default:return h>="0"&&h<="9"?n():q()}},function(a,b){var c;return i=a+"",g=0,h=" ",c=j(),p(),h&&l("Syntax error"),"function"==typeof b?function a(c,d){var e,f=c[d];return f&&"object"==typeof f&&Object.keys(f).forEach(function(b){void 0!==(e=a(f,b))?f[b]=e:delete f[b]}),b.call(c,d,f)}({"":c},""):c}}},6078:(a,b,c)=>{"use strict";let{EMPTY_BUFFER:d}=c(1010),e=Buffer[Symbol.species];function f(a,b,c,d,e){for(let f=0;f<e;f++)c[d+f]=a[f]^b[3&f]}function g(a,b){for(let c=0;c<a.length;c++)a[c]^=b[3&c]}function h(a){let b;return(h.readOnly=!0,Buffer.isBuffer(a))?a:(a instanceof ArrayBuffer?b=new e(a):ArrayBuffer.isView(a)?b=new e(a.buffer,a.byteOffset,a.byteLength):(b=Buffer.from(a),h.readOnly=!1),b)}if(a.exports={concat:function(a,b){if(0===a.length)return d;if(1===a.length)return a[0];let c=Buffer.allocUnsafe(b),f=0;for(let b=0;b<a.length;b++){let d=a[b];c.set(d,f),f+=d.length}return f<b?new e(c.buffer,c.byteOffset,f):c},mask:f,toArrayBuffer:function(a){return a.length===a.buffer.byteLength?a.buffer:a.buffer.slice(a.byteOffset,a.byteOffset+a.length)},toBuffer:h,unmask:g},!process.env.WS_NO_BUFFER_UTIL)try{let b=c(9727);a.exports.mask=function(a,c,d,e,g){g<48?f(a,c,d,e,g):b.mask(a,c,d,e,g)},a.exports.unmask=function(a,c){a.length<32?g(a,c):b.unmask(a,c)}}catch(a){}},6104:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.DefaultAwsSecurityCredentialsSupplier=void 0;let d=c(7493);class e{regionUrl;securityCredentialsUrl;imdsV2SessionTokenUrl;additionalGaxiosOptions;constructor(a){this.regionUrl=a.regionUrl,this.securityCredentialsUrl=a.securityCredentialsUrl,this.imdsV2SessionTokenUrl=a.imdsV2SessionTokenUrl,this.additionalGaxiosOptions=a.additionalGaxiosOptions}async getAwsRegion(a){if(this.#v)return this.#v;let b=new Headers;if(!this.#v&&this.imdsV2SessionTokenUrl&&b.set("x-aws-ec2-metadata-token",await this.#w(a.transporter)),!this.regionUrl)throw RangeError('Unable to determine AWS region due to missing "options.credential_source.region_url"');let c={...this.additionalGaxiosOptions,url:this.regionUrl,method:"GET",headers:b};d.AuthClient.setMethodName(c,"getAwsRegion");let e=await a.transporter.request(c);return e.data.substr(0,e.data.length-1)}async getAwsSecurityCredentials(a){if(this.#x)return this.#x;let b=new Headers;this.imdsV2SessionTokenUrl&&b.set("x-aws-ec2-metadata-token",await this.#w(a.transporter));let c=await this.#y(b,a.transporter),d=await this.#z(c,b,a.transporter);return{accessKeyId:d.AccessKeyId,secretAccessKey:d.SecretAccessKey,token:d.Token}}async #w(a){let b={...this.additionalGaxiosOptions,url:this.imdsV2SessionTokenUrl,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"300"}};return d.AuthClient.setMethodName(b,"#getImdsV2SessionToken"),(await a.request(b)).data}async #y(a,b){if(!this.securityCredentialsUrl)throw Error('Unable to determine AWS role name due to missing "options.credential_source.url"');let c={...this.additionalGaxiosOptions,url:this.securityCredentialsUrl,method:"GET",headers:a};return d.AuthClient.setMethodName(c,"#getAwsRoleName"),(await b.request(c)).data}async #z(a,b,c){let e={...this.additionalGaxiosOptions,url:`${this.securityCredentialsUrl}/${a}`,headers:b};return d.AuthClient.setMethodName(e,"#retrieveAwsSecurityCredentials"),(await c.request(e)).data}get #v(){return process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION||null}get #x(){return process.env.AWS_ACCESS_KEY_ID&&process.env.AWS_SECRET_ACCESS_KEY?{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY,token:process.env.AWS_SESSION_TOKEN}:null}}b.DefaultAwsSecurityCredentialsSupplier=e},6197:()=>{},6199:(a,b,c)=>{"use strict";b.kF=void 0;let d=c(8065);Object.defineProperty(b,"kF",{enumerable:!0,get:function(){return d.GoogleAuth}}),c(257),c(5065),c(7493),c(2012),c(2698),c(8773),c(4833),c(7539),c(7320),c(8247),c(3914),c(1045),c(5426),c(1936),c(6486),c(9831),c(4442),c(1777),c(9287),c(4972),c(7019),c(7436),new d.GoogleAuth},6277:(a,b)=>{"use strict";function c(){let a,b,c=new Promise((c,d)=>{a=c,b=d});return{resolve:a,reject:b,promise:c}}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"createPromiseWithResolvers",{enumerable:!0,get:function(){return c}})},6300:a=>{"use strict";a.exports=JSON.parse('{"name":"gaxios","version":"7.1.3","description":"A simple common HTTP client specifically for Google APIs and services.","main":"build/cjs/src/index.js","types":"build/cjs/src/index.d.ts","files":["build/"],"exports":{".":{"import":{"types":"./build/esm/src/index.d.ts","default":"./build/esm/src/index.js"},"require":{"types":"./build/cjs/src/index.d.ts","default":"./build/cjs/src/index.js"}}},"scripts":{"lint":"gts check --no-inline-config","test":"c8 mocha build/esm/test","presystem-test":"npm run compile","system-test":"mocha build/esm/system-test --timeout 80000","compile":"tsc -b ./tsconfig.json ./tsconfig.cjs.json && node utils/enable-esm.mjs","fix":"gts fix","prepare":"npm run compile","pretest":"npm run compile","webpack":"webpack","prebrowser-test":"npm run compile","browser-test":"node build/browser-test/browser-test-runner.js","docs":"jsdoc -c .jsdoc.js","docs-test":"linkinator docs","predocs-test":"npm run docs","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","prelint":"cd samples; npm link ../; npm install","clean":"gts clean"},"repository":{"type":"git","directory":"packages/gaxios","url":"https://github.com/googleapis/google-cloud-node-core.git"},"keywords":["google"],"engines":{"node":">=18"},"author":"Google, LLC","license":"Apache-2.0","devDependencies":{"@babel/plugin-proposal-private-methods":"^7.18.6","@types/cors":"^2.8.6","@types/express":"^5.0.0","@types/extend":"^3.0.1","@types/mocha":"^10.0.10","@types/multiparty":"4.2.1","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","@types/tmp":"0.2.6","assert":"^2.0.0","browserify":"^17.0.0","c8":"^10.0.0","cors":"^2.8.5","express":"^5.0.0","gts":"^6.0.0","is-docker":"^3.0.0","jsdoc":"^4.0.0","jsdoc-fresh":"^5.0.0","jsdoc-region-tag":"^4.0.0","karma":"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-remap-coverage":"^0.1.5","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1","linkinator":"^6.1.2","mocha":"^11.1.0","multiparty":"^4.2.1","mv":"^2.1.1","ncp":"^2.0.0","nock":"^14.0.0-beta.13","null-loader":"^4.0.0","pack-n-play":"^4.0.0","puppeteer":"^24.0.0","sinon":"^21.0.0","stream-browserify":"^3.0.0","tmp":"0.2.5","ts-loader":"^9.5.2","typescript":"^5.8.3","webpack":"^5.35.0","webpack-cli":"^6.0.1"},"dependencies":{"extend":"^3.0.2","https-proxy-agent":"^7.0.1","node-fetch":"^3.3.2","rimraf":"^5.0.1"},"homepage":"https://github.com/googleapis/google-cloud-node-core/tree/main/packages/gaxios"}')},6439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},6440:(a,b)=>{"use strict";b.byteLength=function(a){var b=i(a),c=b[0],d=b[1];return(c+d)*3/4-d},b.toByteArray=function(a){var b,c,f=i(a),g=f[0],h=f[1],j=new e((g+h)*3/4-h),k=0,l=h>0?g-4:g;for(c=0;c<l;c+=4)b=d[a.charCodeAt(c)]<<18|d[a.charCodeAt(c+1)]<<12|d[a.charCodeAt(c+2)]<<6|d[a.charCodeAt(c+3)],j[k++]=b>>16&255,j[k++]=b>>8&255,j[k++]=255&b;return 2===h&&(b=d[a.charCodeAt(c)]<<2|d[a.charCodeAt(c+1)]>>4,j[k++]=255&b),1===h&&(b=d[a.charCodeAt(c)]<<10|d[a.charCodeAt(c+1)]<<4|d[a.charCodeAt(c+2)]>>2,j[k++]=b>>8&255,j[k++]=255&b),j},b.fromByteArray=function(a){for(var b,d=a.length,e=d%3,f=[],g=0,h=d-e;g<h;g+=16383)f.push(function(a,b,d){for(var e,f=[],g=b;g<d;g+=3)e=(a[g]<<16&0xff0000)+(a[g+1]<<8&65280)+(255&a[g+2]),f.push(c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]);return f.join("")}(a,g,g+16383>h?h:g+16383));return 1===e?f.push(c[(b=a[d-1])>>2]+c[b<<4&63]+"=="):2===e&&f.push(c[(b=(a[d-2]<<8)+a[d-1])>>10]+c[b>>4&63]+c[b<<2&63]+"="),f.join("")};for(var c=[],d=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,h=f.length;g<h;++g)c[g]=f[g],d[f.charCodeAt(g)]=g;function i(a){var b=a.length;if(b%4>0)throw Error("Invalid string. Length must be a multiple of 4");var c=a.indexOf("=");-1===c&&(c=b);var d=c===b?0:4-c%4;return[c,d]}d[45]=62,d[95]=63},6443:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c={isHangingPromiseRejectionError:function(){return e},makeDevtoolsIOAwarePromise:function(){return k},makeHangingPromise:function(){return i}};for(var d in c)Object.defineProperty(b,d,{enumerable:!0,get:c[d]});function e(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===f}let f="HANGING_PROMISE_REJECTION";class g extends Error{constructor(a,b){super(`During prerendering, ${b} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${b} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context. This occurred at route "${a}".`),this.route=a,this.expression=b,this.digest=f}}let h=new WeakMap;function i(a,b,c){if(a.aborted)return Promise.reject(new g(b,c));{let d=new Promise((d,e)=>{let f=e.bind(null,new g(b,c)),i=h.get(a);if(i)i.push(f);else{let b=[f];h.set(a,b),a.addEventListener("abort",()=>{for(let a=0;a<b.length;a++)b[a]()},{once:!0})}});return d.catch(j),d}}function j(){}function k(a,b,c){return b.stagedRendering?b.stagedRendering.delayUntilStage(c,void 0,a):new Promise(b=>{setTimeout(()=>{b(a)},0)})}},6486:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AwsRequestSigner=void 0;let d=c(5065),e=c(5618),f="AWS4-HMAC-SHA256";class g{getCredentials;region;crypto;constructor(a,b){this.getCredentials=a,this.region=b,this.crypto=(0,e.createCrypto)()}async getRequestOptions(a){if(!a.url)throw RangeError('"url" is required in "amzOptions"');let b="object"==typeof a.data?JSON.stringify(a.data):a.data,c=a.url,e=a.method||"GET",f=a.body||b,g=a.headers,h=await this.getCredentials(),i=new URL(c);if("string"!=typeof f&&void 0!==f)throw TypeError(`'requestPayload' is expected to be a string if provided. Got: ${f}`);let k=await j({crypto:this.crypto,host:i.host,canonicalUri:i.pathname,canonicalQuerystring:i.search.slice(1),method:e,region:this.region,securityCredentials:h,requestPayload:f,additionalAmzHeaders:g}),l=d.Gaxios.mergeHeaders(k.amzDate?{"x-amz-date":k.amzDate}:{},{authorization:k.authorizationHeader,host:i.host},g||{});h.token&&d.Gaxios.mergeHeaders(l,{"x-amz-security-token":h.token});let m={url:c,method:e,headers:l};return void 0!==f&&(m.body=f),m}}async function h(a,b,c){return await a.signWithHmacSha256(b,c)}async function i(a,b,c,d,e){let f=await h(a,`AWS4${b}`,c),g=await h(a,f,d),i=await h(a,g,e);return await h(a,i,"aws4_request")}async function j(a){let b=d.Gaxios.mergeHeaders(a.additionalAmzHeaders),c=a.requestPayload||"",g=a.host.split(".")[0],j=new Date,k=j.toISOString().replace(/[-:]/g,"").replace(/\.[0-9]+/,""),l=j.toISOString().replace(/[-]/g,"").replace(/T.*/,"");a.securityCredentials.token&&b.set("x-amz-security-token",a.securityCredentials.token);let m=d.Gaxios.mergeHeaders({host:a.host},b.has("date")?{}:{"x-amz-date":k},b),n="",o=[...m.keys()].sort();o.forEach(a=>{n+=`${a}:${m.get(a)}
`});let p=o.join(";"),q=await a.crypto.sha256DigestHex(c),r=`${a.method.toUpperCase()}
${a.canonicalUri}
${a.canonicalQuerystring}
${n}
${p}
${q}`,s=`${l}/${a.region}/${g}/aws4_request`,t=`${f}
${k}
${s}
`+await a.crypto.sha256DigestHex(r),u=await i(a.crypto,a.securityCredentials.secretAccessKey,l,a.region,g),v=await h(a.crypto,u,t),w=`${f} Credential=${a.securityCredentials.accessKeyId}/${s}, SignedHeaders=${p}, Signature=${(0,e.fromArrayBufferToHex)(v)}`;return{amzDate:b.has("date")?void 0:k,authorizationHeader:w,canonicalQuerystring:a.canonicalQuerystring}}b.AwsRequestSigner=g},6487:()=>{},6537:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>f,metadata:()=>e});var d=c(5735);c(1135);let e={title:"GabaritandoIA",description:"Seu assistente de estudos inteligente",manifest:"/manifest.json",appleWebApp:{capable:!0,statusBarStyle:"default",title:"GabaritandoIA"}};function f({children:a}){return(0,d.jsx)("html",{lang:"pt-BR",suppressHydrationWarning:!0,children:(0,d.jsx)("body",{className:"antialiased font-sans bg-gray-50 text-gray-900",suppressHydrationWarning:!0,children:(0,d.jsx)("div",{id:"root",children:a})})})}},6560:function(a,b,c){"use strict";var d=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(b,"__esModule",{value:!0}),b.GaxiosError=b.GAXIOS_ERROR_SYMBOL=void 0,b.defaultErrorRedactor=function a(b){let c="<<REDACTED> - See `errorRedactor` option in `gaxios` for configuration>.";function d(a){a&&a.forEach((b,d)=>{(/^authentication$/i.test(d)||/^authorization$/i.test(d)||/secret/i.test(d))&&a.set(d,c)})}function e(a,b){if("object"==typeof a&&null!==a&&"string"==typeof a[b]){let d=a[b];(/grant_type=/i.test(d)||/assertion=/i.test(d)||/secret/i.test(d))&&(a[b]=c)}}function f(a){!a||"object"!=typeof a||(a instanceof FormData||a instanceof URLSearchParams||"forEach"in a&&"set"in a?a.forEach((b,d)=>{(["grant_type","assertion"].includes(d)||/secret/.test(d))&&a.set(d,c)}):("grant_type"in a&&(a.grant_type=c),"assertion"in a&&(a.assertion=c),"client_secret"in a&&(a.client_secret=c)))}return b.config&&(d(b.config.headers),e(b.config,"data"),f(b.config.data),e(b.config,"body"),f(b.config.body),b.config.url.searchParams.has("token")&&b.config.url.searchParams.set("token",c),b.config.url.searchParams.has("client_secret")&&b.config.url.searchParams.set("client_secret",c)),b.response&&(a({config:b.response.config}),d(b.response.headers),b.response.bodyUsed&&(e(b.response,"data"),f(b.response.data))),b};let e=d(c(2267)),f=d(c(4420)).default.pkg;b.GAXIOS_ERROR_SYMBOL=Symbol.for(`${f.name}-gaxios-error`);class g extends Error{config;response;code;status;error;[b.GAXIOS_ERROR_SYMBOL]=f.version;static[Symbol.hasInstance](a){return!!a&&"object"==typeof a&&b.GAXIOS_ERROR_SYMBOL in a&&a[b.GAXIOS_ERROR_SYMBOL]===f.version||Function.prototype[Symbol.hasInstance].call(g,a)}constructor(a,b,c,d){if(super(a,{cause:d}),this.config=b,this.response=c,this.error=d instanceof Error?d:void 0,this.config=(0,e.default)(!0,{},b),this.response&&(this.response.config=(0,e.default)(!0,{},this.response.config)),this.response){try{this.response.data=function(a,b){switch(a){case"stream":default:return b;case"json":return JSON.parse(JSON.stringify(b));case"arraybuffer":return JSON.parse(Buffer.from(b).toString("utf8"));case"blob":return JSON.parse(b.text())}}(this.config.responseType,this.response?.bodyUsed?this.response?.data:void 0)}catch{}this.status=this.response.status}d instanceof DOMException?this.code=d.name:d&&"object"==typeof d&&"code"in d&&("string"==typeof d.code||"number"==typeof d.code)&&(this.code=d.code)}static extractAPIErrorFromResponse(a,b="The request failed"){let c=b;if("string"==typeof a.data&&(c=a.data),a.data&&"object"==typeof a.data&&"error"in a.data&&a.data.error&&!a.ok){if("string"==typeof a.data.error)return{message:a.data.error,code:a.status,status:a.statusText};if("object"==typeof a.data.error){c="message"in a.data.error&&"string"==typeof a.data.error.message?a.data.error.message:c;let b="status"in a.data.error&&"string"==typeof a.data.error.status?a.data.error.status:a.statusText,d="code"in a.data.error&&"number"==typeof a.data.error.code?a.data.error.code:a.status;if("errors"in a.data.error&&Array.isArray(a.data.error.errors)){let e=[];for(let b of a.data.error.errors)"object"==typeof b&&"message"in b&&"string"==typeof b.message&&e.push(b.message);return Object.assign({message:e.join("\n")||c,code:d,status:b},a.data.error)}return Object.assign({message:c,code:d,status:b},a.data.error)}}return{message:c,code:a.status,status:a.statusText}}}b.GaxiosError=g},6656:(a,b,c)=>{"use strict";let d,e;Object.defineProperty(b,"__esModule",{value:!0});var f={BubbledError:function(){return q},SpanKind:function(){return o},SpanStatusCode:function(){return n},getTracer:function(){return y},isBubbledError:function(){return r}};for(var g in f)Object.defineProperty(b,g,{enumerable:!0,get:f[g]});let h=c(282),i=c(2529),j=process.env.NEXT_OTEL_PERFORMANCE_PREFIX;try{d=c(1320)}catch(a){d=c(1320)}let{context:k,propagation:l,trace:m,SpanStatusCode:n,SpanKind:o,ROOT_CONTEXT:p}=d;class q extends Error{constructor(a,b){super(),this.bubble=a,this.result=b}}function r(a){return"object"==typeof a&&null!==a&&a instanceof q}let s=(a,b)=>{r(b)&&b.bubble?a.setAttribute("next.bubble",!0):(b&&(a.recordException(b),a.setAttribute("error.type",b.name)),a.setStatus({code:n.ERROR,message:null==b?void 0:b.message})),a.end()},t=new Map,u=d.createContextKey("next.rootSpanId"),v=0,w={set(a,b,c){a.push({key:b,value:c})}};class x{getTracerInstance(){return m.getTracer("next.js","0.0.1")}getContext(){return k}getTracePropagationData(){let a=k.active(),b=[];return l.inject(a,b,w),b}getActiveScopeSpan(){return m.getSpan(null==k?void 0:k.active())}withPropagatedContext(a,b,c){let d=k.active();if(m.getSpanContext(d))return b();let e=l.extract(d,a,c);return k.with(e,b)}trace(...a){let[b,c,d]=a,{fn:e,options:f}="function"==typeof c?{fn:c,options:{}}:{fn:d,options:{...c}},g=f.spanName??b;if(!h.NextVanillaSpanAllowlist.has(b)&&"1"!==process.env.NEXT_OTEL_VERBOSE||f.hideSpan)return e();let l=this.getSpanContext((null==f?void 0:f.parentSpan)??this.getActiveScopeSpan());l||(l=(null==k?void 0:k.active())??p);let m=l.getValue(u),n="number"!=typeof m||!t.has(m),o=v++;return f.attributes={"next.span_name":g,"next.span_type":b,...f.attributes},k.with(l.setValue(u,o),()=>this.getTracerInstance().startActiveSpan(g,f,a=>{let c;j&&b&&h.LogSpanAllowList.has(b)&&(c="performance"in globalThis&&"measure"in performance?globalThis.performance.now():void 0);let d=!1,g=()=>{!d&&(d=!0,t.delete(o),c&&performance.measure(`${j}:next-${(b.split(".").pop()||"").replace(/[A-Z]/g,a=>"-"+a.toLowerCase())}`,{start:c,end:performance.now()}))};if(n&&t.set(o,new Map(Object.entries(f.attributes??{}))),e.length>1)try{return e(a,b=>s(a,b))}catch(b){throw s(a,b),b}finally{g()}try{let b=e(a);if((0,i.isThenable)(b))return b.then(b=>(a.end(),b)).catch(b=>{throw s(a,b),b}).finally(g);return a.end(),g(),b}catch(b){throw s(a,b),g(),b}}))}wrap(...a){let b=this,[c,d,e]=3===a.length?a:[a[0],{},a[1]];return h.NextVanillaSpanAllowlist.has(c)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let a=d;"function"==typeof a&&"function"==typeof e&&(a=a.apply(this,arguments));let f=arguments.length-1,g=arguments[f];if("function"!=typeof g)return b.trace(c,a,()=>e.apply(this,arguments));{let d=b.getContext().bind(k.active(),g);return b.trace(c,a,(a,b)=>(arguments[f]=function(a){return null==b||b(a),d.apply(this,arguments)},e.apply(this,arguments)))}}:e}startSpan(...a){let[b,c]=a,d=this.getSpanContext((null==c?void 0:c.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(b,c,d)}getSpanContext(a){return a?m.setSpan(k.active(),a):void 0}getRootSpanAttributes(){let a=k.active().getValue(u);return t.get(a)}setRootSpanAttribute(a,b){let c=k.active().getValue(u),d=t.get(c);d&&!d.has(a)&&d.set(a,b)}}let y=(e=new x,()=>e)},6713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},6725:(a,b,c)=>{var d=c(9741).stringify,e=c(5936);a.exports=function(a){return{parse:e(a),stringify:d}},a.exports.parse=e(),a.exports.stringify=d},6738:(a,b)=>{"use strict";function c(a){return a.startsWith("/")?a:`/${a}`}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"ensureLeadingSlash",{enumerable:!0,get:function(){return c}})},6760:a=>{"use strict";a.exports=require("node:path")},6887:(a,b,c)=>{"use strict";a.exports=c(8538)},7019:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ExternalAccountAuthorizedUserClient=b.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE=void 0;let d=c(7493),e=c(5348),f=c(5065),g=c(7910),h=c(1777);b.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE="external_account_authorized_user";class i extends e.OAuthClientAuthHandler{#A;constructor(a){super(a),this.#A=a.tokenRefreshEndpoint}async refreshToken(a,b){let c={...i.RETRY_CONFIG,url:this.#A,method:"POST",headers:b,data:new URLSearchParams({grant_type:"refresh_token",refresh_token:a})};d.AuthClient.setMethodName(c,"refreshToken"),this.applyClientAuthenticationOptions(c);try{let a=await this.transporter.request(c),b=a.data;return b.res=a,b}catch(a){if(a instanceof f.GaxiosError&&a.response)throw(0,e.getErrorFromOAuthErrorResponse)(a.response.data,a);throw a}}}class j extends d.AuthClient{cachedAccessToken;externalAccountAuthorizedUserHandler;refreshToken;constructor(a){super(a),a.universe_domain&&(this.universeDomain=a.universe_domain),this.refreshToken=a.refresh_token;const b={confidentialClientType:"basic",clientId:a.client_id,clientSecret:a.client_secret};this.externalAccountAuthorizedUserHandler=new i({tokenRefreshEndpoint:a.token_url??"https://sts.{universeDomain}/v1/oauthtoken".replace("{universeDomain}",this.universeDomain),transporter:this.transporter,clientAuthentication:b}),this.cachedAccessToken=null,this.quotaProjectId=a.quota_project_id,"number"!=typeof a?.eagerRefreshThresholdMillis?this.eagerRefreshThresholdMillis=h.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=a.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!a?.forceRefreshOnFailure}async getAccessToken(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}}async getRequestHeaders(){let a=await this.getAccessToken(),b=new Headers({authorization:`Bearer ${a.token}`});return this.addSharedMetadataHeaders(b)}request(a,b){if(!b)return this.requestAsync(a);this.requestAsync(a).then(a=>b(null,a),a=>b(a,a.response))}async requestAsync(a,b=!1){let c;try{let b=await this.getRequestHeaders();a.headers=f.Gaxios.mergeHeaders(a.headers),this.addUserProjectAndAuthHeaders(a.headers,b),c=await this.transporter.request(a)}catch(d){let c=d.response;if(c){let d=c.status,e=c.config.data instanceof g.Readable;if(!b&&(401===d||403===d)&&!e&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(a,!0)}throw d}return c}async refreshAccessTokenAsync(){let a=await this.externalAccountAuthorizedUserHandler.refreshToken(this.refreshToken);return this.cachedAccessToken={access_token:a.access_token,expiry_date:new Date().getTime()+1e3*a.expires_in,res:a.res},void 0!==a.refresh_token&&(this.refreshToken=a.refresh_token),this.cachedAccessToken}isExpired(a){let b=new Date().getTime();return!!a.expiry_date&&b>=a.expiry_date-this.eagerRefreshThresholdMillis}}b.ExternalAccountAuthorizedUserClient=j},7030:a=>{"use strict";a.exports=require("node:net")},7044:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c={ACTION_HEADER:function(){return f},FLIGHT_HEADERS:function(){return n},NEXT_ACTION_NOT_FOUND_HEADER:function(){return u},NEXT_DID_POSTPONE_HEADER:function(){return q},NEXT_HMR_REFRESH_HASH_COOKIE:function(){return k},NEXT_HMR_REFRESH_HEADER:function(){return j},NEXT_HTML_REQUEST_ID_HEADER:function(){return w},NEXT_IS_PRERENDER_HEADER:function(){return t},NEXT_REQUEST_ID_HEADER:function(){return v},NEXT_REWRITTEN_PATH_HEADER:function(){return r},NEXT_REWRITTEN_QUERY_HEADER:function(){return s},NEXT_ROUTER_PREFETCH_HEADER:function(){return h},NEXT_ROUTER_SEGMENT_PREFETCH_HEADER:function(){return i},NEXT_ROUTER_STALE_TIME_HEADER:function(){return p},NEXT_ROUTER_STATE_TREE_HEADER:function(){return g},NEXT_RSC_UNION_QUERY:function(){return o},NEXT_URL:function(){return l},RSC_CONTENT_TYPE_HEADER:function(){return m},RSC_HEADER:function(){return e}};for(var d in c)Object.defineProperty(b,d,{enumerable:!0,get:c[d]});let e="rsc",f="next-action",g="next-router-state-tree",h="next-router-prefetch",i="next-router-segment-prefetch",j="next-hmr-refresh",k="__next_hmr_refresh_hash__",l="next-url",m="text/x-component",n=[e,g,h,j,i],o="_rsc",p="x-nextjs-stale-time",q="x-nextjs-postponed",r="x-nextjs-rewritten-path",s="x-nextjs-rewritten-query",t="x-nextjs-prerender",u="x-nextjs-action-not-found",v="x-nextjs-request-id",w="x-nextjs-html-request-id";("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},7067:a=>{"use strict";a.exports=require("node:http")},7075:a=>{"use strict";a.exports=require("node:stream")},7164:(a,b,c)=>{"use strict";var d=c(57).Buffer,e=c(8851);function f(a){if(d.isBuffer(a))return a;if("string"==typeof a)return d.from(a,"base64");throw TypeError("ECDSA signature must be a Base64 string or a Buffer")}function g(a,b,c){for(var d=0;b+d<c&&0===a[b+d];)++d;return a[b+d]>=128&&--d,d}a.exports={derToJose:function(a,b){a=f(a);var c=e(b),g=c+1,h=a.length,i=0;if(48!==a[i++])throw Error('Could not find expected "seq"');var j=a[i++];if(129===j&&(j=a[i++]),h-i<j)throw Error('"seq" specified length of "'+j+'", only "'+(h-i)+'" remaining');if(2!==a[i++])throw Error('Could not find expected "int" for "r"');var k=a[i++];if(h-i-2<k)throw Error('"r" specified length of "'+k+'", only "'+(h-i-2)+'" available');if(g<k)throw Error('"r" specified length of "'+k+'", max of "'+g+'" is acceptable');var l=i;if(i+=k,2!==a[i++])throw Error('Could not find expected "int" for "s"');var m=a[i++];if(h-i!==m)throw Error('"s" specified length of "'+m+'", expected "'+(h-i)+'"');if(g<m)throw Error('"s" specified length of "'+m+'", max of "'+g+'" is acceptable');var n=i;if((i+=m)!==h)throw Error('Expected to consume entire buffer, but "'+(h-i)+'" bytes remain');var o=c-k,p=c-m,q=d.allocUnsafe(o+k+p+m);for(i=0;i<o;++i)q[i]=0;a.copy(q,i,l+Math.max(-o,0),l+k),i=c;for(var r=i;i<r+p;++i)q[i]=0;return a.copy(q,i,n+Math.max(-p,0),n+m),q=(q=q.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(a,b){a=f(a);var c=e(b),h=a.length;if(h!==2*c)throw TypeError('"'+b+'" signatures must be "'+2*c+'" bytes, saw "'+h+'"');var i=g(a,0,c),j=g(a,c,a.length),k=c-i,l=c-j,m=2+k+1+1+l,n=m<128,o=d.allocUnsafe((n?2:3)+m),p=0;return o[p++]=48,n?o[p++]=m:(o[p++]=129,o[p++]=255&m),o[p++]=2,o[p++]=k,i<0?(o[p++]=0,p+=a.copy(o,p,0,c)):p+=a.copy(o,p,i,c),o[p++]=2,o[p++]=l,j<0?(o[p++]=0,a.copy(o,p,c)):a.copy(o,p,c+j),o}}},7320:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.JWT=void 0;let d=c(2681),e=c(7539),f=c(3914),g=c(7493);class h extends f.OAuth2Client{email;keyFile;key;keyId;defaultScopes;scopes;scope;subject;gtoken;additionalClaims;useJWTAccessWithScope;defaultServicePath;access;constructor(a={}){super(a),this.email=a.email,this.keyFile=a.keyFile,this.key=a.key,this.keyId=a.keyId,this.scopes=a.scopes,this.subject=a.subject,this.additionalClaims=a.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped(a){let b=new h(this);return b.scopes=a,b}async getRequestMetadataAsync(a){a=this.defaultServicePath?`https://${this.defaultServicePath}/`:a;let b=!this.hasUserScopes()&&a||this.useJWTAccessWithScope&&this.hasAnyScopes()||this.universeDomain!==g.DEFAULT_UNIVERSE;if(this.subject&&this.universeDomain!==g.DEFAULT_UNIVERSE)throw RangeError(`Service Account user is configured for the credential. Domain-wide delegation is not supported in universes other than ${g.DEFAULT_UNIVERSE}`);if(!this.apiKey&&b)if(this.additionalClaims&&this.additionalClaims.target_audience){let{tokens:a}=await this.refreshToken();return{headers:this.addSharedMetadataHeaders(new Headers({authorization:`Bearer ${a.id_token}`}))}}else{let b;this.access||(this.access=new e.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis)),this.hasUserScopes()?b=this.scopes:a||(b=this.defaultScopes);let c=this.useJWTAccessWithScope||this.universeDomain!==g.DEFAULT_UNIVERSE,d=await this.access.getRequestHeaders(a??void 0,this.additionalClaims,c?b:void 0);return{headers:this.addSharedMetadataHeaders(d)}}return this.hasAnyScopes()||this.apiKey?super.getRequestMetadataAsync(a):{headers:new Headers}}async fetchIdToken(a){let b=new d.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:a},transporter:this.transporter});if(await b.getToken({forceRefresh:!0}),!b.idToken)throw Error("Unknown error: Failed to fetch ID token");return b.idToken}hasUserScopes(){return!!this.scopes&&this.scopes.length>0}hasAnyScopes(){return!!this.scopes&&!!(this.scopes.length>0)||!!this.defaultScopes&&!!(this.defaultScopes.length>0)}authorize(a){if(!a)return this.authorizeAsync();this.authorizeAsync().then(b=>a(null,b),a)}async authorizeAsync(){let a=await this.refreshToken();if(!a)throw Error("No result returned");return this.credentials=a.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,a.tokens}async refreshTokenNoCache(){let a=this.createGToken(),b={access_token:(await a.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:a.expiresAt,id_token:a.idToken};return this.emit("tokens",b),{res:null,tokens:b}}createGToken(){return this.gtoken||(this.gtoken=new d.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims,transporter:this.transporter})),this.gtoken}fromJSON(a){if(!a)throw Error("Must pass in a JSON object containing the service account auth settings.");if(!a.client_email)throw Error("The incoming JSON object does not contain a client_email field");if(!a.private_key)throw Error("The incoming JSON object does not contain a private_key field");this.email=a.client_email,this.key=a.private_key,this.keyId=a.private_key_id,this.projectId=a.project_id,this.quotaProjectId=a.quota_project_id,this.universeDomain=a.universe_domain||this.universeDomain}fromStream(a,b){if(!b)return this.fromStreamAsync(a);this.fromStreamAsync(a).then(()=>b(),b)}fromStreamAsync(a){return new Promise((b,c)=>{if(!a)throw Error("Must pass in a stream containing the service account auth settings.");let d="";a.setEncoding("utf8").on("error",c).on("data",a=>d+=a).on("end",()=>{try{let a=JSON.parse(d);this.fromJSON(a),b()}catch(a){c(a)}})})}fromAPIKey(a){if("string"!=typeof a)throw Error("Must provide an API Key string.");this.apiKey=a}async getCredentials(){if(this.key)return{private_key:this.key,client_email:this.email};if(this.keyFile){let a=this.createGToken(),b=await a.getCredentials(this.keyFile);return{private_key:b.privateKey,client_email:b.clientEmail}}throw Error("A key or a keyFile must be provided to getCredentials.")}}b.JWT=h},7436:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.PassThroughClient=void 0;let d=c(7493);class e extends d.AuthClient{async request(a){return this.transporter.request(a)}async getAccessToken(){return{}}async getRequestHeaders(){return new Headers}}b.PassThroughClient=e},7493:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.AuthClient=b.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=b.DEFAULT_UNIVERSE=void 0;let d=c(4735),e=c(5065),f=c(2433),g=c(5128),h=c(8871);b.DEFAULT_UNIVERSE="googleapis.com",b.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS=3e5;class i extends d.EventEmitter{apiKey;projectId;quotaProjectId;transporter;credentials={};eagerRefreshThresholdMillis=b.DEFAULT_EAGER_REFRESH_THRESHOLD_MILLIS;forceRefreshOnFailure=!1;universeDomain=b.DEFAULT_UNIVERSE;static RequestMethodNameSymbol=Symbol("request method name");static RequestLogIdSymbol=Symbol("request log id");constructor(a={}){super();const c=(0,f.originalOrCamelOptions)(a);this.apiKey=a.apiKey,this.projectId=c.get("project_id")??null,this.quotaProjectId=c.get("quota_project_id"),this.credentials=c.get("credentials")??{},this.universeDomain=c.get("universe_domain")??b.DEFAULT_UNIVERSE,this.transporter=a.transporter??new e.Gaxios(a.transporterOptions),!1!==c.get("useAuthRequestParameters")&&(this.transporter.interceptors.request.add(i.DEFAULT_REQUEST_INTERCEPTOR),this.transporter.interceptors.response.add(i.DEFAULT_RESPONSE_INTERCEPTOR)),a.eagerRefreshThresholdMillis&&(this.eagerRefreshThresholdMillis=a.eagerRefreshThresholdMillis),this.forceRefreshOnFailure=a.forceRefreshOnFailure??!1}fetch(...a){let b,c=a[0],d=a[1],f=new Headers;return("string"==typeof c?b=new URL(c):c instanceof URL?b=c:c&&c.url&&(b=new URL(c.url)),c&&"object"==typeof c&&"headers"in c&&e.Gaxios.mergeHeaders(f,c.headers),d&&e.Gaxios.mergeHeaders(f,new Headers(d.headers)),"object"!=typeof c||c instanceof URL)?this.request({...d,headers:f,url:b}):this.request({...d,...c,headers:f,url:b})}setCredentials(a){this.credentials=a}addSharedMetadataHeaders(a){return!a.has("x-goog-user-project")&&this.quotaProjectId&&a.set("x-goog-user-project",this.quotaProjectId),a}addUserProjectAndAuthHeaders(a,b){let c=b.get("x-goog-user-project"),d=b.get("authorization");return c&&a.set("x-goog-user-project",c),d&&a.set("authorization",d),a}static log=(0,g.log)("auth");static DEFAULT_REQUEST_INTERCEPTOR={resolved:async a=>{if(!a.headers.has("x-goog-api-client")){let b=process.version.replace(/^v/,"");a.headers.set("x-goog-api-client",`gl-node/${b}`)}let b=a.headers.get("User-Agent");b?b.includes(`${h.PRODUCT_NAME}/`)||a.headers.set("User-Agent",`${b} ${h.USER_AGENT}`):a.headers.set("User-Agent",h.USER_AGENT);try{let b=a[i.RequestMethodNameSymbol],c=`${Math.floor(1e3*Math.random())}`;a[i.RequestLogIdSymbol]=c;let d={url:a.url,headers:a.headers};b?i.log.info("%s [%s] request %j",b,c,d):i.log.info("[%s] request %j",c,d)}catch(a){}return a}};static DEFAULT_RESPONSE_INTERCEPTOR={resolved:async a=>{try{let b=a.config,c=b[i.RequestMethodNameSymbol],d=b[i.RequestLogIdSymbol];c?i.log.info("%s [%s] response %j",c,d,a.data):i.log.info("[%s] response %j",d,a.data)}catch(a){}return a},rejected:async a=>{try{let b=a.config,c=b[i.RequestMethodNameSymbol],d=b[i.RequestLogIdSymbol];c?i.log.info("%s [%s] error %j",c,d,a.response?.data):i.log.error("[%s] error %j",d,a.response?.data)}catch(a){}throw a}};static setMethodName(a,b){try{a[i.RequestMethodNameSymbol]=b}catch(a){}}static get RETRY_CONFIG(){return{retry:!0,retryConfig:{httpMethodsToRetry:["GET","PUT","POST","HEAD","OPTIONS","DELETE"]}}}}b.AuthClient=i},7539:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.JWTAccess=void 0;let d=c(8687),e=c(2433),f={alg:"RS256",typ:"JWT"};class g{email;key;keyId;projectId;eagerRefreshThresholdMillis;cache=new e.LRUCache({capacity:500,maxAge:36e5});constructor(a,b,c,d){this.email=a,this.key=b,this.keyId=c,this.eagerRefreshThresholdMillis=d??3e5}getCachedKey(a,b){let c=a;if(b&&Array.isArray(b)&&b.length?c=a?`${a}_${b.join("_")}`:`${b.join("_")}`:"string"==typeof b&&(c=a?`${a}_${b}`:b),!c)throw Error("Scopes or url must be provided");return c}getRequestHeaders(a,b,c){let e,h=this.getCachedKey(a,c),i=this.cache.get(h),j=Date.now();if(i&&i.expiration-j>this.eagerRefreshThresholdMillis)return new Headers(i.headers);let k=Math.floor(Date.now()/1e3),l=g.getExpirationTime(k);if(Array.isArray(c)&&(c=c.join(" ")),e=c?{iss:this.email,sub:this.email,scope:c,exp:l,iat:k}:{iss:this.email,sub:this.email,aud:a,exp:l,iat:k},b){for(let a in e)if(b[a])throw Error(`The '${a}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`)}let m=this.keyId?{...f,kid:this.keyId}:f,n=Object.assign(e,b),o=d.sign({header:m,payload:n,secret:this.key}),p=new Headers({authorization:`Bearer ${o}`});return this.cache.set(h,{expiration:1e3*l,headers:p}),p}static getExpirationTime(a){return a+3600}fromJSON(a){if(!a)throw Error("Must pass in a JSON object containing the service account auth settings.");if(!a.client_email)throw Error("The incoming JSON object does not contain a client_email field");if(!a.private_key)throw Error("The incoming JSON object does not contain a private_key field");this.email=a.client_email,this.key=a.private_key,this.keyId=a.private_key_id,this.projectId=a.project_id}fromStream(a,b){if(!b)return this.fromStreamAsync(a);this.fromStreamAsync(a).then(()=>b(),b)}fromStreamAsync(a){return new Promise((b,c)=>{a||c(Error("Must pass in a stream containing the service account auth settings."));let d="";a.setEncoding("utf8").on("data",a=>d+=a).on("error",c).on("end",()=>{try{let a=JSON.parse(d);this.fromJSON(a),b()}catch(a){c(a)}})})}}b.JWTAccess=g},7767:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c={indexOfUint8Array:function(){return e},isEquivalentUint8Arrays:function(){return f},removeFromUint8Array:function(){return g}};for(var d in c)Object.defineProperty(b,d,{enumerable:!0,get:c[d]});function e(a,b){if(0===b.length)return 0;if(0===a.length||b.length>a.length)return -1;for(let c=0;c<=a.length-b.length;c++){let d=!0;for(let e=0;e<b.length;e++)if(a[c+e]!==b[e]){d=!1;break}if(d)return c}return -1}function f(a,b){if(a.length!==b.length)return!1;for(let c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}function g(a,b){let c=e(a,b);if(0===c)return a.subarray(b.length);if(!(c>-1))return a;{let d=new Uint8Array(a.length-b.length);return d.set(a.slice(0,c)),d.set(a.slice(c+b.length),c),d}}},7830:a=>{"use strict";a.exports=require("node:stream/web")},7910:a=>{"use strict";a.exports=require("stream")},7939:(a,b,c)=>{"use strict";var d=c(9428).Buffer,e=c(9428).SlowBuffer;function f(a,b){if(!d.isBuffer(a)||!d.isBuffer(b)||a.length!==b.length)return!1;for(var c=0,e=0;e<a.length;e++)c|=a[e]^b[e];return 0===c}a.exports=f,f.install=function(){d.prototype.equal=e.prototype.equal=function(a){return f(this,a)}};var g=d.prototype.equal,h=e.prototype.equal;f.restore=function(){d.prototype.equal=g,e.prototype.equal=h}},7975:a=>{"use strict";a.exports=require("node:util")},7990:()=>{},8061:(a,b,c)=>{var d,e=c(57).Buffer,f=c(5511),g=c(7164),h=c(8354),i="secret must be a string or buffer",j="key must be a string or a buffer",k="function"==typeof f.createPublicKey;function l(a){if(!e.isBuffer(a)&&"string"!=typeof a&&(!k||"object"!=typeof a||"string"!=typeof a.type||"string"!=typeof a.asymmetricKeyType||"function"!=typeof a.export))throw p(j)}function m(a){if(!e.isBuffer(a)&&"string"!=typeof a&&"object"!=typeof a)throw p("key must be a string, a buffer or an object")}function n(a){return a.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function o(a){var b=4-(a=a.toString()).length%4;if(4!==b)for(var c=0;c<b;++c)a+="=";return a.replace(/\-/g,"+").replace(/_/g,"/")}function p(a){var b=[].slice.call(arguments,1);return TypeError(h.format.bind(h,a).apply(null,b))}function q(a){var b;return b=a,e.isBuffer(b)||"string"==typeof b||(a=JSON.stringify(a)),a}function r(a){return function(b,c){!function(a){if(!e.isBuffer(a)){if("string"!=typeof a){if(!k||"object"!=typeof a||"secret"!==a.type||"function"!=typeof a.export)throw p(i)}}}(c),b=q(b);var d=f.createHmac("sha"+a,c);return n((d.update(b),d.digest("base64")))}}k&&(j+=" or a KeyObject",i+="or a KeyObject");var s="timingSafeEqual"in f?function(a,b){return a.byteLength===b.byteLength&&f.timingSafeEqual(a,b)}:function(a,b){return d||(d=c(7939)),d(a,b)};function t(a){return function(b,c,d){var f=r(a)(b,d);return s(e.from(c),e.from(f))}}function u(a){return function(b,c){m(c),b=q(b);var d=f.createSign("RSA-SHA"+a);return n((d.update(b),d.sign(c,"base64")))}}function v(a){return function(b,c,d){l(d),b=q(b),c=o(c);var e=f.createVerify("RSA-SHA"+a);return e.update(b),e.verify(d,c,"base64")}}function w(a){return function(b,c){m(c),b=q(b);var d=f.createSign("RSA-SHA"+a);return n((d.update(b),d.sign({key:c,padding:f.constants.RSA_PKCS1_PSS_PADDING,saltLength:f.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function x(a){return function(b,c,d){l(d),b=q(b),c=o(c);var e=f.createVerify("RSA-SHA"+a);return e.update(b),e.verify({key:d,padding:f.constants.RSA_PKCS1_PSS_PADDING,saltLength:f.constants.RSA_PSS_SALTLEN_DIGEST},c,"base64")}}function y(a){var b=u(a);return function(){var c=b.apply(null,arguments);return g.derToJose(c,"ES"+a)}}function z(a){var b=v(a);return function(c,d,e){return b(c,d=g.joseToDer(d,"ES"+a).toString("base64"),e)}}function A(){return function(){return""}}function B(){return function(a,b){return""===b}}a.exports=function(a){var b=a.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!b)throw p('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',a);var c=(b[1]||b[3]).toLowerCase(),d=b[2];return{sign:({hs:r,rs:u,ps:w,es:y,none:A})[c](d),verify:({hs:t,rs:v,ps:x,es:z,none:B})[c](d)}}},8065:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GoogleAuth=b.GoogleAuthExceptionMessages=void 0;let d=c(9646),e=c(9021),f=c(5065),g=c(257),h=c(1820),i=c(3873),j=c(5618),k=c(2012),l=c(4833),m=c(2698),n=c(7320),o=c(5426),p=c(8247),q=c(4442),r=c(1777),s=c(7493),t=c(7019),u=c(2433);b.GoogleAuthExceptionMessages={API_KEY_WITH_CREDENTIALS:"API Keys and Credentials are mutually exclusive authentication methods and cannot be used together.",NO_PROJECT_ID_FOUND:"Unable to detect a Project Id in the current environment. \nTo learn more about authentication and Google APIs, visit: \nhttps://cloud.google.com/docs/authentication/getting-started",NO_CREDENTIALS_FOUND:"Unable to find credentials in current environment. \nTo learn more about authentication and Google APIs, visit: \nhttps://cloud.google.com/docs/authentication/getting-started",NO_ADC_FOUND:"Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.",NO_UNIVERSE_DOMAIN_FOUND:"Unable to detect a Universe Domain in the current environment.\nTo learn more about Universe Domain retrieval, visit: \nhttps://cloud.google.com/compute/docs/metadata/predefined-metadata-keys"};class v{checkIsGCE=void 0;useJWTAccessWithScope;defaultServicePath;get isGCE(){return this.checkIsGCE}_findProjectIdPromise;_cachedProjectId;jsonContent=null;apiKey;cachedCredential=null;#B=null;defaultScopes;keyFilename;scopes;clientOptions={};constructor(a={}){if(this._cachedProjectId=a.projectId||null,this.cachedCredential=a.authClient||null,this.keyFilename=a.keyFilename||a.keyFile,this.scopes=a.scopes,this.clientOptions=a.clientOptions||{},this.jsonContent=a.credentials||null,this.apiKey=a.apiKey||this.clientOptions.apiKey||null,this.apiKey&&(this.jsonContent||this.clientOptions.credentials))throw RangeError(b.GoogleAuthExceptionMessages.API_KEY_WITH_CREDENTIALS);a.universeDomain&&(this.clientOptions.universeDomain=a.universeDomain)}setGapicJWTValues(a){a.defaultServicePath=this.defaultServicePath,a.useJWTAccessWithScope=this.useJWTAccessWithScope,a.defaultScopes=this.defaultScopes}getProjectId(a){if(!a)return this.getProjectIdAsync();this.getProjectIdAsync().then(b=>a(null,b),a)}async getProjectIdOptional(){try{return await this.getProjectId()}catch(a){if(a instanceof Error&&a.message===b.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)return null;throw a}}async findAndCacheProjectId(){let a=null;if(a||=await this.getProductionProjectId(),a||=await this.getFileProjectId(),a||=await this.getDefaultServiceProjectId(),a||=await this.getGCEProjectId(),a||=await this.getExternalAccountClientProjectId())return this._cachedProjectId=a,a;throw Error(b.GoogleAuthExceptionMessages.NO_PROJECT_ID_FOUND)}async getProjectIdAsync(){return this._cachedProjectId?this._cachedProjectId:(this._findProjectIdPromise||(this._findProjectIdPromise=this.findAndCacheProjectId()),this._findProjectIdPromise)}async getUniverseDomainFromMetadataServer(){let a;try{a=await g.universe("universe-domain"),a||=s.DEFAULT_UNIVERSE}catch(b){if(b&&b?.response?.status===404)a=s.DEFAULT_UNIVERSE;else throw b}return a}async getUniverseDomain(){let a=(0,u.originalOrCamelOptions)(this.clientOptions).get("universe_domain");try{a??=(await this.getClient()).universeDomain}catch{a??=s.DEFAULT_UNIVERSE}return a}getAnyScopes(){return this.scopes||this.defaultScopes}getApplicationDefault(a={},b){let c;if("function"==typeof a?b=a:c=a,!b)return this.getApplicationDefaultAsync(c);this.getApplicationDefaultAsync(c).then(a=>b(null,a.credential,a.projectId),b)}async getApplicationDefaultAsync(a={}){let c;if(this.cachedCredential)return await this.#C(this.cachedCredential,null);if((c=await this._tryGetApplicationCredentialsFromEnvironmentVariable(a))||(c=await this._tryGetApplicationCredentialsFromWellKnownFile(a)))return c instanceof n.JWT?c.scopes=this.scopes:c instanceof r.BaseExternalAccountClient&&(c.scopes=this.getAnyScopes()),await this.#C(c);if(await this._checkIsGCE())return a.scopes=this.getAnyScopes(),await this.#C(new k.Compute(a));throw Error(b.GoogleAuthExceptionMessages.NO_ADC_FOUND)}async #C(a,b=process.env.GOOGLE_CLOUD_QUOTA_PROJECT||null){let c=await this.getProjectIdOptional();return b&&(a.quotaProjectId=b),this.cachedCredential=a,{credential:a,projectId:c}}async _checkIsGCE(){return void 0===this.checkIsGCE&&(this.checkIsGCE=g.getGCPResidency()||await g.isAvailable()),this.checkIsGCE}async _tryGetApplicationCredentialsFromEnvironmentVariable(a){let b=process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.google_application_credentials;if(!b||0===b.length)return null;try{return this._getApplicationCredentialsFromFilePath(b,a)}catch(a){throw a instanceof Error&&(a.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${a.message}`),a}}async _tryGetApplicationCredentialsFromWellKnownFile(a){let b=null;if(this._isWindows())b=process.env.APPDATA;else{let a=process.env.HOME;a&&(b=i.join(a,".config"))}return(b&&(b=i.join(b,"gcloud","application_default_credentials.json"),e.existsSync(b)||(b=null)),b)?await this._getApplicationCredentialsFromFilePath(b,a):null}async _getApplicationCredentialsFromFilePath(a,b={}){if(!a||0===a.length)throw Error("The file path is invalid.");try{if(a=e.realpathSync(a),!e.lstatSync(a).isFile())throw Error()}catch(b){throw b instanceof Error&&(b.message=`The file at ${a} does not exist, or it is not a file. ${b.message}`),b}let c=e.createReadStream(a);return this.fromStream(c,b)}fromImpersonatedJSON(a){if(!a)throw Error("Must pass in a JSON object containing an  impersonated refresh token");if(a.type!==p.IMPERSONATED_ACCOUNT_TYPE)throw Error(`The incoming JSON object does not have the "${p.IMPERSONATED_ACCOUNT_TYPE}" type`);if(!a.source_credentials)throw Error("The incoming JSON object does not contain a source_credentials field");if(!a.service_account_impersonation_url)throw Error("The incoming JSON object does not contain a service_account_impersonation_url field");let b=this.fromJSON(a.source_credentials);if(a.service_account_impersonation_url?.length>256)throw RangeError(`Target principal is too long: ${a.service_account_impersonation_url}`);let c=/(?<target>[^/]+):(generateAccessToken|generateIdToken)$/.exec(a.service_account_impersonation_url)?.groups?.target;if(!c)throw RangeError(`Cannot extract target principal from ${a.service_account_impersonation_url}`);let d=(this.scopes||a.scopes||this.defaultScopes)??[];return new p.Impersonated({...a,sourceClient:b,targetPrincipal:c,targetScopes:Array.isArray(d)?d:[d]})}fromJSON(a,b={}){let c,d=(0,u.originalOrCamelOptions)(b).get("universe_domain");return a.type===o.USER_REFRESH_ACCOUNT_TYPE?(c=new o.UserRefreshClient(b)).fromJSON(a):a.type===p.IMPERSONATED_ACCOUNT_TYPE?c=this.fromImpersonatedJSON(a):a.type===r.EXTERNAL_ACCOUNT_TYPE?(c=q.ExternalAccountClient.fromJSON({...a,...b})).scopes=this.getAnyScopes():a.type===t.EXTERNAL_ACCOUNT_AUTHORIZED_USER_TYPE?c=new t.ExternalAccountAuthorizedUserClient({...a,...b}):(b.scopes=this.scopes,c=new n.JWT(b),this.setGapicJWTValues(c),c.fromJSON(a)),d&&(c.universeDomain=d),c}_cacheClientFromJSON(a,b){let c=this.fromJSON(a,b);return this.jsonContent=a,this.cachedCredential=c,c}fromStream(a,b={},c){let d={};if("function"==typeof b?c=b:d=b,!c)return this.fromStreamAsync(a,d);this.fromStreamAsync(a,d).then(a=>c(null,a),c)}fromStreamAsync(a,b){return new Promise((c,d)=>{if(!a)throw Error("Must pass in a stream containing the Google auth settings.");let e=[];a.setEncoding("utf8").on("error",d).on("data",a=>e.push(a)).on("end",()=>{try{try{let a=JSON.parse(e.join("")),d=this._cacheClientFromJSON(a,b);return c(d)}catch(b){if(!this.keyFilename)throw b;let a=new n.JWT({...this.clientOptions,keyFile:this.keyFilename});return this.cachedCredential=a,this.setGapicJWTValues(a),c(a)}}catch(a){return d(a)}})})}fromAPIKey(a,b={}){return new n.JWT({...b,apiKey:a})}_isWindows(){let a=h.platform();return!!a&&!!(a.length>=3)&&"win"===a.substring(0,3).toLowerCase()}async getDefaultServiceProjectId(){return new Promise(a=>{(0,d.exec)("gcloud config config-helper --format json",(b,c)=>{if(!b&&c)try{let b=JSON.parse(c).configuration.properties.core.project;a(b);return}catch(a){}a(null)})})}getProductionProjectId(){return process.env.GCLOUD_PROJECT||process.env.GOOGLE_CLOUD_PROJECT||process.env.gcloud_project||process.env.google_cloud_project}async getFileProjectId(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){let a=await this.getClient();if(a&&a.projectId)return a.projectId}let a=await this._tryGetApplicationCredentialsFromEnvironmentVariable();return a?a.projectId:null}async getExternalAccountClientProjectId(){if(!this.jsonContent||this.jsonContent.type!==r.EXTERNAL_ACCOUNT_TYPE)return null;let a=await this.getClient();return await a.getProjectId()}async getGCEProjectId(){try{return await g.project("project-id")}catch(a){return null}}getCredentials(a){if(!a)return this.getCredentialsAsync();this.getCredentialsAsync().then(b=>a(null,b),a)}async getCredentialsAsync(){let a=await this.getClient();if(a instanceof p.Impersonated)return{client_email:a.getTargetPrincipal()};if(a instanceof r.BaseExternalAccountClient){let b=a.getServiceAccountEmail();if(b)return{client_email:b,universe_domain:a.universeDomain}}if(this.jsonContent)return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key,universe_domain:this.jsonContent.universe_domain};if(await this._checkIsGCE()){let[a,b]=await Promise.all([g.instance("service-accounts/default/email"),this.getUniverseDomain()]);return{client_email:a,universe_domain:b}}throw Error(b.GoogleAuthExceptionMessages.NO_CREDENTIALS_FOUND)}async getClient(){if(this.cachedCredential)return this.cachedCredential;this.#B=this.#B||this.#D();try{return await this.#B}finally{this.#B=null}}async #D(){if(this.jsonContent)return this._cacheClientFromJSON(this.jsonContent,this.clientOptions);if(this.keyFilename){let a=i.resolve(this.keyFilename),b=e.createReadStream(a);return await this.fromStreamAsync(b,this.clientOptions)}if(this.apiKey){let a=await this.fromAPIKey(this.apiKey,this.clientOptions);a.scopes=this.scopes;let{credential:b}=await this.#C(a);return b}{let{credential:a}=await this.getApplicationDefaultAsync(this.clientOptions);return a}}async getIdTokenClient(a){let b=await this.getClient();if(!("fetchIdToken"in b))throw Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new l.IdTokenClient({targetAudience:a,idTokenProvider:b})}async getAccessToken(){let a=await this.getClient();return(await a.getAccessToken()).token}async getRequestHeaders(a){return(await this.getClient()).getRequestHeaders(a)}async authorizeRequest(a={}){let b=a.url,c=await this.getClient(),d=await c.getRequestHeaders(b);return a.headers=f.Gaxios.mergeHeaders(a.headers,d),a}async fetch(...a){return(await this.getClient()).fetch(...a)}async request(a){return(await this.getClient()).request(a)}getEnv(){return(0,m.getEnv)()}async sign(a,b){let c=await this.getClient(),d=await this.getUniverseDomain();if(b=b||`https://iamcredentials.${d}/v1/projects/-/serviceAccounts/`,c instanceof p.Impersonated)return(await c.sign(a)).signedBlob;let e=(0,j.createCrypto)();if(c instanceof n.JWT&&c.key)return await e.sign(c.key,a);let f=await this.getCredentials();if(!f.client_email)throw Error("Cannot sign data without `client_email`.");return this.signBlob(e,f.client_email,a,b)}async signBlob(a,b,c,d){let e=new URL(d+`${b}:signBlob`);return(await this.request({method:"POST",url:e.href,data:{payload:a.encodeBase64StringUtf8(c)},retry:!0,retryConfig:{httpMethodsToRetry:["POST"]}})).data.signedBlob}}b.GoogleAuth=v},8071:(a,b,c)=>{"use strict";let d,e=c(4075),f=c(6078),g=c(8889),{kStatusCode:h}=c(1010),i=Buffer[Symbol.species],j=Buffer.from([0,0,255,255]),k=Symbol("permessage-deflate"),l=Symbol("total-length"),m=Symbol("callback"),n=Symbol("buffers"),o=Symbol("error");class p{constructor(a,b,c){this._maxPayload=0|c,this._options=a||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!b,this._deflate=null,this._inflate=null,this.params=null,d||(d=new g(void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10))}static get extensionName(){return"permessage-deflate"}offer(){let a={};return this._options.serverNoContextTakeover&&(a.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(a.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(a.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?a.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(a.client_max_window_bits=!0),a}accept(a){return a=this.normalizeParams(a),this.params=this._isServer?this.acceptAsServer(a):this.acceptAsClient(a),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let a=this._deflate[m];this._deflate.close(),this._deflate=null,a&&a(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(a){let b=this._options,c=a.find(a=>(!1!==b.serverNoContextTakeover||!a.server_no_context_takeover)&&(!a.server_max_window_bits||!1!==b.serverMaxWindowBits&&("number"!=typeof b.serverMaxWindowBits||!(b.serverMaxWindowBits>a.server_max_window_bits)))&&("number"!=typeof b.clientMaxWindowBits||!!a.client_max_window_bits));if(!c)throw Error("None of the extension offers can be accepted");return b.serverNoContextTakeover&&(c.server_no_context_takeover=!0),b.clientNoContextTakeover&&(c.client_no_context_takeover=!0),"number"==typeof b.serverMaxWindowBits&&(c.server_max_window_bits=b.serverMaxWindowBits),"number"==typeof b.clientMaxWindowBits?c.client_max_window_bits=b.clientMaxWindowBits:(!0===c.client_max_window_bits||!1===b.clientMaxWindowBits)&&delete c.client_max_window_bits,c}acceptAsClient(a){let b=a[0];if(!1===this._options.clientNoContextTakeover&&b.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(b.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&b.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(b.client_max_window_bits=this._options.clientMaxWindowBits);return b}normalizeParams(a){return a.forEach(a=>{Object.keys(a).forEach(b=>{let c=a[b];if(c.length>1)throw Error(`Parameter "${b}" must have only a single value`);if(c=c[0],"client_max_window_bits"===b){if(!0!==c){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else if("server_max_window_bits"===b){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if("client_no_context_takeover"===b||"server_no_context_takeover"===b){if(!0!==c)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else throw Error(`Unknown parameter "${b}"`);a[b]=c})}),a}decompress(a,b,c){d.add(d=>{this._decompress(a,b,(a,b)=>{d(),c(a,b)})})}compress(a,b,c){d.add(d=>{this._compress(a,b,(a,b)=>{d(),c(a,b)})})}_decompress(a,b,c){let d=this._isServer?"client":"server";if(!this._inflate){let a=`${d}_max_window_bits`,b="number"!=typeof this.params[a]?e.Z_DEFAULT_WINDOWBITS:this.params[a];this._inflate=e.createInflateRaw({...this._options.zlibInflateOptions,windowBits:b}),this._inflate[k]=this,this._inflate[l]=0,this._inflate[n]=[],this._inflate.on("error",s),this._inflate.on("data",r)}this._inflate[m]=c,this._inflate.write(a),b&&this._inflate.write(j),this._inflate.flush(()=>{let a=this._inflate[o];if(a){this._inflate.close(),this._inflate=null,c(a);return}let e=f.concat(this._inflate[n],this._inflate[l]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[l]=0,this._inflate[n]=[],b&&this.params[`${d}_no_context_takeover`]&&this._inflate.reset()),c(null,e)})}_compress(a,b,c){let d=this._isServer?"server":"client";if(!this._deflate){let a=`${d}_max_window_bits`,b="number"!=typeof this.params[a]?e.Z_DEFAULT_WINDOWBITS:this.params[a];this._deflate=e.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:b}),this._deflate[l]=0,this._deflate[n]=[],this._deflate.on("data",q)}this._deflate[m]=c,this._deflate.write(a),this._deflate.flush(e.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let a=f.concat(this._deflate[n],this._deflate[l]);b&&(a=new i(a.buffer,a.byteOffset,a.length-4)),this._deflate[m]=null,this._deflate[l]=0,this._deflate[n]=[],b&&this.params[`${d}_no_context_takeover`]&&this._deflate.reset(),c(null,a)})}}function q(a){this[n].push(a),this[l]+=a.length}function r(a){(this[l]+=a.length,this[k]._maxPayload<1||this[l]<=this[k]._maxPayload)?this[n].push(a):(this[o]=RangeError("Max payload size exceeded"),this[o].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[o][h]=1009,this.removeListener("data",r),this.reset())}function s(a){(this[k]._inflate=null,this[o])?this[m](this[o]):(a[h]=1007,this[m](a))}a.exports=p},8114:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c={StaticGenBailoutError:function(){return f},isStaticGenBailoutError:function(){return g}};for(var d in c)Object.defineProperty(b,d,{enumerable:!0,get:c[d]});let e="NEXT_STATIC_GEN_BAILOUT";class f extends Error{constructor(...a){super(...a),this.code=e}}function g(a){return"object"==typeof a&&null!==a&&"code"in a&&a.code===e}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},8218:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d={chainStreams:function(){return r},continueDynamicHTMLResume:function(){return J},continueDynamicPrerender:function(){return G},continueFizzStream:function(){return F},continueStaticFallbackPrerender:function(){return I},continueStaticPrerender:function(){return H},createBufferedTransformStream:function(){return w},createDocumentClosingStream:function(){return K},createRootLayoutValidatorStream:function(){return E},renderToInitialFizzStream:function(){return y},streamFromBuffer:function(){return t},streamFromString:function(){return s},streamToBuffer:function(){return u},streamToString:function(){return v}};for(var e in d)Object.defineProperty(b,e,{enumerable:!0,get:d[e]});let f=c(6656),g=c(282),h=c(8261),i=c(118),j=c(632),k=c(7767),l=c(4560),m=c(2158),n=c(7044),o=c(1365);function p(){}let q=new TextEncoder;function r(...a){if(0===a.length)return new ReadableStream({start(a){a.close()}});if(1===a.length)return a[0];let{readable:b,writable:c}=new TransformStream,d=a[0].pipeTo(c,{preventClose:!0}),e=1;for(;e<a.length-1;e++){let b=a[e];d=d.then(()=>b.pipeTo(c,{preventClose:!0}))}let f=a[e];return(d=d.then(()=>f.pipeTo(c))).catch(p),b}function s(a){return new ReadableStream({start(b){b.enqueue(q.encode(a)),b.close()}})}function t(a){return new ReadableStream({start(b){b.enqueue(a),b.close()}})}async function u(a){let b=a.getReader(),c=[];for(;;){let{done:a,value:d}=await b.read();if(a)break;c.push(d)}return Buffer.concat(c)}async function v(a,b){let c=new TextDecoder("utf-8",{fatal:!0}),d="";for await(let e of a){if(null==b?void 0:b.aborted)return d;d+=c.decode(e,{stream:!0})}return d+c.decode()}function w(a={}){let b,{maxBufferByteLength:c=1/0}=a,d=[],e=0,f=a=>{try{if(0===d.length)return;let b=new Uint8Array(e),c=0;for(let a=0;a<d.length;a++){let e=d[a];b.set(e,c),c+=e.byteLength}d.length=0,e=0,a.enqueue(b)}catch{}};return new TransformStream({transform(a,g){d.push(a),(e+=a.byteLength)>=c?f(g):(a=>{if(b)return;let c=new h.DetachedPromise;b=c,(0,i.scheduleImmediate)(()=>{try{f(a)}finally{b=void 0,c.resolve()}})})(g)},flush:()=>null==b?void 0:b.promise})}function x(a,b){let c=!1;return new TransformStream({transform(d,e){if(a&&!c){c=!0;let a=new TextDecoder("utf-8",{fatal:!0}).decode(d,{stream:!0}),f=(0,m.insertBuildIdComment)(a,b);e.enqueue(q.encode(f));return}e.enqueue(d)}})}function y({ReactDOMServer:a,element:b,streamOptions:c}){return(0,f.getTracer)().trace(g.AppRenderSpan.renderToReadableStream,async()=>a.renderToReadableStream(b,c))}function z(a){let b=-1,c=!1;return new TransformStream({async transform(d,e){let f=-1,g=-1;if(b++,c)return void e.enqueue(d);let h=0;if(-1===f){if(-1===(f=(0,k.indexOfUint8Array)(d,j.ENCODED_TAGS.META.ICON_MARK)))return void e.enqueue(d);47===d[f+(h=j.ENCODED_TAGS.META.ICON_MARK.length)]?h+=2:h++}if(0===b){if(g=(0,k.indexOfUint8Array)(d,j.ENCODED_TAGS.CLOSED.HEAD),-1!==f){if(f<g){let a=new Uint8Array(d.length-h);a.set(d.subarray(0,f)),a.set(d.subarray(f+h),f),d=a}else{let b=await a(),c=q.encode(b),e=c.length,g=new Uint8Array(d.length-h+e);g.set(d.subarray(0,f)),g.set(c,f),g.set(d.subarray(f+h),f+e),d=g}c=!0}}else{let b=await a(),e=q.encode(b),g=e.length,i=new Uint8Array(d.length-h+g);i.set(d.subarray(0,f)),i.set(e,f),i.set(d.subarray(f+h),f+g),d=i,c=!0}e.enqueue(d)}})}function A(a){let b=!1,c=!1;return new TransformStream({async transform(d,e){c=!0;let f=await a();if(b){if(f){let a=q.encode(f);e.enqueue(a)}e.enqueue(d)}else{let a=(0,k.indexOfUint8Array)(d,j.ENCODED_TAGS.CLOSED.HEAD);if(-1!==a){if(f){let b=q.encode(f),c=new Uint8Array(d.length+b.length);c.set(d.slice(0,a)),c.set(b,a),c.set(d.slice(a),a+b.length),e.enqueue(c)}else e.enqueue(d);b=!0}else f&&e.enqueue(q.encode(f)),e.enqueue(d),b=!0}},async flush(b){if(c){let c=await a();c&&b.enqueue(q.encode(c))}}})}function B(a,b){let c=!1,d=null,e=!1;function f(a){return d||(d=g(a)),d}async function g(d){let f=a.getReader();b&&await (0,i.atLeastOneTask)();try{for(;;){let{done:a,value:g}=await f.read();if(a){e=!0;return}b||c||await (0,i.atLeastOneTask)(),d.enqueue(g)}}catch(a){d.error(a)}}return new TransformStream({start(a){b||f(a)},transform(a,c){c.enqueue(a),b&&f(c)},flush(a){if(c=!0,!e)return f(a)}})}let C="</body></html>";function D(){let a=!1;return new TransformStream({transform(b,c){if(a)return c.enqueue(b);let d=(0,k.indexOfUint8Array)(b,j.ENCODED_TAGS.CLOSED.BODY_AND_HTML);if(d>-1){if(a=!0,b.length===j.ENCODED_TAGS.CLOSED.BODY_AND_HTML.length)return;let e=b.slice(0,d);if(c.enqueue(e),b.length>j.ENCODED_TAGS.CLOSED.BODY_AND_HTML.length+d){let a=b.slice(d+j.ENCODED_TAGS.CLOSED.BODY_AND_HTML.length);c.enqueue(a)}}else c.enqueue(b)},flush(a){a.enqueue(j.ENCODED_TAGS.CLOSED.BODY_AND_HTML)}})}function E(){let a=!1,b=!1;return new TransformStream({async transform(c,d){!a&&(0,k.indexOfUint8Array)(c,j.ENCODED_TAGS.OPENING.HTML)>-1&&(a=!0),!b&&(0,k.indexOfUint8Array)(c,j.ENCODED_TAGS.OPENING.BODY)>-1&&(b=!0),d.enqueue(c)},flush(c){let d=[];a||d.push("html"),b||d.push("body"),d.length&&c.enqueue(q.encode(`<html id="__next_error__">
            <template
              data-next-error-message="Missing ${d.map(a=>`<${a}>`).join(d.length>1?" and ":"")} tags in the root layout.
Read more at https://nextjs.org/docs/messages/missing-root-layout-tags"
              data-next-error-digest="${l.MISSING_ROOT_TAGS_ERROR}"
              data-next-error-stack=""
            ></template>
          `))}})}async function F(a,{suffix:b,inlinedDataStream:c,isStaticGeneration:d,isBuildTimePrerendering:e,buildId:f,getServerInsertedHTML:g,getServerInsertedMetadata:j,validateRootLayout:k}){let l,m,n=b?b.split(C,1)[0]:null;d&&await a.allReady;var o=[w(),x(e,f),z(j),null!=n&&n.length>0?(m=!1,new TransformStream({transform(a,b){if(b.enqueue(a),!m){let a;m=!0,l=a=new h.DetachedPromise,(0,i.scheduleImmediate)(()=>{try{b.enqueue(q.encode(n))}catch{}finally{l=void 0,a.resolve()}})}},flush(a){if(l)return l.promise;m||a.enqueue(q.encode(n))}})):null,c?B(c,!0):null,k?E():null,D(),A(g)];let p=a;for(let a of o)a&&(p=p.pipeThrough(a));return p}async function G(a,{getServerInsertedHTML:b,getServerInsertedMetadata:c}){return a.pipeThrough(w()).pipeThrough(new TransformStream({transform(a,b){(0,k.isEquivalentUint8Arrays)(a,j.ENCODED_TAGS.CLOSED.BODY_AND_HTML)||(0,k.isEquivalentUint8Arrays)(a,j.ENCODED_TAGS.CLOSED.BODY)||(0,k.isEquivalentUint8Arrays)(a,j.ENCODED_TAGS.CLOSED.HTML)||(a=(0,k.removeFromUint8Array)(a,j.ENCODED_TAGS.CLOSED.BODY),a=(0,k.removeFromUint8Array)(a,j.ENCODED_TAGS.CLOSED.HTML),b.enqueue(a))}})).pipeThrough(A(b)).pipeThrough(z(c))}async function H(a,{inlinedDataStream:b,getServerInsertedHTML:c,getServerInsertedMetadata:d,isBuildTimePrerendering:e,buildId:f}){return a.pipeThrough(w()).pipeThrough(x(e,f)).pipeThrough(A(c)).pipeThrough(z(d)).pipeThrough(B(b,!0)).pipeThrough(D())}async function I(a,{inlinedDataStream:b,getServerInsertedHTML:c,getServerInsertedMetadata:d,isBuildTimePrerendering:e,buildId:f}){let g,h,i,l;return a.pipeThrough(w()).pipeThrough(x(e,f)).pipeThrough(A(c)).pipeThrough((g=(0,o.computeCacheBustingSearchParam)("1","/_full",void 0,void 0),h=`${n.NEXT_RSC_UNION_QUERY}=${g}`,i=`<script>__NEXT_CLIENT_RESUME=fetch(location.pathname+'?${h}',{credentials:'same-origin',headers:{'${n.RSC_HEADER}': '1','${n.NEXT_ROUTER_PREFETCH_HEADER}': '1','${n.NEXT_ROUTER_SEGMENT_PREFETCH_HEADER}': '/_full'}})</script>`,l=!1,new TransformStream({transform(a,b){if(l)return void b.enqueue(a);let c=(0,k.indexOfUint8Array)(a,j.ENCODED_TAGS.CLOSED.HEAD);if(-1===c)return void b.enqueue(a);let d=q.encode(i),e=new Uint8Array(a.length+d.length);e.set(a.slice(0,c)),e.set(d,c),e.set(a.slice(c),c+d.length),b.enqueue(e),l=!0}}))).pipeThrough(z(d)).pipeThrough(B(b,!0)).pipeThrough(D())}async function J(a,{delayDataUntilFirstHtmlChunk:b,inlinedDataStream:c,getServerInsertedHTML:d,getServerInsertedMetadata:e}){return a.pipeThrough(w()).pipeThrough(A(d)).pipeThrough(z(e)).pipeThrough(B(c,b)).pipeThrough(D())}function K(){return s(C)}},8247:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Impersonated=b.IMPERSONATED_ACCOUNT_TYPE=void 0;let d=c(3914),e=c(5065),f=c(2433);b.IMPERSONATED_ACCOUNT_TYPE="impersonated_service_account";class g extends d.OAuth2Client{sourceClient;targetPrincipal;targetScopes;delegates;lifetime;endpoint;constructor(a={}){if(super(a),this.credentials={expiry_date:1,refresh_token:"impersonated-placeholder"},this.sourceClient=a.sourceClient??new d.OAuth2Client,this.targetPrincipal=a.targetPrincipal??"",this.delegates=a.delegates??[],this.targetScopes=a.targetScopes??[],this.lifetime=a.lifetime??3600,(0,f.originalOrCamelOptions)(a).get("universe_domain")){if(this.sourceClient.universeDomain!==this.universeDomain)throw RangeError(`Universe domain ${this.sourceClient.universeDomain} in source credentials does not match ${this.universeDomain} universe domain set for impersonated credentials.`)}else this.universeDomain=this.sourceClient.universeDomain;this.endpoint=a.endpoint??`https://iamcredentials.${this.universeDomain}`}async sign(a){await this.sourceClient.getAccessToken();let b=`projects/-/serviceAccounts/${this.targetPrincipal}`,c=`${this.endpoint}/v1/${b}:signBlob`,d={delegates:this.delegates,payload:Buffer.from(a).toString("base64")};return(await this.sourceClient.request({...g.RETRY_CONFIG,url:c,data:d,method:"POST"})).data}getTargetPrincipal(){return this.targetPrincipal}async refreshToken(){try{await this.sourceClient.getAccessToken();let a="projects/-/serviceAccounts/"+this.targetPrincipal,b=`${this.endpoint}/v1/${a}:generateAccessToken`,c={delegates:this.delegates,scope:this.targetScopes,lifetime:this.lifetime+"s"},d=await this.sourceClient.request({...g.RETRY_CONFIG,url:b,data:c,method:"POST"}),e=d.data;return this.credentials.access_token=e.accessToken,this.credentials.expiry_date=Date.parse(e.expireTime),{tokens:this.credentials,res:d}}catch(c){if(!(c instanceof Error))throw c;let a=0,b="";if(c instanceof e.GaxiosError&&(a=c?.response?.data?.error?.status,b=c?.response?.data?.error?.message),a&&b)throw c.message=`${a}: unable to impersonate: ${b}`,c;throw c.message=`unable to impersonate: ${c}`,c}}async fetchIdToken(a,b){await this.sourceClient.getAccessToken();let c=`projects/-/serviceAccounts/${this.targetPrincipal}`,d=`${this.endpoint}/v1/${c}:generateIdToken`,e={delegates:this.delegates,audience:a,includeEmail:b?.includeEmail??!0,useEmailAzp:b?.includeEmail??!0};return(await this.sourceClient.request({...g.RETRY_CONFIG,url:d,data:e,method:"POST"})).data.token}}b.Impersonated=g},8256:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.StsCredentials=void 0;let d=c(5065),e=c(7493),f=c(5348),g=c(2433);class h extends f.OAuthClientAuthHandler{#E;constructor(a={tokenExchangeEndpoint:""},b){("object"!=typeof a||a instanceof URL)&&(a={tokenExchangeEndpoint:a,clientAuthentication:b}),super(a),this.#E=a.tokenExchangeEndpoint}async exchangeToken(a,b,c){let i={grant_type:a.grantType,resource:a.resource,audience:a.audience,scope:a.scope?.join(" "),requested_token_type:a.requestedTokenType,subject_token:a.subjectToken,subject_token_type:a.subjectTokenType,actor_token:a.actingParty?.actorToken,actor_token_type:a.actingParty?.actorTokenType,options:c&&JSON.stringify(c)},j={...h.RETRY_CONFIG,url:this.#E.toString(),method:"POST",headers:b,data:new URLSearchParams((0,g.removeUndefinedValuesInObject)(i))};e.AuthClient.setMethodName(j,"exchangeToken"),this.applyClientAuthenticationOptions(j);try{let a=await this.transporter.request(j),b=a.data;return b.res=a,b}catch(a){if(a instanceof d.GaxiosError&&a.response)throw(0,f.getErrorFromOAuthErrorResponse)(a.response.data,a);throw a}}}b.StsCredentials=h},8261:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"DetachedPromise",{enumerable:!0,get:function(){return c}});class c{constructor(){let a,b;this.promise=new Promise((c,d)=>{a=c,b=d}),this.resolve=a,this.reject=b}}},8267:function(a,b,c){"use strict";let d;var e,f,g,h=this&&this.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),i=this&&this.__setModuleDefault||(Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b}),j=this&&this.__importStar||(e=function(a){return(e=Object.getOwnPropertyNames||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[b.length]=c);return b})(a)},function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c=e(a),d=0;d<c.length;d++)"default"!==c[d]&&h(b,a,c[d]);return i(b,a),b});Object.defineProperty(b,"__esModule",{value:!0}),b.env=b.DebugLogBackendBase=b.placeholder=b.AdhocDebugLogger=b.LogSeverity=void 0,b.getNodeBackend=r,b.getDebugBackend=function(a){return new s(a)},b.getStructuredBackend=function(a){return new t(a)},b.setBackend=function(a){d=a,u.clear()},b.log=v;let k=c(4735),l=j(c(9771)),m=j(c(8354)),n=c(4983);(f=g||(b.LogSeverity=g={})).DEFAULT="DEFAULT",f.DEBUG="DEBUG",f.INFO="INFO",f.WARNING="WARNING",f.ERROR="ERROR";class o extends k.EventEmitter{constructor(a,b){super(),this.namespace=a,this.upstream=b,this.func=Object.assign(this.invoke.bind(this),{instance:this,on:(a,b)=>this.on(a,b)}),this.func.debug=(...a)=>this.invokeSeverity(g.DEBUG,...a),this.func.info=(...a)=>this.invokeSeverity(g.INFO,...a),this.func.warn=(...a)=>this.invokeSeverity(g.WARNING,...a),this.func.error=(...a)=>this.invokeSeverity(g.ERROR,...a),this.func.sublog=a=>v(a,this.func)}invoke(a,...b){if(this.upstream)try{this.upstream(a,...b)}catch(a){}try{this.emit("log",a,b)}catch(a){}}invokeSeverity(a,...b){this.invoke({severity:a},...b)}}b.AdhocDebugLogger=o,b.placeholder=new o("",()=>{}).func;class p{constructor(){var a;this.cached=new Map,this.filters=[],this.filtersSet=!1;let c=null!=(a=l.env[b.env.nodeEnables])?a:"*";"all"===c&&(c="*"),this.filters=c.split(",")}log(a,b,...c){try{this.filtersSet||(this.setFilters(),this.filtersSet=!0);let d=this.cached.get(a);d||(d=this.makeLogger(a),this.cached.set(a,d)),d(b,...c)}catch(a){console.error(a)}}}b.DebugLogBackendBase=p;class q extends p{constructor(){super(...arguments),this.enabledRegexp=/.*/g}isEnabled(a){return this.enabledRegexp.test(a)}makeLogger(a){return this.enabledRegexp.test(a)?(b,...c)=>{var d;let e,f=`${n.Colours.green}${a}${n.Colours.reset}`,h=`${n.Colours.yellow}${l.pid}${n.Colours.reset}`;switch(b.severity){case g.ERROR:e=`${n.Colours.red}${b.severity}${n.Colours.reset}`;break;case g.INFO:e=`${n.Colours.magenta}${b.severity}${n.Colours.reset}`;break;case g.WARNING:e=`${n.Colours.yellow}${b.severity}${n.Colours.reset}`;break;default:e=null!=(d=b.severity)?d:g.DEFAULT}let i=m.formatWithOptions({colors:n.Colours.enabled},...c),j=Object.assign({},b);delete j.severity;let k=Object.getOwnPropertyNames(j).length?JSON.stringify(j):"",o=k?`${n.Colours.grey}${k}${n.Colours.reset}`:"";console.error("%s [%s|%s] %s%s",h,f,e,i,k?` ${o}`:"")}:()=>{}}setFilters(){let a=this.filters.join(",").replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^");this.enabledRegexp=RegExp(`^${a}$`,"i")}}function r(){return new q}class s extends p{constructor(a){super(),this.debugPkg=a}makeLogger(a){let b=this.debugPkg(a);return(a,...c)=>{b(c[0],...c.slice(1))}}setFilters(){var a;let b=null!=(a=l.env.NODE_DEBUG)?a:"";l.env.NODE_DEBUG=`${b}${b?",":""}${this.filters.join(",")}`}}class t extends p{constructor(a){super(),this.upstream=null!=a?a:void 0}makeLogger(a){var b;let c=null==(b=this.upstream)?void 0:b.makeLogger(a);return(a,...b)=>{var d;let e=JSON.stringify(Object.assign({severity:null!=(d=a.severity)?d:g.INFO,message:m.format(...b)},a));c?c(a,e):console.log("%s",e)}}setFilters(){var a;null==(a=this.upstream)||a.setFilters()}}b.env={nodeEnables:"GOOGLE_SDK_NODE_LOGGING"};let u=new Map;function v(a,c){let e;if(!d&&!l.env[b.env.nodeEnables]||!a)return b.placeholder;c&&(a=`${c.instance.namespace}:${a}`);let f=u.get(a);if(f)return f.func;if(null===d)return b.placeholder;void 0===d&&(d=r());let g=new o(a,(b,...c)=>{if(e!==d){if(null===d)return;void 0===d&&(d=r()),e=d}null==d||d.log(a,b,...c)});return u.set(a,g),g.func}},8335:()=>{},8354:a=>{"use strict";a.exports=require("util")},8461:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d={normalizeAppPath:function(){return h},normalizeRscURL:function(){return i}};for(var e in d)Object.defineProperty(b,e,{enumerable:!0,get:d[e]});let f=c(6738),g=c(9798);function h(a){return(0,f.ensureLeadingSlash)(a.split("/").reduce((a,b,c,d)=>!b||(0,g.isGroupSegment)(b)||"@"===b[0]||("page"===b||"route"===b)&&c===d.length-1?a:`${a}/${b}`,""))}function i(a){return a.replace(/\.rsc($|\?)/,"$1")}},8522:a=>{"use strict";a.exports=require("node:zlib")},8538:(a,b,c)=>{"use strict";var d=c(8354),e=c(2752),f={stream:!0},g=Object.prototype.hasOwnProperty,h=new Map;function i(a){var b=globalThis.__next_require__(a);return"function"!=typeof b.then||"fulfilled"===b.status?null:(b.then(function(a){b.status="fulfilled",b.value=a},function(a){b.status="rejected",b.reason=a}),b)}function j(){}function k(a){for(var b=a[1],d=[],e=0;e<b.length;){var f=b[e++];b[e++];var g=h.get(f);if(void 0===g){g=c.e(f),d.push(g);var k=h.set.bind(h,f,null);g.then(k,j),h.set(f,g)}else null!==g&&d.push(g)}return 4===a.length?0===d.length?i(a[0]):Promise.all(d).then(function(){return i(a[0])}):0<d.length?Promise.all(d):null}function l(a){var b=globalThis.__next_require__(a[0]);if(4===a.length&&"function"==typeof b.then)if("fulfilled"===b.status)b=b.value;else throw b.reason;return"*"===a[2]?b:""===a[2]?b.__esModule?b.default:b:g.call(b,a[2])?b[a[2]]:void 0}var m=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,n=Symbol.for("react.transitional.element"),o=Symbol.for("react.lazy"),p=Symbol.iterator,q=Symbol.asyncIterator,r=Array.isArray,s=Object.getPrototypeOf,t=Object.prototype,u=new WeakMap;function v(a,b,c,d,e){function f(a,c){c=new Blob([new Uint8Array(c.buffer,c.byteOffset,c.byteLength)]);var d=i++;return null===k&&(k=new FormData),k.append(b+d,c),"$"+a+d.toString(16)}function g(a,v){if(null===v)return null;if("object"==typeof v){switch(v.$$typeof){case n:if(void 0!==c&&-1===a.indexOf(":")){var w,x,y,z,A,B=l.get(this);if(void 0!==B)return c.set(B+":"+a,v),"$T"}throw Error("React Element cannot be passed to Server Functions from the Client without a temporary reference set. Pass a TemporaryReferenceSet to the options.");case o:B=v._payload;var C=v._init;null===k&&(k=new FormData),j++;try{var D=C(B),E=i++,F=h(D,E);return k.append(b+E,F),"$"+E.toString(16)}catch(a){if("object"==typeof a&&null!==a&&"function"==typeof a.then){j++;var G=i++;return B=function(){try{var a=h(v,G),c=k;c.append(b+G,a),j--,0===j&&d(c)}catch(a){e(a)}},a.then(B,B),"$"+G.toString(16)}return e(a),null}finally{j--}}if(B=l.get(v),"function"==typeof v.then){if(void 0!==B)if(m!==v)return B;else m=null;null===k&&(k=new FormData),j++;var H=i++;return a="$@"+H.toString(16),l.set(v,a),v.then(function(a){try{var c=l.get(a),f=void 0!==c?JSON.stringify(c):h(a,H);(a=k).append(b+H,f),j--,0===j&&d(a)}catch(a){e(a)}},e),a}if(void 0!==B)if(m!==v)return B;else m=null;else -1===a.indexOf(":")&&void 0!==(B=l.get(this))&&(a=B+":"+a,l.set(v,a),void 0!==c&&c.set(a,v));if(r(v))return v;if(v instanceof FormData){null===k&&(k=new FormData);var I=k,J=b+(a=i++)+"_";return v.forEach(function(a,b){I.append(J+b,a)}),"$K"+a.toString(16)}if(v instanceof Map)return a=i++,B=h(Array.from(v),a),null===k&&(k=new FormData),k.append(b+a,B),"$Q"+a.toString(16);if(v instanceof Set)return a=i++,B=h(Array.from(v),a),null===k&&(k=new FormData),k.append(b+a,B),"$W"+a.toString(16);if(v instanceof ArrayBuffer)return a=new Blob([v]),B=i++,null===k&&(k=new FormData),k.append(b+B,a),"$A"+B.toString(16);if(v instanceof Int8Array)return f("O",v);if(v instanceof Uint8Array)return f("o",v);if(v instanceof Uint8ClampedArray)return f("U",v);if(v instanceof Int16Array)return f("S",v);if(v instanceof Uint16Array)return f("s",v);if(v instanceof Int32Array)return f("L",v);if(v instanceof Uint32Array)return f("l",v);if(v instanceof Float32Array)return f("G",v);if(v instanceof Float64Array)return f("g",v);if(v instanceof BigInt64Array)return f("M",v);if(v instanceof BigUint64Array)return f("m",v);if(v instanceof DataView)return f("V",v);if("function"==typeof Blob&&v instanceof Blob)return null===k&&(k=new FormData),a=i++,k.append(b+a,v),"$B"+a.toString(16);if(a=null===(w=v)||"object"!=typeof w?null:"function"==typeof(w=p&&w[p]||w["@@iterator"])?w:null)return(B=a.call(v))===v?(a=i++,B=h(Array.from(B),a),null===k&&(k=new FormData),k.append(b+a,B),"$i"+a.toString(16)):Array.from(B);if("function"==typeof ReadableStream&&v instanceof ReadableStream)return function(a){try{var c,f,h,l,m,n,o,p=a.getReader({mode:"byob"})}catch(l){return c=a.getReader(),null===k&&(k=new FormData),f=k,j++,h=i++,c.read().then(function a(i){if(i.done)f.append(b+h,"C"),0==--j&&d(f);else try{var k=JSON.stringify(i.value,g);f.append(b+h,k),c.read().then(a,e)}catch(a){e(a)}},e),"$R"+h.toString(16)}return l=p,null===k&&(k=new FormData),m=k,j++,n=i++,o=[],l.read(new Uint8Array(1024)).then(function a(c){c.done?(c=i++,m.append(b+c,new Blob(o)),m.append(b+n,'"$o'+c.toString(16)+'"'),m.append(b+n,"C"),0==--j&&d(m)):(o.push(c.value),l.read(new Uint8Array(1024)).then(a,e))},e),"$r"+n.toString(16)}(v);if("function"==typeof(a=v[q]))return x=v,y=a.call(v),null===k&&(k=new FormData),z=k,j++,A=i++,x=x===y,y.next().then(function a(c){if(c.done){if(void 0===c.value)z.append(b+A,"C");else try{var f=JSON.stringify(c.value,g);z.append(b+A,"C"+f)}catch(a){e(a);return}0==--j&&d(z)}else try{var h=JSON.stringify(c.value,g);z.append(b+A,h),y.next().then(a,e)}catch(a){e(a)}},e),"$"+(x?"x":"X")+A.toString(16);if((a=s(v))!==t&&(null===a||null!==s(a))){if(void 0===c)throw Error("Only plain objects, and a few built-ins, can be passed to Server Functions. Classes or null prototypes are not supported.");return"$T"}return v}if("string"==typeof v)return"Z"===v[v.length-1]&&this[a]instanceof Date?"$D"+v:a="$"===v[0]?"$"+v:v;if("boolean"==typeof v)return v;if("number"==typeof v)return Number.isFinite(v)?0===v&&-1/0==1/v?"$-0":v:1/0===v?"$Infinity":-1/0===v?"$-Infinity":"$NaN";if(void 0===v)return"$undefined";if("function"==typeof v){if(void 0!==(B=u.get(v)))return a=JSON.stringify({id:B.id,bound:B.bound},g),null===k&&(k=new FormData),B=i++,k.set(b+B,a),"$h"+B.toString(16);if(void 0!==c&&-1===a.indexOf(":")&&void 0!==(B=l.get(this)))return c.set(B+":"+a,v),"$T";throw Error("Client Functions cannot be passed directly to Server Functions. Only Functions passed from the Server can be passed back again.")}if("symbol"==typeof v){if(void 0!==c&&-1===a.indexOf(":")&&void 0!==(B=l.get(this)))return c.set(B+":"+a,v),"$T";throw Error("Symbols cannot be passed to a Server Function without a temporary reference set. Pass a TemporaryReferenceSet to the options.")}if("bigint"==typeof v)return"$n"+v.toString(10);throw Error("Type "+typeof v+" is not supported as an argument to a Server Function.")}function h(a,b){return"object"==typeof a&&null!==a&&(b="$"+b.toString(16),l.set(a,b),void 0!==c&&c.set(b,a)),m=a,JSON.stringify(a,g)}var i=1,j=0,k=null,l=new WeakMap,m=a,v=h(a,0);return null===k?d(v):(k.set(b+"0",v),0===j&&d(k)),function(){0<j&&(j=0,null===k?d(v):d(k))}}var w=new WeakMap;function x(a){var b=u.get(this);if(!b)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");var c=null;if(null!==b.bound){if((c=w.get(b))||(d={id:b.id,bound:b.bound},g=new Promise(function(a,b){e=a,f=b}),v(d,"",void 0,function(a){if("string"==typeof a){var b=new FormData;b.append("0",a),a=b}g.status="fulfilled",g.value=a,e(a)},function(a){g.status="rejected",g.reason=a,f(a)}),c=g,w.set(b,c)),"rejected"===c.status)throw c.reason;if("fulfilled"!==c.status)throw c;b=c.value;var d,e,f,g,h=new FormData;b.forEach(function(b,c){h.append("$ACTION_"+a+":"+c,b)}),c=h,b="$ACTION_REF_"+a}else b="$ACTION_ID_"+b.id;return{name:b,method:"POST",encType:"multipart/form-data",data:c}}function y(a,b){var c=u.get(this);if(!c)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");if(c.id!==a)return!1;var d=c.bound;if(null===d)return 0===b;switch(d.status){case"fulfilled":return d.value.length===b;case"pending":throw d;case"rejected":throw d.reason;default:throw"string"!=typeof d.status&&(d.status="pending",d.then(function(a){d.status="fulfilled",d.value=a},function(a){d.status="rejected",d.reason=a})),d}}function z(a,b,c,d){u.has(a)||(u.set(a,{id:b,originalBind:a.bind,bound:c}),Object.defineProperties(a,{$$FORM_ACTION:{value:void 0===d?x:function(){var a=u.get(this);if(!a)throw Error("Tried to encode a Server Action from a different instance than the encoder is from. This is a bug in React.");var b=a.bound;return null===b&&(b=Promise.resolve([])),d(a.id,b)}},$$IS_SIGNATURE_EQUAL:{value:y},bind:{value:C}}))}var A=Function.prototype.bind,B=Array.prototype.slice;function C(){var a=u.get(this);if(!a)return A.apply(this,arguments);var b=a.originalBind.apply(this,arguments),c=B.call(arguments,1),d=null;return d=null!==a.bound?Promise.resolve(a.bound).then(function(a){return a.concat(c)}):Promise.resolve(c),u.set(b,{id:a.id,originalBind:b.bind,bound:d}),Object.defineProperties(b,{$$FORM_ACTION:{value:this.$$FORM_ACTION},$$IS_SIGNATURE_EQUAL:{value:y},bind:{value:C}}),b}function D(a,b,c){this.status=a,this.value=b,this.reason=c}function E(a){switch(a.status){case"resolved_model":P(a);break;case"resolved_module":Q(a)}switch(a.status){case"fulfilled":return a.value;case"pending":case"blocked":case"halted":throw a;default:throw a.reason}}function F(a,b,c,d){for(var e=0;e<b.length;e++){var f=b[e];"function"==typeof f?f(c):U(a,f,c,d)}}function G(a,b,c){for(var d=0;d<b.length;d++){var e=b[d];"function"==typeof e?e(c):V(a,e.handler,c)}}function H(a,b){var c=b.handler.chunk;if(null===c)return null;if(c===a)return b.handler;if(null!==(b=c.value))for(c=0;c<b.length;c++){var d=b[c];if("function"!=typeof d&&null!==(d=H(a,d)))return d}return null}function I(a,b,c,d){switch(b.status){case"fulfilled":F(a,c,b.value,b);break;case"blocked":for(var e=0;e<c.length;e++){var f=c[e];if("function"!=typeof f){var g=H(b,f);if(null!==g)switch(U(a,f,g.value,b),c.splice(e,1),e--,null!==d&&-1!==(f=d.indexOf(f))&&d.splice(f,1),b.status){case"fulfilled":F(a,c,b.value,b);return;case"rejected":null!==d&&G(a,d,b.reason);return}}}case"pending":if(b.value)for(a=0;a<c.length;a++)b.value.push(c[a]);else b.value=c;if(b.reason){if(d)for(c=0;c<d.length;c++)b.reason.push(d[c])}else b.reason=d;break;case"rejected":d&&G(a,d,b.reason)}}function J(a,b,c){if("pending"!==b.status&&"blocked"!==b.status)b.reason.error(c);else{var d=b.reason;b.status="rejected",b.reason=c,null!==d&&G(a,d,c)}}function K(a,b,c){return new D("resolved_model",(c?'{"done":true,"value":':'{"done":false,"value":')+b+"}",a)}function L(a,b,c,d){M(a,b,(d?'{"done":true,"value":':'{"done":false,"value":')+c+"}")}function M(a,b,c){if("pending"!==b.status)b.reason.enqueueModel(c);else{var d=b.value,e=b.reason;b.status="resolved_model",b.value=c,b.reason=a,null!==d&&(P(b),I(a,b,d,e))}}function N(a,b,c){if("pending"===b.status||"blocked"===b.status){var d=b.value,e=b.reason;b.status="resolved_module",b.value=c,b.reason=null,null!==d&&(Q(b),I(a,b,d,e))}}D.prototype=Object.create(Promise.prototype),D.prototype.then=function(a,b){switch(this.status){case"resolved_model":P(this);break;case"resolved_module":Q(this)}switch(this.status){case"fulfilled":"function"==typeof a&&a(this.value);break;case"pending":case"blocked":"function"==typeof a&&(null===this.value&&(this.value=[]),this.value.push(a)),"function"==typeof b&&(null===this.reason&&(this.reason=[]),this.reason.push(b));break;case"halted":break;default:"function"==typeof b&&b(this.reason)}};var O=null;function P(a){var b=O;O=null;var c=a.value,d=a.reason;a.status="blocked",a.value=null,a.reason=null;try{var e=JSON.parse(c,d._fromJSON),f=a.value;if(null!==f)for(a.value=null,a.reason=null,c=0;c<f.length;c++){var g=f[c];"function"==typeof g?g(e):U(d,g,e,a)}if(null!==O){if(O.errored)throw O.reason;if(0<O.deps){O.value=e,O.chunk=a;return}}a.status="fulfilled",a.value=e}catch(b){a.status="rejected",a.reason=b}finally{O=b}}function Q(a){try{var b=l(a.value);a.status="fulfilled",a.value=b}catch(b){a.status="rejected",a.reason=b}}function R(a,b){a._closed=!0,a._closedReason=b,a._chunks.forEach(function(c){"pending"===c.status?J(a,c,b):"fulfilled"===c.status&&null!==c.reason&&c.reason.error(b)})}function S(a){return{$$typeof:o,_payload:a,_init:E}}function T(a,b){var c=a._chunks,d=c.get(b);return d||(d=a._closed?new D("rejected",null,a._closedReason):new D("pending",null,null),c.set(b,d)),d}function U(a,b,c){var d=b.handler,e=b.parentObject,f=b.key,g=b.map,h=b.path;try{for(var i=1;i<h.length;i++){for(;"object"==typeof c&&null!==c&&c.$$typeof===o;){var j=c._payload;if(j===d.chunk)c=d.value;else{switch(j.status){case"resolved_model":P(j);break;case"resolved_module":Q(j)}switch(j.status){case"fulfilled":c=j.value;continue;case"blocked":var k=H(j,b);if(null!==k){c=k.value;continue}case"pending":h.splice(0,i-1),null===j.value?j.value=[b]:j.value.push(b),null===j.reason?j.reason=[b]:j.reason.push(b);return;case"halted":return;default:V(a,b.handler,j.reason);return}}}c=c[h[i]]}for(;"object"==typeof c&&null!==c&&c.$$typeof===o;){var l=c._payload;if(l===d.chunk)c=d.value;else{switch(l.status){case"resolved_model":P(l);break;case"resolved_module":Q(l)}if("fulfilled"===l.status){c=l.value;continue}break}}var m=g(a,c,e,f);if(e[f]=m,""===f&&null===d.value&&(d.value=m),e[0]===n&&"object"==typeof d.value&&null!==d.value&&d.value.$$typeof===n){var p=d.value;"3"===f&&(p.props=m)}}catch(c){V(a,b.handler,c);return}d.deps--,0===d.deps&&null!==(b=d.chunk)&&"blocked"===b.status&&(c=b.value,b.status="fulfilled",b.value=d.value,b.reason=d.reason,null!==c&&F(a,c,d.value,b))}function V(a,b,c){b.errored||(b.errored=!0,b.value=null,b.reason=c,null!==(b=b.chunk)&&"blocked"===b.status&&J(a,b,c))}function W(a,b,c,d,e,f){return O?(d=O,d.deps++):d=O={parent:null,chunk:null,value:null,reason:null,deps:1,errored:!1},b={handler:d,parentObject:b,key:c,map:e,path:f},null===a.value?a.value=[b]:a.value.push(b),null===a.reason?a.reason=[b]:a.reason.push(b),null}function X(a,b,c,d){if(!a._serverReferenceConfig)return function(a,b,c){function d(){var a=Array.prototype.slice.call(arguments);return f?"fulfilled"===f.status?b(e,f.value.concat(a)):Promise.resolve(f).then(function(c){return b(e,c.concat(a))}):b(e,a)}var e=a.id,f=a.bound;return z(d,e,f,c),d}(b,a._callServer,a._encodeFormAction);var e=function(a,b){var c="",d=a[b];if(d)c=d.name;else{var e=b.lastIndexOf("#");if(-1!==e&&(c=b.slice(e+1),d=a[b.slice(0,e)]),!d)throw Error('Could not find the module "'+b+'" in the React Server Manifest. This is probably a bug in the React Server Components bundler.')}return d.async?[d.id,d.chunks,c,1]:[d.id,d.chunks,c]}(a._serverReferenceConfig,b.id),f=k(e);if(f)b.bound&&(f=Promise.all([f,b.bound]));else{if(!b.bound)return z(f=l(e),b.id,b.bound,a._encodeFormAction),f;f=Promise.resolve(b.bound)}if(O){var g=O;g.deps++}else g=O={parent:null,chunk:null,value:null,reason:null,deps:1,errored:!1};return f.then(function(){var f=l(e);if(b.bound){var h=b.bound.value.slice(0);h.unshift(null),f=f.bind.apply(f,h)}z(f,b.id,b.bound,a._encodeFormAction),c[d]=f,""===d&&null===g.value&&(g.value=f),c[0]===n&&"object"==typeof g.value&&null!==g.value&&g.value.$$typeof===n&&(h=g.value,"3"===d)&&(h.props=f),g.deps--,0===g.deps&&null!==(f=g.chunk)&&"blocked"===f.status&&(h=f.value,f.status="fulfilled",f.value=g.value,f.reason=null,null!==h&&F(a,h,g.value,f))},function(b){if(!g.errored){g.errored=!0,g.value=null,g.reason=b;var c=g.chunk;null!==c&&"blocked"===c.status&&J(a,c,b)}}),null}function Y(a,b,c,d,e){var f=parseInt((b=b.split(":"))[0],16);switch((f=T(a,f)).status){case"resolved_model":P(f);break;case"resolved_module":Q(f)}switch(f.status){case"fulfilled":f=f.value;for(var g=1;g<b.length;g++){for(;"object"==typeof f&&null!==f&&f.$$typeof===o;){switch((f=f._payload).status){case"resolved_model":P(f);break;case"resolved_module":Q(f)}switch(f.status){case"fulfilled":f=f.value;break;case"blocked":case"pending":return W(f,c,d,a,e,b.slice(g-1));case"halted":return O?(a=O,a.deps++):O={parent:null,chunk:null,value:null,reason:null,deps:1,errored:!1},null;default:return O?(O.errored=!0,O.value=null,O.reason=f.reason):O={parent:null,chunk:null,value:null,reason:f.reason,deps:0,errored:!0},null}}f=f[b[g]]}for(;"object"==typeof f&&null!==f&&f.$$typeof===o;){switch((b=f._payload).status){case"resolved_model":P(b);break;case"resolved_module":Q(b)}if("fulfilled"===b.status){f=b.value;continue}break}return e(a,f,c,d);case"pending":case"blocked":return W(f,c,d,a,e,b);case"halted":return O?(a=O,a.deps++):O={parent:null,chunk:null,value:null,reason:null,deps:1,errored:!1},null;default:return O?(O.errored=!0,O.value=null,O.reason=f.reason):O={parent:null,chunk:null,value:null,reason:f.reason,deps:0,errored:!0},null}}function Z(a,b){return new Map(b)}function $(a,b){return new Set(b)}function _(a,b){return new Blob(b.slice(1),{type:b[0]})}function aa(a,b){a=new FormData;for(var c=0;c<b.length;c++)a.append(b[c][0],b[c][1]);return a}function ab(a,b){return b[Symbol.iterator]()}function ac(a,b){return b}function ad(){throw Error('Trying to call a function from "use server" but the callServer option was not implemented in your router runtime.')}function ae(a,b,c,e,f,g,h){var i,j=new Map;this._bundlerConfig=a,this._serverReferenceConfig=b,this._moduleLoading=c,this._callServer=void 0!==e?e:ad,this._encodeFormAction=f,this._nonce=g,this._chunks=j,this._stringDecoder=new d.TextDecoder,this._fromJSON=null,this._closed=!1,this._closedReason=null,this._tempRefs=h,this._fromJSON=(i=this,function(a,b){if("string"==typeof b){var c=i,d=this,e=a,f=b;if("$"===f[0]){if("$"===f)return null!==O&&"0"===e&&(O={parent:O,chunk:null,value:null,reason:null,deps:0,errored:!1}),n;switch(f[1]){case"$":return f.slice(1);case"L":return S(c=T(c,d=parseInt(f.slice(2),16)));case"@":return T(c,d=parseInt(f.slice(2),16));case"S":return Symbol.for(f.slice(2));case"h":return Y(c,f=f.slice(2),d,e,X);case"T":if(d="$"+f.slice(2),null==(c=c._tempRefs))throw Error("Missing a temporary reference set but the RSC response returned a temporary reference. Pass a temporaryReference option with the set that was used with the reply.");return c.get(d);case"Q":return Y(c,f=f.slice(2),d,e,Z);case"W":return Y(c,f=f.slice(2),d,e,$);case"B":return Y(c,f=f.slice(2),d,e,_);case"K":return Y(c,f=f.slice(2),d,e,aa);case"Z":return al();case"i":return Y(c,f=f.slice(2),d,e,ab);case"I":return 1/0;case"-":return"$-0"===f?-0:-1/0;case"N":return NaN;case"u":return;case"D":return new Date(Date.parse(f.slice(2)));case"n":return BigInt(f.slice(2));default:return Y(c,f=f.slice(1),d,e,ac)}}return f}if("object"==typeof b&&null!==b){if(b[0]===n){if(a={$$typeof:n,type:b[1],key:b[2],ref:null,props:b[3]},null!==O){if(O=(b=O).parent,b.errored)a=S(a=new D("rejected",null,b.reason));else if(0<b.deps){var g=new D("blocked",null,null);b.value=a,b.chunk=g,a=S(g)}}}else a=b;return a}return b})}function af(){return{_rowState:0,_rowID:0,_rowTag:0,_rowLength:0,_buffer:[]}}function ag(a,b,c){var d=(a=a._chunks).get(b);d&&"pending"!==d.status?d.reason.enqueueValue(c):(c=new D("fulfilled",c,null),a.set(b,c))}function ah(a,b,c,d){var e=a._chunks,f=e.get(b);f?"pending"===f.status&&(b=f.value,f.status="fulfilled",f.value=c,f.reason=d,null!==b&&F(a,b,f.value,f)):(a=new D("fulfilled",c,d),e.set(b,a))}function ai(a,b,c){var d=null,e=!1;c=new ReadableStream({type:c,start:function(a){d=a}});var f=null;ah(a,b,c,{enqueueValue:function(a){null===f?d.enqueue(a):f.then(function(){d.enqueue(a)})},enqueueModel:function(b){if(null===f){var c=new D("resolved_model",b,a);P(c),"fulfilled"===c.status?d.enqueue(c.value):(c.then(function(a){return d.enqueue(a)},function(a){return d.error(a)}),f=c)}else{c=f;var e=new D("pending",null,null);e.then(function(a){return d.enqueue(a)},function(a){return d.error(a)}),f=e,c.then(function(){f===e&&(f=null),M(a,e,b)})}},close:function(){if(!e)if(e=!0,null===f)d.close();else{var a=f;f=null,a.then(function(){return d.close()})}},error:function(a){if(!e)if(e=!0,null===f)d.error(a);else{var b=f;f=null,b.then(function(){return d.error(a)})}}})}function aj(){return this}function ak(a,b,c){var d=[],e=!1,f=0,g={};g[q]=function(){var a,b=0;return(a={next:a=function(a){if(void 0!==a)throw Error("Values cannot be passed to next() of AsyncIterables passed to Client Components.");if(b===d.length){if(e)return new D("fulfilled",{done:!0,value:void 0},null);d[b]=new D("pending",null,null)}return d[b++]}})[q]=aj,a},ah(a,b,c?g[q]():g,{enqueueValue:function(b){if(f===d.length)d[f]=new D("fulfilled",{done:!1,value:b},null);else{var c=d[f],e=c.value,g=c.reason;c.status="fulfilled",c.value={done:!1,value:b},c.reason=null,null!==e&&I(a,c,e,g)}f++},enqueueModel:function(b){f===d.length?d[f]=K(a,b,!1):L(a,d[f],b,!1),f++},close:function(b){if(!e)for(e=!0,f===d.length?d[f]=K(a,b,!0):L(a,d[f],b,!0),f++;f<d.length;)L(a,d[f++],'"$undefined"',!0)},error:function(b){if(!e)for(e=!0,f===d.length&&(d[f]=new D("pending",null,null));f<d.length;)J(a,d[f++],b)}})}function al(){var a=Error("An error occurred in the Server Components render. The specific message is omitted in production builds to avoid leaking sensitive details. A digest property is included on this error instance which may provide additional details about the nature of the error.");return a.stack="Error: "+a.message,a}function am(a,b){for(var c=a.length,d=b.length,e=0;e<c;e++)d+=a[e].byteLength;d=new Uint8Array(d);for(var f=e=0;f<c;f++){var g=a[f];d.set(g,e),e+=g.byteLength}return d.set(b,e),d}function an(a,b,c,d,e,f){ag(a,b,e=new e((c=0===c.length&&0==d.byteOffset%f?d:am(c,d)).buffer,c.byteOffset,c.byteLength/f))}function ao(a,b,c,d,e){switch(d){case 73:var f=a,g=c,h=e,i=f._chunks,j=i.get(g);h=JSON.parse(h,f._fromJSON);var l=function(a,b){if(a){var c=a[b[0]];if(a=c&&c[b[2]])c=a.name;else{if(!(a=c&&c["*"]))throw Error('Could not find the module "'+b[0]+'" in the React Server Consumer Manifest. This is probably a bug in the React Server Components bundler.');c=b[2]}return 4===b.length?[a.id,a.chunks,c,1]:[a.id,a.chunks,c]}return b}(f._bundlerConfig,h);if(!function(a,b,c){if(null!==a)for(var d=1;d<b.length;d+=2){var e=m.d,f=e.X,g=a.prefix+b[d],h=a.crossOrigin;h="string"==typeof h?"use-credentials"===h?h:"":void 0,f.call(e,g,{crossOrigin:h,nonce:c})}}(f._moduleLoading,h[1],f._nonce),h=k(l)){if(j){var n=j;n.status="blocked"}else n=new D("blocked",null,null),i.set(g,n);h.then(function(){return N(f,n,l)},function(a){return J(f,n,a)})}else j?N(f,j,l):(j=new D("resolved_module",l,null),i.set(g,j));break;case 72:switch(c=e[0],a=JSON.parse(e=e.slice(1),a._fromJSON),e=m.d,c){case"D":e.D(a);break;case"C":"string"==typeof a?e.C(a):e.C(a[0],a[1]);break;case"L":c=a[0],b=a[1],3===a.length?e.L(c,b,a[2]):e.L(c,b);break;case"m":"string"==typeof a?e.m(a):e.m(a[0],a[1]);break;case"X":"string"==typeof a?e.X(a):e.X(a[0],a[1]);break;case"S":"string"==typeof a?e.S(a):e.S(a[0],0===a[1]?void 0:a[1],3===a.length?a[2]:void 0);break;case"M":"string"==typeof a?e.M(a):e.M(a[0],a[1])}break;case 69:d=(b=a._chunks).get(c),e=JSON.parse(e);var o=al();o.digest=e.digest,d?J(a,d,o):(a=new D("rejected",null,o),b.set(c,a));break;case 84:(b=(a=a._chunks).get(c))&&"pending"!==b.status?b.reason.enqueueValue(e):(e=new D("fulfilled",e,null),a.set(c,e));break;case 78:case 68:case 74:case 87:throw Error("Failed to read a RSC payload created by a development version of React on the server while using a production version on the client. Always use matching versions on the server and the client.");case 82:ai(a,c,void 0);break;case 114:ai(a,c,"bytes");break;case 88:ak(a,c,!1);break;case 120:ak(a,c,!0);break;case 67:(c=a._chunks.get(c))&&"fulfilled"===c.status&&c.reason.close(""===e?'"$undefined"':e);break;default:(d=(b=a._chunks).get(c))?M(a,d,e):(a=new D("resolved_model",e,a),b.set(c,a))}}function ap(a,b,c){for(var d=0,e=b._rowState,g=b._rowID,h=b._rowTag,i=b._rowLength,j=b._buffer,k=c.length;d<k;){var l=-1;switch(e){case 0:58===(l=c[d++])?e=1:g=g<<4|(96<l?l-87:l-48);continue;case 1:84===(e=c[d])||65===e||79===e||111===e||85===e||83===e||115===e||76===e||108===e||71===e||103===e||77===e||109===e||86===e?(h=e,e=2,d++):64<e&&91>e||35===e||114===e||120===e?(h=e,e=3,d++):(h=0,e=3);continue;case 2:44===(l=c[d++])?e=4:i=i<<4|(96<l?l-87:l-48);continue;case 3:l=c.indexOf(10,d);break;case 4:(l=d+i)>c.length&&(l=-1)}var m=c.byteOffset+d;if(-1<l)(function(a,b,c,d,e,g){switch(d){case 65:ag(a,c,am(e,g).buffer);return;case 79:an(a,c,e,g,Int8Array,1);return;case 111:ag(a,c,0===e.length?g:am(e,g));return;case 85:an(a,c,e,g,Uint8ClampedArray,1);return;case 83:an(a,c,e,g,Int16Array,2);return;case 115:an(a,c,e,g,Uint16Array,2);return;case 76:an(a,c,e,g,Int32Array,4);return;case 108:an(a,c,e,g,Uint32Array,4);return;case 71:an(a,c,e,g,Float32Array,4);return;case 103:an(a,c,e,g,Float64Array,8);return;case 77:an(a,c,e,g,BigInt64Array,8);return;case 109:an(a,c,e,g,BigUint64Array,8);return;case 86:an(a,c,e,g,DataView,1);return}for(var h=a._stringDecoder,i="",j=0;j<e.length;j++)i+=h.decode(e[j],f);ao(a,b,c,d,i+=h.decode(g))})(a,b,g,h,j,i=new Uint8Array(c.buffer,m,l-d)),d=l,3===e&&d++,i=g=h=e=0,j.length=0;else{a=new Uint8Array(c.buffer,m,c.byteLength-d),j.push(a),i-=a.byteLength;break}}b._rowState=e,b._rowID=g,b._rowTag=h,b._rowLength=i}function aq(a){R(a,Error("Connection closed."))}function ar(){throw Error("Server Functions cannot be called during initial render. This would create a fetch waterfall. Try to use a Server Component to pass data to Client Components instead.")}function as(a){return new ae(a.serverConsumerManifest.moduleMap,a.serverConsumerManifest.serverModuleMap,a.serverConsumerManifest.moduleLoading,ar,a.encodeFormAction,"string"==typeof a.nonce?a.nonce:void 0,a&&a.temporaryReferences?a.temporaryReferences:void 0)}function at(a,b,c){function d(b){R(a,b)}var e=af(),f=b.getReader();f.read().then(function b(g){var h=g.value;return g.done?c():(ap(a,e,h),f.read().then(b).catch(d))}).catch(d)}function au(){throw Error("Server Functions cannot be called during initial render. This would create a fetch waterfall. Try to use a Server Component to pass data to Client Components instead.")}b.createFromFetch=function(a,b){var c=as(b);return a.then(function(a){at(c,a.body,aq.bind(null,c))},function(a){R(c,a)}),T(c,0)},b.createFromNodeStream=function(a,b,c){var d,e,f;return d=b=new ae(b.moduleMap,b.serverModuleMap,b.moduleLoading,au,c?c.encodeFormAction:void 0,c&&"string"==typeof c.nonce?c.nonce:void 0,void 0),e=aq.bind(null,b),f=af(),a.on("data",function(a){if("string"==typeof a){for(var b=0,c=f._rowState,e=f._rowID,g=f._rowTag,h=f._rowLength,i=f._buffer,j=a.length;b<j;){var k=-1;switch(c){case 0:58===(k=a.charCodeAt(b++))?c=1:e=e<<4|(96<k?k-87:k-48);continue;case 1:84===(c=a.charCodeAt(b))||65===c||79===c||111===c||85===c||83===c||115===c||76===c||108===c||71===c||103===c||77===c||109===c||86===c?(g=c,c=2,b++):64<c&&91>c||114===c||120===c?(g=c,c=3,b++):(g=0,c=3);continue;case 2:44===(k=a.charCodeAt(b++))?c=4:h=h<<4|(96<k?k-87:k-48);continue;case 3:k=a.indexOf("\n",b);break;case 4:if(84!==g)throw Error("Binary RSC chunks cannot be encoded as strings. This is a bug in the wiring of the React streams.");if(h<a.length||a.length>3*h)throw Error("String chunks need to be passed in their original shape. Not split into smaller string chunks. This is a bug in the wiring of the React streams.");k=a.length}if(-1<k){if(0<i.length)throw Error("String chunks need to be passed in their original shape. Not split into smaller string chunks. This is a bug in the wiring of the React streams.");ao(d,f,e,g,b=a.slice(b,k)),b=k,3===c&&b++,h=e=g=c=0,i.length=0}else if(a.length!==b)throw Error("String chunks need to be passed in their original shape. Not split into smaller string chunks. This is a bug in the wiring of the React streams.")}f._rowState=c,f._rowID=e,f._rowTag=g,f._rowLength=h}else ap(d,f,a)}),a.on("error",function(a){R(d,a)}),a.on("end",e),T(b,0)},b.createFromReadableStream=function(a,b){return at(b=as(b),a,aq.bind(null,b)),T(b,0)},b.createServerReference=function(a){function b(){var b=Array.prototype.slice.call(arguments);return ar(a,b)}return z(b,a,null,void 0),b},b.createTemporaryReferenceSet=function(){return new Map},b.encodeReply=function(a,b){return new Promise(function(c,d){var e=v(a,"",b&&b.temporaryReferences?b.temporaryReferences:void 0,c,d);if(b&&b.signal){var f=b.signal;if(f.aborted)e(f.reason);else{var g=function(){e(f.reason),f.removeEventListener("abort",g)};f.addEventListener("abort",g)}}})},b.registerServerReference=function(a,b,c){return z(a,b,null,c),a}},8687:(a,b,c)=>{var d=c(4747),e=c(3907);b.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],b.sign=d.sign,b.verify=e.verify,b.decode=e.decode,b.isValid=e.isValid,b.createSign=function(a){return new d(a)},b.createVerify=function(a){return new e(a)}},8773:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.IAMAuth=void 0;class c{selector;token;constructor(a,b){this.selector=a,this.token=b,this.selector=a,this.token=b}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}}b.IAMAuth=c},8851:a=>{"use strict";function b(a){return(a/8|0)+ +(a%8!=0)}var c={ES256:b(256),ES384:b(384),ES512:b(521)};a.exports=function(a){var b=c[a];if(b)return b;throw Error('Unknown algorithm "'+a+'"')}},8871:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.USER_AGENT=b.PRODUCT_NAME=b.pkg=void 0;let d=c(9683);b.pkg=d;let e="google-api-nodejs-client";b.PRODUCT_NAME=e,b.USER_AGENT=`${e}/${d.version}`},8889:a=>{"use strict";let b=Symbol("kDone"),c=Symbol("kRun");class d{constructor(a){this[b]=()=>{this.pending--,this[c]()},this.concurrency=a||1/0,this.jobs=[],this.pending=0}add(a){this.jobs.push(a),this[c]()}[c](){if(this.pending!==this.concurrency&&this.jobs.length){let a=this.jobs.shift();this.pending++,a(this[b])}}}a.exports=d},9021:a=>{"use strict";a.exports=require("fs")},9045:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,1921,23))},9121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9287:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.DownscopedClient=b.EXPIRATION_TIME_OFFSET=b.MAX_ACCESS_BOUNDARY_RULES_COUNT=void 0;let d=c(5065),e=c(7910),f=c(7493),g=c(8256);b.MAX_ACCESS_BOUNDARY_RULES_COUNT=10,b.EXPIRATION_TIME_OFFSET=3e5;class h extends f.AuthClient{authClient;credentialAccessBoundary;cachedDownscopedAccessToken;stsCredential;constructor(a,c={accessBoundary:{accessBoundaryRules:[]}}){if(super(a instanceof f.AuthClient?{}:a),a instanceof f.AuthClient?(this.authClient=a,this.credentialAccessBoundary=c):(this.authClient=a.authClient,this.credentialAccessBoundary=a.credentialAccessBoundary),0===this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length)throw Error("At least one access boundary rule needs to be defined.");if(this.credentialAccessBoundary.accessBoundary.accessBoundaryRules.length>b.MAX_ACCESS_BOUNDARY_RULES_COUNT)throw Error(`The provided access boundary has more than ${b.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);for(const a of this.credentialAccessBoundary.accessBoundary.accessBoundaryRules)if(0===a.availablePermissions.length)throw Error("At least one permission should be defined in access boundary rules.");this.stsCredential=new g.StsCredentials({tokenExchangeEndpoint:`https://sts.${this.universeDomain}/v1/token`}),this.cachedDownscopedAccessToken=null}setCredentials(a){if(!a.expiry_date)throw Error("The access token expiry_date field is missing in the provided credentials.");super.setCredentials(a),this.cachedDownscopedAccessToken=a}async getAccessToken(){return(!this.cachedDownscopedAccessToken||this.isExpired(this.cachedDownscopedAccessToken))&&await this.refreshAccessTokenAsync(),{token:this.cachedDownscopedAccessToken.access_token,expirationTime:this.cachedDownscopedAccessToken.expiry_date,res:this.cachedDownscopedAccessToken.res}}async getRequestHeaders(){let a=await this.getAccessToken(),b=new Headers({authorization:`Bearer ${a.token}`});return this.addSharedMetadataHeaders(b)}request(a,b){if(!b)return this.requestAsync(a);this.requestAsync(a).then(a=>b(null,a),a=>b(a,a.response))}async requestAsync(a,b=!1){let c;try{let b=await this.getRequestHeaders();a.headers=d.Gaxios.mergeHeaders(a.headers),this.addUserProjectAndAuthHeaders(a.headers,b),c=await this.transporter.request(a)}catch(d){let c=d.response;if(c){let d=c.status,f=c.config.data instanceof e.Readable;if(!b&&(401===d||403===d)&&!f&&this.forceRefreshOnFailure)return await this.refreshAccessTokenAsync(),await this.requestAsync(a,!0)}throw d}return c}async refreshAccessTokenAsync(){let a=(await this.authClient.getAccessToken()).token,b=await this.stsCredential.exchangeToken({grantType:"urn:ietf:params:oauth:grant-type:token-exchange",requestedTokenType:"urn:ietf:params:oauth:token-type:access_token",subjectToken:a,subjectTokenType:"urn:ietf:params:oauth:token-type:access_token"},void 0,this.credentialAccessBoundary),c=this.authClient.credentials?.expiry_date||null,d=b.expires_in?new Date().getTime()+1e3*b.expires_in:c;return this.cachedDownscopedAccessToken={access_token:b.access_token,expiry_date:d,res:b.res},this.credentials={},Object.assign(this.credentials,this.cachedDownscopedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedDownscopedAccessToken.expiry_date,access_token:this.cachedDownscopedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedDownscopedAccessToken}isExpired(a){let b=new Date().getTime();return!!a.expiry_date&&b>=a.expiry_date-this.eagerRefreshThresholdMillis}}b.DownscopedClient=h},9294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9337:(a,b)=>{"use strict";function c(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(b,"D",{enumerable:!0,get:function(){return c}})},9370:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.fromArrayBufferToHex=function(a){return Array.from(new Uint8Array(a)).map(a=>a.toString(16).padStart(2,"0")).join("")}},9407:(a,b,c)=>{"use strict";c(2804);let{Duplex:d}=c(7910);function e(a){a.emit("close")}function f(){!this.destroyed&&this._writableState.finished&&this.destroy()}function g(a){this.removeListener("error",g),this.destroy(),0===this.listenerCount("error")&&this.emit("error",a)}a.exports=function(a,b){let c=!0,h=new d({...b,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return a.on("message",function(b,c){let d=!c&&h._readableState.objectMode?b.toString():b;h.push(d)||a.pause()}),a.once("error",function(a){h.destroyed||(c=!1,h.destroy(a))}),a.once("close",function(){h.destroyed||h.push(null)}),h._destroy=function(b,d){if(a.readyState===a.CLOSED){d(b),process.nextTick(e,h);return}let f=!1;a.once("error",function(a){f=!0,d(a)}),a.once("close",function(){f||d(b),process.nextTick(e,h)}),c&&a.terminate()},h._final=function(b){a.readyState===a.CONNECTING?a.once("open",function(){h._final(b)}):null!==a._socket&&(a._socket._writableState.finished?(b(),h._readableState.endEmitted&&h.destroy()):(a._socket.once("finish",function(){b()}),a.close()))},h._read=function(){a.isPaused&&a.resume()},h._write=function(b,c,d){a.readyState===a.CONNECTING?a.once("open",function(){h._write(b,c,d)}):a.send(b,d)},h.on("end",f),h.on("error",g),h}},9428:a=>{"use strict";a.exports=require("buffer")},9440:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GaxiosInterceptorManager=void 0;class c extends Set{}b.GaxiosInterceptorManager=c},9516:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"InvariantError",{enumerable:!0,get:function(){return c}});class c extends Error{constructor(a,b){super(`Invariant: ${a.endsWith(".")?a:a+"."} This is a bug in Next.js.`,b),this.name="InvariantError"}}},9517:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.BrowserCrypto=void 0;let d=c(6440),e=c(9370);class f{constructor(){if("undefined"==typeof window||void 0===window.crypto||void 0===window.crypto.subtle)throw Error("SubtleCrypto not found. Make sure it's an https:// website.")}async sha256DigestBase64(a){let b=new TextEncoder().encode(a),c=await window.crypto.subtle.digest("SHA-256",b);return d.fromByteArray(new Uint8Array(c))}randomBytesBase64(a){let b=new Uint8Array(a);return window.crypto.getRandomValues(b),d.fromByteArray(b)}static padBase64(a){for(;a.length%4!=0;)a+="=";return a}async verify(a,b,c){let e={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},g=new TextEncoder().encode(b),h=d.toByteArray(f.padBase64(c)),i=await window.crypto.subtle.importKey("jwk",a,e,!0,["verify"]);return await window.crypto.subtle.verify(e,i,h,g)}async sign(a,b){let c={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},e=new TextEncoder().encode(b),f=await window.crypto.subtle.importKey("jwk",a,c,!0,["sign"]),g=await window.crypto.subtle.sign(c,f,e);return d.fromByteArray(new Uint8Array(g))}decodeBase64StringUtf8(a){let b=d.toByteArray(f.padBase64(a));return new TextDecoder().decode(b)}encodeBase64StringUtf8(a){let b=new TextEncoder().encode(a);return d.fromByteArray(b)}async sha256DigestHex(a){let b=new TextEncoder().encode(a),c=await window.crypto.subtle.digest("SHA-256",b);return(0,e.fromArrayBufferToHex)(c)}async signWithHmacSha256(a,b){let c="string"==typeof a?a:String.fromCharCode(...new Uint16Array(a)),d=new TextEncoder,e=await window.crypto.subtle.importKey("raw",d.encode(c),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return window.crypto.subtle.sign("HMAC",e,d.encode(b))}}b.BrowserCrypto=f},9604:(a,b,c)=>{Promise.resolve().then(c.bind(c,5557))},9646:a=>{"use strict";a.exports=require("child_process")},9683:a=>{"use strict";a.exports=JSON.parse('{"name":"google-auth-library","version":"10.5.0","author":"Google Inc.","description":"Google APIs Authentication Client Library for Node.js","engines":{"node":">=18"},"main":"./build/src/index.js","types":"./build/src/index.d.ts","repository":"googleapis/google-auth-library-nodejs.git","keywords":["google","api","google apis","client","client library"],"dependencies":{"base64-js":"^1.3.0","ecdsa-sig-formatter":"^1.0.11","gaxios":"^7.0.0","gcp-metadata":"^8.0.0","google-logging-utils":"^1.0.0","gtoken":"^8.0.0","jws":"^4.0.0"},"devDependencies":{"@types/base64-js":"^1.2.5","@types/jws":"^3.1.0","@types/mocha":"^10.0.10","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^22.0.0","@types/sinon":"^17.0.0","assert-rejects":"^1.0.0","c8":"^10.0.0","codecov":"^3.0.2","gts":"^6.0.0","is-docker":"^3.0.0","jsdoc":"^4.0.0","jsdoc-fresh":"^5.0.0","jsdoc-region-tag":"^4.0.0","karma":"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-sourcemap-loader":"^0.4.0","karma-webpack":"^5.0.1","keypair":"^1.0.4","mocha":"^11.1.0","mv":"^2.1.1","ncp":"^2.0.0","nock":"^14.0.5","null-loader":"^4.0.0","puppeteer":"^24.0.0","sinon":"^21.0.0","ts-loader":"^8.0.0","typescript":"5.8.2","webpack":"^5.21.2","webpack-cli":"^4.0.0"},"files":["build/src","!build/src/**/*.map"],"scripts":{"test":"c8 mocha build/test","clean":"gts clean","prepare":"npm run compile","lint":"gts check --no-inline-config","compile":"tsc -p .","fix":"gts fix","pretest":"npm run compile -- --sourceMap","docs":"jsdoc -c .jsdoc.js","samples-setup":"cd samples/ && npm link ../ && npm run setup && cd ../","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","system-test":"mocha build/system-test --timeout 60000","presystem-test":"npm run compile -- --sourceMap","webpack":"webpack","browser-test":"karma start","docs-test":"echo \'disabled until linkinator is fixed\'","predocs-test":"npm run docs","prelint":"cd samples; npm link ../; npm install"},"license":"Apache-2.0"}')},9727:()=>{},9741:(a,b,c)=>{var d=c(4458),e=a.exports;!function(){"use strict";var a,b,c,f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function h(a){return f.lastIndex=0,f.test(a)?'"'+a.replace(f,function(a){var b=g[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}"function"!=typeof e.stringify&&(e.stringify=function(e,f,g){var i;if(a="",b="","number"==typeof g)for(i=0;i<g;i+=1)b+=" ";else"string"==typeof g&&(b=g);if(c=f,f&&"function"!=typeof f&&("object"!=typeof f||"number"!=typeof f.length))throw Error("JSON.stringify");return function e(f,g){var i,j,k,l,m,n=a,o=g[f],p=null!=o&&(o instanceof d||d.isBigNumber(o));switch(o&&"object"==typeof o&&"function"==typeof o.toJSON&&(o=o.toJSON(f)),"function"==typeof c&&(o=c.call(g,f,o)),typeof o){case"string":if(p)return o;return h(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":case"bigint":return String(o);case"object":if(!o)return"null";if(a+=b,m=[],"[object Array]"===Object.prototype.toString.apply(o)){for(i=0,l=o.length;i<l;i+=1)m[i]=e(i,o)||"null";return k=0===m.length?"[]":a?"[\n"+a+m.join(",\n"+a)+"\n"+n+"]":"["+m.join(",")+"]",a=n,k}if(c&&"object"==typeof c)for(i=0,l=c.length;i<l;i+=1)"string"==typeof c[i]&&(k=e(j=c[i],o))&&m.push(h(j)+(a?": ":":")+k);else Object.keys(o).forEach(function(b){var c=e(b,o);c&&m.push(h(b)+(a?": ":":")+c)});return k=0===m.length?"{}":a?"{\n"+a+m.join(",\n"+a)+"\n"+n+"}":"{"+m.join(",")+"}",a=n,k}}("",{"":e})})}()},9758:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c={DynamicServerError:function(){return f},isDynamicServerError:function(){return g}};for(var d in c)Object.defineProperty(b,d,{enumerable:!0,get:c[d]});let e="DYNAMIC_SERVER_USAGE";class f extends Error{constructor(a){super(`Dynamic server usage: ${a}`),this.description=a,this.digest=e}}function g(a){return"object"==typeof a&&null!==a&&"digest"in a&&"string"==typeof a.digest&&a.digest===e}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},9771:a=>{"use strict";a.exports=require("process")},9798:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c={DEFAULT_SEGMENT_KEY:function(){return k},PAGE_SEGMENT_KEY:function(){return j},addSearchParamsIfPageSegment:function(){return h},computeSelectedLayoutSegment:function(){return i},getSegmentValue:function(){return e},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,f=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return f;let h=e(g[0]);return!h||h.startsWith(j)?f:(f.push(h),a(g,c,!1,f))}},isGroupSegment:function(){return f},isParallelRouteSegment:function(){return g}};for(var d in c)Object.defineProperty(b,d,{enumerable:!0,get:c[d]});function e(a){return Array.isArray(a)?a[1]:a}function f(a){return"("===a[0]&&a.endsWith(")")}function g(a){return a.startsWith("@")&&"@children"!==a}function h(a,b){if(a.includes(j)){let a=JSON.stringify(b);return"{}"!==a?j+"?"+a:j}return a}function i(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===k?null:c}let j="__PAGE__",k="__DEFAULT__"},9829:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d={callServer:function(){return f.callServer},createServerReference:function(){return h.createServerReference},findSourceMapURL:function(){return g.findSourceMapURL}};for(var e in d)Object.defineProperty(b,e,{enumerable:!0,get:d[e]});let f=c(5766),g=c(7006),h=c(5569)},9831:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.IdentityPoolClient=void 0;let d=c(1777),e=c(2433),f=c(3503),g=c(1726),h=c(216),i=c(8256),j=c(5065);class k extends d.BaseExternalAccountClient{subjectTokenSupplier;constructor(a){super(a);const b=(0,e.originalOrCamelOptions)(a),c=b.get("credential_source"),d=b.get("subject_token_supplier");if(!c&&!d)throw Error("A credential source or subject token supplier must be specified.");if(c&&d)throw Error("Only one of credential source or subject token supplier can be specified.");if(d)this.subjectTokenSupplier=d,this.credentialSourceType="programmatic";else{const a=(0,e.originalOrCamelOptions)(c),b=(0,e.originalOrCamelOptions)(a.get("format")),d=b.get("type")||"text",i=b.get("subject_token_field_name");if("json"!==d&&"text"!==d)throw Error(`Invalid credential_source format "${d}"`);if("json"===d&&!i)throw Error("Missing subject_token_field_name for JSON credential_source format");const j=a.get("file"),l=a.get("url"),m=a.get("certificate"),n=a.get("headers");if(j&&l||l&&m||j&&m)throw Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.');if(j)this.credentialSourceType="file",this.subjectTokenSupplier=new f.FileSubjectTokenSupplier({filePath:j,formatType:d,subjectTokenFieldName:i});else if(l)this.credentialSourceType="url",this.subjectTokenSupplier=new g.UrlSubjectTokenSupplier({url:l,formatType:d,subjectTokenFieldName:i,headers:n,additionalGaxiosOptions:k.RETRY_CONFIG});else if(m){this.credentialSourceType="certificate";const a=new h.CertificateSubjectTokenSupplier({useDefaultCertificateConfig:m.use_default_certificate_config,certificateConfigLocation:m.certificate_config_location,trustChainPath:m.trust_chain_path});this.subjectTokenSupplier=a}else throw Error('No valid Identity Pool "credential_source" provided, must be either file, url, or certificate.')}}async retrieveSubjectToken(){let a=await this.subjectTokenSupplier.getSubjectToken(this.supplierContext);if(this.subjectTokenSupplier instanceof h.CertificateSubjectTokenSupplier){let a=await this.subjectTokenSupplier.createMtlsHttpsAgent();this.stsCredential=new i.StsCredentials({tokenExchangeEndpoint:this.getTokenUrl(),clientAuthentication:this.clientAuth,transporter:new j.Gaxios({agent:a})}),this.transporter=new j.Gaxios({...this.transporter.defaults||{},agent:a})}return a}}b.IdentityPoolClient=k}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[156,471],()=>b(b.s=2202));module.exports=c})();